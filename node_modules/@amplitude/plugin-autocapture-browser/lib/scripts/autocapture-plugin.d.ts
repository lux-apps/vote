import { BrowserClient, BrowserConfig, EnrichmentPlugin } from '@amplitude/analytics-types';
import { Observable } from 'rxjs';
import { Messenger } from './libs/messenger';
import { ActionType } from './typings/autocapture';
import { HasEventTargetAddRemove } from 'rxjs/internal/observable/fromEvent';
declare global {
    interface Window {
        navigation: HasEventTargetAddRemove<Event>;
    }
}
interface NavigateEvent extends Event {
    readonly navigationType: 'reload' | 'push' | 'replace' | 'traverse';
    readonly destination: {
        readonly url: string;
        readonly key: string | null;
        readonly id: string | null;
        readonly index: number;
        readonly sameDocument: boolean;
        getState(): any;
    };
    readonly canIntercept: boolean;
    readonly userInitiated: boolean;
    readonly hashChange: boolean;
    readonly signal: AbortSignal;
    readonly formData: FormData | null;
    readonly downloadRequest: string | null;
    readonly info: any;
    readonly hasUAVisualTransition: boolean;
    /** @see https://github.com/WICG/navigation-api/pull/264 */
    readonly sourceElement: Element | null;
    scroll(): void;
}
type BrowserEnrichmentPlugin = EnrichmentPlugin<BrowserClient, BrowserConfig>;
export declare const DEFAULT_CSS_SELECTOR_ALLOWLIST: string[];
export declare const DEFAULT_ACTION_CLICK_ALLOWLIST: string[];
export declare const DEFAULT_DATA_ATTRIBUTE_PREFIX = "data-amp-track-";
export interface AutocaptureOptions {
    /**
     * List of CSS selectors to allow auto tracking on.
     * When provided, allow elements matching any selector to be tracked.
     * Default is ['a', 'button', 'input', 'select', 'textarea', 'label', '[data-amp-default-track]', '.amp-default-track'].
     */
    cssSelectorAllowlist?: string[];
    /**
     * List of page URLs to allow auto tracking on.
     * When provided, only allow tracking on these URLs.
     * Both full URLs and regex are supported.
     */
    pageUrlAllowlist?: (string | RegExp)[];
    /**
     * Function to determine whether an event should be tracked.
     * When provided, this function overwrites all other allowlists and configurations.
     * If the function returns true, the event will be tracked.
     * If the function returns false, the event will not be tracked.
     * @param actionType - The type of action that triggered the event.
     * @param element - The element that triggered the event.
     */
    shouldTrackEventResolver?: (actionType: ActionType, element: Element) => boolean;
    /**
     * Prefix for data attributes to allow auto collecting.
     * Default is 'data-amp-track-'.
     */
    dataAttributePrefix?: string;
    /**
     * Options for integrating visual tagging selector.
     */
    visualTaggingOptions?: {
        enabled?: boolean;
        messenger?: Messenger;
    };
    /**
     * Debounce time in milliseconds for tracking events.
     * This is used to detect rage clicks.
     */
    debounceTime?: number;
    /**
     * CSS selector allowlist for tracking clicks that result in a DOM change/navigation on elements not already allowed by the cssSelectorAllowlist
     */
    actionClickAllowlist?: string[];
}
export type AutoCaptureOptionsWithDefaults = Required<Pick<AutocaptureOptions, 'debounceTime' | 'cssSelectorAllowlist' | 'actionClickAllowlist'>> & AutocaptureOptions;
export declare enum ObservablesEnum {
    ClickObservable = "clickObservable",
    ChangeObservable = "changeObservable",
    NavigateObservable = "navigateObservable",
    MutationObservable = "mutationObservable"
}
type BaseTimestampedEvent<T> = {
    event: T;
    timestamp: number;
    type: 'rage' | 'click' | 'change' | 'error' | 'navigate' | 'mutation';
};
export type ElementBasedEvent = MouseEvent | Event;
export type ElementBasedTimestampedEvent<T> = BaseTimestampedEvent<T> & {
    event: MouseEvent | Event;
    type: 'click' | 'change';
    closestTrackedAncestor: Element;
    targetElementProperties: Record<string, any>;
};
export type TimestampedEvent<T> = BaseTimestampedEvent<T> | ElementBasedTimestampedEvent<T>;
export interface AllWindowObservables {
    [ObservablesEnum.ClickObservable]: Observable<ElementBasedTimestampedEvent<MouseEvent>>;
    [ObservablesEnum.ChangeObservable]: Observable<ElementBasedTimestampedEvent<Event>>;
    [ObservablesEnum.NavigateObservable]: Observable<TimestampedEvent<NavigateEvent>> | undefined;
    [ObservablesEnum.MutationObservable]: Observable<TimestampedEvent<MutationRecord[]>>;
}
export declare function isElementBasedEvent<T>(event: BaseTimestampedEvent<T>): event is ElementBasedTimestampedEvent<T>;
export declare const autocapturePlugin: (options?: AutocaptureOptions) => BrowserEnrichmentPlugin;
export {};
//# sourceMappingURL=autocapture-plugin.d.ts.map