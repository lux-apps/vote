{"version":3,"file":"3-Bx3stp8L.js","sources":["../../src/hooks/utils/cache/migrations/3.ts"],"sourcesContent":["import { isAddress } from 'viem';\nimport { CacheExpiry, CacheKeys, FavoritesCacheValue } from '../cacheDefaults';\nimport { getValue, setValue } from '../useLocalStorage';\n\nconst migrateFavorites = (v1FavoritesData: string[]) => {\n  if (v1FavoritesData.length === 0) {\n    return;\n  }\n\n  const newFavorites: FavoritesCacheValue[] = [];\n\n  for (const v1Favorite of v1FavoritesData) {\n    const [networkPrefix, address] = v1Favorite.split(':');\n    if (!networkPrefix || !address) {\n      continue;\n    }\n    if (!isAddress(address)) {\n      continue;\n    }\n\n    newFavorites.push({ networkPrefix, address, name: '' });\n  }\n\n  // Set new Favorites cache\n  setValue({ cacheName: CacheKeys.FAVORITES }, newFavorites, CacheExpiry.NEVER);\n\n  // Remove old favorites\n  localStorage.removeItem(\n    JSON.stringify({\n      cacheName: CacheKeys.FAVORITES,\n      version: 1,\n    }),\n  );\n};\n\n//@dev for testing seperated the function from the hook and export\nexport default function migration3() {\n  const currentFavorites =\n    (getValue({ cacheName: CacheKeys.FAVORITES }, 1) as unknown as string[]) || [];\n  migrateFavorites(currentFavorites);\n}\n"],"names":["migrateFavorites","v1FavoritesData","newFavorites","v1Favorite","networkPrefix","address","isAddress","setValue","CacheKeys","CacheExpiry","migration3","currentFavorites","getValue"],"mappings":"oEAIA,MAAMA,EAAoBC,GAA8B,CAClD,GAAAA,EAAgB,SAAW,EAC7B,OAGF,MAAMC,EAAsC,CAAA,EAE5C,UAAWC,KAAcF,EAAiB,CACxC,KAAM,CAACG,EAAeC,CAAO,EAAIF,EAAW,MAAM,GAAG,EACjD,CAACC,GAAiB,CAACC,GAGlBC,EAAUD,CAAO,GAItBH,EAAa,KAAK,CAAE,cAAAE,EAAe,QAAAC,EAAS,KAAM,GAAI,CACxD,CAGAE,EAAS,CAAE,UAAWC,EAAU,SAAa,EAAAN,EAAcO,EAAY,KAAK,EAG/D,aAAA,WACX,KAAK,UAAU,CACb,UAAWD,EAAU,UACrB,QAAS,CAAA,CACV,CAAA,CAEL,EAGA,SAAwBE,GAAa,CAC7B,MAAAC,EACHC,EAAS,CAAE,UAAWJ,EAAU,SAAU,EAAG,CAAC,GAA6B,GAC9ER,EAAiBW,CAAgB,CACnC"}