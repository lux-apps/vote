const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-B3hYuz7F.js","assets/index-DH50H2W-.js","assets/index-C43C4Kxj.css"])))=>i.map(i=>d[i]);
import{P as Qc,Q as vo,T as bo,U as be,o as qi,V as i0,X as Ay,Y as My,Z as uf,_ as e1,l as ao,m as xy,$ as n0,a0 as s0,a1 as Ey,a2 as Iy,a3 as Sy,a4 as Tu,a5 as t1,a6 as Py,a7 as r1,a8 as Ry,a9 as Ou,aa as i1,ab as Cy,ac as Ny,ad as ks,ae as Ty,af as Rs,ag as Cs,ah as Zi,ai as df,aj as jr,ak as pi,al as lf,am as Oy,an as qy,ao as qu,ap as Du,aq as pf,ar as ku,as as zn,at as sa,au as Dy}from"./index-DH50H2W-.js";import{b as ky,w as n1,r as ma,s as gf,x as s1,H as By,c as a1,q as Yc}from"./x25519-DYCx9uE8.js";var Bu={},o1={};(function(r){Object.defineProperty(r,"__esModule",{value:!0});var e=ky,t=n1;r.DIGEST_LENGTH=64,r.BLOCK_SIZE=128;var i=function(){function g(){this.digestLength=r.DIGEST_LENGTH,this.blockSize=r.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return g.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},g.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},g.prototype.clean=function(){t.wipe(this._buffer),t.wipe(this._tempHi),t.wipe(this._tempLo),this.reset()},g.prototype.update=function(y,_){if(_===void 0&&(_=y.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var I=0;if(this._bytesHashed+=_,this._bufferLength>0){for(;this._bufferLength<r.BLOCK_SIZE&&_>0;)this._buffer[this._bufferLength++]=y[I++],_--;this._bufferLength===this.blockSize&&(o(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(_>=this.blockSize&&(I=o(this._tempHi,this._tempLo,this._stateHi,this._stateLo,y,I,_),_%=this.blockSize);_>0;)this._buffer[this._bufferLength++]=y[I++],_--;return this},g.prototype.finish=function(y){if(!this._finished){var _=this._bytesHashed,I=this._bufferLength,P=_/536870912|0,q=_<<3,O=_%128<112?128:256;this._buffer[I]=128;for(var L=I+1;L<O-8;L++)this._buffer[L]=0;e.writeUint32BE(P,this._buffer,O-8),e.writeUint32BE(q,this._buffer,O-4),o(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,O),this._finished=!0}for(var L=0;L<this.digestLength/8;L++)e.writeUint32BE(this._stateHi[L],y,L*8),e.writeUint32BE(this._stateLo[L],y,L*8+4);return this},g.prototype.digest=function(){var y=new Uint8Array(this.digestLength);return this.finish(y),y},g.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},g.prototype.restoreState=function(y){return this._stateHi.set(y.stateHi),this._stateLo.set(y.stateLo),this._bufferLength=y.bufferLength,y.buffer&&this._buffer.set(y.buffer),this._bytesHashed=y.bytesHashed,this._finished=!1,this},g.prototype.cleanSavedState=function(y){t.wipe(y.stateHi),t.wipe(y.stateLo),y.buffer&&t.wipe(y.buffer),y.bufferLength=0,y.bytesHashed=0},g}();r.SHA512=i;var s=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function o(g,y,_,I,P,q,O){for(var L=_[0],j=_[1],G=_[2],Q=_[3],Z=_[4],de=_[5],ce=_[6],ae=_[7],he=I[0],ue=I[1],le=I[2],Te=I[3],lt=I[4],B=I[5],v=I[6],c=I[7],d,p,w,x,E,A,u,l;O>=128;){for(var R=0;R<16;R++){var X=8*R+q;g[R]=e.readUint32BE(P,X),y[R]=e.readUint32BE(P,X+4)}for(var R=0;R<80;R++){var ee=L,M=j,J=G,T=Q,z=Z,$=de,b=ce,k=ae,W=he,ne=ue,se=le,ge=Te,ve=lt,Oe=B,nt=v,Ee=c;if(d=ae,p=c,E=p&65535,A=p>>>16,u=d&65535,l=d>>>16,d=(Z>>>14|lt<<18)^(Z>>>18|lt<<14)^(lt>>>9|Z<<23),p=(lt>>>14|Z<<18)^(lt>>>18|Z<<14)^(Z>>>9|lt<<23),E+=p&65535,A+=p>>>16,u+=d&65535,l+=d>>>16,d=Z&de^~Z&ce,p=lt&B^~lt&v,E+=p&65535,A+=p>>>16,u+=d&65535,l+=d>>>16,d=s[R*2],p=s[R*2+1],E+=p&65535,A+=p>>>16,u+=d&65535,l+=d>>>16,d=g[R%16],p=y[R%16],E+=p&65535,A+=p>>>16,u+=d&65535,l+=d>>>16,A+=E>>>16,u+=A>>>16,l+=u>>>16,w=u&65535|l<<16,x=E&65535|A<<16,d=w,p=x,E=p&65535,A=p>>>16,u=d&65535,l=d>>>16,d=(L>>>28|he<<4)^(he>>>2|L<<30)^(he>>>7|L<<25),p=(he>>>28|L<<4)^(L>>>2|he<<30)^(L>>>7|he<<25),E+=p&65535,A+=p>>>16,u+=d&65535,l+=d>>>16,d=L&j^L&G^j&G,p=he&ue^he&le^ue&le,E+=p&65535,A+=p>>>16,u+=d&65535,l+=d>>>16,A+=E>>>16,u+=A>>>16,l+=u>>>16,k=u&65535|l<<16,Ee=E&65535|A<<16,d=T,p=ge,E=p&65535,A=p>>>16,u=d&65535,l=d>>>16,d=w,p=x,E+=p&65535,A+=p>>>16,u+=d&65535,l+=d>>>16,A+=E>>>16,u+=A>>>16,l+=u>>>16,T=u&65535|l<<16,ge=E&65535|A<<16,j=ee,G=M,Q=J,Z=T,de=z,ce=$,ae=b,L=k,ue=W,le=ne,Te=se,lt=ge,B=ve,v=Oe,c=nt,he=Ee,R%16===15)for(var X=0;X<16;X++)d=g[X],p=y[X],E=p&65535,A=p>>>16,u=d&65535,l=d>>>16,d=g[(X+9)%16],p=y[(X+9)%16],E+=p&65535,A+=p>>>16,u+=d&65535,l+=d>>>16,w=g[(X+1)%16],x=y[(X+1)%16],d=(w>>>1|x<<31)^(w>>>8|x<<24)^w>>>7,p=(x>>>1|w<<31)^(x>>>8|w<<24)^(x>>>7|w<<25),E+=p&65535,A+=p>>>16,u+=d&65535,l+=d>>>16,w=g[(X+14)%16],x=y[(X+14)%16],d=(w>>>19|x<<13)^(x>>>29|w<<3)^w>>>6,p=(x>>>19|w<<13)^(w>>>29|x<<3)^(x>>>6|w<<26),E+=p&65535,A+=p>>>16,u+=d&65535,l+=d>>>16,A+=E>>>16,u+=A>>>16,l+=u>>>16,g[X]=u&65535|l<<16,y[X]=E&65535|A<<16}d=L,p=he,E=p&65535,A=p>>>16,u=d&65535,l=d>>>16,d=_[0],p=I[0],E+=p&65535,A+=p>>>16,u+=d&65535,l+=d>>>16,A+=E>>>16,u+=A>>>16,l+=u>>>16,_[0]=L=u&65535|l<<16,I[0]=he=E&65535|A<<16,d=j,p=ue,E=p&65535,A=p>>>16,u=d&65535,l=d>>>16,d=_[1],p=I[1],E+=p&65535,A+=p>>>16,u+=d&65535,l+=d>>>16,A+=E>>>16,u+=A>>>16,l+=u>>>16,_[1]=j=u&65535|l<<16,I[1]=ue=E&65535|A<<16,d=G,p=le,E=p&65535,A=p>>>16,u=d&65535,l=d>>>16,d=_[2],p=I[2],E+=p&65535,A+=p>>>16,u+=d&65535,l+=d>>>16,A+=E>>>16,u+=A>>>16,l+=u>>>16,_[2]=G=u&65535|l<<16,I[2]=le=E&65535|A<<16,d=Q,p=Te,E=p&65535,A=p>>>16,u=d&65535,l=d>>>16,d=_[3],p=I[3],E+=p&65535,A+=p>>>16,u+=d&65535,l+=d>>>16,A+=E>>>16,u+=A>>>16,l+=u>>>16,_[3]=Q=u&65535|l<<16,I[3]=Te=E&65535|A<<16,d=Z,p=lt,E=p&65535,A=p>>>16,u=d&65535,l=d>>>16,d=_[4],p=I[4],E+=p&65535,A+=p>>>16,u+=d&65535,l+=d>>>16,A+=E>>>16,u+=A>>>16,l+=u>>>16,_[4]=Z=u&65535|l<<16,I[4]=lt=E&65535|A<<16,d=de,p=B,E=p&65535,A=p>>>16,u=d&65535,l=d>>>16,d=_[5],p=I[5],E+=p&65535,A+=p>>>16,u+=d&65535,l+=d>>>16,A+=E>>>16,u+=A>>>16,l+=u>>>16,_[5]=de=u&65535|l<<16,I[5]=B=E&65535|A<<16,d=ce,p=v,E=p&65535,A=p>>>16,u=d&65535,l=d>>>16,d=_[6],p=I[6],E+=p&65535,A+=p>>>16,u+=d&65535,l+=d>>>16,A+=E>>>16,u+=A>>>16,l+=u>>>16,_[6]=ce=u&65535|l<<16,I[6]=v=E&65535|A<<16,d=ae,p=c,E=p&65535,A=p>>>16,u=d&65535,l=d>>>16,d=_[7],p=I[7],E+=p&65535,A+=p>>>16,u+=d&65535,l+=d>>>16,A+=E>>>16,u+=A>>>16,l+=u>>>16,_[7]=ae=u&65535|l<<16,I[7]=c=E&65535|A<<16,q+=128,O-=128}return q}function h(g){var y=new i;y.update(g);var _=y.digest();return y.clean(),_}r.hash=h})(o1);(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.convertSecretKeyToX25519=r.convertPublicKeyToX25519=r.verify=r.sign=r.extractPublicKeyFromSecretKey=r.generateKeyPair=r.generateKeyPairFromSeed=r.SEED_LENGTH=r.SECRET_KEY_LENGTH=r.PUBLIC_KEY_LENGTH=r.SIGNATURE_LENGTH=void 0;const e=ma,t=o1,i=n1;r.SIGNATURE_LENGTH=64,r.PUBLIC_KEY_LENGTH=32,r.SECRET_KEY_LENGTH=64,r.SEED_LENGTH=32;function s(T){const z=new Float64Array(16);if(T)for(let $=0;$<T.length;$++)z[$]=T[$];return z}const o=new Uint8Array(32);o[0]=9;const h=s(),g=s([1]),y=s([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),_=s([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),I=s([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),P=s([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),q=s([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function O(T,z){for(let $=0;$<16;$++)T[$]=z[$]|0}function L(T){let z=1;for(let $=0;$<16;$++){let b=T[$]+z+65535;z=Math.floor(b/65536),T[$]=b-z*65536}T[0]+=z-1+37*(z-1)}function j(T,z,$){const b=~($-1);for(let k=0;k<16;k++){const W=b&(T[k]^z[k]);T[k]^=W,z[k]^=W}}function G(T,z){const $=s(),b=s();for(let k=0;k<16;k++)b[k]=z[k];L(b),L(b),L(b);for(let k=0;k<2;k++){$[0]=b[0]-65517;for(let ne=1;ne<15;ne++)$[ne]=b[ne]-65535-($[ne-1]>>16&1),$[ne-1]&=65535;$[15]=b[15]-32767-($[14]>>16&1);const W=$[15]>>16&1;$[14]&=65535,j(b,$,1-W)}for(let k=0;k<16;k++)T[2*k]=b[k]&255,T[2*k+1]=b[k]>>8}function Q(T,z){let $=0;for(let b=0;b<32;b++)$|=T[b]^z[b];return(1&$-1>>>8)-1}function Z(T,z){const $=new Uint8Array(32),b=new Uint8Array(32);return G($,T),G(b,z),Q($,b)}function de(T){const z=new Uint8Array(32);return G(z,T),z[0]&1}function ce(T,z){for(let $=0;$<16;$++)T[$]=z[2*$]+(z[2*$+1]<<8);T[15]&=32767}function ae(T,z,$){for(let b=0;b<16;b++)T[b]=z[b]+$[b]}function he(T,z,$){for(let b=0;b<16;b++)T[b]=z[b]-$[b]}function ue(T,z,$){let b,k,W=0,ne=0,se=0,ge=0,ve=0,Oe=0,nt=0,Ee=0,Ve=0,Le=0,_e=0,Fe=0,Ge=0,me=0,je=0,De=0,we=0,Qe=0,ze=0,Se=0,ot=0,ft=0,qe=0,ct=0,ht=0,ke=0,wt=0,ut=0,$e=0,At=0,Et=0,Ae=$[0],He=$[1],Ye=$[2],Me=$[3],Je=$[4],Ke=$[5],Pe=$[6],st=$[7],We=$[8],Re=$[9],Xe=$[10],et=$[11],xe=$[12],Ue=$[13],at=$[14],Ce=$[15];b=z[0],W+=b*Ae,ne+=b*He,se+=b*Ye,ge+=b*Me,ve+=b*Je,Oe+=b*Ke,nt+=b*Pe,Ee+=b*st,Ve+=b*We,Le+=b*Re,_e+=b*Xe,Fe+=b*et,Ge+=b*xe,me+=b*Ue,je+=b*at,De+=b*Ce,b=z[1],ne+=b*Ae,se+=b*He,ge+=b*Ye,ve+=b*Me,Oe+=b*Je,nt+=b*Ke,Ee+=b*Pe,Ve+=b*st,Le+=b*We,_e+=b*Re,Fe+=b*Xe,Ge+=b*et,me+=b*xe,je+=b*Ue,De+=b*at,we+=b*Ce,b=z[2],se+=b*Ae,ge+=b*He,ve+=b*Ye,Oe+=b*Me,nt+=b*Je,Ee+=b*Ke,Ve+=b*Pe,Le+=b*st,_e+=b*We,Fe+=b*Re,Ge+=b*Xe,me+=b*et,je+=b*xe,De+=b*Ue,we+=b*at,Qe+=b*Ce,b=z[3],ge+=b*Ae,ve+=b*He,Oe+=b*Ye,nt+=b*Me,Ee+=b*Je,Ve+=b*Ke,Le+=b*Pe,_e+=b*st,Fe+=b*We,Ge+=b*Re,me+=b*Xe,je+=b*et,De+=b*xe,we+=b*Ue,Qe+=b*at,ze+=b*Ce,b=z[4],ve+=b*Ae,Oe+=b*He,nt+=b*Ye,Ee+=b*Me,Ve+=b*Je,Le+=b*Ke,_e+=b*Pe,Fe+=b*st,Ge+=b*We,me+=b*Re,je+=b*Xe,De+=b*et,we+=b*xe,Qe+=b*Ue,ze+=b*at,Se+=b*Ce,b=z[5],Oe+=b*Ae,nt+=b*He,Ee+=b*Ye,Ve+=b*Me,Le+=b*Je,_e+=b*Ke,Fe+=b*Pe,Ge+=b*st,me+=b*We,je+=b*Re,De+=b*Xe,we+=b*et,Qe+=b*xe,ze+=b*Ue,Se+=b*at,ot+=b*Ce,b=z[6],nt+=b*Ae,Ee+=b*He,Ve+=b*Ye,Le+=b*Me,_e+=b*Je,Fe+=b*Ke,Ge+=b*Pe,me+=b*st,je+=b*We,De+=b*Re,we+=b*Xe,Qe+=b*et,ze+=b*xe,Se+=b*Ue,ot+=b*at,ft+=b*Ce,b=z[7],Ee+=b*Ae,Ve+=b*He,Le+=b*Ye,_e+=b*Me,Fe+=b*Je,Ge+=b*Ke,me+=b*Pe,je+=b*st,De+=b*We,we+=b*Re,Qe+=b*Xe,ze+=b*et,Se+=b*xe,ot+=b*Ue,ft+=b*at,qe+=b*Ce,b=z[8],Ve+=b*Ae,Le+=b*He,_e+=b*Ye,Fe+=b*Me,Ge+=b*Je,me+=b*Ke,je+=b*Pe,De+=b*st,we+=b*We,Qe+=b*Re,ze+=b*Xe,Se+=b*et,ot+=b*xe,ft+=b*Ue,qe+=b*at,ct+=b*Ce,b=z[9],Le+=b*Ae,_e+=b*He,Fe+=b*Ye,Ge+=b*Me,me+=b*Je,je+=b*Ke,De+=b*Pe,we+=b*st,Qe+=b*We,ze+=b*Re,Se+=b*Xe,ot+=b*et,ft+=b*xe,qe+=b*Ue,ct+=b*at,ht+=b*Ce,b=z[10],_e+=b*Ae,Fe+=b*He,Ge+=b*Ye,me+=b*Me,je+=b*Je,De+=b*Ke,we+=b*Pe,Qe+=b*st,ze+=b*We,Se+=b*Re,ot+=b*Xe,ft+=b*et,qe+=b*xe,ct+=b*Ue,ht+=b*at,ke+=b*Ce,b=z[11],Fe+=b*Ae,Ge+=b*He,me+=b*Ye,je+=b*Me,De+=b*Je,we+=b*Ke,Qe+=b*Pe,ze+=b*st,Se+=b*We,ot+=b*Re,ft+=b*Xe,qe+=b*et,ct+=b*xe,ht+=b*Ue,ke+=b*at,wt+=b*Ce,b=z[12],Ge+=b*Ae,me+=b*He,je+=b*Ye,De+=b*Me,we+=b*Je,Qe+=b*Ke,ze+=b*Pe,Se+=b*st,ot+=b*We,ft+=b*Re,qe+=b*Xe,ct+=b*et,ht+=b*xe,ke+=b*Ue,wt+=b*at,ut+=b*Ce,b=z[13],me+=b*Ae,je+=b*He,De+=b*Ye,we+=b*Me,Qe+=b*Je,ze+=b*Ke,Se+=b*Pe,ot+=b*st,ft+=b*We,qe+=b*Re,ct+=b*Xe,ht+=b*et,ke+=b*xe,wt+=b*Ue,ut+=b*at,$e+=b*Ce,b=z[14],je+=b*Ae,De+=b*He,we+=b*Ye,Qe+=b*Me,ze+=b*Je,Se+=b*Ke,ot+=b*Pe,ft+=b*st,qe+=b*We,ct+=b*Re,ht+=b*Xe,ke+=b*et,wt+=b*xe,ut+=b*Ue,$e+=b*at,At+=b*Ce,b=z[15],De+=b*Ae,we+=b*He,Qe+=b*Ye,ze+=b*Me,Se+=b*Je,ot+=b*Ke,ft+=b*Pe,qe+=b*st,ct+=b*We,ht+=b*Re,ke+=b*Xe,wt+=b*et,ut+=b*xe,$e+=b*Ue,At+=b*at,Et+=b*Ce,W+=38*we,ne+=38*Qe,se+=38*ze,ge+=38*Se,ve+=38*ot,Oe+=38*ft,nt+=38*qe,Ee+=38*ct,Ve+=38*ht,Le+=38*ke,_e+=38*wt,Fe+=38*ut,Ge+=38*$e,me+=38*At,je+=38*Et,k=1,b=W+k+65535,k=Math.floor(b/65536),W=b-k*65536,b=ne+k+65535,k=Math.floor(b/65536),ne=b-k*65536,b=se+k+65535,k=Math.floor(b/65536),se=b-k*65536,b=ge+k+65535,k=Math.floor(b/65536),ge=b-k*65536,b=ve+k+65535,k=Math.floor(b/65536),ve=b-k*65536,b=Oe+k+65535,k=Math.floor(b/65536),Oe=b-k*65536,b=nt+k+65535,k=Math.floor(b/65536),nt=b-k*65536,b=Ee+k+65535,k=Math.floor(b/65536),Ee=b-k*65536,b=Ve+k+65535,k=Math.floor(b/65536),Ve=b-k*65536,b=Le+k+65535,k=Math.floor(b/65536),Le=b-k*65536,b=_e+k+65535,k=Math.floor(b/65536),_e=b-k*65536,b=Fe+k+65535,k=Math.floor(b/65536),Fe=b-k*65536,b=Ge+k+65535,k=Math.floor(b/65536),Ge=b-k*65536,b=me+k+65535,k=Math.floor(b/65536),me=b-k*65536,b=je+k+65535,k=Math.floor(b/65536),je=b-k*65536,b=De+k+65535,k=Math.floor(b/65536),De=b-k*65536,W+=k-1+37*(k-1),k=1,b=W+k+65535,k=Math.floor(b/65536),W=b-k*65536,b=ne+k+65535,k=Math.floor(b/65536),ne=b-k*65536,b=se+k+65535,k=Math.floor(b/65536),se=b-k*65536,b=ge+k+65535,k=Math.floor(b/65536),ge=b-k*65536,b=ve+k+65535,k=Math.floor(b/65536),ve=b-k*65536,b=Oe+k+65535,k=Math.floor(b/65536),Oe=b-k*65536,b=nt+k+65535,k=Math.floor(b/65536),nt=b-k*65536,b=Ee+k+65535,k=Math.floor(b/65536),Ee=b-k*65536,b=Ve+k+65535,k=Math.floor(b/65536),Ve=b-k*65536,b=Le+k+65535,k=Math.floor(b/65536),Le=b-k*65536,b=_e+k+65535,k=Math.floor(b/65536),_e=b-k*65536,b=Fe+k+65535,k=Math.floor(b/65536),Fe=b-k*65536,b=Ge+k+65535,k=Math.floor(b/65536),Ge=b-k*65536,b=me+k+65535,k=Math.floor(b/65536),me=b-k*65536,b=je+k+65535,k=Math.floor(b/65536),je=b-k*65536,b=De+k+65535,k=Math.floor(b/65536),De=b-k*65536,W+=k-1+37*(k-1),T[0]=W,T[1]=ne,T[2]=se,T[3]=ge,T[4]=ve,T[5]=Oe,T[6]=nt,T[7]=Ee,T[8]=Ve,T[9]=Le,T[10]=_e,T[11]=Fe,T[12]=Ge,T[13]=me,T[14]=je,T[15]=De}function le(T,z){ue(T,z,z)}function Te(T,z){const $=s();let b;for(b=0;b<16;b++)$[b]=z[b];for(b=253;b>=0;b--)le($,$),b!==2&&b!==4&&ue($,$,z);for(b=0;b<16;b++)T[b]=$[b]}function lt(T,z){const $=s();let b;for(b=0;b<16;b++)$[b]=z[b];for(b=250;b>=0;b--)le($,$),b!==1&&ue($,$,z);for(b=0;b<16;b++)T[b]=$[b]}function B(T,z){const $=s(),b=s(),k=s(),W=s(),ne=s(),se=s(),ge=s(),ve=s(),Oe=s();he($,T[1],T[0]),he(Oe,z[1],z[0]),ue($,$,Oe),ae(b,T[0],T[1]),ae(Oe,z[0],z[1]),ue(b,b,Oe),ue(k,T[3],z[3]),ue(k,k,_),ue(W,T[2],z[2]),ae(W,W,W),he(ne,b,$),he(se,W,k),ae(ge,W,k),ae(ve,b,$),ue(T[0],ne,se),ue(T[1],ve,ge),ue(T[2],ge,se),ue(T[3],ne,ve)}function v(T,z,$){for(let b=0;b<4;b++)j(T[b],z[b],$)}function c(T,z){const $=s(),b=s(),k=s();Te(k,z[2]),ue($,z[0],k),ue(b,z[1],k),G(T,b),T[31]^=de($)<<7}function d(T,z,$){O(T[0],h),O(T[1],g),O(T[2],g),O(T[3],h);for(let b=255;b>=0;--b){const k=$[b/8|0]>>(b&7)&1;v(T,z,k),B(z,T),B(T,T),v(T,z,k)}}function p(T,z){const $=[s(),s(),s(),s()];O($[0],I),O($[1],P),O($[2],g),ue($[3],I,P),d(T,$,z)}function w(T){if(T.length!==r.SEED_LENGTH)throw new Error(`ed25519: seed must be ${r.SEED_LENGTH} bytes`);const z=(0,t.hash)(T);z[0]&=248,z[31]&=127,z[31]|=64;const $=new Uint8Array(32),b=[s(),s(),s(),s()];p(b,z),c($,b);const k=new Uint8Array(64);return k.set(T),k.set($,32),{publicKey:$,secretKey:k}}r.generateKeyPairFromSeed=w;function x(T){const z=(0,e.randomBytes)(32,T),$=w(z);return(0,i.wipe)(z),$}r.generateKeyPair=x;function E(T){if(T.length!==r.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${r.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(T.subarray(32))}r.extractPublicKeyFromSecretKey=E;const A=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function u(T,z){let $,b,k,W;for(b=63;b>=32;--b){for($=0,k=b-32,W=b-12;k<W;++k)z[k]+=$-16*z[b]*A[k-(b-32)],$=Math.floor((z[k]+128)/256),z[k]-=$*256;z[k]+=$,z[b]=0}for($=0,k=0;k<32;k++)z[k]+=$-(z[31]>>4)*A[k],$=z[k]>>8,z[k]&=255;for(k=0;k<32;k++)z[k]-=$*A[k];for(b=0;b<32;b++)z[b+1]+=z[b]>>8,T[b]=z[b]&255}function l(T){const z=new Float64Array(64);for(let $=0;$<64;$++)z[$]=T[$];for(let $=0;$<64;$++)T[$]=0;u(T,z)}function R(T,z){const $=new Float64Array(64),b=[s(),s(),s(),s()],k=(0,t.hash)(T.subarray(0,32));k[0]&=248,k[31]&=127,k[31]|=64;const W=new Uint8Array(64);W.set(k.subarray(32),32);const ne=new t.SHA512;ne.update(W.subarray(32)),ne.update(z);const se=ne.digest();ne.clean(),l(se),p(b,se),c(W,b),ne.reset(),ne.update(W.subarray(0,32)),ne.update(T.subarray(32)),ne.update(z);const ge=ne.digest();l(ge);for(let ve=0;ve<32;ve++)$[ve]=se[ve];for(let ve=0;ve<32;ve++)for(let Oe=0;Oe<32;Oe++)$[ve+Oe]+=ge[ve]*k[Oe];return u(W.subarray(32),$),W}r.sign=R;function X(T,z){const $=s(),b=s(),k=s(),W=s(),ne=s(),se=s(),ge=s();return O(T[2],g),ce(T[1],z),le(k,T[1]),ue(W,k,y),he(k,k,T[2]),ae(W,T[2],W),le(ne,W),le(se,ne),ue(ge,se,ne),ue($,ge,k),ue($,$,W),lt($,$),ue($,$,k),ue($,$,W),ue($,$,W),ue(T[0],$,W),le(b,T[0]),ue(b,b,W),Z(b,k)&&ue(T[0],T[0],q),le(b,T[0]),ue(b,b,W),Z(b,k)?-1:(de(T[0])===z[31]>>7&&he(T[0],h,T[0]),ue(T[3],T[0],T[1]),0)}function ee(T,z,$){const b=new Uint8Array(32),k=[s(),s(),s(),s()],W=[s(),s(),s(),s()];if($.length!==r.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${r.SIGNATURE_LENGTH} bytes`);if(X(W,T))return!1;const ne=new t.SHA512;ne.update($.subarray(0,32)),ne.update(T),ne.update(z);const se=ne.digest();return l(se),d(k,W,se),p(W,$.subarray(32)),B(k,W),c(b,k),!Q($,b)}r.verify=ee;function M(T){let z=[s(),s(),s(),s()];if(X(z,T))throw new Error("Ed25519: invalid public key");let $=s(),b=s(),k=z[1];ae($,g,k),he(b,g,k),Te(b,b),ue($,$,b);let W=new Uint8Array(32);return G(W,$),W}r.convertPublicKeyToX25519=M;function J(T){const z=(0,t.hash)(T.subarray(0,32));z[0]&=248,z[31]&=127,z[31]|=64;const $=new Uint8Array(z.subarray(0,32));return(0,i.wipe)(z),$}r.convertSecretKeyToX25519=J})(Bu);const Ly="EdDSA",zy="JWT",Wc=".",vf="base64url",c1="utf8",f1="utf8",$y=":",Uy="did",Fy="key",a0="base58btc",jy="z",Hy="K36",Ky=32;function Lu(r){return globalThis.Buffer!=null?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):r}function h1(r=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?Lu(globalThis.Buffer.allocUnsafe(r)):new Uint8Array(r)}function Vy(r,e){e||(e=r.reduce((s,o)=>s+o.length,0));const t=h1(e);let i=0;for(const s of r)t.set(s,i),i+=s.length;return Lu(t)}function u1(r,e,t,i){return{name:r,prefix:e,encoder:{name:r,prefix:e,encode:t},decoder:{decode:i}}}const o0=u1("utf8","u",r=>"u"+new TextDecoder("utf8").decode(r),r=>new TextEncoder().encode(r.substring(1))),Lh=u1("ascii","a",r=>{let e="a";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e},r=>{r=r.substring(1);const e=h1(r.length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e}),d1={utf8:o0,"utf-8":o0,hex:Qc.base16,latin1:Lh,ascii:Lh,binary:Lh,...Qc};function bf(r,e="utf8"){const t=d1[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(r.buffer,r.byteOffset,r.byteLength).toString("utf8"):t.encoder.encode(r).substring(1)}function ya(r,e="utf8"){const t=d1[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Lu(globalThis.Buffer.from(r,"utf-8")):t.decoder.decode(`${t.prefix}${r}`)}function c0(r){return vo(bf(ya(r,vf),c1))}function Xc(r){return bf(ya(bo(r),c1),vf)}function l1(r){const e=ya(Hy,a0),t=jy+bf(Vy([e,r]),a0);return[Uy,Fy,t].join($y)}function Gy(r){return bf(r,vf)}function Jy(r){return ya(r,vf)}function Qy(r){return ya([Xc(r.header),Xc(r.payload)].join(Wc),f1)}function Yy(r){return[Xc(r.header),Xc(r.payload),Gy(r.signature)].join(Wc)}function bu(r){const e=r.split(Wc),t=c0(e[0]),i=c0(e[1]),s=Jy(e[2]),o=ya(e.slice(0,2).join(Wc),f1);return{header:t,payload:i,signature:s,data:o}}function f0(r=ma.randomBytes(Ky)){return Bu.generateKeyPairFromSeed(r)}async function Wy(r,e,t,i,s=be.fromMiliseconds(Date.now())){const o={alg:Ly,typ:zy},h=l1(i.publicKey),g=s+t,y={iss:h,sub:r,aud:e,iat:s,exp:g},_=Qy({header:o,payload:y}),I=Bu.sign(i.secretKey,_);return Yy({header:o,payload:y,signature:I})}const Xy=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),Zy=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",h0=r=>r.split("?")[0],u0=10,ew=Xy();let tw=class{constructor(e){if(this.url=e,this.events=new qi.EventEmitter,this.registering=!1,!i0(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,t)=>{if(typeof this.socket>"u"){t(new Error("Connection already closed"));return}this.socket.onclose=i=>{this.onClose(i),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(bo(e))}catch(t){this.onError(e.id,t)}}register(e=this.url){if(!i0(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const t=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=t||this.events.listenerCount("open")>=t)&&this.events.setMaxListeners(t+1),new Promise((i,s)=>{this.events.once("register_error",o=>{this.resetMaxListeners(),s(o)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return s(new Error("WebSocket connection is missing or invalid"));i(this.socket)})})}return this.url=e,this.registering=!0,new Promise((t,i)=>{const s=new URLSearchParams(e).get("origin"),o=Ay.isReactNative()?{headers:{origin:s}}:{rejectUnauthorized:!My(e)},h=new ew(e,[],o);Zy()?h.onerror=g=>{const y=g;i(this.emitError(y.error))}:h.on("error",g=>{i(this.emitError(g))}),h.onopen=()=>{this.onOpen(h),t(h)}})}onOpen(e){e.onmessage=t=>this.onPayload(t),e.onclose=t=>this.onClose(t),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const t=typeof e.data=="string"?vo(e.data):e.data;this.events.emit("payload",t)}onError(e,t){const i=this.parseError(t),s=i.message||i.toString(),o=uf(e,s);this.events.emit("payload",o)}parseError(e,t=this.url){return e1(e,h0(t),"WS")}resetMaxListeners(){this.events.getMaxListeners()>u0&&this.events.setMaxListeners(u0)}emitError(e){const t=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for host: ${h0(this.url)}`));return this.events.emit("register_error",t),t}};var Zc={exports:{}};Zc.exports;(function(r,e){var t=200,i="__lodash_hash_undefined__",s=1,o=2,h=9007199254740991,g="[object Arguments]",y="[object Array]",_="[object AsyncFunction]",I="[object Boolean]",P="[object Date]",q="[object Error]",O="[object Function]",L="[object GeneratorFunction]",j="[object Map]",G="[object Number]",Q="[object Null]",Z="[object Object]",de="[object Promise]",ce="[object Proxy]",ae="[object RegExp]",he="[object Set]",ue="[object String]",le="[object Symbol]",Te="[object Undefined]",lt="[object WeakMap]",B="[object ArrayBuffer]",v="[object DataView]",c="[object Float32Array]",d="[object Float64Array]",p="[object Int8Array]",w="[object Int16Array]",x="[object Int32Array]",E="[object Uint8Array]",A="[object Uint8ClampedArray]",u="[object Uint16Array]",l="[object Uint32Array]",R=/[\\^$.*+?()[\]{}|]/g,X=/^\[object .+?Constructor\]$/,ee=/^(?:0|[1-9]\d*)$/,M={};M[c]=M[d]=M[p]=M[w]=M[x]=M[E]=M[A]=M[u]=M[l]=!0,M[g]=M[y]=M[B]=M[I]=M[v]=M[P]=M[q]=M[O]=M[j]=M[G]=M[Z]=M[ae]=M[he]=M[ue]=M[lt]=!1;var J=typeof ao=="object"&&ao&&ao.Object===Object&&ao,T=typeof self=="object"&&self&&self.Object===Object&&self,z=J||T||Function("return this")(),$=e&&!e.nodeType&&e,b=$&&!0&&r&&!r.nodeType&&r,k=b&&b.exports===$,W=k&&J.process,ne=function(){try{return W&&W.binding&&W.binding("util")}catch{}}(),se=ne&&ne.isTypedArray;function ge(D,H){for(var oe=-1,Ie=D==null?0:D.length,$t=0,pt=[];++oe<Ie;){var Kt=D[oe];H(Kt,oe,D)&&(pt[$t++]=Kt)}return pt}function ve(D,H){for(var oe=-1,Ie=H.length,$t=D.length;++oe<Ie;)D[$t+oe]=H[oe];return D}function Oe(D,H){for(var oe=-1,Ie=D==null?0:D.length;++oe<Ie;)if(H(D[oe],oe,D))return!0;return!1}function nt(D,H){for(var oe=-1,Ie=Array(D);++oe<D;)Ie[oe]=H(oe);return Ie}function Ee(D){return function(H){return D(H)}}function Ve(D,H){return D.has(H)}function Le(D,H){return D==null?void 0:D[H]}function _e(D){var H=-1,oe=Array(D.size);return D.forEach(function(Ie,$t){oe[++H]=[$t,Ie]}),oe}function Fe(D,H){return function(oe){return D(H(oe))}}function Ge(D){var H=-1,oe=Array(D.size);return D.forEach(function(Ie){oe[++H]=Ie}),oe}var me=Array.prototype,je=Function.prototype,De=Object.prototype,we=z["__core-js_shared__"],Qe=je.toString,ze=De.hasOwnProperty,Se=function(){var D=/[^.]+$/.exec(we&&we.keys&&we.keys.IE_PROTO||"");return D?"Symbol(src)_1."+D:""}(),ot=De.toString,ft=RegExp("^"+Qe.call(ze).replace(R,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),qe=k?z.Buffer:void 0,ct=z.Symbol,ht=z.Uint8Array,ke=De.propertyIsEnumerable,wt=me.splice,ut=ct?ct.toStringTag:void 0,$e=Object.getOwnPropertySymbols,At=qe?qe.isBuffer:void 0,Et=Fe(Object.keys,Object),Ae=si(z,"DataView"),He=si(z,"Map"),Ye=si(z,"Promise"),Me=si(z,"Set"),Je=si(z,"WeakMap"),Ke=si(Object,"create"),Pe=Pn(Ae),st=Pn(He),We=Pn(Ye),Re=Pn(Me),Xe=Pn(Je),et=ct?ct.prototype:void 0,xe=et?et.valueOf:void 0;function Ue(D){var H=-1,oe=D==null?0:D.length;for(this.clear();++H<oe;){var Ie=D[H];this.set(Ie[0],Ie[1])}}function at(){this.__data__=Ke?Ke(null):{},this.size=0}function Ce(D){var H=this.has(D)&&delete this.__data__[D];return this.size-=H?1:0,H}function Nt(D){var H=this.__data__;if(Ke){var oe=H[D];return oe===i?void 0:oe}return ze.call(H,D)?H[D]:void 0}function Tt(D){var H=this.__data__;return Ke?H[D]!==void 0:ze.call(H,D)}function tt(D,H){var oe=this.__data__;return this.size+=this.has(D)?0:1,oe[D]=Ke&&H===void 0?i:H,this}Ue.prototype.clear=at,Ue.prototype.delete=Ce,Ue.prototype.get=Nt,Ue.prototype.has=Tt,Ue.prototype.set=tt;function bt(D){var H=-1,oe=D==null?0:D.length;for(this.clear();++H<oe;){var Ie=D[H];this.set(Ie[0],Ie[1])}}function Er(){this.__data__=[],this.size=0}function Ir(D){var H=this.__data__,oe=ds(H,D);if(oe<0)return!1;var Ie=H.length-1;return oe==Ie?H.pop():wt.call(H,oe,1),--this.size,!0}function Sr(D){var H=this.__data__,oe=ds(H,D);return oe<0?void 0:H[oe][1]}function Pr(D){return ds(this.__data__,D)>-1}function Rr(D,H){var oe=this.__data__,Ie=ds(oe,D);return Ie<0?(++this.size,oe.push([D,H])):oe[Ie][1]=H,this}bt.prototype.clear=Er,bt.prototype.delete=Ir,bt.prototype.get=Sr,bt.prototype.has=Pr,bt.prototype.set=Rr;function Yt(D){var H=-1,oe=D==null?0:D.length;for(this.clear();++H<oe;){var Ie=D[H];this.set(Ie[0],Ie[1])}}function Hr(){this.size=0,this.__data__={hash:new Ue,map:new(He||bt),string:new Ue}}function Bi(D){var H=Jn(this,D).delete(D);return this.size-=H?1:0,H}function Kr(D){return Jn(this,D).get(D)}function Li(D){return Jn(this,D).has(D)}function zi(D,H){var oe=Jn(this,D),Ie=oe.size;return oe.set(D,H),this.size+=oe.size==Ie?0:1,this}Yt.prototype.clear=Hr,Yt.prototype.delete=Bi,Yt.prototype.get=Kr,Yt.prototype.has=Li,Yt.prototype.set=zi;function Vr(D){var H=-1,oe=D==null?0:D.length;for(this.__data__=new Yt;++H<oe;)this.add(D[H])}function vi(D){return this.__data__.set(D,i),this}function bi(D){return this.__data__.has(D)}Vr.prototype.add=Vr.prototype.push=vi,Vr.prototype.has=bi;function cr(D){var H=this.__data__=new bt(D);this.size=H.size}function $i(){this.__data__=new bt,this.size=0}function Ui(D){var H=this.__data__,oe=H.delete(D);return this.size=H.size,oe}function Fi(D){return this.__data__.get(D)}function us(D){return this.__data__.has(D)}function No(D,H){var oe=this.__data__;if(oe instanceof bt){var Ie=oe.__data__;if(!He||Ie.length<t-1)return Ie.push([D,H]),this.size=++oe.size,this;oe=this.__data__=new Yt(Ie)}return oe.set(D,H),this.size=oe.size,this}cr.prototype.clear=$i,cr.prototype.delete=Ui,cr.prototype.get=Fi,cr.prototype.has=us,cr.prototype.set=No;function To(D,H){var oe=Hs(D),Ie=!oe&&Ho(D),$t=!oe&&!Ie&&Oa(D),pt=!oe&&!Ie&&!$t&&Go(D),Kt=oe||Ie||$t||pt,ar=Kt?nt(D.length,String):[],Rt=ar.length;for(var Ut in D)ze.call(D,Ut)&&!(Kt&&(Ut=="length"||$t&&(Ut=="offset"||Ut=="parent")||pt&&(Ut=="buffer"||Ut=="byteLength"||Ut=="byteOffset")||zo(Ut,Rt)))&&ar.push(Ut);return ar}function ds(D,H){for(var oe=D.length;oe--;)if(jo(D[oe][0],H))return oe;return-1}function Na(D,H,oe){var Ie=H(D);return Hs(D)?Ie:ve(Ie,oe(D))}function ls(D){return D==null?D===void 0?Te:Q:ut&&ut in Object(D)?Bo(D):Nf(D)}function Ta(D){return gs(D)&&ls(D)==g}function ps(D,H,oe,Ie,$t){return D===H?!0:D==null||H==null||!gs(D)&&!gs(H)?D!==D&&H!==H:Oo(D,H,oe,Ie,ps,$t)}function Oo(D,H,oe,Ie,$t,pt){var Kt=Hs(D),ar=Hs(H),Rt=Kt?y:on(D),Ut=ar?y:on(H);Rt=Rt==g?Z:Rt,Ut=Ut==g?Z:Ut;var tr=Rt==Z,Gr=Ut==Z,or=Rt==Ut;if(or&&Oa(D)){if(!Oa(H))return!1;Kt=!0,tr=!1}if(or&&!tr)return pt||(pt=new cr),Kt||Go(D)?Fs(D,H,oe,Ie,$t,pt):Cf(D,H,Rt,oe,Ie,$t,pt);if(!(oe&s)){var Vt=tr&&ze.call(D,"__wrapped__"),qr=Gr&&ze.call(H,"__wrapped__");if(Vt||qr){var ji=Vt?D.value():D,mi=qr?H.value():H;return pt||(pt=new cr),$t(ji,mi,oe,Ie,pt)}}return or?(pt||(pt=new cr),ko(D,H,oe,Ie,$t,pt)):!1}function Rf(D){if(!Vo(D)||Uo(D))return!1;var H=Ks(D)?ft:X;return H.test(Pn(D))}function qo(D){return gs(D)&&Ko(D.length)&&!!M[ls(D)]}function Do(D){if(!Fo(D))return Et(D);var H=[];for(var oe in Object(D))ze.call(D,oe)&&oe!="constructor"&&H.push(oe);return H}function Fs(D,H,oe,Ie,$t,pt){var Kt=oe&s,ar=D.length,Rt=H.length;if(ar!=Rt&&!(Kt&&Rt>ar))return!1;var Ut=pt.get(D);if(Ut&&pt.get(H))return Ut==H;var tr=-1,Gr=!0,or=oe&o?new Vr:void 0;for(pt.set(D,H),pt.set(H,D);++tr<ar;){var Vt=D[tr],qr=H[tr];if(Ie)var ji=Kt?Ie(qr,Vt,tr,H,D,pt):Ie(Vt,qr,tr,D,H,pt);if(ji!==void 0){if(ji)continue;Gr=!1;break}if(or){if(!Oe(H,function(mi,cn){if(!Ve(or,cn)&&(Vt===mi||$t(Vt,mi,oe,Ie,pt)))return or.push(cn)})){Gr=!1;break}}else if(!(Vt===qr||$t(Vt,qr,oe,Ie,pt))){Gr=!1;break}}return pt.delete(D),pt.delete(H),Gr}function Cf(D,H,oe,Ie,$t,pt,Kt){switch(oe){case v:if(D.byteLength!=H.byteLength||D.byteOffset!=H.byteOffset)return!1;D=D.buffer,H=H.buffer;case B:return!(D.byteLength!=H.byteLength||!pt(new ht(D),new ht(H)));case I:case P:case G:return jo(+D,+H);case q:return D.name==H.name&&D.message==H.message;case ae:case ue:return D==H+"";case j:var ar=_e;case he:var Rt=Ie&s;if(ar||(ar=Ge),D.size!=H.size&&!Rt)return!1;var Ut=Kt.get(D);if(Ut)return Ut==H;Ie|=o,Kt.set(D,H);var tr=Fs(ar(D),ar(H),Ie,$t,pt,Kt);return Kt.delete(D),tr;case le:if(xe)return xe.call(D)==xe.call(H)}return!1}function ko(D,H,oe,Ie,$t,pt){var Kt=oe&s,ar=js(D),Rt=ar.length,Ut=js(H),tr=Ut.length;if(Rt!=tr&&!Kt)return!1;for(var Gr=Rt;Gr--;){var or=ar[Gr];if(!(Kt?or in H:ze.call(H,or)))return!1}var Vt=pt.get(D);if(Vt&&pt.get(H))return Vt==H;var qr=!0;pt.set(D,H),pt.set(H,D);for(var ji=Kt;++Gr<Rt;){or=ar[Gr];var mi=D[or],cn=H[or];if(Ie)var qa=Kt?Ie(cn,mi,or,H,D,pt):Ie(mi,cn,or,D,H,pt);if(!(qa===void 0?mi===cn||$t(mi,cn,oe,Ie,pt):qa)){qr=!1;break}ji||(ji=or=="constructor")}if(qr&&!ji){var vs=D.constructor,lr=H.constructor;vs!=lr&&"constructor"in D&&"constructor"in H&&!(typeof vs=="function"&&vs instanceof vs&&typeof lr=="function"&&lr instanceof lr)&&(qr=!1)}return pt.delete(D),pt.delete(H),qr}function js(D){return Na(D,qf,Lo)}function Jn(D,H){var oe=D.__data__;return $o(H)?oe[typeof H=="string"?"string":"hash"]:oe.map}function si(D,H){var oe=Le(D,H);return Rf(oe)?oe:void 0}function Bo(D){var H=ze.call(D,ut),oe=D[ut];try{D[ut]=void 0;var Ie=!0}catch{}var $t=ot.call(D);return Ie&&(H?D[ut]=oe:delete D[ut]),$t}var Lo=$e?function(D){return D==null?[]:(D=Object(D),ge($e(D),function(H){return ke.call(D,H)}))}:zt,on=ls;(Ae&&on(new Ae(new ArrayBuffer(1)))!=v||He&&on(new He)!=j||Ye&&on(Ye.resolve())!=de||Me&&on(new Me)!=he||Je&&on(new Je)!=lt)&&(on=function(D){var H=ls(D),oe=H==Z?D.constructor:void 0,Ie=oe?Pn(oe):"";if(Ie)switch(Ie){case Pe:return v;case st:return j;case We:return de;case Re:return he;case Xe:return lt}return H});function zo(D,H){return H=H??h,!!H&&(typeof D=="number"||ee.test(D))&&D>-1&&D%1==0&&D<H}function $o(D){var H=typeof D;return H=="string"||H=="number"||H=="symbol"||H=="boolean"?D!=="__proto__":D===null}function Uo(D){return!!Se&&Se in D}function Fo(D){var H=D&&D.constructor,oe=typeof H=="function"&&H.prototype||De;return D===oe}function Nf(D){return ot.call(D)}function Pn(D){if(D!=null){try{return Qe.call(D)}catch{}try{return D+""}catch{}}return""}function jo(D,H){return D===H||D!==D&&H!==H}var Ho=Ta(function(){return arguments}())?Ta:function(D){return gs(D)&&ze.call(D,"callee")&&!ke.call(D,"callee")},Hs=Array.isArray;function Tf(D){return D!=null&&Ko(D.length)&&!Ks(D)}var Oa=At||Lt;function Of(D,H){return ps(D,H)}function Ks(D){if(!Vo(D))return!1;var H=ls(D);return H==O||H==L||H==_||H==ce}function Ko(D){return typeof D=="number"&&D>-1&&D%1==0&&D<=h}function Vo(D){var H=typeof D;return D!=null&&(H=="object"||H=="function")}function gs(D){return D!=null&&typeof D=="object"}var Go=se?Ee(se):qo;function qf(D){return Tf(D)?To(D):Do(D)}function zt(){return[]}function Lt(){return!1}r.exports=Of})(Zc,Zc.exports);var rw=Zc.exports;const iw=xy(rw);var nw=Object.defineProperty,sw=Object.defineProperties,aw=Object.getOwnPropertyDescriptors,d0=Object.getOwnPropertySymbols,ow=Object.prototype.hasOwnProperty,cw=Object.prototype.propertyIsEnumerable,l0=(r,e,t)=>e in r?nw(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,p0=(r,e)=>{for(var t in e||(e={}))ow.call(e,t)&&l0(r,t,e[t]);if(d0)for(var t of d0(e))cw.call(e,t)&&l0(r,t,e[t]);return r},g0=(r,e)=>sw(r,aw(e));const fw={Accept:"application/json","Content-Type":"application/json"},hw="POST",v0={headers:fw,method:hw},b0=10;let En=class{constructor(e,t=!1){if(this.url=e,this.disableProviderPing=t,this.events=new qi.EventEmitter,this.isAvailable=!1,this.registering=!1,!n0(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=t}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e){this.isAvailable||await this.register();try{const t=bo(e),i=await(await s0(this.url,g0(p0({},v0),{body:t}))).json();this.onPayload({data:i})}catch(t){this.onError(e.id,t)}}async register(e=this.url){if(!n0(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const t=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=t||this.events.listenerCount("open")>=t)&&this.events.setMaxListeners(t+1),new Promise((i,s)=>{this.events.once("register_error",o=>{this.resetMaxListeners(),s(o)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return s(new Error("HTTP connection is missing or invalid"));i()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const t=bo({id:1,jsonrpc:"2.0",method:"test",params:[]});await s0(e,g0(p0({},v0),{body:t}))}this.onOpen()}catch(t){const i=this.parseError(t);throw this.events.emit("register_error",i),this.onClose(),i}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const t=typeof e.data=="string"?vo(e.data):e.data;this.events.emit("payload",t)}onError(e,t){const i=this.parseError(t),s=i.message||i.toString(),o=uf(e,s);this.events.emit("payload",o)}parseError(e,t=this.url){return e1(e,t,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>b0&&this.events.setMaxListeners(b0)}};function p1(r=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(r):new Uint8Array(r)}function zh(r,e){e||(e=r.reduce((s,o)=>s+o.length,0));const t=p1(e);let i=0;for(const s of r)t.set(s,i),i+=s.length;return t}function g1(r,e,t,i){return{name:r,prefix:e,encoder:{name:r,prefix:e,encode:t},decoder:{decode:i}}}const m0=g1("utf8","u",r=>"u"+new TextDecoder("utf8").decode(r),r=>new TextEncoder().encode(r.substring(1))),$h=g1("ascii","a",r=>{let e="a";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e},r=>{r=r.substring(1);const e=p1(r.length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e}),v1={utf8:m0,"utf-8":m0,hex:Qc.base16,latin1:$h,ascii:$h,binary:$h,...Qc};function Ti(r,e="utf8"){const t=v1[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(r,"utf8"):t.decoder.decode(`${t.prefix}${r}`)}function ri(r,e="utf8"){const t=v1[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(r.buffer,r.byteOffset,r.byteLength).toString("utf8"):t.encoder.encode(r).substring(1)}var b1={};const uw="elliptic",dw="6.5.7",lw="EC cryptography",pw="lib/elliptic.js",gw=["lib"],vw={lint:"eslint lib test","lint:fix":"npm run lint -- --fix",unit:"istanbul test _mocha --reporter=spec test/index.js",test:"npm run lint && npm run unit",version:"grunt dist && git add dist/"},bw={type:"git",url:"git@github.com:indutny/elliptic"},mw=["EC","Elliptic","curve","Cryptography"],yw="Fedor Indutny <fedor@indutny.com>",ww="MIT",_w={url:"https://github.com/indutny/elliptic/issues"},Aw="https://github.com/indutny/elliptic",Mw={brfs:"^2.0.2",coveralls:"^3.1.0",eslint:"^7.6.0",grunt:"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1",istanbul:"^0.4.5",mocha:"^8.0.1"},xw={"bn.js":"^4.11.9",brorand:"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1",inherits:"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"},Ew={name:uw,version:dw,description:lw,main:pw,files:gw,scripts:vw,repository:bw,keywords:mw,author:yw,license:ww,bugs:_w,homepage:Aw,devDependencies:Mw,dependencies:xw};var gi={},zu={exports:{}};zu.exports;(function(r){(function(e,t){function i(B,v){if(!B)throw new Error(v||"Assertion failed")}function s(B,v){B.super_=v;var c=function(){};c.prototype=v.prototype,B.prototype=new c,B.prototype.constructor=B}function o(B,v,c){if(o.isBN(B))return B;this.negative=0,this.words=null,this.length=0,this.red=null,B!==null&&((v==="le"||v==="be")&&(c=v,v=10),this._init(B||0,v||10,c||"be"))}typeof e=="object"?e.exports=o:t.BN=o,o.BN=o,o.wordSize=26;var h;try{typeof window<"u"&&typeof window.Buffer<"u"?h=window.Buffer:h=Ey.Buffer}catch{}o.isBN=function(v){return v instanceof o?!0:v!==null&&typeof v=="object"&&v.constructor.wordSize===o.wordSize&&Array.isArray(v.words)},o.max=function(v,c){return v.cmp(c)>0?v:c},o.min=function(v,c){return v.cmp(c)<0?v:c},o.prototype._init=function(v,c,d){if(typeof v=="number")return this._initNumber(v,c,d);if(typeof v=="object")return this._initArray(v,c,d);c==="hex"&&(c=16),i(c===(c|0)&&c>=2&&c<=36),v=v.toString().replace(/\s+/g,"");var p=0;v[0]==="-"&&(p++,this.negative=1),p<v.length&&(c===16?this._parseHex(v,p,d):(this._parseBase(v,c,p),d==="le"&&this._initArray(this.toArray(),c,d)))},o.prototype._initNumber=function(v,c,d){v<0&&(this.negative=1,v=-v),v<67108864?(this.words=[v&67108863],this.length=1):v<4503599627370496?(this.words=[v&67108863,v/67108864&67108863],this.length=2):(i(v<9007199254740992),this.words=[v&67108863,v/67108864&67108863,1],this.length=3),d==="le"&&this._initArray(this.toArray(),c,d)},o.prototype._initArray=function(v,c,d){if(i(typeof v.length=="number"),v.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(v.length/3),this.words=new Array(this.length);for(var p=0;p<this.length;p++)this.words[p]=0;var w,x,E=0;if(d==="be")for(p=v.length-1,w=0;p>=0;p-=3)x=v[p]|v[p-1]<<8|v[p-2]<<16,this.words[w]|=x<<E&67108863,this.words[w+1]=x>>>26-E&67108863,E+=24,E>=26&&(E-=26,w++);else if(d==="le")for(p=0,w=0;p<v.length;p+=3)x=v[p]|v[p+1]<<8|v[p+2]<<16,this.words[w]|=x<<E&67108863,this.words[w+1]=x>>>26-E&67108863,E+=24,E>=26&&(E-=26,w++);return this.strip()};function g(B,v){var c=B.charCodeAt(v);return c>=65&&c<=70?c-55:c>=97&&c<=102?c-87:c-48&15}function y(B,v,c){var d=g(B,c);return c-1>=v&&(d|=g(B,c-1)<<4),d}o.prototype._parseHex=function(v,c,d){this.length=Math.ceil((v.length-c)/6),this.words=new Array(this.length);for(var p=0;p<this.length;p++)this.words[p]=0;var w=0,x=0,E;if(d==="be")for(p=v.length-1;p>=c;p-=2)E=y(v,c,p)<<w,this.words[x]|=E&67108863,w>=18?(w-=18,x+=1,this.words[x]|=E>>>26):w+=8;else{var A=v.length-c;for(p=A%2===0?c+1:c;p<v.length;p+=2)E=y(v,c,p)<<w,this.words[x]|=E&67108863,w>=18?(w-=18,x+=1,this.words[x]|=E>>>26):w+=8}this.strip()};function _(B,v,c,d){for(var p=0,w=Math.min(B.length,c),x=v;x<w;x++){var E=B.charCodeAt(x)-48;p*=d,E>=49?p+=E-49+10:E>=17?p+=E-17+10:p+=E}return p}o.prototype._parseBase=function(v,c,d){this.words=[0],this.length=1;for(var p=0,w=1;w<=67108863;w*=c)p++;p--,w=w/c|0;for(var x=v.length-d,E=x%p,A=Math.min(x,x-E)+d,u=0,l=d;l<A;l+=p)u=_(v,l,l+p,c),this.imuln(w),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(E!==0){var R=1;for(u=_(v,l,v.length,c),l=0;l<E;l++)R*=c;this.imuln(R),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this.strip()},o.prototype.copy=function(v){v.words=new Array(this.length);for(var c=0;c<this.length;c++)v.words[c]=this.words[c];v.length=this.length,v.negative=this.negative,v.red=this.red},o.prototype.clone=function(){var v=new o(null);return this.copy(v),v},o.prototype._expand=function(v){for(;this.length<v;)this.words[this.length++]=0;return this},o.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},o.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var I=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],P=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],q=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];o.prototype.toString=function(v,c){v=v||10,c=c|0||1;var d;if(v===16||v==="hex"){d="";for(var p=0,w=0,x=0;x<this.length;x++){var E=this.words[x],A=((E<<p|w)&16777215).toString(16);w=E>>>24-p&16777215,w!==0||x!==this.length-1?d=I[6-A.length]+A+d:d=A+d,p+=2,p>=26&&(p-=26,x--)}for(w!==0&&(d=w.toString(16)+d);d.length%c!==0;)d="0"+d;return this.negative!==0&&(d="-"+d),d}if(v===(v|0)&&v>=2&&v<=36){var u=P[v],l=q[v];d="";var R=this.clone();for(R.negative=0;!R.isZero();){var X=R.modn(l).toString(v);R=R.idivn(l),R.isZero()?d=X+d:d=I[u-X.length]+X+d}for(this.isZero()&&(d="0"+d);d.length%c!==0;)d="0"+d;return this.negative!==0&&(d="-"+d),d}i(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var v=this.words[0];return this.length===2?v+=this.words[1]*67108864:this.length===3&&this.words[2]===1?v+=4503599627370496+this.words[1]*67108864:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-v:v},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(v,c){return i(typeof h<"u"),this.toArrayLike(h,v,c)},o.prototype.toArray=function(v,c){return this.toArrayLike(Array,v,c)},o.prototype.toArrayLike=function(v,c,d){var p=this.byteLength(),w=d||Math.max(1,p);i(p<=w,"byte array longer than desired length"),i(w>0,"Requested array length <= 0"),this.strip();var x=c==="le",E=new v(w),A,u,l=this.clone();if(x){for(u=0;!l.isZero();u++)A=l.andln(255),l.iushrn(8),E[u]=A;for(;u<w;u++)E[u]=0}else{for(u=0;u<w-p;u++)E[u]=0;for(u=0;!l.isZero();u++)A=l.andln(255),l.iushrn(8),E[w-u-1]=A}return E},Math.clz32?o.prototype._countBits=function(v){return 32-Math.clz32(v)}:o.prototype._countBits=function(v){var c=v,d=0;return c>=4096&&(d+=13,c>>>=13),c>=64&&(d+=7,c>>>=7),c>=8&&(d+=4,c>>>=4),c>=2&&(d+=2,c>>>=2),d+c},o.prototype._zeroBits=function(v){if(v===0)return 26;var c=v,d=0;return c&8191||(d+=13,c>>>=13),c&127||(d+=7,c>>>=7),c&15||(d+=4,c>>>=4),c&3||(d+=2,c>>>=2),c&1||d++,d},o.prototype.bitLength=function(){var v=this.words[this.length-1],c=this._countBits(v);return(this.length-1)*26+c};function O(B){for(var v=new Array(B.bitLength()),c=0;c<v.length;c++){var d=c/26|0,p=c%26;v[c]=(B.words[d]&1<<p)>>>p}return v}o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var v=0,c=0;c<this.length;c++){var d=this._zeroBits(this.words[c]);if(v+=d,d!==26)break}return v},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(v){return this.negative!==0?this.abs().inotn(v).iaddn(1):this.clone()},o.prototype.fromTwos=function(v){return this.testn(v-1)?this.notn(v).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return this.negative!==0},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(v){for(;this.length<v.length;)this.words[this.length++]=0;for(var c=0;c<v.length;c++)this.words[c]=this.words[c]|v.words[c];return this.strip()},o.prototype.ior=function(v){return i((this.negative|v.negative)===0),this.iuor(v)},o.prototype.or=function(v){return this.length>v.length?this.clone().ior(v):v.clone().ior(this)},o.prototype.uor=function(v){return this.length>v.length?this.clone().iuor(v):v.clone().iuor(this)},o.prototype.iuand=function(v){var c;this.length>v.length?c=v:c=this;for(var d=0;d<c.length;d++)this.words[d]=this.words[d]&v.words[d];return this.length=c.length,this.strip()},o.prototype.iand=function(v){return i((this.negative|v.negative)===0),this.iuand(v)},o.prototype.and=function(v){return this.length>v.length?this.clone().iand(v):v.clone().iand(this)},o.prototype.uand=function(v){return this.length>v.length?this.clone().iuand(v):v.clone().iuand(this)},o.prototype.iuxor=function(v){var c,d;this.length>v.length?(c=this,d=v):(c=v,d=this);for(var p=0;p<d.length;p++)this.words[p]=c.words[p]^d.words[p];if(this!==c)for(;p<c.length;p++)this.words[p]=c.words[p];return this.length=c.length,this.strip()},o.prototype.ixor=function(v){return i((this.negative|v.negative)===0),this.iuxor(v)},o.prototype.xor=function(v){return this.length>v.length?this.clone().ixor(v):v.clone().ixor(this)},o.prototype.uxor=function(v){return this.length>v.length?this.clone().iuxor(v):v.clone().iuxor(this)},o.prototype.inotn=function(v){i(typeof v=="number"&&v>=0);var c=Math.ceil(v/26)|0,d=v%26;this._expand(c),d>0&&c--;for(var p=0;p<c;p++)this.words[p]=~this.words[p]&67108863;return d>0&&(this.words[p]=~this.words[p]&67108863>>26-d),this.strip()},o.prototype.notn=function(v){return this.clone().inotn(v)},o.prototype.setn=function(v,c){i(typeof v=="number"&&v>=0);var d=v/26|0,p=v%26;return this._expand(d+1),c?this.words[d]=this.words[d]|1<<p:this.words[d]=this.words[d]&~(1<<p),this.strip()},o.prototype.iadd=function(v){var c;if(this.negative!==0&&v.negative===0)return this.negative=0,c=this.isub(v),this.negative^=1,this._normSign();if(this.negative===0&&v.negative!==0)return v.negative=0,c=this.isub(v),v.negative=1,c._normSign();var d,p;this.length>v.length?(d=this,p=v):(d=v,p=this);for(var w=0,x=0;x<p.length;x++)c=(d.words[x]|0)+(p.words[x]|0)+w,this.words[x]=c&67108863,w=c>>>26;for(;w!==0&&x<d.length;x++)c=(d.words[x]|0)+w,this.words[x]=c&67108863,w=c>>>26;if(this.length=d.length,w!==0)this.words[this.length]=w,this.length++;else if(d!==this)for(;x<d.length;x++)this.words[x]=d.words[x];return this},o.prototype.add=function(v){var c;return v.negative!==0&&this.negative===0?(v.negative=0,c=this.sub(v),v.negative^=1,c):v.negative===0&&this.negative!==0?(this.negative=0,c=v.sub(this),this.negative=1,c):this.length>v.length?this.clone().iadd(v):v.clone().iadd(this)},o.prototype.isub=function(v){if(v.negative!==0){v.negative=0;var c=this.iadd(v);return v.negative=1,c._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(v),this.negative=1,this._normSign();var d=this.cmp(v);if(d===0)return this.negative=0,this.length=1,this.words[0]=0,this;var p,w;d>0?(p=this,w=v):(p=v,w=this);for(var x=0,E=0;E<w.length;E++)c=(p.words[E]|0)-(w.words[E]|0)+x,x=c>>26,this.words[E]=c&67108863;for(;x!==0&&E<p.length;E++)c=(p.words[E]|0)+x,x=c>>26,this.words[E]=c&67108863;if(x===0&&E<p.length&&p!==this)for(;E<p.length;E++)this.words[E]=p.words[E];return this.length=Math.max(this.length,E),p!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(v){return this.clone().isub(v)};function L(B,v,c){c.negative=v.negative^B.negative;var d=B.length+v.length|0;c.length=d,d=d-1|0;var p=B.words[0]|0,w=v.words[0]|0,x=p*w,E=x&67108863,A=x/67108864|0;c.words[0]=E;for(var u=1;u<d;u++){for(var l=A>>>26,R=A&67108863,X=Math.min(u,v.length-1),ee=Math.max(0,u-B.length+1);ee<=X;ee++){var M=u-ee|0;p=B.words[M]|0,w=v.words[ee]|0,x=p*w+R,l+=x/67108864|0,R=x&67108863}c.words[u]=R|0,A=l|0}return A!==0?c.words[u]=A|0:c.length--,c.strip()}var j=function(v,c,d){var p=v.words,w=c.words,x=d.words,E=0,A,u,l,R=p[0]|0,X=R&8191,ee=R>>>13,M=p[1]|0,J=M&8191,T=M>>>13,z=p[2]|0,$=z&8191,b=z>>>13,k=p[3]|0,W=k&8191,ne=k>>>13,se=p[4]|0,ge=se&8191,ve=se>>>13,Oe=p[5]|0,nt=Oe&8191,Ee=Oe>>>13,Ve=p[6]|0,Le=Ve&8191,_e=Ve>>>13,Fe=p[7]|0,Ge=Fe&8191,me=Fe>>>13,je=p[8]|0,De=je&8191,we=je>>>13,Qe=p[9]|0,ze=Qe&8191,Se=Qe>>>13,ot=w[0]|0,ft=ot&8191,qe=ot>>>13,ct=w[1]|0,ht=ct&8191,ke=ct>>>13,wt=w[2]|0,ut=wt&8191,$e=wt>>>13,At=w[3]|0,Et=At&8191,Ae=At>>>13,He=w[4]|0,Ye=He&8191,Me=He>>>13,Je=w[5]|0,Ke=Je&8191,Pe=Je>>>13,st=w[6]|0,We=st&8191,Re=st>>>13,Xe=w[7]|0,et=Xe&8191,xe=Xe>>>13,Ue=w[8]|0,at=Ue&8191,Ce=Ue>>>13,Nt=w[9]|0,Tt=Nt&8191,tt=Nt>>>13;d.negative=v.negative^c.negative,d.length=19,A=Math.imul(X,ft),u=Math.imul(X,qe),u=u+Math.imul(ee,ft)|0,l=Math.imul(ee,qe);var bt=(E+A|0)+((u&8191)<<13)|0;E=(l+(u>>>13)|0)+(bt>>>26)|0,bt&=67108863,A=Math.imul(J,ft),u=Math.imul(J,qe),u=u+Math.imul(T,ft)|0,l=Math.imul(T,qe),A=A+Math.imul(X,ht)|0,u=u+Math.imul(X,ke)|0,u=u+Math.imul(ee,ht)|0,l=l+Math.imul(ee,ke)|0;var Er=(E+A|0)+((u&8191)<<13)|0;E=(l+(u>>>13)|0)+(Er>>>26)|0,Er&=67108863,A=Math.imul($,ft),u=Math.imul($,qe),u=u+Math.imul(b,ft)|0,l=Math.imul(b,qe),A=A+Math.imul(J,ht)|0,u=u+Math.imul(J,ke)|0,u=u+Math.imul(T,ht)|0,l=l+Math.imul(T,ke)|0,A=A+Math.imul(X,ut)|0,u=u+Math.imul(X,$e)|0,u=u+Math.imul(ee,ut)|0,l=l+Math.imul(ee,$e)|0;var Ir=(E+A|0)+((u&8191)<<13)|0;E=(l+(u>>>13)|0)+(Ir>>>26)|0,Ir&=67108863,A=Math.imul(W,ft),u=Math.imul(W,qe),u=u+Math.imul(ne,ft)|0,l=Math.imul(ne,qe),A=A+Math.imul($,ht)|0,u=u+Math.imul($,ke)|0,u=u+Math.imul(b,ht)|0,l=l+Math.imul(b,ke)|0,A=A+Math.imul(J,ut)|0,u=u+Math.imul(J,$e)|0,u=u+Math.imul(T,ut)|0,l=l+Math.imul(T,$e)|0,A=A+Math.imul(X,Et)|0,u=u+Math.imul(X,Ae)|0,u=u+Math.imul(ee,Et)|0,l=l+Math.imul(ee,Ae)|0;var Sr=(E+A|0)+((u&8191)<<13)|0;E=(l+(u>>>13)|0)+(Sr>>>26)|0,Sr&=67108863,A=Math.imul(ge,ft),u=Math.imul(ge,qe),u=u+Math.imul(ve,ft)|0,l=Math.imul(ve,qe),A=A+Math.imul(W,ht)|0,u=u+Math.imul(W,ke)|0,u=u+Math.imul(ne,ht)|0,l=l+Math.imul(ne,ke)|0,A=A+Math.imul($,ut)|0,u=u+Math.imul($,$e)|0,u=u+Math.imul(b,ut)|0,l=l+Math.imul(b,$e)|0,A=A+Math.imul(J,Et)|0,u=u+Math.imul(J,Ae)|0,u=u+Math.imul(T,Et)|0,l=l+Math.imul(T,Ae)|0,A=A+Math.imul(X,Ye)|0,u=u+Math.imul(X,Me)|0,u=u+Math.imul(ee,Ye)|0,l=l+Math.imul(ee,Me)|0;var Pr=(E+A|0)+((u&8191)<<13)|0;E=(l+(u>>>13)|0)+(Pr>>>26)|0,Pr&=67108863,A=Math.imul(nt,ft),u=Math.imul(nt,qe),u=u+Math.imul(Ee,ft)|0,l=Math.imul(Ee,qe),A=A+Math.imul(ge,ht)|0,u=u+Math.imul(ge,ke)|0,u=u+Math.imul(ve,ht)|0,l=l+Math.imul(ve,ke)|0,A=A+Math.imul(W,ut)|0,u=u+Math.imul(W,$e)|0,u=u+Math.imul(ne,ut)|0,l=l+Math.imul(ne,$e)|0,A=A+Math.imul($,Et)|0,u=u+Math.imul($,Ae)|0,u=u+Math.imul(b,Et)|0,l=l+Math.imul(b,Ae)|0,A=A+Math.imul(J,Ye)|0,u=u+Math.imul(J,Me)|0,u=u+Math.imul(T,Ye)|0,l=l+Math.imul(T,Me)|0,A=A+Math.imul(X,Ke)|0,u=u+Math.imul(X,Pe)|0,u=u+Math.imul(ee,Ke)|0,l=l+Math.imul(ee,Pe)|0;var Rr=(E+A|0)+((u&8191)<<13)|0;E=(l+(u>>>13)|0)+(Rr>>>26)|0,Rr&=67108863,A=Math.imul(Le,ft),u=Math.imul(Le,qe),u=u+Math.imul(_e,ft)|0,l=Math.imul(_e,qe),A=A+Math.imul(nt,ht)|0,u=u+Math.imul(nt,ke)|0,u=u+Math.imul(Ee,ht)|0,l=l+Math.imul(Ee,ke)|0,A=A+Math.imul(ge,ut)|0,u=u+Math.imul(ge,$e)|0,u=u+Math.imul(ve,ut)|0,l=l+Math.imul(ve,$e)|0,A=A+Math.imul(W,Et)|0,u=u+Math.imul(W,Ae)|0,u=u+Math.imul(ne,Et)|0,l=l+Math.imul(ne,Ae)|0,A=A+Math.imul($,Ye)|0,u=u+Math.imul($,Me)|0,u=u+Math.imul(b,Ye)|0,l=l+Math.imul(b,Me)|0,A=A+Math.imul(J,Ke)|0,u=u+Math.imul(J,Pe)|0,u=u+Math.imul(T,Ke)|0,l=l+Math.imul(T,Pe)|0,A=A+Math.imul(X,We)|0,u=u+Math.imul(X,Re)|0,u=u+Math.imul(ee,We)|0,l=l+Math.imul(ee,Re)|0;var Yt=(E+A|0)+((u&8191)<<13)|0;E=(l+(u>>>13)|0)+(Yt>>>26)|0,Yt&=67108863,A=Math.imul(Ge,ft),u=Math.imul(Ge,qe),u=u+Math.imul(me,ft)|0,l=Math.imul(me,qe),A=A+Math.imul(Le,ht)|0,u=u+Math.imul(Le,ke)|0,u=u+Math.imul(_e,ht)|0,l=l+Math.imul(_e,ke)|0,A=A+Math.imul(nt,ut)|0,u=u+Math.imul(nt,$e)|0,u=u+Math.imul(Ee,ut)|0,l=l+Math.imul(Ee,$e)|0,A=A+Math.imul(ge,Et)|0,u=u+Math.imul(ge,Ae)|0,u=u+Math.imul(ve,Et)|0,l=l+Math.imul(ve,Ae)|0,A=A+Math.imul(W,Ye)|0,u=u+Math.imul(W,Me)|0,u=u+Math.imul(ne,Ye)|0,l=l+Math.imul(ne,Me)|0,A=A+Math.imul($,Ke)|0,u=u+Math.imul($,Pe)|0,u=u+Math.imul(b,Ke)|0,l=l+Math.imul(b,Pe)|0,A=A+Math.imul(J,We)|0,u=u+Math.imul(J,Re)|0,u=u+Math.imul(T,We)|0,l=l+Math.imul(T,Re)|0,A=A+Math.imul(X,et)|0,u=u+Math.imul(X,xe)|0,u=u+Math.imul(ee,et)|0,l=l+Math.imul(ee,xe)|0;var Hr=(E+A|0)+((u&8191)<<13)|0;E=(l+(u>>>13)|0)+(Hr>>>26)|0,Hr&=67108863,A=Math.imul(De,ft),u=Math.imul(De,qe),u=u+Math.imul(we,ft)|0,l=Math.imul(we,qe),A=A+Math.imul(Ge,ht)|0,u=u+Math.imul(Ge,ke)|0,u=u+Math.imul(me,ht)|0,l=l+Math.imul(me,ke)|0,A=A+Math.imul(Le,ut)|0,u=u+Math.imul(Le,$e)|0,u=u+Math.imul(_e,ut)|0,l=l+Math.imul(_e,$e)|0,A=A+Math.imul(nt,Et)|0,u=u+Math.imul(nt,Ae)|0,u=u+Math.imul(Ee,Et)|0,l=l+Math.imul(Ee,Ae)|0,A=A+Math.imul(ge,Ye)|0,u=u+Math.imul(ge,Me)|0,u=u+Math.imul(ve,Ye)|0,l=l+Math.imul(ve,Me)|0,A=A+Math.imul(W,Ke)|0,u=u+Math.imul(W,Pe)|0,u=u+Math.imul(ne,Ke)|0,l=l+Math.imul(ne,Pe)|0,A=A+Math.imul($,We)|0,u=u+Math.imul($,Re)|0,u=u+Math.imul(b,We)|0,l=l+Math.imul(b,Re)|0,A=A+Math.imul(J,et)|0,u=u+Math.imul(J,xe)|0,u=u+Math.imul(T,et)|0,l=l+Math.imul(T,xe)|0,A=A+Math.imul(X,at)|0,u=u+Math.imul(X,Ce)|0,u=u+Math.imul(ee,at)|0,l=l+Math.imul(ee,Ce)|0;var Bi=(E+A|0)+((u&8191)<<13)|0;E=(l+(u>>>13)|0)+(Bi>>>26)|0,Bi&=67108863,A=Math.imul(ze,ft),u=Math.imul(ze,qe),u=u+Math.imul(Se,ft)|0,l=Math.imul(Se,qe),A=A+Math.imul(De,ht)|0,u=u+Math.imul(De,ke)|0,u=u+Math.imul(we,ht)|0,l=l+Math.imul(we,ke)|0,A=A+Math.imul(Ge,ut)|0,u=u+Math.imul(Ge,$e)|0,u=u+Math.imul(me,ut)|0,l=l+Math.imul(me,$e)|0,A=A+Math.imul(Le,Et)|0,u=u+Math.imul(Le,Ae)|0,u=u+Math.imul(_e,Et)|0,l=l+Math.imul(_e,Ae)|0,A=A+Math.imul(nt,Ye)|0,u=u+Math.imul(nt,Me)|0,u=u+Math.imul(Ee,Ye)|0,l=l+Math.imul(Ee,Me)|0,A=A+Math.imul(ge,Ke)|0,u=u+Math.imul(ge,Pe)|0,u=u+Math.imul(ve,Ke)|0,l=l+Math.imul(ve,Pe)|0,A=A+Math.imul(W,We)|0,u=u+Math.imul(W,Re)|0,u=u+Math.imul(ne,We)|0,l=l+Math.imul(ne,Re)|0,A=A+Math.imul($,et)|0,u=u+Math.imul($,xe)|0,u=u+Math.imul(b,et)|0,l=l+Math.imul(b,xe)|0,A=A+Math.imul(J,at)|0,u=u+Math.imul(J,Ce)|0,u=u+Math.imul(T,at)|0,l=l+Math.imul(T,Ce)|0,A=A+Math.imul(X,Tt)|0,u=u+Math.imul(X,tt)|0,u=u+Math.imul(ee,Tt)|0,l=l+Math.imul(ee,tt)|0;var Kr=(E+A|0)+((u&8191)<<13)|0;E=(l+(u>>>13)|0)+(Kr>>>26)|0,Kr&=67108863,A=Math.imul(ze,ht),u=Math.imul(ze,ke),u=u+Math.imul(Se,ht)|0,l=Math.imul(Se,ke),A=A+Math.imul(De,ut)|0,u=u+Math.imul(De,$e)|0,u=u+Math.imul(we,ut)|0,l=l+Math.imul(we,$e)|0,A=A+Math.imul(Ge,Et)|0,u=u+Math.imul(Ge,Ae)|0,u=u+Math.imul(me,Et)|0,l=l+Math.imul(me,Ae)|0,A=A+Math.imul(Le,Ye)|0,u=u+Math.imul(Le,Me)|0,u=u+Math.imul(_e,Ye)|0,l=l+Math.imul(_e,Me)|0,A=A+Math.imul(nt,Ke)|0,u=u+Math.imul(nt,Pe)|0,u=u+Math.imul(Ee,Ke)|0,l=l+Math.imul(Ee,Pe)|0,A=A+Math.imul(ge,We)|0,u=u+Math.imul(ge,Re)|0,u=u+Math.imul(ve,We)|0,l=l+Math.imul(ve,Re)|0,A=A+Math.imul(W,et)|0,u=u+Math.imul(W,xe)|0,u=u+Math.imul(ne,et)|0,l=l+Math.imul(ne,xe)|0,A=A+Math.imul($,at)|0,u=u+Math.imul($,Ce)|0,u=u+Math.imul(b,at)|0,l=l+Math.imul(b,Ce)|0,A=A+Math.imul(J,Tt)|0,u=u+Math.imul(J,tt)|0,u=u+Math.imul(T,Tt)|0,l=l+Math.imul(T,tt)|0;var Li=(E+A|0)+((u&8191)<<13)|0;E=(l+(u>>>13)|0)+(Li>>>26)|0,Li&=67108863,A=Math.imul(ze,ut),u=Math.imul(ze,$e),u=u+Math.imul(Se,ut)|0,l=Math.imul(Se,$e),A=A+Math.imul(De,Et)|0,u=u+Math.imul(De,Ae)|0,u=u+Math.imul(we,Et)|0,l=l+Math.imul(we,Ae)|0,A=A+Math.imul(Ge,Ye)|0,u=u+Math.imul(Ge,Me)|0,u=u+Math.imul(me,Ye)|0,l=l+Math.imul(me,Me)|0,A=A+Math.imul(Le,Ke)|0,u=u+Math.imul(Le,Pe)|0,u=u+Math.imul(_e,Ke)|0,l=l+Math.imul(_e,Pe)|0,A=A+Math.imul(nt,We)|0,u=u+Math.imul(nt,Re)|0,u=u+Math.imul(Ee,We)|0,l=l+Math.imul(Ee,Re)|0,A=A+Math.imul(ge,et)|0,u=u+Math.imul(ge,xe)|0,u=u+Math.imul(ve,et)|0,l=l+Math.imul(ve,xe)|0,A=A+Math.imul(W,at)|0,u=u+Math.imul(W,Ce)|0,u=u+Math.imul(ne,at)|0,l=l+Math.imul(ne,Ce)|0,A=A+Math.imul($,Tt)|0,u=u+Math.imul($,tt)|0,u=u+Math.imul(b,Tt)|0,l=l+Math.imul(b,tt)|0;var zi=(E+A|0)+((u&8191)<<13)|0;E=(l+(u>>>13)|0)+(zi>>>26)|0,zi&=67108863,A=Math.imul(ze,Et),u=Math.imul(ze,Ae),u=u+Math.imul(Se,Et)|0,l=Math.imul(Se,Ae),A=A+Math.imul(De,Ye)|0,u=u+Math.imul(De,Me)|0,u=u+Math.imul(we,Ye)|0,l=l+Math.imul(we,Me)|0,A=A+Math.imul(Ge,Ke)|0,u=u+Math.imul(Ge,Pe)|0,u=u+Math.imul(me,Ke)|0,l=l+Math.imul(me,Pe)|0,A=A+Math.imul(Le,We)|0,u=u+Math.imul(Le,Re)|0,u=u+Math.imul(_e,We)|0,l=l+Math.imul(_e,Re)|0,A=A+Math.imul(nt,et)|0,u=u+Math.imul(nt,xe)|0,u=u+Math.imul(Ee,et)|0,l=l+Math.imul(Ee,xe)|0,A=A+Math.imul(ge,at)|0,u=u+Math.imul(ge,Ce)|0,u=u+Math.imul(ve,at)|0,l=l+Math.imul(ve,Ce)|0,A=A+Math.imul(W,Tt)|0,u=u+Math.imul(W,tt)|0,u=u+Math.imul(ne,Tt)|0,l=l+Math.imul(ne,tt)|0;var Vr=(E+A|0)+((u&8191)<<13)|0;E=(l+(u>>>13)|0)+(Vr>>>26)|0,Vr&=67108863,A=Math.imul(ze,Ye),u=Math.imul(ze,Me),u=u+Math.imul(Se,Ye)|0,l=Math.imul(Se,Me),A=A+Math.imul(De,Ke)|0,u=u+Math.imul(De,Pe)|0,u=u+Math.imul(we,Ke)|0,l=l+Math.imul(we,Pe)|0,A=A+Math.imul(Ge,We)|0,u=u+Math.imul(Ge,Re)|0,u=u+Math.imul(me,We)|0,l=l+Math.imul(me,Re)|0,A=A+Math.imul(Le,et)|0,u=u+Math.imul(Le,xe)|0,u=u+Math.imul(_e,et)|0,l=l+Math.imul(_e,xe)|0,A=A+Math.imul(nt,at)|0,u=u+Math.imul(nt,Ce)|0,u=u+Math.imul(Ee,at)|0,l=l+Math.imul(Ee,Ce)|0,A=A+Math.imul(ge,Tt)|0,u=u+Math.imul(ge,tt)|0,u=u+Math.imul(ve,Tt)|0,l=l+Math.imul(ve,tt)|0;var vi=(E+A|0)+((u&8191)<<13)|0;E=(l+(u>>>13)|0)+(vi>>>26)|0,vi&=67108863,A=Math.imul(ze,Ke),u=Math.imul(ze,Pe),u=u+Math.imul(Se,Ke)|0,l=Math.imul(Se,Pe),A=A+Math.imul(De,We)|0,u=u+Math.imul(De,Re)|0,u=u+Math.imul(we,We)|0,l=l+Math.imul(we,Re)|0,A=A+Math.imul(Ge,et)|0,u=u+Math.imul(Ge,xe)|0,u=u+Math.imul(me,et)|0,l=l+Math.imul(me,xe)|0,A=A+Math.imul(Le,at)|0,u=u+Math.imul(Le,Ce)|0,u=u+Math.imul(_e,at)|0,l=l+Math.imul(_e,Ce)|0,A=A+Math.imul(nt,Tt)|0,u=u+Math.imul(nt,tt)|0,u=u+Math.imul(Ee,Tt)|0,l=l+Math.imul(Ee,tt)|0;var bi=(E+A|0)+((u&8191)<<13)|0;E=(l+(u>>>13)|0)+(bi>>>26)|0,bi&=67108863,A=Math.imul(ze,We),u=Math.imul(ze,Re),u=u+Math.imul(Se,We)|0,l=Math.imul(Se,Re),A=A+Math.imul(De,et)|0,u=u+Math.imul(De,xe)|0,u=u+Math.imul(we,et)|0,l=l+Math.imul(we,xe)|0,A=A+Math.imul(Ge,at)|0,u=u+Math.imul(Ge,Ce)|0,u=u+Math.imul(me,at)|0,l=l+Math.imul(me,Ce)|0,A=A+Math.imul(Le,Tt)|0,u=u+Math.imul(Le,tt)|0,u=u+Math.imul(_e,Tt)|0,l=l+Math.imul(_e,tt)|0;var cr=(E+A|0)+((u&8191)<<13)|0;E=(l+(u>>>13)|0)+(cr>>>26)|0,cr&=67108863,A=Math.imul(ze,et),u=Math.imul(ze,xe),u=u+Math.imul(Se,et)|0,l=Math.imul(Se,xe),A=A+Math.imul(De,at)|0,u=u+Math.imul(De,Ce)|0,u=u+Math.imul(we,at)|0,l=l+Math.imul(we,Ce)|0,A=A+Math.imul(Ge,Tt)|0,u=u+Math.imul(Ge,tt)|0,u=u+Math.imul(me,Tt)|0,l=l+Math.imul(me,tt)|0;var $i=(E+A|0)+((u&8191)<<13)|0;E=(l+(u>>>13)|0)+($i>>>26)|0,$i&=67108863,A=Math.imul(ze,at),u=Math.imul(ze,Ce),u=u+Math.imul(Se,at)|0,l=Math.imul(Se,Ce),A=A+Math.imul(De,Tt)|0,u=u+Math.imul(De,tt)|0,u=u+Math.imul(we,Tt)|0,l=l+Math.imul(we,tt)|0;var Ui=(E+A|0)+((u&8191)<<13)|0;E=(l+(u>>>13)|0)+(Ui>>>26)|0,Ui&=67108863,A=Math.imul(ze,Tt),u=Math.imul(ze,tt),u=u+Math.imul(Se,Tt)|0,l=Math.imul(Se,tt);var Fi=(E+A|0)+((u&8191)<<13)|0;return E=(l+(u>>>13)|0)+(Fi>>>26)|0,Fi&=67108863,x[0]=bt,x[1]=Er,x[2]=Ir,x[3]=Sr,x[4]=Pr,x[5]=Rr,x[6]=Yt,x[7]=Hr,x[8]=Bi,x[9]=Kr,x[10]=Li,x[11]=zi,x[12]=Vr,x[13]=vi,x[14]=bi,x[15]=cr,x[16]=$i,x[17]=Ui,x[18]=Fi,E!==0&&(x[19]=E,d.length++),d};Math.imul||(j=L);function G(B,v,c){c.negative=v.negative^B.negative,c.length=B.length+v.length;for(var d=0,p=0,w=0;w<c.length-1;w++){var x=p;p=0;for(var E=d&67108863,A=Math.min(w,v.length-1),u=Math.max(0,w-B.length+1);u<=A;u++){var l=w-u,R=B.words[l]|0,X=v.words[u]|0,ee=R*X,M=ee&67108863;x=x+(ee/67108864|0)|0,M=M+E|0,E=M&67108863,x=x+(M>>>26)|0,p+=x>>>26,x&=67108863}c.words[w]=E,d=x,x=p}return d!==0?c.words[w]=d:c.length--,c.strip()}function Q(B,v,c){var d=new Z;return d.mulp(B,v,c)}o.prototype.mulTo=function(v,c){var d,p=this.length+v.length;return this.length===10&&v.length===10?d=j(this,v,c):p<63?d=L(this,v,c):p<1024?d=G(this,v,c):d=Q(this,v,c),d};function Z(B,v){this.x=B,this.y=v}Z.prototype.makeRBT=function(v){for(var c=new Array(v),d=o.prototype._countBits(v)-1,p=0;p<v;p++)c[p]=this.revBin(p,d,v);return c},Z.prototype.revBin=function(v,c,d){if(v===0||v===d-1)return v;for(var p=0,w=0;w<c;w++)p|=(v&1)<<c-w-1,v>>=1;return p},Z.prototype.permute=function(v,c,d,p,w,x){for(var E=0;E<x;E++)p[E]=c[v[E]],w[E]=d[v[E]]},Z.prototype.transform=function(v,c,d,p,w,x){this.permute(x,v,c,d,p,w);for(var E=1;E<w;E<<=1)for(var A=E<<1,u=Math.cos(2*Math.PI/A),l=Math.sin(2*Math.PI/A),R=0;R<w;R+=A)for(var X=u,ee=l,M=0;M<E;M++){var J=d[R+M],T=p[R+M],z=d[R+M+E],$=p[R+M+E],b=X*z-ee*$;$=X*$+ee*z,z=b,d[R+M]=J+z,p[R+M]=T+$,d[R+M+E]=J-z,p[R+M+E]=T-$,M!==A&&(b=u*X-l*ee,ee=u*ee+l*X,X=b)}},Z.prototype.guessLen13b=function(v,c){var d=Math.max(c,v)|1,p=d&1,w=0;for(d=d/2|0;d;d=d>>>1)w++;return 1<<w+1+p},Z.prototype.conjugate=function(v,c,d){if(!(d<=1))for(var p=0;p<d/2;p++){var w=v[p];v[p]=v[d-p-1],v[d-p-1]=w,w=c[p],c[p]=-c[d-p-1],c[d-p-1]=-w}},Z.prototype.normalize13b=function(v,c){for(var d=0,p=0;p<c/2;p++){var w=Math.round(v[2*p+1]/c)*8192+Math.round(v[2*p]/c)+d;v[p]=w&67108863,w<67108864?d=0:d=w/67108864|0}return v},Z.prototype.convert13b=function(v,c,d,p){for(var w=0,x=0;x<c;x++)w=w+(v[x]|0),d[2*x]=w&8191,w=w>>>13,d[2*x+1]=w&8191,w=w>>>13;for(x=2*c;x<p;++x)d[x]=0;i(w===0),i((w&-8192)===0)},Z.prototype.stub=function(v){for(var c=new Array(v),d=0;d<v;d++)c[d]=0;return c},Z.prototype.mulp=function(v,c,d){var p=2*this.guessLen13b(v.length,c.length),w=this.makeRBT(p),x=this.stub(p),E=new Array(p),A=new Array(p),u=new Array(p),l=new Array(p),R=new Array(p),X=new Array(p),ee=d.words;ee.length=p,this.convert13b(v.words,v.length,E,p),this.convert13b(c.words,c.length,l,p),this.transform(E,x,A,u,p,w),this.transform(l,x,R,X,p,w);for(var M=0;M<p;M++){var J=A[M]*R[M]-u[M]*X[M];u[M]=A[M]*X[M]+u[M]*R[M],A[M]=J}return this.conjugate(A,u,p),this.transform(A,u,ee,x,p,w),this.conjugate(ee,x,p),this.normalize13b(ee,p),d.negative=v.negative^c.negative,d.length=v.length+c.length,d.strip()},o.prototype.mul=function(v){var c=new o(null);return c.words=new Array(this.length+v.length),this.mulTo(v,c)},o.prototype.mulf=function(v){var c=new o(null);return c.words=new Array(this.length+v.length),Q(this,v,c)},o.prototype.imul=function(v){return this.clone().mulTo(v,this)},o.prototype.imuln=function(v){i(typeof v=="number"),i(v<67108864);for(var c=0,d=0;d<this.length;d++){var p=(this.words[d]|0)*v,w=(p&67108863)+(c&67108863);c>>=26,c+=p/67108864|0,c+=w>>>26,this.words[d]=w&67108863}return c!==0&&(this.words[d]=c,this.length++),this},o.prototype.muln=function(v){return this.clone().imuln(v)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(v){var c=O(v);if(c.length===0)return new o(1);for(var d=this,p=0;p<c.length&&c[p]===0;p++,d=d.sqr());if(++p<c.length)for(var w=d.sqr();p<c.length;p++,w=w.sqr())c[p]!==0&&(d=d.mul(w));return d},o.prototype.iushln=function(v){i(typeof v=="number"&&v>=0);var c=v%26,d=(v-c)/26,p=67108863>>>26-c<<26-c,w;if(c!==0){var x=0;for(w=0;w<this.length;w++){var E=this.words[w]&p,A=(this.words[w]|0)-E<<c;this.words[w]=A|x,x=E>>>26-c}x&&(this.words[w]=x,this.length++)}if(d!==0){for(w=this.length-1;w>=0;w--)this.words[w+d]=this.words[w];for(w=0;w<d;w++)this.words[w]=0;this.length+=d}return this.strip()},o.prototype.ishln=function(v){return i(this.negative===0),this.iushln(v)},o.prototype.iushrn=function(v,c,d){i(typeof v=="number"&&v>=0);var p;c?p=(c-c%26)/26:p=0;var w=v%26,x=Math.min((v-w)/26,this.length),E=67108863^67108863>>>w<<w,A=d;if(p-=x,p=Math.max(0,p),A){for(var u=0;u<x;u++)A.words[u]=this.words[u];A.length=x}if(x!==0)if(this.length>x)for(this.length-=x,u=0;u<this.length;u++)this.words[u]=this.words[u+x];else this.words[0]=0,this.length=1;var l=0;for(u=this.length-1;u>=0&&(l!==0||u>=p);u--){var R=this.words[u]|0;this.words[u]=l<<26-w|R>>>w,l=R&E}return A&&l!==0&&(A.words[A.length++]=l),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(v,c,d){return i(this.negative===0),this.iushrn(v,c,d)},o.prototype.shln=function(v){return this.clone().ishln(v)},o.prototype.ushln=function(v){return this.clone().iushln(v)},o.prototype.shrn=function(v){return this.clone().ishrn(v)},o.prototype.ushrn=function(v){return this.clone().iushrn(v)},o.prototype.testn=function(v){i(typeof v=="number"&&v>=0);var c=v%26,d=(v-c)/26,p=1<<c;if(this.length<=d)return!1;var w=this.words[d];return!!(w&p)},o.prototype.imaskn=function(v){i(typeof v=="number"&&v>=0);var c=v%26,d=(v-c)/26;if(i(this.negative===0,"imaskn works only with positive numbers"),this.length<=d)return this;if(c!==0&&d++,this.length=Math.min(d,this.length),c!==0){var p=67108863^67108863>>>c<<c;this.words[this.length-1]&=p}return this.strip()},o.prototype.maskn=function(v){return this.clone().imaskn(v)},o.prototype.iaddn=function(v){return i(typeof v=="number"),i(v<67108864),v<0?this.isubn(-v):this.negative!==0?this.length===1&&(this.words[0]|0)<v?(this.words[0]=v-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(v),this.negative=1,this):this._iaddn(v)},o.prototype._iaddn=function(v){this.words[0]+=v;for(var c=0;c<this.length&&this.words[c]>=67108864;c++)this.words[c]-=67108864,c===this.length-1?this.words[c+1]=1:this.words[c+1]++;return this.length=Math.max(this.length,c+1),this},o.prototype.isubn=function(v){if(i(typeof v=="number"),i(v<67108864),v<0)return this.iaddn(-v);if(this.negative!==0)return this.negative=0,this.iaddn(v),this.negative=1,this;if(this.words[0]-=v,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var c=0;c<this.length&&this.words[c]<0;c++)this.words[c]+=67108864,this.words[c+1]-=1;return this.strip()},o.prototype.addn=function(v){return this.clone().iaddn(v)},o.prototype.subn=function(v){return this.clone().isubn(v)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(v,c,d){var p=v.length+d,w;this._expand(p);var x,E=0;for(w=0;w<v.length;w++){x=(this.words[w+d]|0)+E;var A=(v.words[w]|0)*c;x-=A&67108863,E=(x>>26)-(A/67108864|0),this.words[w+d]=x&67108863}for(;w<this.length-d;w++)x=(this.words[w+d]|0)+E,E=x>>26,this.words[w+d]=x&67108863;if(E===0)return this.strip();for(i(E===-1),E=0,w=0;w<this.length;w++)x=-(this.words[w]|0)+E,E=x>>26,this.words[w]=x&67108863;return this.negative=1,this.strip()},o.prototype._wordDiv=function(v,c){var d=this.length-v.length,p=this.clone(),w=v,x=w.words[w.length-1]|0,E=this._countBits(x);d=26-E,d!==0&&(w=w.ushln(d),p.iushln(d),x=w.words[w.length-1]|0);var A=p.length-w.length,u;if(c!=="mod"){u=new o(null),u.length=A+1,u.words=new Array(u.length);for(var l=0;l<u.length;l++)u.words[l]=0}var R=p.clone()._ishlnsubmul(w,1,A);R.negative===0&&(p=R,u&&(u.words[A]=1));for(var X=A-1;X>=0;X--){var ee=(p.words[w.length+X]|0)*67108864+(p.words[w.length+X-1]|0);for(ee=Math.min(ee/x|0,67108863),p._ishlnsubmul(w,ee,X);p.negative!==0;)ee--,p.negative=0,p._ishlnsubmul(w,1,X),p.isZero()||(p.negative^=1);u&&(u.words[X]=ee)}return u&&u.strip(),p.strip(),c!=="div"&&d!==0&&p.iushrn(d),{div:u||null,mod:p}},o.prototype.divmod=function(v,c,d){if(i(!v.isZero()),this.isZero())return{div:new o(0),mod:new o(0)};var p,w,x;return this.negative!==0&&v.negative===0?(x=this.neg().divmod(v,c),c!=="mod"&&(p=x.div.neg()),c!=="div"&&(w=x.mod.neg(),d&&w.negative!==0&&w.iadd(v)),{div:p,mod:w}):this.negative===0&&v.negative!==0?(x=this.divmod(v.neg(),c),c!=="mod"&&(p=x.div.neg()),{div:p,mod:x.mod}):this.negative&v.negative?(x=this.neg().divmod(v.neg(),c),c!=="div"&&(w=x.mod.neg(),d&&w.negative!==0&&w.isub(v)),{div:x.div,mod:w}):v.length>this.length||this.cmp(v)<0?{div:new o(0),mod:this}:v.length===1?c==="div"?{div:this.divn(v.words[0]),mod:null}:c==="mod"?{div:null,mod:new o(this.modn(v.words[0]))}:{div:this.divn(v.words[0]),mod:new o(this.modn(v.words[0]))}:this._wordDiv(v,c)},o.prototype.div=function(v){return this.divmod(v,"div",!1).div},o.prototype.mod=function(v){return this.divmod(v,"mod",!1).mod},o.prototype.umod=function(v){return this.divmod(v,"mod",!0).mod},o.prototype.divRound=function(v){var c=this.divmod(v);if(c.mod.isZero())return c.div;var d=c.div.negative!==0?c.mod.isub(v):c.mod,p=v.ushrn(1),w=v.andln(1),x=d.cmp(p);return x<0||w===1&&x===0?c.div:c.div.negative!==0?c.div.isubn(1):c.div.iaddn(1)},o.prototype.modn=function(v){i(v<=67108863);for(var c=(1<<26)%v,d=0,p=this.length-1;p>=0;p--)d=(c*d+(this.words[p]|0))%v;return d},o.prototype.idivn=function(v){i(v<=67108863);for(var c=0,d=this.length-1;d>=0;d--){var p=(this.words[d]|0)+c*67108864;this.words[d]=p/v|0,c=p%v}return this.strip()},o.prototype.divn=function(v){return this.clone().idivn(v)},o.prototype.egcd=function(v){i(v.negative===0),i(!v.isZero());var c=this,d=v.clone();c.negative!==0?c=c.umod(v):c=c.clone();for(var p=new o(1),w=new o(0),x=new o(0),E=new o(1),A=0;c.isEven()&&d.isEven();)c.iushrn(1),d.iushrn(1),++A;for(var u=d.clone(),l=c.clone();!c.isZero();){for(var R=0,X=1;!(c.words[0]&X)&&R<26;++R,X<<=1);if(R>0)for(c.iushrn(R);R-- >0;)(p.isOdd()||w.isOdd())&&(p.iadd(u),w.isub(l)),p.iushrn(1),w.iushrn(1);for(var ee=0,M=1;!(d.words[0]&M)&&ee<26;++ee,M<<=1);if(ee>0)for(d.iushrn(ee);ee-- >0;)(x.isOdd()||E.isOdd())&&(x.iadd(u),E.isub(l)),x.iushrn(1),E.iushrn(1);c.cmp(d)>=0?(c.isub(d),p.isub(x),w.isub(E)):(d.isub(c),x.isub(p),E.isub(w))}return{a:x,b:E,gcd:d.iushln(A)}},o.prototype._invmp=function(v){i(v.negative===0),i(!v.isZero());var c=this,d=v.clone();c.negative!==0?c=c.umod(v):c=c.clone();for(var p=new o(1),w=new o(0),x=d.clone();c.cmpn(1)>0&&d.cmpn(1)>0;){for(var E=0,A=1;!(c.words[0]&A)&&E<26;++E,A<<=1);if(E>0)for(c.iushrn(E);E-- >0;)p.isOdd()&&p.iadd(x),p.iushrn(1);for(var u=0,l=1;!(d.words[0]&l)&&u<26;++u,l<<=1);if(u>0)for(d.iushrn(u);u-- >0;)w.isOdd()&&w.iadd(x),w.iushrn(1);c.cmp(d)>=0?(c.isub(d),p.isub(w)):(d.isub(c),w.isub(p))}var R;return c.cmpn(1)===0?R=p:R=w,R.cmpn(0)<0&&R.iadd(v),R},o.prototype.gcd=function(v){if(this.isZero())return v.abs();if(v.isZero())return this.abs();var c=this.clone(),d=v.clone();c.negative=0,d.negative=0;for(var p=0;c.isEven()&&d.isEven();p++)c.iushrn(1),d.iushrn(1);do{for(;c.isEven();)c.iushrn(1);for(;d.isEven();)d.iushrn(1);var w=c.cmp(d);if(w<0){var x=c;c=d,d=x}else if(w===0||d.cmpn(1)===0)break;c.isub(d)}while(!0);return d.iushln(p)},o.prototype.invm=function(v){return this.egcd(v).a.umod(v)},o.prototype.isEven=function(){return(this.words[0]&1)===0},o.prototype.isOdd=function(){return(this.words[0]&1)===1},o.prototype.andln=function(v){return this.words[0]&v},o.prototype.bincn=function(v){i(typeof v=="number");var c=v%26,d=(v-c)/26,p=1<<c;if(this.length<=d)return this._expand(d+1),this.words[d]|=p,this;for(var w=p,x=d;w!==0&&x<this.length;x++){var E=this.words[x]|0;E+=w,w=E>>>26,E&=67108863,this.words[x]=E}return w!==0&&(this.words[x]=w,this.length++),this},o.prototype.isZero=function(){return this.length===1&&this.words[0]===0},o.prototype.cmpn=function(v){var c=v<0;if(this.negative!==0&&!c)return-1;if(this.negative===0&&c)return 1;this.strip();var d;if(this.length>1)d=1;else{c&&(v=-v),i(v<=67108863,"Number is too big");var p=this.words[0]|0;d=p===v?0:p<v?-1:1}return this.negative!==0?-d|0:d},o.prototype.cmp=function(v){if(this.negative!==0&&v.negative===0)return-1;if(this.negative===0&&v.negative!==0)return 1;var c=this.ucmp(v);return this.negative!==0?-c|0:c},o.prototype.ucmp=function(v){if(this.length>v.length)return 1;if(this.length<v.length)return-1;for(var c=0,d=this.length-1;d>=0;d--){var p=this.words[d]|0,w=v.words[d]|0;if(p!==w){p<w?c=-1:p>w&&(c=1);break}}return c},o.prototype.gtn=function(v){return this.cmpn(v)===1},o.prototype.gt=function(v){return this.cmp(v)===1},o.prototype.gten=function(v){return this.cmpn(v)>=0},o.prototype.gte=function(v){return this.cmp(v)>=0},o.prototype.ltn=function(v){return this.cmpn(v)===-1},o.prototype.lt=function(v){return this.cmp(v)===-1},o.prototype.lten=function(v){return this.cmpn(v)<=0},o.prototype.lte=function(v){return this.cmp(v)<=0},o.prototype.eqn=function(v){return this.cmpn(v)===0},o.prototype.eq=function(v){return this.cmp(v)===0},o.red=function(v){return new Te(v)},o.prototype.toRed=function(v){return i(!this.red,"Already a number in reduction context"),i(this.negative===0,"red works only with positives"),v.convertTo(this)._forceRed(v)},o.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(v){return this.red=v,this},o.prototype.forceRed=function(v){return i(!this.red,"Already a number in reduction context"),this._forceRed(v)},o.prototype.redAdd=function(v){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,v)},o.prototype.redIAdd=function(v){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,v)},o.prototype.redSub=function(v){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,v)},o.prototype.redISub=function(v){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,v)},o.prototype.redShl=function(v){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,v)},o.prototype.redMul=function(v){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,v),this.red.mul(this,v)},o.prototype.redIMul=function(v){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,v),this.red.imul(this,v)},o.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(v){return i(this.red&&!v.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,v)};var de={k256:null,p224:null,p192:null,p25519:null};function ce(B,v){this.name=B,this.p=new o(v,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}ce.prototype._tmp=function(){var v=new o(null);return v.words=new Array(Math.ceil(this.n/13)),v},ce.prototype.ireduce=function(v){var c=v,d;do this.split(c,this.tmp),c=this.imulK(c),c=c.iadd(this.tmp),d=c.bitLength();while(d>this.n);var p=d<this.n?-1:c.ucmp(this.p);return p===0?(c.words[0]=0,c.length=1):p>0?c.isub(this.p):c.strip!==void 0?c.strip():c._strip(),c},ce.prototype.split=function(v,c){v.iushrn(this.n,0,c)},ce.prototype.imulK=function(v){return v.imul(this.k)};function ae(){ce.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}s(ae,ce),ae.prototype.split=function(v,c){for(var d=4194303,p=Math.min(v.length,9),w=0;w<p;w++)c.words[w]=v.words[w];if(c.length=p,v.length<=9){v.words[0]=0,v.length=1;return}var x=v.words[9];for(c.words[c.length++]=x&d,w=10;w<v.length;w++){var E=v.words[w]|0;v.words[w-10]=(E&d)<<4|x>>>22,x=E}x>>>=22,v.words[w-10]=x,x===0&&v.length>10?v.length-=10:v.length-=9},ae.prototype.imulK=function(v){v.words[v.length]=0,v.words[v.length+1]=0,v.length+=2;for(var c=0,d=0;d<v.length;d++){var p=v.words[d]|0;c+=p*977,v.words[d]=c&67108863,c=p*64+(c/67108864|0)}return v.words[v.length-1]===0&&(v.length--,v.words[v.length-1]===0&&v.length--),v};function he(){ce.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}s(he,ce);function ue(){ce.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}s(ue,ce);function le(){ce.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}s(le,ce),le.prototype.imulK=function(v){for(var c=0,d=0;d<v.length;d++){var p=(v.words[d]|0)*19+c,w=p&67108863;p>>>=26,v.words[d]=w,c=p}return c!==0&&(v.words[v.length++]=c),v},o._prime=function(v){if(de[v])return de[v];var c;if(v==="k256")c=new ae;else if(v==="p224")c=new he;else if(v==="p192")c=new ue;else if(v==="p25519")c=new le;else throw new Error("Unknown prime "+v);return de[v]=c,c};function Te(B){if(typeof B=="string"){var v=o._prime(B);this.m=v.p,this.prime=v}else i(B.gtn(1),"modulus must be greater than 1"),this.m=B,this.prime=null}Te.prototype._verify1=function(v){i(v.negative===0,"red works only with positives"),i(v.red,"red works only with red numbers")},Te.prototype._verify2=function(v,c){i((v.negative|c.negative)===0,"red works only with positives"),i(v.red&&v.red===c.red,"red works only with red numbers")},Te.prototype.imod=function(v){return this.prime?this.prime.ireduce(v)._forceRed(this):v.umod(this.m)._forceRed(this)},Te.prototype.neg=function(v){return v.isZero()?v.clone():this.m.sub(v)._forceRed(this)},Te.prototype.add=function(v,c){this._verify2(v,c);var d=v.add(c);return d.cmp(this.m)>=0&&d.isub(this.m),d._forceRed(this)},Te.prototype.iadd=function(v,c){this._verify2(v,c);var d=v.iadd(c);return d.cmp(this.m)>=0&&d.isub(this.m),d},Te.prototype.sub=function(v,c){this._verify2(v,c);var d=v.sub(c);return d.cmpn(0)<0&&d.iadd(this.m),d._forceRed(this)},Te.prototype.isub=function(v,c){this._verify2(v,c);var d=v.isub(c);return d.cmpn(0)<0&&d.iadd(this.m),d},Te.prototype.shl=function(v,c){return this._verify1(v),this.imod(v.ushln(c))},Te.prototype.imul=function(v,c){return this._verify2(v,c),this.imod(v.imul(c))},Te.prototype.mul=function(v,c){return this._verify2(v,c),this.imod(v.mul(c))},Te.prototype.isqr=function(v){return this.imul(v,v.clone())},Te.prototype.sqr=function(v){return this.mul(v,v)},Te.prototype.sqrt=function(v){if(v.isZero())return v.clone();var c=this.m.andln(3);if(i(c%2===1),c===3){var d=this.m.add(new o(1)).iushrn(2);return this.pow(v,d)}for(var p=this.m.subn(1),w=0;!p.isZero()&&p.andln(1)===0;)w++,p.iushrn(1);i(!p.isZero());var x=new o(1).toRed(this),E=x.redNeg(),A=this.m.subn(1).iushrn(1),u=this.m.bitLength();for(u=new o(2*u*u).toRed(this);this.pow(u,A).cmp(E)!==0;)u.redIAdd(E);for(var l=this.pow(u,p),R=this.pow(v,p.addn(1).iushrn(1)),X=this.pow(v,p),ee=w;X.cmp(x)!==0;){for(var M=X,J=0;M.cmp(x)!==0;J++)M=M.redSqr();i(J<ee);var T=this.pow(l,new o(1).iushln(ee-J-1));R=R.redMul(T),l=T.redSqr(),X=X.redMul(l),ee=J}return R},Te.prototype.invm=function(v){var c=v._invmp(this.m);return c.negative!==0?(c.negative=0,this.imod(c).redNeg()):this.imod(c)},Te.prototype.pow=function(v,c){if(c.isZero())return new o(1).toRed(this);if(c.cmpn(1)===0)return v.clone();var d=4,p=new Array(1<<d);p[0]=new o(1).toRed(this),p[1]=v;for(var w=2;w<p.length;w++)p[w]=this.mul(p[w-1],v);var x=p[0],E=0,A=0,u=c.bitLength()%26;for(u===0&&(u=26),w=c.length-1;w>=0;w--){for(var l=c.words[w],R=u-1;R>=0;R--){var X=l>>R&1;if(x!==p[0]&&(x=this.sqr(x)),X===0&&E===0){A=0;continue}E<<=1,E|=X,A++,!(A!==d&&(w!==0||R!==0))&&(x=this.mul(x,p[E]),A=0,E=0)}u=26}return x},Te.prototype.convertTo=function(v){var c=v.umod(this.m);return c===v?c.clone():c},Te.prototype.convertFrom=function(v){var c=v.clone();return c.red=null,c},o.mont=function(v){return new lt(v)};function lt(B){Te.call(this,B),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}s(lt,Te),lt.prototype.convertTo=function(v){return this.imod(v.ushln(this.shift))},lt.prototype.convertFrom=function(v){var c=this.imod(v.mul(this.rinv));return c.red=null,c},lt.prototype.imul=function(v,c){if(v.isZero()||c.isZero())return v.words[0]=0,v.length=1,v;var d=v.imul(c),p=d.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),w=d.isub(p).iushrn(this.shift),x=w;return w.cmp(this.m)>=0?x=w.isub(this.m):w.cmpn(0)<0&&(x=w.iadd(this.m)),x._forceRed(this)},lt.prototype.mul=function(v,c){if(v.isZero()||c.isZero())return new o(0)._forceRed(this);var d=v.mul(c),p=d.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),w=d.isub(p).iushrn(this.shift),x=w;return w.cmp(this.m)>=0?x=w.isub(this.m):w.cmpn(0)<0&&(x=w.iadd(this.m)),x._forceRed(this)},lt.prototype.invm=function(v){var c=this.imod(v._invmp(this.m).mul(this.r2));return c._forceRed(this)}})(r,ao)})(zu);var Gn=zu.exports;(function(r){var e=r,t=Gn,i=Iy,s=Sy;e.assert=i,e.toArray=s.toArray,e.zero2=s.zero2,e.toHex=s.toHex,e.encode=s.encode;function o(I,P,q){var O=new Array(Math.max(I.bitLength(),q)+1),L;for(L=0;L<O.length;L+=1)O[L]=0;var j=1<<P+1,G=I.clone();for(L=0;L<O.length;L++){var Q,Z=G.andln(j-1);G.isOdd()?(Z>(j>>1)-1?Q=(j>>1)-Z:Q=Z,G.isubn(Q)):Q=0,O[L]=Q,G.iushrn(1)}return O}e.getNAF=o;function h(I,P){var q=[[],[]];I=I.clone(),P=P.clone();for(var O=0,L=0,j;I.cmpn(-O)>0||P.cmpn(-L)>0;){var G=I.andln(3)+O&3,Q=P.andln(3)+L&3;G===3&&(G=-1),Q===3&&(Q=-1);var Z;G&1?(j=I.andln(7)+O&7,(j===3||j===5)&&Q===2?Z=-G:Z=G):Z=0,q[0].push(Z);var de;Q&1?(j=P.andln(7)+L&7,(j===3||j===5)&&G===2?de=-Q:de=Q):de=0,q[1].push(de),2*O===Z+1&&(O=1-O),2*L===de+1&&(L=1-L),I.iushrn(1),P.iushrn(1)}return q}e.getJSF=h;function g(I,P,q){var O="_"+P;I.prototype[P]=function(){return this[O]!==void 0?this[O]:this[O]=q.call(this)}}e.cachedProperty=g;function y(I){return typeof I=="string"?e.toArray(I,"hex"):I}e.parseBytes=y;function _(I){return new t(I,"hex","le")}e.intFromLE=_})(gi);var $u={},Es=Gn,Mo=gi,ef=Mo.getNAF,Iw=Mo.getJSF,tf=Mo.assert;function hs(r,e){this.type=r,this.p=new Es(e.p,16),this.red=e.prime?Es.red(e.prime):Es.mont(this.p),this.zero=new Es(0).toRed(this.red),this.one=new Es(1).toRed(this.red),this.two=new Es(2).toRed(this.red),this.n=e.n&&new Es(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var t=this.n&&this.p.div(this.n);!t||t.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var mf=hs;hs.prototype.point=function(){throw new Error("Not implemented")};hs.prototype.validate=function(){throw new Error("Not implemented")};hs.prototype._fixedNafMul=function(e,t){tf(e.precomputed);var i=e._getDoubles(),s=ef(t,1,this._bitLength),o=(1<<i.step+1)-(i.step%2===0?2:1);o/=3;var h=[],g,y;for(g=0;g<s.length;g+=i.step){y=0;for(var _=g+i.step-1;_>=g;_--)y=(y<<1)+s[_];h.push(y)}for(var I=this.jpoint(null,null,null),P=this.jpoint(null,null,null),q=o;q>0;q--){for(g=0;g<h.length;g++)y=h[g],y===q?P=P.mixedAdd(i.points[g]):y===-q&&(P=P.mixedAdd(i.points[g].neg()));I=I.add(P)}return I.toP()};hs.prototype._wnafMul=function(e,t){var i=4,s=e._getNAFPoints(i);i=s.wnd;for(var o=s.points,h=ef(t,i,this._bitLength),g=this.jpoint(null,null,null),y=h.length-1;y>=0;y--){for(var _=0;y>=0&&h[y]===0;y--)_++;if(y>=0&&_++,g=g.dblp(_),y<0)break;var I=h[y];tf(I!==0),e.type==="affine"?I>0?g=g.mixedAdd(o[I-1>>1]):g=g.mixedAdd(o[-I-1>>1].neg()):I>0?g=g.add(o[I-1>>1]):g=g.add(o[-I-1>>1].neg())}return e.type==="affine"?g.toP():g};hs.prototype._wnafMulAdd=function(e,t,i,s,o){var h=this._wnafT1,g=this._wnafT2,y=this._wnafT3,_=0,I,P,q;for(I=0;I<s;I++){q=t[I];var O=q._getNAFPoints(e);h[I]=O.wnd,g[I]=O.points}for(I=s-1;I>=1;I-=2){var L=I-1,j=I;if(h[L]!==1||h[j]!==1){y[L]=ef(i[L],h[L],this._bitLength),y[j]=ef(i[j],h[j],this._bitLength),_=Math.max(y[L].length,_),_=Math.max(y[j].length,_);continue}var G=[t[L],null,null,t[j]];t[L].y.cmp(t[j].y)===0?(G[1]=t[L].add(t[j]),G[2]=t[L].toJ().mixedAdd(t[j].neg())):t[L].y.cmp(t[j].y.redNeg())===0?(G[1]=t[L].toJ().mixedAdd(t[j]),G[2]=t[L].add(t[j].neg())):(G[1]=t[L].toJ().mixedAdd(t[j]),G[2]=t[L].toJ().mixedAdd(t[j].neg()));var Q=[-3,-1,-5,-7,0,7,5,1,3],Z=Iw(i[L],i[j]);for(_=Math.max(Z[0].length,_),y[L]=new Array(_),y[j]=new Array(_),P=0;P<_;P++){var de=Z[0][P]|0,ce=Z[1][P]|0;y[L][P]=Q[(de+1)*3+(ce+1)],y[j][P]=0,g[L]=G}}var ae=this.jpoint(null,null,null),he=this._wnafT4;for(I=_;I>=0;I--){for(var ue=0;I>=0;){var le=!0;for(P=0;P<s;P++)he[P]=y[P][I]|0,he[P]!==0&&(le=!1);if(!le)break;ue++,I--}if(I>=0&&ue++,ae=ae.dblp(ue),I<0)break;for(P=0;P<s;P++){var Te=he[P];Te!==0&&(Te>0?q=g[P][Te-1>>1]:Te<0&&(q=g[P][-Te-1>>1].neg()),q.type==="affine"?ae=ae.mixedAdd(q):ae=ae.add(q))}}for(I=0;I<s;I++)g[I]=null;return o?ae:ae.toP()};function Di(r,e){this.curve=r,this.type=e,this.precomputed=null}hs.BasePoint=Di;Di.prototype.eq=function(){throw new Error("Not implemented")};Di.prototype.validate=function(){return this.curve.validate(this)};hs.prototype.decodePoint=function(e,t){e=Mo.toArray(e,t);var i=this.p.byteLength();if((e[0]===4||e[0]===6||e[0]===7)&&e.length-1===2*i){e[0]===6?tf(e[e.length-1]%2===0):e[0]===7&&tf(e[e.length-1]%2===1);var s=this.point(e.slice(1,1+i),e.slice(1+i,1+2*i));return s}else if((e[0]===2||e[0]===3)&&e.length-1===i)return this.pointFromX(e.slice(1,1+i),e[0]===3);throw new Error("Unknown point format")};Di.prototype.encodeCompressed=function(e){return this.encode(e,!0)};Di.prototype._encode=function(e){var t=this.curve.p.byteLength(),i=this.getX().toArray("be",t);return e?[this.getY().isEven()?2:3].concat(i):[4].concat(i,this.getY().toArray("be",t))};Di.prototype.encode=function(e,t){return Mo.encode(this._encode(t),e)};Di.prototype.precompute=function(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this};Di.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return t?t.points.length>=Math.ceil((e.bitLength()+1)/t.step):!1};Di.prototype._getDoubles=function(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var i=[this],s=this,o=0;o<t;o+=e){for(var h=0;h<e;h++)s=s.dbl();i.push(s)}return{step:e,points:i}};Di.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],i=(1<<e)-1,s=i===1?null:this.dbl(),o=1;o<i;o++)t[o]=t[o-1].add(s);return{wnd:e,points:t}};Di.prototype._getBeta=function(){return null};Di.prototype.dblp=function(e){for(var t=this,i=0;i<e;i++)t=t.dbl();return t};var Sw=gi,er=Gn,Uu=Tu,wa=mf,Pw=Sw.assert;function ki(r){wa.call(this,"short",r),this.a=new er(r.a,16).toRed(this.red),this.b=new er(r.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(r),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}Uu(ki,wa);var Rw=ki;ki.prototype._getEndomorphism=function(e){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var t,i;if(e.beta)t=new er(e.beta,16).toRed(this.red);else{var s=this._getEndoRoots(this.p);t=s[0].cmp(s[1])<0?s[0]:s[1],t=t.toRed(this.red)}if(e.lambda)i=new er(e.lambda,16);else{var o=this._getEndoRoots(this.n);this.g.mul(o[0]).x.cmp(this.g.x.redMul(t))===0?i=o[0]:(i=o[1],Pw(this.g.mul(i).x.cmp(this.g.x.redMul(t))===0))}var h;return e.basis?h=e.basis.map(function(g){return{a:new er(g.a,16),b:new er(g.b,16)}}):h=this._getEndoBasis(i),{beta:t,lambda:i,basis:h}}};ki.prototype._getEndoRoots=function(e){var t=e===this.p?this.red:er.mont(e),i=new er(2).toRed(t).redInvm(),s=i.redNeg(),o=new er(3).toRed(t).redNeg().redSqrt().redMul(i),h=s.redAdd(o).fromRed(),g=s.redSub(o).fromRed();return[h,g]};ki.prototype._getEndoBasis=function(e){for(var t=this.n.ushrn(Math.floor(this.n.bitLength()/2)),i=e,s=this.n.clone(),o=new er(1),h=new er(0),g=new er(0),y=new er(1),_,I,P,q,O,L,j,G=0,Q,Z;i.cmpn(0)!==0;){var de=s.div(i);Q=s.sub(de.mul(i)),Z=g.sub(de.mul(o));var ce=y.sub(de.mul(h));if(!P&&Q.cmp(t)<0)_=j.neg(),I=o,P=Q.neg(),q=Z;else if(P&&++G===2)break;j=Q,s=i,i=Q,g=o,o=Z,y=h,h=ce}O=Q.neg(),L=Z;var ae=P.sqr().add(q.sqr()),he=O.sqr().add(L.sqr());return he.cmp(ae)>=0&&(O=_,L=I),P.negative&&(P=P.neg(),q=q.neg()),O.negative&&(O=O.neg(),L=L.neg()),[{a:P,b:q},{a:O,b:L}]};ki.prototype._endoSplit=function(e){var t=this.endo.basis,i=t[0],s=t[1],o=s.b.mul(e).divRound(this.n),h=i.b.neg().mul(e).divRound(this.n),g=o.mul(i.a),y=h.mul(s.a),_=o.mul(i.b),I=h.mul(s.b),P=e.sub(g).sub(y),q=_.add(I).neg();return{k1:P,k2:q}};ki.prototype.pointFromX=function(e,t){e=new er(e,16),e.red||(e=e.toRed(this.red));var i=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),s=i.redSqrt();if(s.redSqr().redSub(i).cmp(this.zero)!==0)throw new Error("invalid point");var o=s.fromRed().isOdd();return(t&&!o||!t&&o)&&(s=s.redNeg()),this.point(e,s)};ki.prototype.validate=function(e){if(e.inf)return!0;var t=e.x,i=e.y,s=this.a.redMul(t),o=t.redSqr().redMul(t).redIAdd(s).redIAdd(this.b);return i.redSqr().redISub(o).cmpn(0)===0};ki.prototype._endoWnafMulAdd=function(e,t,i){for(var s=this._endoWnafT1,o=this._endoWnafT2,h=0;h<e.length;h++){var g=this._endoSplit(t[h]),y=e[h],_=y._getBeta();g.k1.negative&&(g.k1.ineg(),y=y.neg(!0)),g.k2.negative&&(g.k2.ineg(),_=_.neg(!0)),s[h*2]=y,s[h*2+1]=_,o[h*2]=g.k1,o[h*2+1]=g.k2}for(var I=this._wnafMulAdd(1,s,o,h*2,i),P=0;P<h*2;P++)s[P]=null,o[P]=null;return I};function yr(r,e,t,i){wa.BasePoint.call(this,r,"affine"),e===null&&t===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new er(e,16),this.y=new er(t,16),i&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}Uu(yr,wa.BasePoint);ki.prototype.point=function(e,t,i){return new yr(this,e,t,i)};ki.prototype.pointFromJSON=function(e,t){return yr.fromJSON(this,e,t)};yr.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var i=this.curve,s=function(o){return i.point(o.x.redMul(i.endo.beta),o.y)};e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(s)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(s)}}}return t}};yr.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};yr.fromJSON=function(e,t,i){typeof t=="string"&&(t=JSON.parse(t));var s=e.point(t[0],t[1],i);if(!t[2])return s;function o(g){return e.point(g[0],g[1],i)}var h=t[2];return s.precomputed={beta:null,doubles:h.doubles&&{step:h.doubles.step,points:[s].concat(h.doubles.points.map(o))},naf:h.naf&&{wnd:h.naf.wnd,points:[s].concat(h.naf.points.map(o))}},s};yr.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};yr.prototype.isInfinity=function(){return this.inf};yr.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(this.x.cmp(e.x)===0)return this.curve.point(null,null);var t=this.y.redSub(e.y);t.cmpn(0)!==0&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var i=t.redSqr().redISub(this.x).redISub(e.x),s=t.redMul(this.x.redSub(i)).redISub(this.y);return this.curve.point(i,s)};yr.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(e.cmpn(0)===0)return this.curve.point(null,null);var t=this.curve.a,i=this.x.redSqr(),s=e.redInvm(),o=i.redAdd(i).redIAdd(i).redIAdd(t).redMul(s),h=o.redSqr().redISub(this.x.redAdd(this.x)),g=o.redMul(this.x.redSub(h)).redISub(this.y);return this.curve.point(h,g)};yr.prototype.getX=function(){return this.x.fromRed()};yr.prototype.getY=function(){return this.y.fromRed()};yr.prototype.mul=function(e){return e=new er(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)};yr.prototype.mulAdd=function(e,t,i){var s=[this,t],o=[e,i];return this.curve.endo?this.curve._endoWnafMulAdd(s,o):this.curve._wnafMulAdd(1,s,o,2)};yr.prototype.jmulAdd=function(e,t,i){var s=[this,t],o=[e,i];return this.curve.endo?this.curve._endoWnafMulAdd(s,o,!0):this.curve._wnafMulAdd(1,s,o,2,!0)};yr.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||this.x.cmp(e.x)===0&&this.y.cmp(e.y)===0)};yr.prototype.neg=function(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var i=this.precomputed,s=function(o){return o.neg()};t.precomputed={naf:i.naf&&{wnd:i.naf.wnd,points:i.naf.points.map(s)},doubles:i.doubles&&{step:i.doubles.step,points:i.doubles.points.map(s)}}}return t};yr.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e};function Mr(r,e,t,i){wa.BasePoint.call(this,r,"jacobian"),e===null&&t===null&&i===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new er(0)):(this.x=new er(e,16),this.y=new er(t,16),this.z=new er(i,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}Uu(Mr,wa.BasePoint);ki.prototype.jpoint=function(e,t,i){return new Mr(this,e,t,i)};Mr.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),i=this.x.redMul(t),s=this.y.redMul(t).redMul(e);return this.curve.point(i,s)};Mr.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};Mr.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),i=this.z.redSqr(),s=this.x.redMul(t),o=e.x.redMul(i),h=this.y.redMul(t.redMul(e.z)),g=e.y.redMul(i.redMul(this.z)),y=s.redSub(o),_=h.redSub(g);if(y.cmpn(0)===0)return _.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var I=y.redSqr(),P=I.redMul(y),q=s.redMul(I),O=_.redSqr().redIAdd(P).redISub(q).redISub(q),L=_.redMul(q.redISub(O)).redISub(h.redMul(P)),j=this.z.redMul(e.z).redMul(y);return this.curve.jpoint(O,L,j)};Mr.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),i=this.x,s=e.x.redMul(t),o=this.y,h=e.y.redMul(t).redMul(this.z),g=i.redSub(s),y=o.redSub(h);if(g.cmpn(0)===0)return y.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var _=g.redSqr(),I=_.redMul(g),P=i.redMul(_),q=y.redSqr().redIAdd(I).redISub(P).redISub(P),O=y.redMul(P.redISub(q)).redISub(o.redMul(I)),L=this.z.redMul(g);return this.curve.jpoint(q,O,L)};Mr.prototype.dblp=function(e){if(e===0)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var t;if(this.curve.zeroA||this.curve.threeA){var i=this;for(t=0;t<e;t++)i=i.dbl();return i}var s=this.curve.a,o=this.curve.tinv,h=this.x,g=this.y,y=this.z,_=y.redSqr().redSqr(),I=g.redAdd(g);for(t=0;t<e;t++){var P=h.redSqr(),q=I.redSqr(),O=q.redSqr(),L=P.redAdd(P).redIAdd(P).redIAdd(s.redMul(_)),j=h.redMul(q),G=L.redSqr().redISub(j.redAdd(j)),Q=j.redISub(G),Z=L.redMul(Q);Z=Z.redIAdd(Z).redISub(O);var de=I.redMul(y);t+1<e&&(_=_.redMul(O)),h=G,y=de,I=Z}return this.curve.jpoint(h,I.redMul(o),y)};Mr.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};Mr.prototype._zeroDbl=function(){var e,t,i;if(this.zOne){var s=this.x.redSqr(),o=this.y.redSqr(),h=o.redSqr(),g=this.x.redAdd(o).redSqr().redISub(s).redISub(h);g=g.redIAdd(g);var y=s.redAdd(s).redIAdd(s),_=y.redSqr().redISub(g).redISub(g),I=h.redIAdd(h);I=I.redIAdd(I),I=I.redIAdd(I),e=_,t=y.redMul(g.redISub(_)).redISub(I),i=this.y.redAdd(this.y)}else{var P=this.x.redSqr(),q=this.y.redSqr(),O=q.redSqr(),L=this.x.redAdd(q).redSqr().redISub(P).redISub(O);L=L.redIAdd(L);var j=P.redAdd(P).redIAdd(P),G=j.redSqr(),Q=O.redIAdd(O);Q=Q.redIAdd(Q),Q=Q.redIAdd(Q),e=G.redISub(L).redISub(L),t=j.redMul(L.redISub(e)).redISub(Q),i=this.y.redMul(this.z),i=i.redIAdd(i)}return this.curve.jpoint(e,t,i)};Mr.prototype._threeDbl=function(){var e,t,i;if(this.zOne){var s=this.x.redSqr(),o=this.y.redSqr(),h=o.redSqr(),g=this.x.redAdd(o).redSqr().redISub(s).redISub(h);g=g.redIAdd(g);var y=s.redAdd(s).redIAdd(s).redIAdd(this.curve.a),_=y.redSqr().redISub(g).redISub(g);e=_;var I=h.redIAdd(h);I=I.redIAdd(I),I=I.redIAdd(I),t=y.redMul(g.redISub(_)).redISub(I),i=this.y.redAdd(this.y)}else{var P=this.z.redSqr(),q=this.y.redSqr(),O=this.x.redMul(q),L=this.x.redSub(P).redMul(this.x.redAdd(P));L=L.redAdd(L).redIAdd(L);var j=O.redIAdd(O);j=j.redIAdd(j);var G=j.redAdd(j);e=L.redSqr().redISub(G),i=this.y.redAdd(this.z).redSqr().redISub(q).redISub(P);var Q=q.redSqr();Q=Q.redIAdd(Q),Q=Q.redIAdd(Q),Q=Q.redIAdd(Q),t=L.redMul(j.redISub(e)).redISub(Q)}return this.curve.jpoint(e,t,i)};Mr.prototype._dbl=function(){var e=this.curve.a,t=this.x,i=this.y,s=this.z,o=s.redSqr().redSqr(),h=t.redSqr(),g=i.redSqr(),y=h.redAdd(h).redIAdd(h).redIAdd(e.redMul(o)),_=t.redAdd(t);_=_.redIAdd(_);var I=_.redMul(g),P=y.redSqr().redISub(I.redAdd(I)),q=I.redISub(P),O=g.redSqr();O=O.redIAdd(O),O=O.redIAdd(O),O=O.redIAdd(O);var L=y.redMul(q).redISub(O),j=i.redAdd(i).redMul(s);return this.curve.jpoint(P,L,j)};Mr.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),i=this.z.redSqr(),s=t.redSqr(),o=e.redAdd(e).redIAdd(e),h=o.redSqr(),g=this.x.redAdd(t).redSqr().redISub(e).redISub(s);g=g.redIAdd(g),g=g.redAdd(g).redIAdd(g),g=g.redISub(h);var y=g.redSqr(),_=s.redIAdd(s);_=_.redIAdd(_),_=_.redIAdd(_),_=_.redIAdd(_);var I=o.redIAdd(g).redSqr().redISub(h).redISub(y).redISub(_),P=t.redMul(I);P=P.redIAdd(P),P=P.redIAdd(P);var q=this.x.redMul(y).redISub(P);q=q.redIAdd(q),q=q.redIAdd(q);var O=this.y.redMul(I.redMul(_.redISub(I)).redISub(g.redMul(y)));O=O.redIAdd(O),O=O.redIAdd(O),O=O.redIAdd(O);var L=this.z.redAdd(g).redSqr().redISub(i).redISub(y);return this.curve.jpoint(q,O,L)};Mr.prototype.mul=function(e,t){return e=new er(e,t),this.curve._wnafMul(this,e)};Mr.prototype.eq=function(e){if(e.type==="affine")return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),i=e.z.redSqr();if(this.x.redMul(i).redISub(e.x.redMul(t)).cmpn(0)!==0)return!1;var s=t.redMul(this.z),o=i.redMul(e.z);return this.y.redMul(o).redISub(e.y.redMul(s)).cmpn(0)===0};Mr.prototype.eqXToP=function(e){var t=this.z.redSqr(),i=e.toRed(this.curve.red).redMul(t);if(this.x.cmp(i)===0)return!0;for(var s=e.clone(),o=this.curve.redN.redMul(t);;){if(s.iadd(this.curve.n),s.cmp(this.curve.p)>=0)return!1;if(i.redIAdd(o),this.x.cmp(i)===0)return!0}};Mr.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};Mr.prototype.isInfinity=function(){return this.z.cmpn(0)===0};var ha=Gn,m1=Tu,yf=mf,Cw=gi;function _a(r){yf.call(this,"mont",r),this.a=new ha(r.a,16).toRed(this.red),this.b=new ha(r.b,16).toRed(this.red),this.i4=new ha(4).toRed(this.red).redInvm(),this.two=new ha(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}m1(_a,yf);var Nw=_a;_a.prototype.validate=function(e){var t=e.normalize().x,i=t.redSqr(),s=i.redMul(t).redAdd(i.redMul(this.a)).redAdd(t),o=s.redSqrt();return o.redSqr().cmp(s)===0};function mr(r,e,t){yf.BasePoint.call(this,r,"projective"),e===null&&t===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new ha(e,16),this.z=new ha(t,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}m1(mr,yf.BasePoint);_a.prototype.decodePoint=function(e,t){return this.point(Cw.toArray(e,t),1)};_a.prototype.point=function(e,t){return new mr(this,e,t)};_a.prototype.pointFromJSON=function(e){return mr.fromJSON(this,e)};mr.prototype.precompute=function(){};mr.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())};mr.fromJSON=function(e,t){return new mr(e,t[0],t[1]||e.one)};mr.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};mr.prototype.isInfinity=function(){return this.z.cmpn(0)===0};mr.prototype.dbl=function(){var e=this.x.redAdd(this.z),t=e.redSqr(),i=this.x.redSub(this.z),s=i.redSqr(),o=t.redSub(s),h=t.redMul(s),g=o.redMul(s.redAdd(this.curve.a24.redMul(o)));return this.curve.point(h,g)};mr.prototype.add=function(){throw new Error("Not supported on Montgomery curve")};mr.prototype.diffAdd=function(e,t){var i=this.x.redAdd(this.z),s=this.x.redSub(this.z),o=e.x.redAdd(e.z),h=e.x.redSub(e.z),g=h.redMul(i),y=o.redMul(s),_=t.z.redMul(g.redAdd(y).redSqr()),I=t.x.redMul(g.redISub(y).redSqr());return this.curve.point(_,I)};mr.prototype.mul=function(e){for(var t=e.clone(),i=this,s=this.curve.point(null,null),o=this,h=[];t.cmpn(0)!==0;t.iushrn(1))h.push(t.andln(1));for(var g=h.length-1;g>=0;g--)h[g]===0?(i=i.diffAdd(s,o),s=s.dbl()):(s=i.diffAdd(s,o),i=i.dbl());return s};mr.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")};mr.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")};mr.prototype.eq=function(e){return this.getX().cmp(e.getX())===0};mr.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this};mr.prototype.getX=function(){return this.normalize(),this.x.fromRed()};var Tw=gi,Kn=Gn,y1=Tu,wf=mf,Ow=Tw.assert;function In(r){this.twisted=(r.a|0)!==1,this.mOneA=this.twisted&&(r.a|0)===-1,this.extended=this.mOneA,wf.call(this,"edwards",r),this.a=new Kn(r.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new Kn(r.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new Kn(r.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),Ow(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(r.c|0)===1}y1(In,wf);var qw=In;In.prototype._mulA=function(e){return this.mOneA?e.redNeg():this.a.redMul(e)};In.prototype._mulC=function(e){return this.oneC?e:this.c.redMul(e)};In.prototype.jpoint=function(e,t,i,s){return this.point(e,t,i,s)};In.prototype.pointFromX=function(e,t){e=new Kn(e,16),e.red||(e=e.toRed(this.red));var i=e.redSqr(),s=this.c2.redSub(this.a.redMul(i)),o=this.one.redSub(this.c2.redMul(this.d).redMul(i)),h=s.redMul(o.redInvm()),g=h.redSqrt();if(g.redSqr().redSub(h).cmp(this.zero)!==0)throw new Error("invalid point");var y=g.fromRed().isOdd();return(t&&!y||!t&&y)&&(g=g.redNeg()),this.point(e,g)};In.prototype.pointFromY=function(e,t){e=new Kn(e,16),e.red||(e=e.toRed(this.red));var i=e.redSqr(),s=i.redSub(this.c2),o=i.redMul(this.d).redMul(this.c2).redSub(this.a),h=s.redMul(o.redInvm());if(h.cmp(this.zero)===0){if(t)throw new Error("invalid point");return this.point(this.zero,e)}var g=h.redSqrt();if(g.redSqr().redSub(h).cmp(this.zero)!==0)throw new Error("invalid point");return g.fromRed().isOdd()!==t&&(g=g.redNeg()),this.point(g,e)};In.prototype.validate=function(e){if(e.isInfinity())return!0;e.normalize();var t=e.x.redSqr(),i=e.y.redSqr(),s=t.redMul(this.a).redAdd(i),o=this.c2.redMul(this.one.redAdd(this.d.redMul(t).redMul(i)));return s.cmp(o)===0};function Ht(r,e,t,i,s){wf.BasePoint.call(this,r,"projective"),e===null&&t===null&&i===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new Kn(e,16),this.y=new Kn(t,16),this.z=i?new Kn(i,16):this.curve.one,this.t=s&&new Kn(s,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}y1(Ht,wf.BasePoint);In.prototype.pointFromJSON=function(e){return Ht.fromJSON(this,e)};In.prototype.point=function(e,t,i,s){return new Ht(this,e,t,i,s)};Ht.fromJSON=function(e,t){return new Ht(e,t[0],t[1],t[2])};Ht.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};Ht.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)};Ht.prototype._extDbl=function(){var e=this.x.redSqr(),t=this.y.redSqr(),i=this.z.redSqr();i=i.redIAdd(i);var s=this.curve._mulA(e),o=this.x.redAdd(this.y).redSqr().redISub(e).redISub(t),h=s.redAdd(t),g=h.redSub(i),y=s.redSub(t),_=o.redMul(g),I=h.redMul(y),P=o.redMul(y),q=g.redMul(h);return this.curve.point(_,I,q,P)};Ht.prototype._projDbl=function(){var e=this.x.redAdd(this.y).redSqr(),t=this.x.redSqr(),i=this.y.redSqr(),s,o,h,g,y,_;if(this.curve.twisted){g=this.curve._mulA(t);var I=g.redAdd(i);this.zOne?(s=e.redSub(t).redSub(i).redMul(I.redSub(this.curve.two)),o=I.redMul(g.redSub(i)),h=I.redSqr().redSub(I).redSub(I)):(y=this.z.redSqr(),_=I.redSub(y).redISub(y),s=e.redSub(t).redISub(i).redMul(_),o=I.redMul(g.redSub(i)),h=I.redMul(_))}else g=t.redAdd(i),y=this.curve._mulC(this.z).redSqr(),_=g.redSub(y).redSub(y),s=this.curve._mulC(e.redISub(g)).redMul(_),o=this.curve._mulC(g).redMul(t.redISub(i)),h=g.redMul(_);return this.curve.point(s,o,h)};Ht.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()};Ht.prototype._extAdd=function(e){var t=this.y.redSub(this.x).redMul(e.y.redSub(e.x)),i=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)),s=this.t.redMul(this.curve.dd).redMul(e.t),o=this.z.redMul(e.z.redAdd(e.z)),h=i.redSub(t),g=o.redSub(s),y=o.redAdd(s),_=i.redAdd(t),I=h.redMul(g),P=y.redMul(_),q=h.redMul(_),O=g.redMul(y);return this.curve.point(I,P,O,q)};Ht.prototype._projAdd=function(e){var t=this.z.redMul(e.z),i=t.redSqr(),s=this.x.redMul(e.x),o=this.y.redMul(e.y),h=this.curve.d.redMul(s).redMul(o),g=i.redSub(h),y=i.redAdd(h),_=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(s).redISub(o),I=t.redMul(g).redMul(_),P,q;return this.curve.twisted?(P=t.redMul(y).redMul(o.redSub(this.curve._mulA(s))),q=g.redMul(y)):(P=t.redMul(y).redMul(o.redSub(s)),q=this.curve._mulC(g).redMul(y)),this.curve.point(I,P,q)};Ht.prototype.add=function(e){return this.isInfinity()?e:e.isInfinity()?this:this.curve.extended?this._extAdd(e):this._projAdd(e)};Ht.prototype.mul=function(e){return this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve._wnafMul(this,e)};Ht.prototype.mulAdd=function(e,t,i){return this.curve._wnafMulAdd(1,[this,t],[e,i],2,!1)};Ht.prototype.jmulAdd=function(e,t,i){return this.curve._wnafMulAdd(1,[this,t],[e,i],2,!0)};Ht.prototype.normalize=function(){if(this.zOne)return this;var e=this.z.redInvm();return this.x=this.x.redMul(e),this.y=this.y.redMul(e),this.t&&(this.t=this.t.redMul(e)),this.z=this.curve.one,this.zOne=!0,this};Ht.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())};Ht.prototype.getX=function(){return this.normalize(),this.x.fromRed()};Ht.prototype.getY=function(){return this.normalize(),this.y.fromRed()};Ht.prototype.eq=function(e){return this===e||this.getX().cmp(e.getX())===0&&this.getY().cmp(e.getY())===0};Ht.prototype.eqXToP=function(e){var t=e.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(t)===0)return!0;for(var i=e.clone(),s=this.curve.redN.redMul(this.z);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(t.redIAdd(s),this.x.cmp(t)===0)return!0}};Ht.prototype.toP=Ht.prototype.normalize;Ht.prototype.mixedAdd=Ht.prototype.add;(function(r){var e=r;e.base=mf,e.short=Rw,e.mont=Nw,e.edwards=qw})($u);var _f={},Uh,y0;function Dw(){return y0||(y0=1,Uh={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}),Uh}(function(r){var e=r,t=t1,i=$u,s=gi,o=s.assert;function h(_){_.type==="short"?this.curve=new i.short(_):_.type==="edwards"?this.curve=new i.edwards(_):this.curve=new i.mont(_),this.g=this.curve.g,this.n=this.curve.n,this.hash=_.hash,o(this.g.validate(),"Invalid curve"),o(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}e.PresetCurve=h;function g(_,I){Object.defineProperty(e,_,{configurable:!0,enumerable:!0,get:function(){var P=new h(I);return Object.defineProperty(e,_,{configurable:!0,enumerable:!0,value:P}),P}})}g("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:t.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),g("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:t.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),g("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:t.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),g("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:t.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),g("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:t.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),g("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:t.sha256,gRed:!1,g:["9"]}),g("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:t.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var y;try{y=Dw()}catch{y=void 0}g("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:t.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",y]})})(_f);var kw=Gn,Bw=gi,mu=Bw.assert;function Or(r,e){this.ec=r,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}var Lw=Or;Or.fromPublic=function(e,t,i){return t instanceof Or?t:new Or(e,{pub:t,pubEnc:i})};Or.fromPrivate=function(e,t,i){return t instanceof Or?t:new Or(e,{priv:t,privEnc:i})};Or.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};Or.prototype.getPublic=function(e,t){return typeof e=="string"&&(t=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,e):this.pub};Or.prototype.getPrivate=function(e){return e==="hex"?this.priv.toString(16,2):this.priv};Or.prototype._importPrivate=function(e,t){this.priv=new kw(e,t||16),this.priv=this.priv.umod(this.ec.curve.n)};Or.prototype._importPublic=function(e,t){if(e.x||e.y){this.ec.curve.type==="mont"?mu(e.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&mu(e.x&&e.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(e.x,e.y);return}this.pub=this.ec.curve.decodePoint(e,t)};Or.prototype.derive=function(e){return e.validate()||mu(e.validate(),"public point not validated"),e.mul(this.priv).getX()};Or.prototype.sign=function(e,t,i){return this.ec.sign(e,this,t,i)};Or.prototype.verify=function(e,t){return this.ec.verify(e,t,this)};Or.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var rf=Gn,Fu=gi,zw=Fu.assert;function Af(r,e){if(r instanceof Af)return r;this._importDER(r,e)||(zw(r.r&&r.s,"Signature without r or s"),this.r=new rf(r.r,16),this.s=new rf(r.s,16),r.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=r.recoveryParam)}var $w=Af;function Uw(){this.place=0}function Fh(r,e){var t=r[e.place++];if(!(t&128))return t;var i=t&15;if(i===0||i>4||r[e.place]===0)return!1;for(var s=0,o=0,h=e.place;o<i;o++,h++)s<<=8,s|=r[h],s>>>=0;return s<=127?!1:(e.place=h,s)}function w0(r){for(var e=0,t=r.length-1;!r[e]&&!(r[e+1]&128)&&e<t;)e++;return e===0?r:r.slice(e)}Af.prototype._importDER=function(e,t){e=Fu.toArray(e,t);var i=new Uw;if(e[i.place++]!==48)return!1;var s=Fh(e,i);if(s===!1||s+i.place!==e.length||e[i.place++]!==2)return!1;var o=Fh(e,i);if(o===!1||e[i.place]&128)return!1;var h=e.slice(i.place,o+i.place);if(i.place+=o,e[i.place++]!==2)return!1;var g=Fh(e,i);if(g===!1||e.length!==g+i.place||e[i.place]&128)return!1;var y=e.slice(i.place,g+i.place);if(h[0]===0)if(h[1]&128)h=h.slice(1);else return!1;if(y[0]===0)if(y[1]&128)y=y.slice(1);else return!1;return this.r=new rf(h),this.s=new rf(y),this.recoveryParam=null,!0};function jh(r,e){if(e<128){r.push(e);return}var t=1+(Math.log(e)/Math.LN2>>>3);for(r.push(t|128);--t;)r.push(e>>>(t<<3)&255);r.push(e)}Af.prototype.toDER=function(e){var t=this.r.toArray(),i=this.s.toArray();for(t[0]&128&&(t=[0].concat(t)),i[0]&128&&(i=[0].concat(i)),t=w0(t),i=w0(i);!i[0]&&!(i[1]&128);)i=i.slice(1);var s=[2];jh(s,t.length),s=s.concat(t),s.push(2),jh(s,i.length);var o=s.concat(i),h=[48];return jh(h,o.length),h=h.concat(o),Fu.encode(h,e)};var Ts=Gn,w1=Py,Fw=gi,Hh=_f,jw=r1,_1=Fw.assert,ju=Lw,Mf=$w;function Oi(r){if(!(this instanceof Oi))return new Oi(r);typeof r=="string"&&(_1(Object.prototype.hasOwnProperty.call(Hh,r),"Unknown curve "+r),r=Hh[r]),r instanceof Hh.PresetCurve&&(r={curve:r}),this.curve=r.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=r.curve.g,this.g.precompute(r.curve.n.bitLength()+1),this.hash=r.hash||r.curve.hash}var Hw=Oi;Oi.prototype.keyPair=function(e){return new ju(this,e)};Oi.prototype.keyFromPrivate=function(e,t){return ju.fromPrivate(this,e,t)};Oi.prototype.keyFromPublic=function(e,t){return ju.fromPublic(this,e,t)};Oi.prototype.genKeyPair=function(e){e||(e={});for(var t=new w1({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||jw(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),i=this.n.byteLength(),s=this.n.sub(new Ts(2));;){var o=new Ts(t.generate(i));if(!(o.cmp(s)>0))return o.iaddn(1),this.keyFromPrivate(o)}};Oi.prototype._truncateToN=function(e,t){var i=e.byteLength()*8-this.n.bitLength();return i>0&&(e=e.ushrn(i)),!t&&e.cmp(this.n)>=0?e.sub(this.n):e};Oi.prototype.sign=function(e,t,i,s){typeof i=="object"&&(s=i,i=null),s||(s={}),t=this.keyFromPrivate(t,i),e=this._truncateToN(new Ts(e,16));for(var o=this.n.byteLength(),h=t.getPrivate().toArray("be",o),g=e.toArray("be",o),y=new w1({hash:this.hash,entropy:h,nonce:g,pers:s.pers,persEnc:s.persEnc||"utf8"}),_=this.n.sub(new Ts(1)),I=0;;I++){var P=s.k?s.k(I):new Ts(y.generate(this.n.byteLength()));if(P=this._truncateToN(P,!0),!(P.cmpn(1)<=0||P.cmp(_)>=0)){var q=this.g.mul(P);if(!q.isInfinity()){var O=q.getX(),L=O.umod(this.n);if(L.cmpn(0)!==0){var j=P.invm(this.n).mul(L.mul(t.getPrivate()).iadd(e));if(j=j.umod(this.n),j.cmpn(0)!==0){var G=(q.getY().isOdd()?1:0)|(O.cmp(L)!==0?2:0);return s.canonical&&j.cmp(this.nh)>0&&(j=this.n.sub(j),G^=1),new Mf({r:L,s:j,recoveryParam:G})}}}}}};Oi.prototype.verify=function(e,t,i,s){e=this._truncateToN(new Ts(e,16)),i=this.keyFromPublic(i,s),t=new Mf(t,"hex");var o=t.r,h=t.s;if(o.cmpn(1)<0||o.cmp(this.n)>=0||h.cmpn(1)<0||h.cmp(this.n)>=0)return!1;var g=h.invm(this.n),y=g.mul(e).umod(this.n),_=g.mul(o).umod(this.n),I;return this.curve._maxwellTrick?(I=this.g.jmulAdd(y,i.getPublic(),_),I.isInfinity()?!1:I.eqXToP(o)):(I=this.g.mulAdd(y,i.getPublic(),_),I.isInfinity()?!1:I.getX().umod(this.n).cmp(o)===0)};Oi.prototype.recoverPubKey=function(r,e,t,i){_1((3&t)===t,"The recovery param is more than two bits"),e=new Mf(e,i);var s=this.n,o=new Ts(r),h=e.r,g=e.s,y=t&1,_=t>>1;if(h.cmp(this.curve.p.umod(this.curve.n))>=0&&_)throw new Error("Unable to find sencond key candinate");_?h=this.curve.pointFromX(h.add(this.curve.n),y):h=this.curve.pointFromX(h,y);var I=e.r.invm(s),P=s.sub(o).mul(I).umod(s),q=g.mul(I).umod(s);return this.g.mulAdd(P,h,q)};Oi.prototype.getKeyRecoveryParam=function(r,e,t,i){if(e=new Mf(e,i),e.recoveryParam!==null)return e.recoveryParam;for(var s=0;s<4;s++){var o;try{o=this.recoverPubKey(r,e,s)}catch{continue}if(o.eq(t))return s}throw new Error("Unable to find valid recovery factor")};var xo=gi,A1=xo.assert,_0=xo.parseBytes,Aa=xo.cachedProperty;function br(r,e){this.eddsa=r,this._secret=_0(e.secret),r.isPoint(e.pub)?this._pub=e.pub:this._pubBytes=_0(e.pub)}br.fromPublic=function(e,t){return t instanceof br?t:new br(e,{pub:t})};br.fromSecret=function(e,t){return t instanceof br?t:new br(e,{secret:t})};br.prototype.secret=function(){return this._secret};Aa(br,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())});Aa(br,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())});Aa(br,"privBytes",function(){var e=this.eddsa,t=this.hash(),i=e.encodingLength-1,s=t.slice(0,e.encodingLength);return s[0]&=248,s[i]&=127,s[i]|=64,s});Aa(br,"priv",function(){return this.eddsa.decodeInt(this.privBytes())});Aa(br,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()});Aa(br,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)});br.prototype.sign=function(e){return A1(this._secret,"KeyPair can only verify"),this.eddsa.sign(e,this)};br.prototype.verify=function(e,t){return this.eddsa.verify(e,t,this)};br.prototype.getSecret=function(e){return A1(this._secret,"KeyPair is public only"),xo.encode(this.secret(),e)};br.prototype.getPublic=function(e){return xo.encode(this.pubBytes(),e)};var Kw=br,Vw=Gn,xf=gi,A0=xf.assert,Ef=xf.cachedProperty,Gw=xf.parseBytes;function Bs(r,e){this.eddsa=r,typeof e!="object"&&(e=Gw(e)),Array.isArray(e)&&(A0(e.length===r.encodingLength*2,"Signature has invalid size"),e={R:e.slice(0,r.encodingLength),S:e.slice(r.encodingLength)}),A0(e.R&&e.S,"Signature without R or S"),r.isPoint(e.R)&&(this._R=e.R),e.S instanceof Vw&&(this._S=e.S),this._Rencoded=Array.isArray(e.R)?e.R:e.Rencoded,this._Sencoded=Array.isArray(e.S)?e.S:e.Sencoded}Ef(Bs,"S",function(){return this.eddsa.decodeInt(this.Sencoded())});Ef(Bs,"R",function(){return this.eddsa.decodePoint(this.Rencoded())});Ef(Bs,"Rencoded",function(){return this.eddsa.encodePoint(this.R())});Ef(Bs,"Sencoded",function(){return this.eddsa.encodeInt(this.S())});Bs.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())};Bs.prototype.toHex=function(){return xf.encode(this.toBytes(),"hex").toUpperCase()};var Jw=Bs,Qw=t1,Yw=_f,ga=gi,Ww=ga.assert,M1=ga.parseBytes,x1=Kw,M0=Jw;function ii(r){if(Ww(r==="ed25519","only tested with ed25519 so far"),!(this instanceof ii))return new ii(r);r=Yw[r].curve,this.curve=r,this.g=r.g,this.g.precompute(r.n.bitLength()+1),this.pointClass=r.point().constructor,this.encodingLength=Math.ceil(r.n.bitLength()/8),this.hash=Qw.sha512}var Xw=ii;ii.prototype.sign=function(e,t){e=M1(e);var i=this.keyFromSecret(t),s=this.hashInt(i.messagePrefix(),e),o=this.g.mul(s),h=this.encodePoint(o),g=this.hashInt(h,i.pubBytes(),e).mul(i.priv()),y=s.add(g).umod(this.curve.n);return this.makeSignature({R:o,S:y,Rencoded:h})};ii.prototype.verify=function(e,t,i){if(e=M1(e),t=this.makeSignature(t),t.S().gte(t.eddsa.curve.n)||t.S().isNeg())return!1;var s=this.keyFromPublic(i),o=this.hashInt(t.Rencoded(),s.pubBytes(),e),h=this.g.mul(t.S()),g=t.R().add(s.pub().mul(o));return g.eq(h)};ii.prototype.hashInt=function(){for(var e=this.hash(),t=0;t<arguments.length;t++)e.update(arguments[t]);return ga.intFromLE(e.digest()).umod(this.curve.n)};ii.prototype.keyFromPublic=function(e){return x1.fromPublic(this,e)};ii.prototype.keyFromSecret=function(e){return x1.fromSecret(this,e)};ii.prototype.makeSignature=function(e){return e instanceof M0?e:new M0(this,e)};ii.prototype.encodePoint=function(e){var t=e.getY().toArray("le",this.encodingLength);return t[this.encodingLength-1]|=e.getX().isOdd()?128:0,t};ii.prototype.decodePoint=function(e){e=ga.parseBytes(e);var t=e.length-1,i=e.slice(0,t).concat(e[t]&-129),s=(e[t]&128)!==0,o=ga.intFromLE(i);return this.curve.pointFromY(o,s)};ii.prototype.encodeInt=function(e){return e.toArray("le",this.encodingLength)};ii.prototype.decodeInt=function(e){return ga.intFromLE(e)};ii.prototype.isPoint=function(e){return e instanceof this.pointClass};(function(r){var e=r;e.version=Ew.version,e.utils=gi,e.rand=r1,e.curve=$u,e.curves=_f,e.ec=Hw,e.eddsa=Xw})(b1);const Zw={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}},e5=":";function ho(r){const[e,t]=r.split(e5);return{namespace:e,reference:t}}function x0(r,e=[]){const t=[];return Object.keys(r).forEach(i=>{if(e.length&&!e.includes(i))return;const s=r[i];t.push(...s.accounts)}),t}function E1(r,e){return r.includes(":")?[r]:e.chains||[]}var t5=Object.defineProperty,E0=Object.getOwnPropertySymbols,r5=Object.prototype.hasOwnProperty,i5=Object.prototype.propertyIsEnumerable,I0=(r,e,t)=>e in r?t5(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,S0=(r,e)=>{for(var t in e||(e={}))r5.call(e,t)&&I0(r,t,e[t]);if(E0)for(var t of E0(e))i5.call(e,t)&&I0(r,t,e[t]);return r};const n5="ReactNative",ui={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},s5="js";function mo(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function Ma(){return!Ou()&&!!i1()&&navigator.product===n5}function Eo(){return!mo()&&!!i1()&&!!Ou()}function Io(){return Ma()?ui.reactNative:mo()?ui.node:Eo()?ui.browser:ui.unknown}function a5(){var r;try{return Ma()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(r=global.Application)==null?void 0:r.applicationId:void 0}catch{return}}function o5(r,e){let t=Yc.parse(r);return t=S0(S0({},t),e),r=Yc.stringify(t),r}function c5(){return Ry()||{name:"",description:"",url:"",icons:[""]}}function f5(){if(Io()===ui.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:t,Version:i}=global.Platform;return[t,i].join("-")}const r=Cy();if(r===null)return"unknown";const e=r.os?r.os.replace(" ","").toLowerCase():"unknown";return r.type==="browser"?[e,r.name,r.version].join("-"):[e,r.version].join("-")}function h5(){var r;const e=Io();return e===ui.browser?[e,((r=Ny())==null?void 0:r.host)||"unknown"].join(":"):e}function u5(r,e,t){const i=f5(),s=h5();return[[r,e].join("-"),[s5,t].join("-"),i,s].join("/")}function d5({protocol:r,version:e,relayUrl:t,sdkVersion:i,auth:s,projectId:o,useOnCloseEvent:h,bundleId:g}){const y=t.split("?"),_=u5(r,e,i),I={auth:s,ua:_,projectId:o,useOnCloseEvent:h||void 0,origin:g||void 0},P=o5(y[1]||"",I);return y[0]+"?"+P}function Ns(r,e){return r.filter(t=>e.includes(t)).length===r.length}function I1(r){return Object.fromEntries(r.entries())}function S1(r){return new Map(Object.entries(r))}function Ps(r=be.FIVE_MINUTES,e){const t=be.toMiliseconds(r||be.FIVE_MINUTES);let i,s,o;return{resolve:h=>{o&&i&&(clearTimeout(o),i(h))},reject:h=>{o&&s&&(clearTimeout(o),s(h))},done:()=>new Promise((h,g)=>{o=setTimeout(()=>{g(new Error(e))},t),i=h,s=g})}}function da(r,e,t){return new Promise(async(i,s)=>{const o=setTimeout(()=>s(new Error(t)),e);try{const h=await r;i(h)}catch(h){s(h)}clearTimeout(o)})}function P1(r,e){if(typeof e=="string"&&e.startsWith(`${r}:`))return e;if(r.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(r.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${r}`)}function l5(r){return P1("topic",r)}function p5(r){return P1("id",r)}function R1(r){const[e,t]=r.split(":"),i={id:void 0,topic:void 0};if(e==="topic"&&typeof t=="string")i.topic=t;else if(e==="id"&&Number.isInteger(Number(t)))i.id=Number(t);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${t}`);return i}function dr(r,e){return be.fromMiliseconds(Date.now()+be.toMiliseconds(r))}function ss(r){return Date.now()>=be.toMiliseconds(r)}function xt(r,e){return`${r}${e?`:${e}`:""}`}function Fc(r=[],e=[]){return[...new Set([...r,...e])]}async function g5({id:r,topic:e,wcDeepLink:t}){var i;try{if(!t)return;const s=typeof t=="string"?JSON.parse(t):t;let o=s==null?void 0:s.href;if(typeof o!="string")return;o.endsWith("/")&&(o=o.slice(0,-1));const h=`${o}/wc?requestId=${r}&sessionTopic=${e}`,g=Io();if(g===ui.browser){if(!((i=Ou())!=null&&i.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}h.startsWith("https://")||h.startsWith("http://")?window.open(h,"_blank","noreferrer noopener"):window.open(h,"_self","noreferrer noopener")}else g===ui.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(h)}catch(s){console.error(s)}}async function v5(r,e){try{return await r.getItem(e)||(Eo()?localStorage.getItem(e):void 0)}catch(t){console.error(t)}}function P0(r,e){if(!r.includes(e))return null;const t=r.split(/([&,?,=])/),i=t.indexOf(e);return t[i+2]}function b5(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,r=>{const e=Math.random()*16|0;return(r==="x"?e:e&3|8).toString(16)})}var C1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function m5(r){var e=r.default;if(typeof e=="function"){var t=function(){return e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(i){var s=Object.getOwnPropertyDescriptor(r,i);Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:function(){return r[i]}})}),t}var N1={exports:{}};/**
* [js-sha3]{@link https://github.com/emn178/js-sha3}
*
* @version 0.8.0
* @author Chen, Yi-Cyuan [emn178@gmail.com]
* @copyright Chen, Yi-Cyuan 2015-2018
* @license MIT
*/(function(r){(function(){var e="input is invalid type",t="finalize already called",i=typeof window=="object",s=i?window:{};s.JS_SHA3_NO_WINDOW&&(i=!1);var o=!i&&typeof self=="object",h=!s.JS_SHA3_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;h?s=C1:o&&(s=self);var g=!s.JS_SHA3_NO_COMMON_JS&&!0&&r.exports,y=!s.JS_SHA3_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",_="0123456789abcdef".split(""),I=[31,7936,2031616,520093696],P=[4,1024,262144,67108864],q=[1,256,65536,16777216],O=[6,1536,393216,100663296],L=[0,8,16,24],j=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],G=[224,256,384,512],Q=[128,256],Z=["hex","buffer","arrayBuffer","array","digest"],de={128:168,256:136};(s.JS_SHA3_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(M){return Object.prototype.toString.call(M)==="[object Array]"}),y&&(s.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(M){return typeof M=="object"&&M.buffer&&M.buffer.constructor===ArrayBuffer});for(var ce=function(M,J,T){return function(z){return new R(M,J,M).update(z)[T]()}},ae=function(M,J,T){return function(z,$){return new R(M,J,$).update(z)[T]()}},he=function(M,J,T){return function(z,$,b,k){return d["cshake"+M].update(z,$,b,k)[T]()}},ue=function(M,J,T){return function(z,$,b,k){return d["kmac"+M].update(z,$,b,k)[T]()}},le=function(M,J,T,z){for(var $=0;$<Z.length;++$){var b=Z[$];M[b]=J(T,z,b)}return M},Te=function(M,J){var T=ce(M,J,"hex");return T.create=function(){return new R(M,J,M)},T.update=function(z){return T.create().update(z)},le(T,ce,M,J)},lt=function(M,J){var T=ae(M,J,"hex");return T.create=function(z){return new R(M,J,z)},T.update=function(z,$){return T.create($).update(z)},le(T,ae,M,J)},B=function(M,J){var T=de[M],z=he(M,J,"hex");return z.create=function($,b,k){return!b&&!k?d["shake"+M].create($):new R(M,J,$).bytepad([b,k],T)},z.update=function($,b,k,W){return z.create(b,k,W).update($)},le(z,he,M,J)},v=function(M,J){var T=de[M],z=ue(M,J,"hex");return z.create=function($,b,k){return new X(M,J,b).bytepad(["KMAC",k],T).bytepad([$],T)},z.update=function($,b,k,W){return z.create($,k,W).update(b)},le(z,ue,M,J)},c=[{name:"keccak",padding:q,bits:G,createMethod:Te},{name:"sha3",padding:O,bits:G,createMethod:Te},{name:"shake",padding:I,bits:Q,createMethod:lt},{name:"cshake",padding:P,bits:Q,createMethod:B},{name:"kmac",padding:P,bits:Q,createMethod:v}],d={},p=[],w=0;w<c.length;++w)for(var x=c[w],E=x.bits,A=0;A<E.length;++A){var u=x.name+"_"+E[A];if(p.push(u),d[u]=x.createMethod(E[A],x.padding),x.name!=="sha3"){var l=x.name+E[A];p.push(l),d[l]=d[u]}}function R(M,J,T){this.blocks=[],this.s=[],this.padding=J,this.outputBits=T,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(M<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=T>>5,this.extraBytes=(T&31)>>3;for(var z=0;z<50;++z)this.s[z]=0}R.prototype.update=function(M){if(this.finalized)throw new Error(t);var J,T=typeof M;if(T!=="string"){if(T==="object"){if(M===null)throw new Error(e);if(y&&M.constructor===ArrayBuffer)M=new Uint8Array(M);else if(!Array.isArray(M)&&(!y||!ArrayBuffer.isView(M)))throw new Error(e)}else throw new Error(e);J=!0}for(var z=this.blocks,$=this.byteCount,b=M.length,k=this.blockCount,W=0,ne=this.s,se,ge;W<b;){if(this.reset)for(this.reset=!1,z[0]=this.block,se=1;se<k+1;++se)z[se]=0;if(J)for(se=this.start;W<b&&se<$;++W)z[se>>2]|=M[W]<<L[se++&3];else for(se=this.start;W<b&&se<$;++W)ge=M.charCodeAt(W),ge<128?z[se>>2]|=ge<<L[se++&3]:ge<2048?(z[se>>2]|=(192|ge>>6)<<L[se++&3],z[se>>2]|=(128|ge&63)<<L[se++&3]):ge<55296||ge>=57344?(z[se>>2]|=(224|ge>>12)<<L[se++&3],z[se>>2]|=(128|ge>>6&63)<<L[se++&3],z[se>>2]|=(128|ge&63)<<L[se++&3]):(ge=65536+((ge&1023)<<10|M.charCodeAt(++W)&1023),z[se>>2]|=(240|ge>>18)<<L[se++&3],z[se>>2]|=(128|ge>>12&63)<<L[se++&3],z[se>>2]|=(128|ge>>6&63)<<L[se++&3],z[se>>2]|=(128|ge&63)<<L[se++&3]);if(this.lastByteIndex=se,se>=$){for(this.start=se-$,this.block=z[k],se=0;se<k;++se)ne[se]^=z[se];ee(ne),this.reset=!0}else this.start=se}return this},R.prototype.encode=function(M,J){var T=M&255,z=1,$=[T];for(M=M>>8,T=M&255;T>0;)$.unshift(T),M=M>>8,T=M&255,++z;return J?$.push(z):$.unshift(z),this.update($),$.length},R.prototype.encodeString=function(M){var J,T=typeof M;if(T!=="string"){if(T==="object"){if(M===null)throw new Error(e);if(y&&M.constructor===ArrayBuffer)M=new Uint8Array(M);else if(!Array.isArray(M)&&(!y||!ArrayBuffer.isView(M)))throw new Error(e)}else throw new Error(e);J=!0}var z=0,$=M.length;if(J)z=$;else for(var b=0;b<M.length;++b){var k=M.charCodeAt(b);k<128?z+=1:k<2048?z+=2:k<55296||k>=57344?z+=3:(k=65536+((k&1023)<<10|M.charCodeAt(++b)&1023),z+=4)}return z+=this.encode(z*8),this.update(M),z},R.prototype.bytepad=function(M,J){for(var T=this.encode(J),z=0;z<M.length;++z)T+=this.encodeString(M[z]);var $=J-T%J,b=[];return b.length=$,this.update(b),this},R.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var M=this.blocks,J=this.lastByteIndex,T=this.blockCount,z=this.s;if(M[J>>2]|=this.padding[J&3],this.lastByteIndex===this.byteCount)for(M[0]=M[T],J=1;J<T+1;++J)M[J]=0;for(M[T-1]|=2147483648,J=0;J<T;++J)z[J]^=M[J];ee(z)}},R.prototype.toString=R.prototype.hex=function(){this.finalize();for(var M=this.blockCount,J=this.s,T=this.outputBlocks,z=this.extraBytes,$=0,b=0,k="",W;b<T;){for($=0;$<M&&b<T;++$,++b)W=J[$],k+=_[W>>4&15]+_[W&15]+_[W>>12&15]+_[W>>8&15]+_[W>>20&15]+_[W>>16&15]+_[W>>28&15]+_[W>>24&15];b%M===0&&(ee(J),$=0)}return z&&(W=J[$],k+=_[W>>4&15]+_[W&15],z>1&&(k+=_[W>>12&15]+_[W>>8&15]),z>2&&(k+=_[W>>20&15]+_[W>>16&15])),k},R.prototype.arrayBuffer=function(){this.finalize();var M=this.blockCount,J=this.s,T=this.outputBlocks,z=this.extraBytes,$=0,b=0,k=this.outputBits>>3,W;z?W=new ArrayBuffer(T+1<<2):W=new ArrayBuffer(k);for(var ne=new Uint32Array(W);b<T;){for($=0;$<M&&b<T;++$,++b)ne[b]=J[$];b%M===0&&ee(J)}return z&&(ne[$]=J[$],W=W.slice(0,k)),W},R.prototype.buffer=R.prototype.arrayBuffer,R.prototype.digest=R.prototype.array=function(){this.finalize();for(var M=this.blockCount,J=this.s,T=this.outputBlocks,z=this.extraBytes,$=0,b=0,k=[],W,ne;b<T;){for($=0;$<M&&b<T;++$,++b)W=b<<2,ne=J[$],k[W]=ne&255,k[W+1]=ne>>8&255,k[W+2]=ne>>16&255,k[W+3]=ne>>24&255;b%M===0&&ee(J)}return z&&(W=b<<2,ne=J[$],k[W]=ne&255,z>1&&(k[W+1]=ne>>8&255),z>2&&(k[W+2]=ne>>16&255)),k};function X(M,J,T){R.call(this,M,J,T)}X.prototype=new R,X.prototype.finalize=function(){return this.encode(this.outputBits,!0),R.prototype.finalize.call(this)};var ee=function(M){var J,T,z,$,b,k,W,ne,se,ge,ve,Oe,nt,Ee,Ve,Le,_e,Fe,Ge,me,je,De,we,Qe,ze,Se,ot,ft,qe,ct,ht,ke,wt,ut,$e,At,Et,Ae,He,Ye,Me,Je,Ke,Pe,st,We,Re,Xe,et,xe,Ue,at,Ce,Nt,Tt,tt,bt,Er,Ir,Sr,Pr,Rr,Yt;for(z=0;z<48;z+=2)$=M[0]^M[10]^M[20]^M[30]^M[40],b=M[1]^M[11]^M[21]^M[31]^M[41],k=M[2]^M[12]^M[22]^M[32]^M[42],W=M[3]^M[13]^M[23]^M[33]^M[43],ne=M[4]^M[14]^M[24]^M[34]^M[44],se=M[5]^M[15]^M[25]^M[35]^M[45],ge=M[6]^M[16]^M[26]^M[36]^M[46],ve=M[7]^M[17]^M[27]^M[37]^M[47],Oe=M[8]^M[18]^M[28]^M[38]^M[48],nt=M[9]^M[19]^M[29]^M[39]^M[49],J=Oe^(k<<1|W>>>31),T=nt^(W<<1|k>>>31),M[0]^=J,M[1]^=T,M[10]^=J,M[11]^=T,M[20]^=J,M[21]^=T,M[30]^=J,M[31]^=T,M[40]^=J,M[41]^=T,J=$^(ne<<1|se>>>31),T=b^(se<<1|ne>>>31),M[2]^=J,M[3]^=T,M[12]^=J,M[13]^=T,M[22]^=J,M[23]^=T,M[32]^=J,M[33]^=T,M[42]^=J,M[43]^=T,J=k^(ge<<1|ve>>>31),T=W^(ve<<1|ge>>>31),M[4]^=J,M[5]^=T,M[14]^=J,M[15]^=T,M[24]^=J,M[25]^=T,M[34]^=J,M[35]^=T,M[44]^=J,M[45]^=T,J=ne^(Oe<<1|nt>>>31),T=se^(nt<<1|Oe>>>31),M[6]^=J,M[7]^=T,M[16]^=J,M[17]^=T,M[26]^=J,M[27]^=T,M[36]^=J,M[37]^=T,M[46]^=J,M[47]^=T,J=ge^($<<1|b>>>31),T=ve^(b<<1|$>>>31),M[8]^=J,M[9]^=T,M[18]^=J,M[19]^=T,M[28]^=J,M[29]^=T,M[38]^=J,M[39]^=T,M[48]^=J,M[49]^=T,Ee=M[0],Ve=M[1],We=M[11]<<4|M[10]>>>28,Re=M[10]<<4|M[11]>>>28,ft=M[20]<<3|M[21]>>>29,qe=M[21]<<3|M[20]>>>29,Sr=M[31]<<9|M[30]>>>23,Pr=M[30]<<9|M[31]>>>23,Je=M[40]<<18|M[41]>>>14,Ke=M[41]<<18|M[40]>>>14,ut=M[2]<<1|M[3]>>>31,$e=M[3]<<1|M[2]>>>31,Le=M[13]<<12|M[12]>>>20,_e=M[12]<<12|M[13]>>>20,Xe=M[22]<<10|M[23]>>>22,et=M[23]<<10|M[22]>>>22,ct=M[33]<<13|M[32]>>>19,ht=M[32]<<13|M[33]>>>19,Rr=M[42]<<2|M[43]>>>30,Yt=M[43]<<2|M[42]>>>30,Nt=M[5]<<30|M[4]>>>2,Tt=M[4]<<30|M[5]>>>2,At=M[14]<<6|M[15]>>>26,Et=M[15]<<6|M[14]>>>26,Fe=M[25]<<11|M[24]>>>21,Ge=M[24]<<11|M[25]>>>21,xe=M[34]<<15|M[35]>>>17,Ue=M[35]<<15|M[34]>>>17,ke=M[45]<<29|M[44]>>>3,wt=M[44]<<29|M[45]>>>3,Qe=M[6]<<28|M[7]>>>4,ze=M[7]<<28|M[6]>>>4,tt=M[17]<<23|M[16]>>>9,bt=M[16]<<23|M[17]>>>9,Ae=M[26]<<25|M[27]>>>7,He=M[27]<<25|M[26]>>>7,me=M[36]<<21|M[37]>>>11,je=M[37]<<21|M[36]>>>11,at=M[47]<<24|M[46]>>>8,Ce=M[46]<<24|M[47]>>>8,Pe=M[8]<<27|M[9]>>>5,st=M[9]<<27|M[8]>>>5,Se=M[18]<<20|M[19]>>>12,ot=M[19]<<20|M[18]>>>12,Er=M[29]<<7|M[28]>>>25,Ir=M[28]<<7|M[29]>>>25,Ye=M[38]<<8|M[39]>>>24,Me=M[39]<<8|M[38]>>>24,De=M[48]<<14|M[49]>>>18,we=M[49]<<14|M[48]>>>18,M[0]=Ee^~Le&Fe,M[1]=Ve^~_e&Ge,M[10]=Qe^~Se&ft,M[11]=ze^~ot&qe,M[20]=ut^~At&Ae,M[21]=$e^~Et&He,M[30]=Pe^~We&Xe,M[31]=st^~Re&et,M[40]=Nt^~tt&Er,M[41]=Tt^~bt&Ir,M[2]=Le^~Fe&me,M[3]=_e^~Ge&je,M[12]=Se^~ft&ct,M[13]=ot^~qe&ht,M[22]=At^~Ae&Ye,M[23]=Et^~He&Me,M[32]=We^~Xe&xe,M[33]=Re^~et&Ue,M[42]=tt^~Er&Sr,M[43]=bt^~Ir&Pr,M[4]=Fe^~me&De,M[5]=Ge^~je&we,M[14]=ft^~ct&ke,M[15]=qe^~ht&wt,M[24]=Ae^~Ye&Je,M[25]=He^~Me&Ke,M[34]=Xe^~xe&at,M[35]=et^~Ue&Ce,M[44]=Er^~Sr&Rr,M[45]=Ir^~Pr&Yt,M[6]=me^~De&Ee,M[7]=je^~we&Ve,M[16]=ct^~ke&Qe,M[17]=ht^~wt&ze,M[26]=Ye^~Je&ut,M[27]=Me^~Ke&$e,M[36]=xe^~at&Pe,M[37]=Ue^~Ce&st,M[46]=Sr^~Rr&Nt,M[47]=Pr^~Yt&Tt,M[8]=De^~Ee&Le,M[9]=we^~Ve&_e,M[18]=ke^~Qe&Se,M[19]=wt^~ze&ot,M[28]=Je^~ut&At,M[29]=Ke^~$e&Et,M[38]=at^~Pe&We,M[39]=Ce^~st&Re,M[48]=Rr^~Nt&tt,M[49]=Yt^~Tt&bt,M[0]^=j[z],M[1]^=j[z+1]};if(g)r.exports=d;else for(w=0;w<p.length;++w)s[p[w]]=d[p[w]]})()})(N1);var y5=N1.exports;const w5="logger/5.7.0";let R0=!1,C0=!1;const jc={debug:1,default:2,info:2,warning:3,error:4,off:5};let N0=jc.default,Kh=null;function _5(){try{const r=[];if(["NFD","NFC","NFKD","NFKC"].forEach(e=>{try{if("test".normalize(e)!=="test")throw new Error("bad normalize")}catch{r.push(e)}}),r.length)throw new Error("missing "+r.join(", "));if("".normalize("NFD")!=="e")throw new Error("broken implementation")}catch(r){return r.message}return null}const T0=_5();var yu;(function(r){r.DEBUG="DEBUG",r.INFO="INFO",r.WARNING="WARNING",r.ERROR="ERROR",r.OFF="OFF"})(yu||(yu={}));var en;(function(r){r.UNKNOWN_ERROR="UNKNOWN_ERROR",r.NOT_IMPLEMENTED="NOT_IMPLEMENTED",r.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",r.NETWORK_ERROR="NETWORK_ERROR",r.SERVER_ERROR="SERVER_ERROR",r.TIMEOUT="TIMEOUT",r.BUFFER_OVERRUN="BUFFER_OVERRUN",r.NUMERIC_FAULT="NUMERIC_FAULT",r.MISSING_NEW="MISSING_NEW",r.INVALID_ARGUMENT="INVALID_ARGUMENT",r.MISSING_ARGUMENT="MISSING_ARGUMENT",r.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",r.CALL_EXCEPTION="CALL_EXCEPTION",r.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",r.NONCE_EXPIRED="NONCE_EXPIRED",r.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",r.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",r.TRANSACTION_REPLACED="TRANSACTION_REPLACED",r.ACTION_REJECTED="ACTION_REJECTED"})(en||(en={}));const O0="0123456789abcdef";let Ar=class ur{constructor(e){Object.defineProperty(this,"version",{enumerable:!0,value:e,writable:!1})}_log(e,t){const i=e.toLowerCase();jc[i]==null&&this.throwArgumentError("invalid log level name","logLevel",e),!(N0>jc[i])&&console.log.apply(console,t)}debug(...e){this._log(ur.levels.DEBUG,e)}info(...e){this._log(ur.levels.INFO,e)}warn(...e){this._log(ur.levels.WARNING,e)}makeError(e,t,i){if(C0)return this.makeError("censored error",t,{});t||(t=ur.errors.UNKNOWN_ERROR),i||(i={});const s=[];Object.keys(i).forEach(y=>{const _=i[y];try{if(_ instanceof Uint8Array){let I="";for(let P=0;P<_.length;P++)I+=O0[_[P]>>4],I+=O0[_[P]&15];s.push(y+"=Uint8Array(0x"+I+")")}else s.push(y+"="+JSON.stringify(_))}catch{s.push(y+"="+JSON.stringify(i[y].toString()))}}),s.push(`code=${t}`),s.push(`version=${this.version}`);const o=e;let h="";switch(t){case en.NUMERIC_FAULT:{h="NUMERIC_FAULT";const y=e;switch(y){case"overflow":case"underflow":case"division-by-zero":h+="-"+y;break;case"negative-power":case"negative-width":h+="-unsupported";break;case"unbound-bitwise-result":h+="-unbound-result";break}break}case en.CALL_EXCEPTION:case en.INSUFFICIENT_FUNDS:case en.MISSING_NEW:case en.NONCE_EXPIRED:case en.REPLACEMENT_UNDERPRICED:case en.TRANSACTION_REPLACED:case en.UNPREDICTABLE_GAS_LIMIT:h=t;break}h&&(e+=" [ See: https://links.ethers.org/v5-errors-"+h+" ]"),s.length&&(e+=" ("+s.join(", ")+")");const g=new Error(e);return g.reason=o,g.code=t,Object.keys(i).forEach(function(y){g[y]=i[y]}),g}throwError(e,t,i){throw this.makeError(e,t,i)}throwArgumentError(e,t,i){return this.throwError(e,ur.errors.INVALID_ARGUMENT,{argument:t,value:i})}assert(e,t,i,s){e||this.throwError(t,i,s)}assertArgument(e,t,i,s){e||this.throwArgumentError(t,i,s)}checkNormalize(e){T0&&this.throwError("platform missing String.prototype.normalize",ur.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:T0})}checkSafeUint53(e,t){typeof e=="number"&&(t==null&&(t="value not safe"),(e<0||e>=9007199254740991)&&this.throwError(t,ur.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:e}),e%1&&this.throwError(t,ur.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:e}))}checkArgumentCount(e,t,i){i?i=": "+i:i="",e<t&&this.throwError("missing argument"+i,ur.errors.MISSING_ARGUMENT,{count:e,expectedCount:t}),e>t&&this.throwError("too many arguments"+i,ur.errors.UNEXPECTED_ARGUMENT,{count:e,expectedCount:t})}checkNew(e,t){(e===Object||e==null)&&this.throwError("missing new",ur.errors.MISSING_NEW,{name:t.name})}checkAbstract(e,t){e===t?this.throwError("cannot instantiate abstract class "+JSON.stringify(t.name)+" directly; use a sub-class",ur.errors.UNSUPPORTED_OPERATION,{name:e.name,operation:"new"}):(e===Object||e==null)&&this.throwError("missing new",ur.errors.MISSING_NEW,{name:t.name})}static globalLogger(){return Kh||(Kh=new ur(w5)),Kh}static setCensorship(e,t){if(!e&&t&&this.globalLogger().throwError("cannot permanently disable censorship",ur.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),R0){if(!e)return;this.globalLogger().throwError("error censorship permanent",ur.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}C0=!!e,R0=!!t}static setLogLevel(e){const t=jc[e.toLowerCase()];if(t==null){ur.globalLogger().warn("invalid log level - "+e);return}N0=t}static from(e){return new ur(e)}};Ar.errors=en,Ar.levels=yu;const A5="bytes/5.7.0",nr=new Ar(A5);function T1(r){return!!r.toHexString}function la(r){return r.slice||(r.slice=function(){const e=Array.prototype.slice.call(arguments);return la(new Uint8Array(Array.prototype.slice.apply(r,e)))}),r}function M5(r){return di(r)&&!(r.length%2)||xa(r)}function q0(r){return typeof r=="number"&&r==r&&r%1===0}function xa(r){if(r==null)return!1;if(r.constructor===Uint8Array)return!0;if(typeof r=="string"||!q0(r.length)||r.length<0)return!1;for(let e=0;e<r.length;e++){const t=r[e];if(!q0(t)||t<0||t>=256)return!1}return!0}function Zt(r,e){if(e||(e={}),typeof r=="number"){nr.checkSafeUint53(r,"invalid arrayify value");const t=[];for(;r;)t.unshift(r&255),r=parseInt(String(r/256));return t.length===0&&t.push(0),la(new Uint8Array(t))}if(e.allowMissingPrefix&&typeof r=="string"&&r.substring(0,2)!=="0x"&&(r="0x"+r),T1(r)&&(r=r.toHexString()),di(r)){let t=r.substring(2);t.length%2&&(e.hexPad==="left"?t="0"+t:e.hexPad==="right"?t+="0":nr.throwArgumentError("hex data is odd-length","value",r));const i=[];for(let s=0;s<t.length;s+=2)i.push(parseInt(t.substring(s,s+2),16));return la(new Uint8Array(i))}return xa(r)?la(new Uint8Array(r)):nr.throwArgumentError("invalid arrayify value","value",r)}function x5(r){const e=r.map(s=>Zt(s)),t=e.reduce((s,o)=>s+o.length,0),i=new Uint8Array(t);return e.reduce((s,o)=>(i.set(o,s),s+o.length),0),la(i)}function E5(r,e){r=Zt(r),r.length>e&&nr.throwArgumentError("value out of range","value",arguments[0]);const t=new Uint8Array(e);return t.set(r,e-r.length),la(t)}function di(r,e){return!(typeof r!="string"||!r.match(/^0x[0-9A-Fa-f]*$/)||e&&r.length!==2+2*e)}const Vh="0123456789abcdef";function ei(r,e){if(e||(e={}),typeof r=="number"){nr.checkSafeUint53(r,"invalid hexlify value");let t="";for(;r;)t=Vh[r&15]+t,r=Math.floor(r/16);return t.length?(t.length%2&&(t="0"+t),"0x"+t):"0x00"}if(typeof r=="bigint")return r=r.toString(16),r.length%2?"0x0"+r:"0x"+r;if(e.allowMissingPrefix&&typeof r=="string"&&r.substring(0,2)!=="0x"&&(r="0x"+r),T1(r))return r.toHexString();if(di(r))return r.length%2&&(e.hexPad==="left"?r="0x0"+r.substring(2):e.hexPad==="right"?r+="0":nr.throwArgumentError("hex data is odd-length","value",r)),r.toLowerCase();if(xa(r)){let t="0x";for(let i=0;i<r.length;i++){let s=r[i];t+=Vh[(s&240)>>4]+Vh[s&15]}return t}return nr.throwArgumentError("invalid hexlify value","value",r)}function I5(r){if(typeof r!="string")r=ei(r);else if(!di(r)||r.length%2)return null;return(r.length-2)/2}function D0(r,e,t){return typeof r!="string"?r=ei(r):(!di(r)||r.length%2)&&nr.throwArgumentError("invalid hexData","value",r),e=2+2*e,t!=null?"0x"+r.substring(e,2+2*t):"0x"+r.substring(e)}function yn(r,e){for(typeof r!="string"?r=ei(r):di(r)||nr.throwArgumentError("invalid hex string","value",r),r.length>2*e+2&&nr.throwArgumentError("value out of range","value",arguments[1]);r.length<2*e+2;)r="0x0"+r.substring(2);return r}function O1(r){const e={r:"0x",s:"0x",_vs:"0x",recoveryParam:0,v:0,yParityAndS:"0x",compact:"0x"};if(M5(r)){let t=Zt(r);t.length===64?(e.v=27+(t[32]>>7),t[32]&=127,e.r=ei(t.slice(0,32)),e.s=ei(t.slice(32,64))):t.length===65?(e.r=ei(t.slice(0,32)),e.s=ei(t.slice(32,64)),e.v=t[64]):nr.throwArgumentError("invalid signature string","signature",r),e.v<27&&(e.v===0||e.v===1?e.v+=27:nr.throwArgumentError("signature invalid v byte","signature",r)),e.recoveryParam=1-e.v%2,e.recoveryParam&&(t[32]|=128),e._vs=ei(t.slice(32,64))}else{if(e.r=r.r,e.s=r.s,e.v=r.v,e.recoveryParam=r.recoveryParam,e._vs=r._vs,e._vs!=null){const s=E5(Zt(e._vs),32);e._vs=ei(s);const o=s[0]>=128?1:0;e.recoveryParam==null?e.recoveryParam=o:e.recoveryParam!==o&&nr.throwArgumentError("signature recoveryParam mismatch _vs","signature",r),s[0]&=127;const h=ei(s);e.s==null?e.s=h:e.s!==h&&nr.throwArgumentError("signature v mismatch _vs","signature",r)}if(e.recoveryParam==null)e.v==null?nr.throwArgumentError("signature missing v and recoveryParam","signature",r):e.v===0||e.v===1?e.recoveryParam=e.v:e.recoveryParam=1-e.v%2;else if(e.v==null)e.v=27+e.recoveryParam;else{const s=e.v===0||e.v===1?e.v:1-e.v%2;e.recoveryParam!==s&&nr.throwArgumentError("signature recoveryParam mismatch v","signature",r)}e.r==null||!di(e.r)?nr.throwArgumentError("signature missing or invalid r","signature",r):e.r=yn(e.r,32),e.s==null||!di(e.s)?nr.throwArgumentError("signature missing or invalid s","signature",r):e.s=yn(e.s,32);const t=Zt(e.s);t[0]>=128&&nr.throwArgumentError("signature s out of range","signature",r),e.recoveryParam&&(t[0]|=128);const i=ei(t);e._vs&&(di(e._vs)||nr.throwArgumentError("signature invalid _vs","signature",r),e._vs=yn(e._vs,32)),e._vs==null?e._vs=i:e._vs!==i&&nr.throwArgumentError("signature _vs mismatch v and s","signature",r)}return e.yParityAndS=e._vs,e.compact=e.r+e.yParityAndS.substring(2),e}function Hu(r){return"0x"+y5.keccak_256(Zt(r))}var q1={exports:{}},S5={},P5=Object.freeze({__proto__:null,default:S5}),R5=m5(P5);(function(r){(function(e,t){function i(c,d){if(!c)throw new Error(d||"Assertion failed")}function s(c,d){c.super_=d;var p=function(){};p.prototype=d.prototype,c.prototype=new p,c.prototype.constructor=c}function o(c,d,p){if(o.isBN(c))return c;this.negative=0,this.words=null,this.length=0,this.red=null,c!==null&&((d==="le"||d==="be")&&(p=d,d=10),this._init(c||0,d||10,p||"be"))}typeof e=="object"?e.exports=o:t.BN=o,o.BN=o,o.wordSize=26;var h;try{typeof window<"u"&&typeof window.Buffer<"u"?h=window.Buffer:h=R5.Buffer}catch{}o.isBN=function(c){return c instanceof o?!0:c!==null&&typeof c=="object"&&c.constructor.wordSize===o.wordSize&&Array.isArray(c.words)},o.max=function(c,d){return c.cmp(d)>0?c:d},o.min=function(c,d){return c.cmp(d)<0?c:d},o.prototype._init=function(c,d,p){if(typeof c=="number")return this._initNumber(c,d,p);if(typeof c=="object")return this._initArray(c,d,p);d==="hex"&&(d=16),i(d===(d|0)&&d>=2&&d<=36),c=c.toString().replace(/\s+/g,"");var w=0;c[0]==="-"&&(w++,this.negative=1),w<c.length&&(d===16?this._parseHex(c,w,p):(this._parseBase(c,d,w),p==="le"&&this._initArray(this.toArray(),d,p)))},o.prototype._initNumber=function(c,d,p){c<0&&(this.negative=1,c=-c),c<67108864?(this.words=[c&67108863],this.length=1):c<4503599627370496?(this.words=[c&67108863,c/67108864&67108863],this.length=2):(i(c<9007199254740992),this.words=[c&67108863,c/67108864&67108863,1],this.length=3),p==="le"&&this._initArray(this.toArray(),d,p)},o.prototype._initArray=function(c,d,p){if(i(typeof c.length=="number"),c.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(c.length/3),this.words=new Array(this.length);for(var w=0;w<this.length;w++)this.words[w]=0;var x,E,A=0;if(p==="be")for(w=c.length-1,x=0;w>=0;w-=3)E=c[w]|c[w-1]<<8|c[w-2]<<16,this.words[x]|=E<<A&67108863,this.words[x+1]=E>>>26-A&67108863,A+=24,A>=26&&(A-=26,x++);else if(p==="le")for(w=0,x=0;w<c.length;w+=3)E=c[w]|c[w+1]<<8|c[w+2]<<16,this.words[x]|=E<<A&67108863,this.words[x+1]=E>>>26-A&67108863,A+=24,A>=26&&(A-=26,x++);return this._strip()};function g(c,d){var p=c.charCodeAt(d);if(p>=48&&p<=57)return p-48;if(p>=65&&p<=70)return p-55;if(p>=97&&p<=102)return p-87;i(!1,"Invalid character in "+c)}function y(c,d,p){var w=g(c,p);return p-1>=d&&(w|=g(c,p-1)<<4),w}o.prototype._parseHex=function(c,d,p){this.length=Math.ceil((c.length-d)/6),this.words=new Array(this.length);for(var w=0;w<this.length;w++)this.words[w]=0;var x=0,E=0,A;if(p==="be")for(w=c.length-1;w>=d;w-=2)A=y(c,d,w)<<x,this.words[E]|=A&67108863,x>=18?(x-=18,E+=1,this.words[E]|=A>>>26):x+=8;else{var u=c.length-d;for(w=u%2===0?d+1:d;w<c.length;w+=2)A=y(c,d,w)<<x,this.words[E]|=A&67108863,x>=18?(x-=18,E+=1,this.words[E]|=A>>>26):x+=8}this._strip()};function _(c,d,p,w){for(var x=0,E=0,A=Math.min(c.length,p),u=d;u<A;u++){var l=c.charCodeAt(u)-48;x*=w,l>=49?E=l-49+10:l>=17?E=l-17+10:E=l,i(l>=0&&E<w,"Invalid character"),x+=E}return x}o.prototype._parseBase=function(c,d,p){this.words=[0],this.length=1;for(var w=0,x=1;x<=67108863;x*=d)w++;w--,x=x/d|0;for(var E=c.length-p,A=E%w,u=Math.min(E,E-A)+p,l=0,R=p;R<u;R+=w)l=_(c,R,R+w,d),this.imuln(x),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l);if(A!==0){var X=1;for(l=_(c,R,c.length,d),R=0;R<A;R++)X*=d;this.imuln(X),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l)}this._strip()},o.prototype.copy=function(c){c.words=new Array(this.length);for(var d=0;d<this.length;d++)c.words[d]=this.words[d];c.length=this.length,c.negative=this.negative,c.red=this.red};function I(c,d){c.words=d.words,c.length=d.length,c.negative=d.negative,c.red=d.red}if(o.prototype._move=function(c){I(c,this)},o.prototype.clone=function(){var c=new o(null);return this.copy(c),c},o.prototype._expand=function(c){for(;this.length<c;)this.words[this.length++]=0;return this},o.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},o.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{o.prototype[Symbol.for("nodejs.util.inspect.custom")]=P}catch{o.prototype.inspect=P}else o.prototype.inspect=P;function P(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var q=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],O=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],L=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];o.prototype.toString=function(c,d){c=c||10,d=d|0||1;var p;if(c===16||c==="hex"){p="";for(var w=0,x=0,E=0;E<this.length;E++){var A=this.words[E],u=((A<<w|x)&16777215).toString(16);x=A>>>24-w&16777215,w+=2,w>=26&&(w-=26,E--),x!==0||E!==this.length-1?p=q[6-u.length]+u+p:p=u+p}for(x!==0&&(p=x.toString(16)+p);p.length%d!==0;)p="0"+p;return this.negative!==0&&(p="-"+p),p}if(c===(c|0)&&c>=2&&c<=36){var l=O[c],R=L[c];p="";var X=this.clone();for(X.negative=0;!X.isZero();){var ee=X.modrn(R).toString(c);X=X.idivn(R),X.isZero()?p=ee+p:p=q[l-ee.length]+ee+p}for(this.isZero()&&(p="0"+p);p.length%d!==0;)p="0"+p;return this.negative!==0&&(p="-"+p),p}i(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var c=this.words[0];return this.length===2?c+=this.words[1]*67108864:this.length===3&&this.words[2]===1?c+=4503599627370496+this.words[1]*67108864:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-c:c},o.prototype.toJSON=function(){return this.toString(16,2)},h&&(o.prototype.toBuffer=function(c,d){return this.toArrayLike(h,c,d)}),o.prototype.toArray=function(c,d){return this.toArrayLike(Array,c,d)};var j=function(c,d){return c.allocUnsafe?c.allocUnsafe(d):new c(d)};o.prototype.toArrayLike=function(c,d,p){this._strip();var w=this.byteLength(),x=p||Math.max(1,w);i(w<=x,"byte array longer than desired length"),i(x>0,"Requested array length <= 0");var E=j(c,x),A=d==="le"?"LE":"BE";return this["_toArrayLike"+A](E,w),E},o.prototype._toArrayLikeLE=function(c,d){for(var p=0,w=0,x=0,E=0;x<this.length;x++){var A=this.words[x]<<E|w;c[p++]=A&255,p<c.length&&(c[p++]=A>>8&255),p<c.length&&(c[p++]=A>>16&255),E===6?(p<c.length&&(c[p++]=A>>24&255),w=0,E=0):(w=A>>>24,E+=2)}if(p<c.length)for(c[p++]=w;p<c.length;)c[p++]=0},o.prototype._toArrayLikeBE=function(c,d){for(var p=c.length-1,w=0,x=0,E=0;x<this.length;x++){var A=this.words[x]<<E|w;c[p--]=A&255,p>=0&&(c[p--]=A>>8&255),p>=0&&(c[p--]=A>>16&255),E===6?(p>=0&&(c[p--]=A>>24&255),w=0,E=0):(w=A>>>24,E+=2)}if(p>=0)for(c[p--]=w;p>=0;)c[p--]=0},Math.clz32?o.prototype._countBits=function(c){return 32-Math.clz32(c)}:o.prototype._countBits=function(c){var d=c,p=0;return d>=4096&&(p+=13,d>>>=13),d>=64&&(p+=7,d>>>=7),d>=8&&(p+=4,d>>>=4),d>=2&&(p+=2,d>>>=2),p+d},o.prototype._zeroBits=function(c){if(c===0)return 26;var d=c,p=0;return d&8191||(p+=13,d>>>=13),d&127||(p+=7,d>>>=7),d&15||(p+=4,d>>>=4),d&3||(p+=2,d>>>=2),d&1||p++,p},o.prototype.bitLength=function(){var c=this.words[this.length-1],d=this._countBits(c);return(this.length-1)*26+d};function G(c){for(var d=new Array(c.bitLength()),p=0;p<d.length;p++){var w=p/26|0,x=p%26;d[p]=c.words[w]>>>x&1}return d}o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var c=0,d=0;d<this.length;d++){var p=this._zeroBits(this.words[d]);if(c+=p,p!==26)break}return c},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(c){return this.negative!==0?this.abs().inotn(c).iaddn(1):this.clone()},o.prototype.fromTwos=function(c){return this.testn(c-1)?this.notn(c).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return this.negative!==0},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(c){for(;this.length<c.length;)this.words[this.length++]=0;for(var d=0;d<c.length;d++)this.words[d]=this.words[d]|c.words[d];return this._strip()},o.prototype.ior=function(c){return i((this.negative|c.negative)===0),this.iuor(c)},o.prototype.or=function(c){return this.length>c.length?this.clone().ior(c):c.clone().ior(this)},o.prototype.uor=function(c){return this.length>c.length?this.clone().iuor(c):c.clone().iuor(this)},o.prototype.iuand=function(c){var d;this.length>c.length?d=c:d=this;for(var p=0;p<d.length;p++)this.words[p]=this.words[p]&c.words[p];return this.length=d.length,this._strip()},o.prototype.iand=function(c){return i((this.negative|c.negative)===0),this.iuand(c)},o.prototype.and=function(c){return this.length>c.length?this.clone().iand(c):c.clone().iand(this)},o.prototype.uand=function(c){return this.length>c.length?this.clone().iuand(c):c.clone().iuand(this)},o.prototype.iuxor=function(c){var d,p;this.length>c.length?(d=this,p=c):(d=c,p=this);for(var w=0;w<p.length;w++)this.words[w]=d.words[w]^p.words[w];if(this!==d)for(;w<d.length;w++)this.words[w]=d.words[w];return this.length=d.length,this._strip()},o.prototype.ixor=function(c){return i((this.negative|c.negative)===0),this.iuxor(c)},o.prototype.xor=function(c){return this.length>c.length?this.clone().ixor(c):c.clone().ixor(this)},o.prototype.uxor=function(c){return this.length>c.length?this.clone().iuxor(c):c.clone().iuxor(this)},o.prototype.inotn=function(c){i(typeof c=="number"&&c>=0);var d=Math.ceil(c/26)|0,p=c%26;this._expand(d),p>0&&d--;for(var w=0;w<d;w++)this.words[w]=~this.words[w]&67108863;return p>0&&(this.words[w]=~this.words[w]&67108863>>26-p),this._strip()},o.prototype.notn=function(c){return this.clone().inotn(c)},o.prototype.setn=function(c,d){i(typeof c=="number"&&c>=0);var p=c/26|0,w=c%26;return this._expand(p+1),d?this.words[p]=this.words[p]|1<<w:this.words[p]=this.words[p]&~(1<<w),this._strip()},o.prototype.iadd=function(c){var d;if(this.negative!==0&&c.negative===0)return this.negative=0,d=this.isub(c),this.negative^=1,this._normSign();if(this.negative===0&&c.negative!==0)return c.negative=0,d=this.isub(c),c.negative=1,d._normSign();var p,w;this.length>c.length?(p=this,w=c):(p=c,w=this);for(var x=0,E=0;E<w.length;E++)d=(p.words[E]|0)+(w.words[E]|0)+x,this.words[E]=d&67108863,x=d>>>26;for(;x!==0&&E<p.length;E++)d=(p.words[E]|0)+x,this.words[E]=d&67108863,x=d>>>26;if(this.length=p.length,x!==0)this.words[this.length]=x,this.length++;else if(p!==this)for(;E<p.length;E++)this.words[E]=p.words[E];return this},o.prototype.add=function(c){var d;return c.negative!==0&&this.negative===0?(c.negative=0,d=this.sub(c),c.negative^=1,d):c.negative===0&&this.negative!==0?(this.negative=0,d=c.sub(this),this.negative=1,d):this.length>c.length?this.clone().iadd(c):c.clone().iadd(this)},o.prototype.isub=function(c){if(c.negative!==0){c.negative=0;var d=this.iadd(c);return c.negative=1,d._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(c),this.negative=1,this._normSign();var p=this.cmp(c);if(p===0)return this.negative=0,this.length=1,this.words[0]=0,this;var w,x;p>0?(w=this,x=c):(w=c,x=this);for(var E=0,A=0;A<x.length;A++)d=(w.words[A]|0)-(x.words[A]|0)+E,E=d>>26,this.words[A]=d&67108863;for(;E!==0&&A<w.length;A++)d=(w.words[A]|0)+E,E=d>>26,this.words[A]=d&67108863;if(E===0&&A<w.length&&w!==this)for(;A<w.length;A++)this.words[A]=w.words[A];return this.length=Math.max(this.length,A),w!==this&&(this.negative=1),this._strip()},o.prototype.sub=function(c){return this.clone().isub(c)};function Q(c,d,p){p.negative=d.negative^c.negative;var w=c.length+d.length|0;p.length=w,w=w-1|0;var x=c.words[0]|0,E=d.words[0]|0,A=x*E,u=A&67108863,l=A/67108864|0;p.words[0]=u;for(var R=1;R<w;R++){for(var X=l>>>26,ee=l&67108863,M=Math.min(R,d.length-1),J=Math.max(0,R-c.length+1);J<=M;J++){var T=R-J|0;x=c.words[T]|0,E=d.words[J]|0,A=x*E+ee,X+=A/67108864|0,ee=A&67108863}p.words[R]=ee|0,l=X|0}return l!==0?p.words[R]=l|0:p.length--,p._strip()}var Z=function(c,d,p){var w=c.words,x=d.words,E=p.words,A=0,u,l,R,X=w[0]|0,ee=X&8191,M=X>>>13,J=w[1]|0,T=J&8191,z=J>>>13,$=w[2]|0,b=$&8191,k=$>>>13,W=w[3]|0,ne=W&8191,se=W>>>13,ge=w[4]|0,ve=ge&8191,Oe=ge>>>13,nt=w[5]|0,Ee=nt&8191,Ve=nt>>>13,Le=w[6]|0,_e=Le&8191,Fe=Le>>>13,Ge=w[7]|0,me=Ge&8191,je=Ge>>>13,De=w[8]|0,we=De&8191,Qe=De>>>13,ze=w[9]|0,Se=ze&8191,ot=ze>>>13,ft=x[0]|0,qe=ft&8191,ct=ft>>>13,ht=x[1]|0,ke=ht&8191,wt=ht>>>13,ut=x[2]|0,$e=ut&8191,At=ut>>>13,Et=x[3]|0,Ae=Et&8191,He=Et>>>13,Ye=x[4]|0,Me=Ye&8191,Je=Ye>>>13,Ke=x[5]|0,Pe=Ke&8191,st=Ke>>>13,We=x[6]|0,Re=We&8191,Xe=We>>>13,et=x[7]|0,xe=et&8191,Ue=et>>>13,at=x[8]|0,Ce=at&8191,Nt=at>>>13,Tt=x[9]|0,tt=Tt&8191,bt=Tt>>>13;p.negative=c.negative^d.negative,p.length=19,u=Math.imul(ee,qe),l=Math.imul(ee,ct),l=l+Math.imul(M,qe)|0,R=Math.imul(M,ct);var Er=(A+u|0)+((l&8191)<<13)|0;A=(R+(l>>>13)|0)+(Er>>>26)|0,Er&=67108863,u=Math.imul(T,qe),l=Math.imul(T,ct),l=l+Math.imul(z,qe)|0,R=Math.imul(z,ct),u=u+Math.imul(ee,ke)|0,l=l+Math.imul(ee,wt)|0,l=l+Math.imul(M,ke)|0,R=R+Math.imul(M,wt)|0;var Ir=(A+u|0)+((l&8191)<<13)|0;A=(R+(l>>>13)|0)+(Ir>>>26)|0,Ir&=67108863,u=Math.imul(b,qe),l=Math.imul(b,ct),l=l+Math.imul(k,qe)|0,R=Math.imul(k,ct),u=u+Math.imul(T,ke)|0,l=l+Math.imul(T,wt)|0,l=l+Math.imul(z,ke)|0,R=R+Math.imul(z,wt)|0,u=u+Math.imul(ee,$e)|0,l=l+Math.imul(ee,At)|0,l=l+Math.imul(M,$e)|0,R=R+Math.imul(M,At)|0;var Sr=(A+u|0)+((l&8191)<<13)|0;A=(R+(l>>>13)|0)+(Sr>>>26)|0,Sr&=67108863,u=Math.imul(ne,qe),l=Math.imul(ne,ct),l=l+Math.imul(se,qe)|0,R=Math.imul(se,ct),u=u+Math.imul(b,ke)|0,l=l+Math.imul(b,wt)|0,l=l+Math.imul(k,ke)|0,R=R+Math.imul(k,wt)|0,u=u+Math.imul(T,$e)|0,l=l+Math.imul(T,At)|0,l=l+Math.imul(z,$e)|0,R=R+Math.imul(z,At)|0,u=u+Math.imul(ee,Ae)|0,l=l+Math.imul(ee,He)|0,l=l+Math.imul(M,Ae)|0,R=R+Math.imul(M,He)|0;var Pr=(A+u|0)+((l&8191)<<13)|0;A=(R+(l>>>13)|0)+(Pr>>>26)|0,Pr&=67108863,u=Math.imul(ve,qe),l=Math.imul(ve,ct),l=l+Math.imul(Oe,qe)|0,R=Math.imul(Oe,ct),u=u+Math.imul(ne,ke)|0,l=l+Math.imul(ne,wt)|0,l=l+Math.imul(se,ke)|0,R=R+Math.imul(se,wt)|0,u=u+Math.imul(b,$e)|0,l=l+Math.imul(b,At)|0,l=l+Math.imul(k,$e)|0,R=R+Math.imul(k,At)|0,u=u+Math.imul(T,Ae)|0,l=l+Math.imul(T,He)|0,l=l+Math.imul(z,Ae)|0,R=R+Math.imul(z,He)|0,u=u+Math.imul(ee,Me)|0,l=l+Math.imul(ee,Je)|0,l=l+Math.imul(M,Me)|0,R=R+Math.imul(M,Je)|0;var Rr=(A+u|0)+((l&8191)<<13)|0;A=(R+(l>>>13)|0)+(Rr>>>26)|0,Rr&=67108863,u=Math.imul(Ee,qe),l=Math.imul(Ee,ct),l=l+Math.imul(Ve,qe)|0,R=Math.imul(Ve,ct),u=u+Math.imul(ve,ke)|0,l=l+Math.imul(ve,wt)|0,l=l+Math.imul(Oe,ke)|0,R=R+Math.imul(Oe,wt)|0,u=u+Math.imul(ne,$e)|0,l=l+Math.imul(ne,At)|0,l=l+Math.imul(se,$e)|0,R=R+Math.imul(se,At)|0,u=u+Math.imul(b,Ae)|0,l=l+Math.imul(b,He)|0,l=l+Math.imul(k,Ae)|0,R=R+Math.imul(k,He)|0,u=u+Math.imul(T,Me)|0,l=l+Math.imul(T,Je)|0,l=l+Math.imul(z,Me)|0,R=R+Math.imul(z,Je)|0,u=u+Math.imul(ee,Pe)|0,l=l+Math.imul(ee,st)|0,l=l+Math.imul(M,Pe)|0,R=R+Math.imul(M,st)|0;var Yt=(A+u|0)+((l&8191)<<13)|0;A=(R+(l>>>13)|0)+(Yt>>>26)|0,Yt&=67108863,u=Math.imul(_e,qe),l=Math.imul(_e,ct),l=l+Math.imul(Fe,qe)|0,R=Math.imul(Fe,ct),u=u+Math.imul(Ee,ke)|0,l=l+Math.imul(Ee,wt)|0,l=l+Math.imul(Ve,ke)|0,R=R+Math.imul(Ve,wt)|0,u=u+Math.imul(ve,$e)|0,l=l+Math.imul(ve,At)|0,l=l+Math.imul(Oe,$e)|0,R=R+Math.imul(Oe,At)|0,u=u+Math.imul(ne,Ae)|0,l=l+Math.imul(ne,He)|0,l=l+Math.imul(se,Ae)|0,R=R+Math.imul(se,He)|0,u=u+Math.imul(b,Me)|0,l=l+Math.imul(b,Je)|0,l=l+Math.imul(k,Me)|0,R=R+Math.imul(k,Je)|0,u=u+Math.imul(T,Pe)|0,l=l+Math.imul(T,st)|0,l=l+Math.imul(z,Pe)|0,R=R+Math.imul(z,st)|0,u=u+Math.imul(ee,Re)|0,l=l+Math.imul(ee,Xe)|0,l=l+Math.imul(M,Re)|0,R=R+Math.imul(M,Xe)|0;var Hr=(A+u|0)+((l&8191)<<13)|0;A=(R+(l>>>13)|0)+(Hr>>>26)|0,Hr&=67108863,u=Math.imul(me,qe),l=Math.imul(me,ct),l=l+Math.imul(je,qe)|0,R=Math.imul(je,ct),u=u+Math.imul(_e,ke)|0,l=l+Math.imul(_e,wt)|0,l=l+Math.imul(Fe,ke)|0,R=R+Math.imul(Fe,wt)|0,u=u+Math.imul(Ee,$e)|0,l=l+Math.imul(Ee,At)|0,l=l+Math.imul(Ve,$e)|0,R=R+Math.imul(Ve,At)|0,u=u+Math.imul(ve,Ae)|0,l=l+Math.imul(ve,He)|0,l=l+Math.imul(Oe,Ae)|0,R=R+Math.imul(Oe,He)|0,u=u+Math.imul(ne,Me)|0,l=l+Math.imul(ne,Je)|0,l=l+Math.imul(se,Me)|0,R=R+Math.imul(se,Je)|0,u=u+Math.imul(b,Pe)|0,l=l+Math.imul(b,st)|0,l=l+Math.imul(k,Pe)|0,R=R+Math.imul(k,st)|0,u=u+Math.imul(T,Re)|0,l=l+Math.imul(T,Xe)|0,l=l+Math.imul(z,Re)|0,R=R+Math.imul(z,Xe)|0,u=u+Math.imul(ee,xe)|0,l=l+Math.imul(ee,Ue)|0,l=l+Math.imul(M,xe)|0,R=R+Math.imul(M,Ue)|0;var Bi=(A+u|0)+((l&8191)<<13)|0;A=(R+(l>>>13)|0)+(Bi>>>26)|0,Bi&=67108863,u=Math.imul(we,qe),l=Math.imul(we,ct),l=l+Math.imul(Qe,qe)|0,R=Math.imul(Qe,ct),u=u+Math.imul(me,ke)|0,l=l+Math.imul(me,wt)|0,l=l+Math.imul(je,ke)|0,R=R+Math.imul(je,wt)|0,u=u+Math.imul(_e,$e)|0,l=l+Math.imul(_e,At)|0,l=l+Math.imul(Fe,$e)|0,R=R+Math.imul(Fe,At)|0,u=u+Math.imul(Ee,Ae)|0,l=l+Math.imul(Ee,He)|0,l=l+Math.imul(Ve,Ae)|0,R=R+Math.imul(Ve,He)|0,u=u+Math.imul(ve,Me)|0,l=l+Math.imul(ve,Je)|0,l=l+Math.imul(Oe,Me)|0,R=R+Math.imul(Oe,Je)|0,u=u+Math.imul(ne,Pe)|0,l=l+Math.imul(ne,st)|0,l=l+Math.imul(se,Pe)|0,R=R+Math.imul(se,st)|0,u=u+Math.imul(b,Re)|0,l=l+Math.imul(b,Xe)|0,l=l+Math.imul(k,Re)|0,R=R+Math.imul(k,Xe)|0,u=u+Math.imul(T,xe)|0,l=l+Math.imul(T,Ue)|0,l=l+Math.imul(z,xe)|0,R=R+Math.imul(z,Ue)|0,u=u+Math.imul(ee,Ce)|0,l=l+Math.imul(ee,Nt)|0,l=l+Math.imul(M,Ce)|0,R=R+Math.imul(M,Nt)|0;var Kr=(A+u|0)+((l&8191)<<13)|0;A=(R+(l>>>13)|0)+(Kr>>>26)|0,Kr&=67108863,u=Math.imul(Se,qe),l=Math.imul(Se,ct),l=l+Math.imul(ot,qe)|0,R=Math.imul(ot,ct),u=u+Math.imul(we,ke)|0,l=l+Math.imul(we,wt)|0,l=l+Math.imul(Qe,ke)|0,R=R+Math.imul(Qe,wt)|0,u=u+Math.imul(me,$e)|0,l=l+Math.imul(me,At)|0,l=l+Math.imul(je,$e)|0,R=R+Math.imul(je,At)|0,u=u+Math.imul(_e,Ae)|0,l=l+Math.imul(_e,He)|0,l=l+Math.imul(Fe,Ae)|0,R=R+Math.imul(Fe,He)|0,u=u+Math.imul(Ee,Me)|0,l=l+Math.imul(Ee,Je)|0,l=l+Math.imul(Ve,Me)|0,R=R+Math.imul(Ve,Je)|0,u=u+Math.imul(ve,Pe)|0,l=l+Math.imul(ve,st)|0,l=l+Math.imul(Oe,Pe)|0,R=R+Math.imul(Oe,st)|0,u=u+Math.imul(ne,Re)|0,l=l+Math.imul(ne,Xe)|0,l=l+Math.imul(se,Re)|0,R=R+Math.imul(se,Xe)|0,u=u+Math.imul(b,xe)|0,l=l+Math.imul(b,Ue)|0,l=l+Math.imul(k,xe)|0,R=R+Math.imul(k,Ue)|0,u=u+Math.imul(T,Ce)|0,l=l+Math.imul(T,Nt)|0,l=l+Math.imul(z,Ce)|0,R=R+Math.imul(z,Nt)|0,u=u+Math.imul(ee,tt)|0,l=l+Math.imul(ee,bt)|0,l=l+Math.imul(M,tt)|0,R=R+Math.imul(M,bt)|0;var Li=(A+u|0)+((l&8191)<<13)|0;A=(R+(l>>>13)|0)+(Li>>>26)|0,Li&=67108863,u=Math.imul(Se,ke),l=Math.imul(Se,wt),l=l+Math.imul(ot,ke)|0,R=Math.imul(ot,wt),u=u+Math.imul(we,$e)|0,l=l+Math.imul(we,At)|0,l=l+Math.imul(Qe,$e)|0,R=R+Math.imul(Qe,At)|0,u=u+Math.imul(me,Ae)|0,l=l+Math.imul(me,He)|0,l=l+Math.imul(je,Ae)|0,R=R+Math.imul(je,He)|0,u=u+Math.imul(_e,Me)|0,l=l+Math.imul(_e,Je)|0,l=l+Math.imul(Fe,Me)|0,R=R+Math.imul(Fe,Je)|0,u=u+Math.imul(Ee,Pe)|0,l=l+Math.imul(Ee,st)|0,l=l+Math.imul(Ve,Pe)|0,R=R+Math.imul(Ve,st)|0,u=u+Math.imul(ve,Re)|0,l=l+Math.imul(ve,Xe)|0,l=l+Math.imul(Oe,Re)|0,R=R+Math.imul(Oe,Xe)|0,u=u+Math.imul(ne,xe)|0,l=l+Math.imul(ne,Ue)|0,l=l+Math.imul(se,xe)|0,R=R+Math.imul(se,Ue)|0,u=u+Math.imul(b,Ce)|0,l=l+Math.imul(b,Nt)|0,l=l+Math.imul(k,Ce)|0,R=R+Math.imul(k,Nt)|0,u=u+Math.imul(T,tt)|0,l=l+Math.imul(T,bt)|0,l=l+Math.imul(z,tt)|0,R=R+Math.imul(z,bt)|0;var zi=(A+u|0)+((l&8191)<<13)|0;A=(R+(l>>>13)|0)+(zi>>>26)|0,zi&=67108863,u=Math.imul(Se,$e),l=Math.imul(Se,At),l=l+Math.imul(ot,$e)|0,R=Math.imul(ot,At),u=u+Math.imul(we,Ae)|0,l=l+Math.imul(we,He)|0,l=l+Math.imul(Qe,Ae)|0,R=R+Math.imul(Qe,He)|0,u=u+Math.imul(me,Me)|0,l=l+Math.imul(me,Je)|0,l=l+Math.imul(je,Me)|0,R=R+Math.imul(je,Je)|0,u=u+Math.imul(_e,Pe)|0,l=l+Math.imul(_e,st)|0,l=l+Math.imul(Fe,Pe)|0,R=R+Math.imul(Fe,st)|0,u=u+Math.imul(Ee,Re)|0,l=l+Math.imul(Ee,Xe)|0,l=l+Math.imul(Ve,Re)|0,R=R+Math.imul(Ve,Xe)|0,u=u+Math.imul(ve,xe)|0,l=l+Math.imul(ve,Ue)|0,l=l+Math.imul(Oe,xe)|0,R=R+Math.imul(Oe,Ue)|0,u=u+Math.imul(ne,Ce)|0,l=l+Math.imul(ne,Nt)|0,l=l+Math.imul(se,Ce)|0,R=R+Math.imul(se,Nt)|0,u=u+Math.imul(b,tt)|0,l=l+Math.imul(b,bt)|0,l=l+Math.imul(k,tt)|0,R=R+Math.imul(k,bt)|0;var Vr=(A+u|0)+((l&8191)<<13)|0;A=(R+(l>>>13)|0)+(Vr>>>26)|0,Vr&=67108863,u=Math.imul(Se,Ae),l=Math.imul(Se,He),l=l+Math.imul(ot,Ae)|0,R=Math.imul(ot,He),u=u+Math.imul(we,Me)|0,l=l+Math.imul(we,Je)|0,l=l+Math.imul(Qe,Me)|0,R=R+Math.imul(Qe,Je)|0,u=u+Math.imul(me,Pe)|0,l=l+Math.imul(me,st)|0,l=l+Math.imul(je,Pe)|0,R=R+Math.imul(je,st)|0,u=u+Math.imul(_e,Re)|0,l=l+Math.imul(_e,Xe)|0,l=l+Math.imul(Fe,Re)|0,R=R+Math.imul(Fe,Xe)|0,u=u+Math.imul(Ee,xe)|0,l=l+Math.imul(Ee,Ue)|0,l=l+Math.imul(Ve,xe)|0,R=R+Math.imul(Ve,Ue)|0,u=u+Math.imul(ve,Ce)|0,l=l+Math.imul(ve,Nt)|0,l=l+Math.imul(Oe,Ce)|0,R=R+Math.imul(Oe,Nt)|0,u=u+Math.imul(ne,tt)|0,l=l+Math.imul(ne,bt)|0,l=l+Math.imul(se,tt)|0,R=R+Math.imul(se,bt)|0;var vi=(A+u|0)+((l&8191)<<13)|0;A=(R+(l>>>13)|0)+(vi>>>26)|0,vi&=67108863,u=Math.imul(Se,Me),l=Math.imul(Se,Je),l=l+Math.imul(ot,Me)|0,R=Math.imul(ot,Je),u=u+Math.imul(we,Pe)|0,l=l+Math.imul(we,st)|0,l=l+Math.imul(Qe,Pe)|0,R=R+Math.imul(Qe,st)|0,u=u+Math.imul(me,Re)|0,l=l+Math.imul(me,Xe)|0,l=l+Math.imul(je,Re)|0,R=R+Math.imul(je,Xe)|0,u=u+Math.imul(_e,xe)|0,l=l+Math.imul(_e,Ue)|0,l=l+Math.imul(Fe,xe)|0,R=R+Math.imul(Fe,Ue)|0,u=u+Math.imul(Ee,Ce)|0,l=l+Math.imul(Ee,Nt)|0,l=l+Math.imul(Ve,Ce)|0,R=R+Math.imul(Ve,Nt)|0,u=u+Math.imul(ve,tt)|0,l=l+Math.imul(ve,bt)|0,l=l+Math.imul(Oe,tt)|0,R=R+Math.imul(Oe,bt)|0;var bi=(A+u|0)+((l&8191)<<13)|0;A=(R+(l>>>13)|0)+(bi>>>26)|0,bi&=67108863,u=Math.imul(Se,Pe),l=Math.imul(Se,st),l=l+Math.imul(ot,Pe)|0,R=Math.imul(ot,st),u=u+Math.imul(we,Re)|0,l=l+Math.imul(we,Xe)|0,l=l+Math.imul(Qe,Re)|0,R=R+Math.imul(Qe,Xe)|0,u=u+Math.imul(me,xe)|0,l=l+Math.imul(me,Ue)|0,l=l+Math.imul(je,xe)|0,R=R+Math.imul(je,Ue)|0,u=u+Math.imul(_e,Ce)|0,l=l+Math.imul(_e,Nt)|0,l=l+Math.imul(Fe,Ce)|0,R=R+Math.imul(Fe,Nt)|0,u=u+Math.imul(Ee,tt)|0,l=l+Math.imul(Ee,bt)|0,l=l+Math.imul(Ve,tt)|0,R=R+Math.imul(Ve,bt)|0;var cr=(A+u|0)+((l&8191)<<13)|0;A=(R+(l>>>13)|0)+(cr>>>26)|0,cr&=67108863,u=Math.imul(Se,Re),l=Math.imul(Se,Xe),l=l+Math.imul(ot,Re)|0,R=Math.imul(ot,Xe),u=u+Math.imul(we,xe)|0,l=l+Math.imul(we,Ue)|0,l=l+Math.imul(Qe,xe)|0,R=R+Math.imul(Qe,Ue)|0,u=u+Math.imul(me,Ce)|0,l=l+Math.imul(me,Nt)|0,l=l+Math.imul(je,Ce)|0,R=R+Math.imul(je,Nt)|0,u=u+Math.imul(_e,tt)|0,l=l+Math.imul(_e,bt)|0,l=l+Math.imul(Fe,tt)|0,R=R+Math.imul(Fe,bt)|0;var $i=(A+u|0)+((l&8191)<<13)|0;A=(R+(l>>>13)|0)+($i>>>26)|0,$i&=67108863,u=Math.imul(Se,xe),l=Math.imul(Se,Ue),l=l+Math.imul(ot,xe)|0,R=Math.imul(ot,Ue),u=u+Math.imul(we,Ce)|0,l=l+Math.imul(we,Nt)|0,l=l+Math.imul(Qe,Ce)|0,R=R+Math.imul(Qe,Nt)|0,u=u+Math.imul(me,tt)|0,l=l+Math.imul(me,bt)|0,l=l+Math.imul(je,tt)|0,R=R+Math.imul(je,bt)|0;var Ui=(A+u|0)+((l&8191)<<13)|0;A=(R+(l>>>13)|0)+(Ui>>>26)|0,Ui&=67108863,u=Math.imul(Se,Ce),l=Math.imul(Se,Nt),l=l+Math.imul(ot,Ce)|0,R=Math.imul(ot,Nt),u=u+Math.imul(we,tt)|0,l=l+Math.imul(we,bt)|0,l=l+Math.imul(Qe,tt)|0,R=R+Math.imul(Qe,bt)|0;var Fi=(A+u|0)+((l&8191)<<13)|0;A=(R+(l>>>13)|0)+(Fi>>>26)|0,Fi&=67108863,u=Math.imul(Se,tt),l=Math.imul(Se,bt),l=l+Math.imul(ot,tt)|0,R=Math.imul(ot,bt);var us=(A+u|0)+((l&8191)<<13)|0;return A=(R+(l>>>13)|0)+(us>>>26)|0,us&=67108863,E[0]=Er,E[1]=Ir,E[2]=Sr,E[3]=Pr,E[4]=Rr,E[5]=Yt,E[6]=Hr,E[7]=Bi,E[8]=Kr,E[9]=Li,E[10]=zi,E[11]=Vr,E[12]=vi,E[13]=bi,E[14]=cr,E[15]=$i,E[16]=Ui,E[17]=Fi,E[18]=us,A!==0&&(E[19]=A,p.length++),p};Math.imul||(Z=Q);function de(c,d,p){p.negative=d.negative^c.negative,p.length=c.length+d.length;for(var w=0,x=0,E=0;E<p.length-1;E++){var A=x;x=0;for(var u=w&67108863,l=Math.min(E,d.length-1),R=Math.max(0,E-c.length+1);R<=l;R++){var X=E-R,ee=c.words[X]|0,M=d.words[R]|0,J=ee*M,T=J&67108863;A=A+(J/67108864|0)|0,T=T+u|0,u=T&67108863,A=A+(T>>>26)|0,x+=A>>>26,A&=67108863}p.words[E]=u,w=A,A=x}return w!==0?p.words[E]=w:p.length--,p._strip()}function ce(c,d,p){return de(c,d,p)}o.prototype.mulTo=function(c,d){var p,w=this.length+c.length;return this.length===10&&c.length===10?p=Z(this,c,d):w<63?p=Q(this,c,d):w<1024?p=de(this,c,d):p=ce(this,c,d),p},o.prototype.mul=function(c){var d=new o(null);return d.words=new Array(this.length+c.length),this.mulTo(c,d)},o.prototype.mulf=function(c){var d=new o(null);return d.words=new Array(this.length+c.length),ce(this,c,d)},o.prototype.imul=function(c){return this.clone().mulTo(c,this)},o.prototype.imuln=function(c){var d=c<0;d&&(c=-c),i(typeof c=="number"),i(c<67108864);for(var p=0,w=0;w<this.length;w++){var x=(this.words[w]|0)*c,E=(x&67108863)+(p&67108863);p>>=26,p+=x/67108864|0,p+=E>>>26,this.words[w]=E&67108863}return p!==0&&(this.words[w]=p,this.length++),d?this.ineg():this},o.prototype.muln=function(c){return this.clone().imuln(c)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(c){var d=G(c);if(d.length===0)return new o(1);for(var p=this,w=0;w<d.length&&d[w]===0;w++,p=p.sqr());if(++w<d.length)for(var x=p.sqr();w<d.length;w++,x=x.sqr())d[w]!==0&&(p=p.mul(x));return p},o.prototype.iushln=function(c){i(typeof c=="number"&&c>=0);var d=c%26,p=(c-d)/26,w=67108863>>>26-d<<26-d,x;if(d!==0){var E=0;for(x=0;x<this.length;x++){var A=this.words[x]&w,u=(this.words[x]|0)-A<<d;this.words[x]=u|E,E=A>>>26-d}E&&(this.words[x]=E,this.length++)}if(p!==0){for(x=this.length-1;x>=0;x--)this.words[x+p]=this.words[x];for(x=0;x<p;x++)this.words[x]=0;this.length+=p}return this._strip()},o.prototype.ishln=function(c){return i(this.negative===0),this.iushln(c)},o.prototype.iushrn=function(c,d,p){i(typeof c=="number"&&c>=0);var w;d?w=(d-d%26)/26:w=0;var x=c%26,E=Math.min((c-x)/26,this.length),A=67108863^67108863>>>x<<x,u=p;if(w-=E,w=Math.max(0,w),u){for(var l=0;l<E;l++)u.words[l]=this.words[l];u.length=E}if(E!==0)if(this.length>E)for(this.length-=E,l=0;l<this.length;l++)this.words[l]=this.words[l+E];else this.words[0]=0,this.length=1;var R=0;for(l=this.length-1;l>=0&&(R!==0||l>=w);l--){var X=this.words[l]|0;this.words[l]=R<<26-x|X>>>x,R=X&A}return u&&R!==0&&(u.words[u.length++]=R),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},o.prototype.ishrn=function(c,d,p){return i(this.negative===0),this.iushrn(c,d,p)},o.prototype.shln=function(c){return this.clone().ishln(c)},o.prototype.ushln=function(c){return this.clone().iushln(c)},o.prototype.shrn=function(c){return this.clone().ishrn(c)},o.prototype.ushrn=function(c){return this.clone().iushrn(c)},o.prototype.testn=function(c){i(typeof c=="number"&&c>=0);var d=c%26,p=(c-d)/26,w=1<<d;if(this.length<=p)return!1;var x=this.words[p];return!!(x&w)},o.prototype.imaskn=function(c){i(typeof c=="number"&&c>=0);var d=c%26,p=(c-d)/26;if(i(this.negative===0,"imaskn works only with positive numbers"),this.length<=p)return this;if(d!==0&&p++,this.length=Math.min(p,this.length),d!==0){var w=67108863^67108863>>>d<<d;this.words[this.length-1]&=w}return this._strip()},o.prototype.maskn=function(c){return this.clone().imaskn(c)},o.prototype.iaddn=function(c){return i(typeof c=="number"),i(c<67108864),c<0?this.isubn(-c):this.negative!==0?this.length===1&&(this.words[0]|0)<=c?(this.words[0]=c-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(c),this.negative=1,this):this._iaddn(c)},o.prototype._iaddn=function(c){this.words[0]+=c;for(var d=0;d<this.length&&this.words[d]>=67108864;d++)this.words[d]-=67108864,d===this.length-1?this.words[d+1]=1:this.words[d+1]++;return this.length=Math.max(this.length,d+1),this},o.prototype.isubn=function(c){if(i(typeof c=="number"),i(c<67108864),c<0)return this.iaddn(-c);if(this.negative!==0)return this.negative=0,this.iaddn(c),this.negative=1,this;if(this.words[0]-=c,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var d=0;d<this.length&&this.words[d]<0;d++)this.words[d]+=67108864,this.words[d+1]-=1;return this._strip()},o.prototype.addn=function(c){return this.clone().iaddn(c)},o.prototype.subn=function(c){return this.clone().isubn(c)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(c,d,p){var w=c.length+p,x;this._expand(w);var E,A=0;for(x=0;x<c.length;x++){E=(this.words[x+p]|0)+A;var u=(c.words[x]|0)*d;E-=u&67108863,A=(E>>26)-(u/67108864|0),this.words[x+p]=E&67108863}for(;x<this.length-p;x++)E=(this.words[x+p]|0)+A,A=E>>26,this.words[x+p]=E&67108863;if(A===0)return this._strip();for(i(A===-1),A=0,x=0;x<this.length;x++)E=-(this.words[x]|0)+A,A=E>>26,this.words[x]=E&67108863;return this.negative=1,this._strip()},o.prototype._wordDiv=function(c,d){var p=this.length-c.length,w=this.clone(),x=c,E=x.words[x.length-1]|0,A=this._countBits(E);p=26-A,p!==0&&(x=x.ushln(p),w.iushln(p),E=x.words[x.length-1]|0);var u=w.length-x.length,l;if(d!=="mod"){l=new o(null),l.length=u+1,l.words=new Array(l.length);for(var R=0;R<l.length;R++)l.words[R]=0}var X=w.clone()._ishlnsubmul(x,1,u);X.negative===0&&(w=X,l&&(l.words[u]=1));for(var ee=u-1;ee>=0;ee--){var M=(w.words[x.length+ee]|0)*67108864+(w.words[x.length+ee-1]|0);for(M=Math.min(M/E|0,67108863),w._ishlnsubmul(x,M,ee);w.negative!==0;)M--,w.negative=0,w._ishlnsubmul(x,1,ee),w.isZero()||(w.negative^=1);l&&(l.words[ee]=M)}return l&&l._strip(),w._strip(),d!=="div"&&p!==0&&w.iushrn(p),{div:l||null,mod:w}},o.prototype.divmod=function(c,d,p){if(i(!c.isZero()),this.isZero())return{div:new o(0),mod:new o(0)};var w,x,E;return this.negative!==0&&c.negative===0?(E=this.neg().divmod(c,d),d!=="mod"&&(w=E.div.neg()),d!=="div"&&(x=E.mod.neg(),p&&x.negative!==0&&x.iadd(c)),{div:w,mod:x}):this.negative===0&&c.negative!==0?(E=this.divmod(c.neg(),d),d!=="mod"&&(w=E.div.neg()),{div:w,mod:E.mod}):this.negative&c.negative?(E=this.neg().divmod(c.neg(),d),d!=="div"&&(x=E.mod.neg(),p&&x.negative!==0&&x.isub(c)),{div:E.div,mod:x}):c.length>this.length||this.cmp(c)<0?{div:new o(0),mod:this}:c.length===1?d==="div"?{div:this.divn(c.words[0]),mod:null}:d==="mod"?{div:null,mod:new o(this.modrn(c.words[0]))}:{div:this.divn(c.words[0]),mod:new o(this.modrn(c.words[0]))}:this._wordDiv(c,d)},o.prototype.div=function(c){return this.divmod(c,"div",!1).div},o.prototype.mod=function(c){return this.divmod(c,"mod",!1).mod},o.prototype.umod=function(c){return this.divmod(c,"mod",!0).mod},o.prototype.divRound=function(c){var d=this.divmod(c);if(d.mod.isZero())return d.div;var p=d.div.negative!==0?d.mod.isub(c):d.mod,w=c.ushrn(1),x=c.andln(1),E=p.cmp(w);return E<0||x===1&&E===0?d.div:d.div.negative!==0?d.div.isubn(1):d.div.iaddn(1)},o.prototype.modrn=function(c){var d=c<0;d&&(c=-c),i(c<=67108863);for(var p=(1<<26)%c,w=0,x=this.length-1;x>=0;x--)w=(p*w+(this.words[x]|0))%c;return d?-w:w},o.prototype.modn=function(c){return this.modrn(c)},o.prototype.idivn=function(c){var d=c<0;d&&(c=-c),i(c<=67108863);for(var p=0,w=this.length-1;w>=0;w--){var x=(this.words[w]|0)+p*67108864;this.words[w]=x/c|0,p=x%c}return this._strip(),d?this.ineg():this},o.prototype.divn=function(c){return this.clone().idivn(c)},o.prototype.egcd=function(c){i(c.negative===0),i(!c.isZero());var d=this,p=c.clone();d.negative!==0?d=d.umod(c):d=d.clone();for(var w=new o(1),x=new o(0),E=new o(0),A=new o(1),u=0;d.isEven()&&p.isEven();)d.iushrn(1),p.iushrn(1),++u;for(var l=p.clone(),R=d.clone();!d.isZero();){for(var X=0,ee=1;!(d.words[0]&ee)&&X<26;++X,ee<<=1);if(X>0)for(d.iushrn(X);X-- >0;)(w.isOdd()||x.isOdd())&&(w.iadd(l),x.isub(R)),w.iushrn(1),x.iushrn(1);for(var M=0,J=1;!(p.words[0]&J)&&M<26;++M,J<<=1);if(M>0)for(p.iushrn(M);M-- >0;)(E.isOdd()||A.isOdd())&&(E.iadd(l),A.isub(R)),E.iushrn(1),A.iushrn(1);d.cmp(p)>=0?(d.isub(p),w.isub(E),x.isub(A)):(p.isub(d),E.isub(w),A.isub(x))}return{a:E,b:A,gcd:p.iushln(u)}},o.prototype._invmp=function(c){i(c.negative===0),i(!c.isZero());var d=this,p=c.clone();d.negative!==0?d=d.umod(c):d=d.clone();for(var w=new o(1),x=new o(0),E=p.clone();d.cmpn(1)>0&&p.cmpn(1)>0;){for(var A=0,u=1;!(d.words[0]&u)&&A<26;++A,u<<=1);if(A>0)for(d.iushrn(A);A-- >0;)w.isOdd()&&w.iadd(E),w.iushrn(1);for(var l=0,R=1;!(p.words[0]&R)&&l<26;++l,R<<=1);if(l>0)for(p.iushrn(l);l-- >0;)x.isOdd()&&x.iadd(E),x.iushrn(1);d.cmp(p)>=0?(d.isub(p),w.isub(x)):(p.isub(d),x.isub(w))}var X;return d.cmpn(1)===0?X=w:X=x,X.cmpn(0)<0&&X.iadd(c),X},o.prototype.gcd=function(c){if(this.isZero())return c.abs();if(c.isZero())return this.abs();var d=this.clone(),p=c.clone();d.negative=0,p.negative=0;for(var w=0;d.isEven()&&p.isEven();w++)d.iushrn(1),p.iushrn(1);do{for(;d.isEven();)d.iushrn(1);for(;p.isEven();)p.iushrn(1);var x=d.cmp(p);if(x<0){var E=d;d=p,p=E}else if(x===0||p.cmpn(1)===0)break;d.isub(p)}while(!0);return p.iushln(w)},o.prototype.invm=function(c){return this.egcd(c).a.umod(c)},o.prototype.isEven=function(){return(this.words[0]&1)===0},o.prototype.isOdd=function(){return(this.words[0]&1)===1},o.prototype.andln=function(c){return this.words[0]&c},o.prototype.bincn=function(c){i(typeof c=="number");var d=c%26,p=(c-d)/26,w=1<<d;if(this.length<=p)return this._expand(p+1),this.words[p]|=w,this;for(var x=w,E=p;x!==0&&E<this.length;E++){var A=this.words[E]|0;A+=x,x=A>>>26,A&=67108863,this.words[E]=A}return x!==0&&(this.words[E]=x,this.length++),this},o.prototype.isZero=function(){return this.length===1&&this.words[0]===0},o.prototype.cmpn=function(c){var d=c<0;if(this.negative!==0&&!d)return-1;if(this.negative===0&&d)return 1;this._strip();var p;if(this.length>1)p=1;else{d&&(c=-c),i(c<=67108863,"Number is too big");var w=this.words[0]|0;p=w===c?0:w<c?-1:1}return this.negative!==0?-p|0:p},o.prototype.cmp=function(c){if(this.negative!==0&&c.negative===0)return-1;if(this.negative===0&&c.negative!==0)return 1;var d=this.ucmp(c);return this.negative!==0?-d|0:d},o.prototype.ucmp=function(c){if(this.length>c.length)return 1;if(this.length<c.length)return-1;for(var d=0,p=this.length-1;p>=0;p--){var w=this.words[p]|0,x=c.words[p]|0;if(w!==x){w<x?d=-1:w>x&&(d=1);break}}return d},o.prototype.gtn=function(c){return this.cmpn(c)===1},o.prototype.gt=function(c){return this.cmp(c)===1},o.prototype.gten=function(c){return this.cmpn(c)>=0},o.prototype.gte=function(c){return this.cmp(c)>=0},o.prototype.ltn=function(c){return this.cmpn(c)===-1},o.prototype.lt=function(c){return this.cmp(c)===-1},o.prototype.lten=function(c){return this.cmpn(c)<=0},o.prototype.lte=function(c){return this.cmp(c)<=0},o.prototype.eqn=function(c){return this.cmpn(c)===0},o.prototype.eq=function(c){return this.cmp(c)===0},o.red=function(c){return new B(c)},o.prototype.toRed=function(c){return i(!this.red,"Already a number in reduction context"),i(this.negative===0,"red works only with positives"),c.convertTo(this)._forceRed(c)},o.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(c){return this.red=c,this},o.prototype.forceRed=function(c){return i(!this.red,"Already a number in reduction context"),this._forceRed(c)},o.prototype.redAdd=function(c){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,c)},o.prototype.redIAdd=function(c){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,c)},o.prototype.redSub=function(c){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,c)},o.prototype.redISub=function(c){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,c)},o.prototype.redShl=function(c){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,c)},o.prototype.redMul=function(c){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,c),this.red.mul(this,c)},o.prototype.redIMul=function(c){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,c),this.red.imul(this,c)},o.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(c){return i(this.red&&!c.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,c)};var ae={k256:null,p224:null,p192:null,p25519:null};function he(c,d){this.name=c,this.p=new o(d,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}he.prototype._tmp=function(){var c=new o(null);return c.words=new Array(Math.ceil(this.n/13)),c},he.prototype.ireduce=function(c){var d=c,p;do this.split(d,this.tmp),d=this.imulK(d),d=d.iadd(this.tmp),p=d.bitLength();while(p>this.n);var w=p<this.n?-1:d.ucmp(this.p);return w===0?(d.words[0]=0,d.length=1):w>0?d.isub(this.p):d.strip!==void 0?d.strip():d._strip(),d},he.prototype.split=function(c,d){c.iushrn(this.n,0,d)},he.prototype.imulK=function(c){return c.imul(this.k)};function ue(){he.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}s(ue,he),ue.prototype.split=function(c,d){for(var p=4194303,w=Math.min(c.length,9),x=0;x<w;x++)d.words[x]=c.words[x];if(d.length=w,c.length<=9){c.words[0]=0,c.length=1;return}var E=c.words[9];for(d.words[d.length++]=E&p,x=10;x<c.length;x++){var A=c.words[x]|0;c.words[x-10]=(A&p)<<4|E>>>22,E=A}E>>>=22,c.words[x-10]=E,E===0&&c.length>10?c.length-=10:c.length-=9},ue.prototype.imulK=function(c){c.words[c.length]=0,c.words[c.length+1]=0,c.length+=2;for(var d=0,p=0;p<c.length;p++){var w=c.words[p]|0;d+=w*977,c.words[p]=d&67108863,d=w*64+(d/67108864|0)}return c.words[c.length-1]===0&&(c.length--,c.words[c.length-1]===0&&c.length--),c};function le(){he.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}s(le,he);function Te(){he.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}s(Te,he);function lt(){he.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}s(lt,he),lt.prototype.imulK=function(c){for(var d=0,p=0;p<c.length;p++){var w=(c.words[p]|0)*19+d,x=w&67108863;w>>>=26,c.words[p]=x,d=w}return d!==0&&(c.words[c.length++]=d),c},o._prime=function(c){if(ae[c])return ae[c];var d;if(c==="k256")d=new ue;else if(c==="p224")d=new le;else if(c==="p192")d=new Te;else if(c==="p25519")d=new lt;else throw new Error("Unknown prime "+c);return ae[c]=d,d};function B(c){if(typeof c=="string"){var d=o._prime(c);this.m=d.p,this.prime=d}else i(c.gtn(1),"modulus must be greater than 1"),this.m=c,this.prime=null}B.prototype._verify1=function(c){i(c.negative===0,"red works only with positives"),i(c.red,"red works only with red numbers")},B.prototype._verify2=function(c,d){i((c.negative|d.negative)===0,"red works only with positives"),i(c.red&&c.red===d.red,"red works only with red numbers")},B.prototype.imod=function(c){return this.prime?this.prime.ireduce(c)._forceRed(this):(I(c,c.umod(this.m)._forceRed(this)),c)},B.prototype.neg=function(c){return c.isZero()?c.clone():this.m.sub(c)._forceRed(this)},B.prototype.add=function(c,d){this._verify2(c,d);var p=c.add(d);return p.cmp(this.m)>=0&&p.isub(this.m),p._forceRed(this)},B.prototype.iadd=function(c,d){this._verify2(c,d);var p=c.iadd(d);return p.cmp(this.m)>=0&&p.isub(this.m),p},B.prototype.sub=function(c,d){this._verify2(c,d);var p=c.sub(d);return p.cmpn(0)<0&&p.iadd(this.m),p._forceRed(this)},B.prototype.isub=function(c,d){this._verify2(c,d);var p=c.isub(d);return p.cmpn(0)<0&&p.iadd(this.m),p},B.prototype.shl=function(c,d){return this._verify1(c),this.imod(c.ushln(d))},B.prototype.imul=function(c,d){return this._verify2(c,d),this.imod(c.imul(d))},B.prototype.mul=function(c,d){return this._verify2(c,d),this.imod(c.mul(d))},B.prototype.isqr=function(c){return this.imul(c,c.clone())},B.prototype.sqr=function(c){return this.mul(c,c)},B.prototype.sqrt=function(c){if(c.isZero())return c.clone();var d=this.m.andln(3);if(i(d%2===1),d===3){var p=this.m.add(new o(1)).iushrn(2);return this.pow(c,p)}for(var w=this.m.subn(1),x=0;!w.isZero()&&w.andln(1)===0;)x++,w.iushrn(1);i(!w.isZero());var E=new o(1).toRed(this),A=E.redNeg(),u=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new o(2*l*l).toRed(this);this.pow(l,u).cmp(A)!==0;)l.redIAdd(A);for(var R=this.pow(l,w),X=this.pow(c,w.addn(1).iushrn(1)),ee=this.pow(c,w),M=x;ee.cmp(E)!==0;){for(var J=ee,T=0;J.cmp(E)!==0;T++)J=J.redSqr();i(T<M);var z=this.pow(R,new o(1).iushln(M-T-1));X=X.redMul(z),R=z.redSqr(),ee=ee.redMul(R),M=T}return X},B.prototype.invm=function(c){var d=c._invmp(this.m);return d.negative!==0?(d.negative=0,this.imod(d).redNeg()):this.imod(d)},B.prototype.pow=function(c,d){if(d.isZero())return new o(1).toRed(this);if(d.cmpn(1)===0)return c.clone();var p=4,w=new Array(1<<p);w[0]=new o(1).toRed(this),w[1]=c;for(var x=2;x<w.length;x++)w[x]=this.mul(w[x-1],c);var E=w[0],A=0,u=0,l=d.bitLength()%26;for(l===0&&(l=26),x=d.length-1;x>=0;x--){for(var R=d.words[x],X=l-1;X>=0;X--){var ee=R>>X&1;if(E!==w[0]&&(E=this.sqr(E)),ee===0&&A===0){u=0;continue}A<<=1,A|=ee,u++,!(u!==p&&(x!==0||X!==0))&&(E=this.mul(E,w[A]),u=0,A=0)}l=26}return E},B.prototype.convertTo=function(c){var d=c.umod(this.m);return d===c?d.clone():d},B.prototype.convertFrom=function(c){var d=c.clone();return d.red=null,d},o.mont=function(c){return new v(c)};function v(c){B.call(this,c),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}s(v,B),v.prototype.convertTo=function(c){return this.imod(c.ushln(this.shift))},v.prototype.convertFrom=function(c){var d=this.imod(c.mul(this.rinv));return d.red=null,d},v.prototype.imul=function(c,d){if(c.isZero()||d.isZero())return c.words[0]=0,c.length=1,c;var p=c.imul(d),w=p.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),x=p.isub(w).iushrn(this.shift),E=x;return x.cmp(this.m)>=0?E=x.isub(this.m):x.cmpn(0)<0&&(E=x.iadd(this.m)),E._forceRed(this)},v.prototype.mul=function(c,d){if(c.isZero()||d.isZero())return new o(0)._forceRed(this);var p=c.mul(d),w=p.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),x=p.isub(w).iushrn(this.shift),E=x;return x.cmp(this.m)>=0?E=x.isub(this.m):x.cmpn(0)<0&&(E=x.iadd(this.m)),E._forceRed(this)},v.prototype.invm=function(c){var d=this.imod(c._invmp(this.m).mul(this.r2));return d._forceRed(this)}})(r,C1)})(q1);var vt=q1.exports;const D1="bignumber/5.7.0";var nf=vt.BN;const Un=new Ar(D1),Gh={},k0=9007199254740991;function C5(r){return r!=null&&(Fr.isBigNumber(r)||typeof r=="number"&&r%1===0||typeof r=="string"&&!!r.match(/^-?[0-9]+$/)||di(r)||typeof r=="bigint"||xa(r))}let B0=!1,Fr=class Xi{constructor(e,t){e!==Gh&&Un.throwError("cannot call constructor directly; use BigNumber.from",Ar.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"}),this._hex=t,this._isBigNumber=!0,Object.freeze(this)}fromTwos(e){return Xr(St(this).fromTwos(e))}toTwos(e){return Xr(St(this).toTwos(e))}abs(){return this._hex[0]==="-"?Xi.from(this._hex.substring(1)):this}add(e){return Xr(St(this).add(St(e)))}sub(e){return Xr(St(this).sub(St(e)))}div(e){return Xi.from(e).isZero()&&Ii("division-by-zero","div"),Xr(St(this).div(St(e)))}mul(e){return Xr(St(this).mul(St(e)))}mod(e){const t=St(e);return t.isNeg()&&Ii("division-by-zero","mod"),Xr(St(this).umod(t))}pow(e){const t=St(e);return t.isNeg()&&Ii("negative-power","pow"),Xr(St(this).pow(t))}and(e){const t=St(e);return(this.isNegative()||t.isNeg())&&Ii("unbound-bitwise-result","and"),Xr(St(this).and(t))}or(e){const t=St(e);return(this.isNegative()||t.isNeg())&&Ii("unbound-bitwise-result","or"),Xr(St(this).or(t))}xor(e){const t=St(e);return(this.isNegative()||t.isNeg())&&Ii("unbound-bitwise-result","xor"),Xr(St(this).xor(t))}mask(e){return(this.isNegative()||e<0)&&Ii("negative-width","mask"),Xr(St(this).maskn(e))}shl(e){return(this.isNegative()||e<0)&&Ii("negative-width","shl"),Xr(St(this).shln(e))}shr(e){return(this.isNegative()||e<0)&&Ii("negative-width","shr"),Xr(St(this).shrn(e))}eq(e){return St(this).eq(St(e))}lt(e){return St(this).lt(St(e))}lte(e){return St(this).lte(St(e))}gt(e){return St(this).gt(St(e))}gte(e){return St(this).gte(St(e))}isNegative(){return this._hex[0]==="-"}isZero(){return St(this).isZero()}toNumber(){try{return St(this).toNumber()}catch{Ii("overflow","toNumber",this.toString())}return null}toBigInt(){try{return BigInt(this.toString())}catch{}return Un.throwError("this platform does not support BigInt",Ar.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}toString(){return arguments.length>0&&(arguments[0]===10?B0||(B0=!0,Un.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")):arguments[0]===16?Un.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",Ar.errors.UNEXPECTED_ARGUMENT,{}):Un.throwError("BigNumber.toString does not accept parameters",Ar.errors.UNEXPECTED_ARGUMENT,{})),St(this).toString(10)}toHexString(){return this._hex}toJSON(e){return{type:"BigNumber",hex:this.toHexString()}}static from(e){if(e instanceof Xi)return e;if(typeof e=="string")return e.match(/^-?0x[0-9a-f]+$/i)?new Xi(Gh,yo(e)):e.match(/^-?[0-9]+$/)?new Xi(Gh,yo(new nf(e))):Un.throwArgumentError("invalid BigNumber string","value",e);if(typeof e=="number")return e%1&&Ii("underflow","BigNumber.from",e),(e>=k0||e<=-k0)&&Ii("overflow","BigNumber.from",e),Xi.from(String(e));const t=e;if(typeof t=="bigint")return Xi.from(t.toString());if(xa(t))return Xi.from(ei(t));if(t)if(t.toHexString){const i=t.toHexString();if(typeof i=="string")return Xi.from(i)}else{let i=t._hex;if(i==null&&t.type==="BigNumber"&&(i=t.hex),typeof i=="string"&&(di(i)||i[0]==="-"&&di(i.substring(1))))return Xi.from(i)}return Un.throwArgumentError("invalid BigNumber value","value",e)}static isBigNumber(e){return!!(e&&e._isBigNumber)}};function yo(r){if(typeof r!="string")return yo(r.toString(16));if(r[0]==="-")return r=r.substring(1),r[0]==="-"&&Un.throwArgumentError("invalid hex","value",r),r=yo(r),r==="0x00"?r:"-"+r;if(r.substring(0,2)!=="0x"&&(r="0x"+r),r==="0x")return"0x00";for(r.length%2&&(r="0x0"+r.substring(2));r.length>4&&r.substring(0,4)==="0x00";)r="0x"+r.substring(4);return r}function Xr(r){return Fr.from(yo(r))}function St(r){const e=Fr.from(r).toHexString();return e[0]==="-"?new nf("-"+e.substring(3),16):new nf(e.substring(2),16)}function Ii(r,e,t){const i={fault:r,operation:e};return t!=null&&(i.value=t),Un.throwError(r,Ar.errors.NUMERIC_FAULT,i)}function N5(r){return new nf(r,36).toString(16)}const $r=new Ar(D1),uo={},k1=Fr.from(0),B1=Fr.from(-1);function L1(r,e,t,i){const s={fault:e,operation:t};return i!==void 0&&(s.value=i),$r.throwError(r,Ar.errors.NUMERIC_FAULT,s)}let lo="0";for(;lo.length<256;)lo+=lo;function Ku(r){if(typeof r!="number")try{r=Fr.from(r).toNumber()}catch{}return typeof r=="number"&&r>=0&&r<=256&&!(r%1)?"1"+lo.substring(0,r):$r.throwArgumentError("invalid decimal size","decimals",r)}function Jh(r,e){e==null&&(e=0);const t=Ku(e);r=Fr.from(r);const i=r.lt(k1);i&&(r=r.mul(B1));let s=r.mod(t).toString();for(;s.length<t.length-1;)s="0"+s;s=s.match(/^([0-9]*[1-9]|0)(0*)/)[1];const o=r.div(t).toString();return t.length===1?r=o:r=o+"."+s,i&&(r="-"+r),r}function Ln(r,e){e==null&&(e=0);const t=Ku(e);(typeof r!="string"||!r.match(/^-?[0-9.]+$/))&&$r.throwArgumentError("invalid decimal value","value",r);const i=r.substring(0,1)==="-";i&&(r=r.substring(1)),r==="."&&$r.throwArgumentError("missing value","value",r);const s=r.split(".");s.length>2&&$r.throwArgumentError("too many decimal points","value",r);let o=s[0],h=s[1];for(o||(o="0"),h||(h="0");h[h.length-1]==="0";)h=h.substring(0,h.length-1);for(h.length>t.length-1&&L1("fractional component exceeds decimals","underflow","parseFixed"),h===""&&(h="0");h.length<t.length-1;)h+="0";const g=Fr.from(o),y=Fr.from(h);let _=g.mul(t).add(y);return i&&(_=_.mul(B1)),_}let Qh=class wu{constructor(e,t,i,s){e!==uo&&$r.throwError("cannot use FixedFormat constructor; use FixedFormat.from",Ar.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.signed=t,this.width=i,this.decimals=s,this.name=(t?"":"u")+"fixed"+String(i)+"x"+String(s),this._multiplier=Ku(s),Object.freeze(this)}static from(e){if(e instanceof wu)return e;typeof e=="number"&&(e=`fixed128x${e}`);let t=!0,i=128,s=18;if(typeof e=="string"){if(e!=="fixed")if(e==="ufixed")t=!1;else{const o=e.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);o||$r.throwArgumentError("invalid fixed format","format",e),t=o[1]!=="u",i=parseInt(o[2]),s=parseInt(o[3])}}else if(e){const o=(h,g,y)=>e[h]==null?y:(typeof e[h]!==g&&$r.throwArgumentError("invalid fixed format ("+h+" not "+g+")","format."+h,e[h]),e[h]);t=o("signed","boolean",t),i=o("width","number",i),s=o("decimals","number",s)}return i%8&&$r.throwArgumentError("invalid fixed format width (not byte aligned)","format.width",i),s>80&&$r.throwArgumentError("invalid fixed format (decimals too large)","format.decimals",s),new wu(uo,t,i,s)}},z1=class Lr{constructor(e,t,i,s){e!==uo&&$r.throwError("cannot use FixedNumber constructor; use FixedNumber.from",Ar.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.format=s,this._hex=t,this._value=i,this._isFixedNumber=!0,Object.freeze(this)}_checkFormat(e){this.format.name!==e.format.name&&$r.throwArgumentError("incompatible format; use fixedNumber.toFormat","other",e)}addUnsafe(e){this._checkFormat(e);const t=Ln(this._value,this.format.decimals),i=Ln(e._value,e.format.decimals);return Lr.fromValue(t.add(i),this.format.decimals,this.format)}subUnsafe(e){this._checkFormat(e);const t=Ln(this._value,this.format.decimals),i=Ln(e._value,e.format.decimals);return Lr.fromValue(t.sub(i),this.format.decimals,this.format)}mulUnsafe(e){this._checkFormat(e);const t=Ln(this._value,this.format.decimals),i=Ln(e._value,e.format.decimals);return Lr.fromValue(t.mul(i).div(this.format._multiplier),this.format.decimals,this.format)}divUnsafe(e){this._checkFormat(e);const t=Ln(this._value,this.format.decimals),i=Ln(e._value,e.format.decimals);return Lr.fromValue(t.mul(this.format._multiplier).div(i),this.format.decimals,this.format)}floor(){const e=this.toString().split(".");e.length===1&&e.push("0");let t=Lr.from(e[0],this.format);const i=!e[1].match(/^(0*)$/);return this.isNegative()&&i&&(t=t.subUnsafe(L0.toFormat(t.format))),t}ceiling(){const e=this.toString().split(".");e.length===1&&e.push("0");let t=Lr.from(e[0],this.format);const i=!e[1].match(/^(0*)$/);return!this.isNegative()&&i&&(t=t.addUnsafe(L0.toFormat(t.format))),t}round(e){e==null&&(e=0);const t=this.toString().split(".");if(t.length===1&&t.push("0"),(e<0||e>80||e%1)&&$r.throwArgumentError("invalid decimal count","decimals",e),t[1].length<=e)return this;const i=Lr.from("1"+lo.substring(0,e),this.format),s=T5.toFormat(this.format);return this.mulUnsafe(i).addUnsafe(s).floor().divUnsafe(i)}isZero(){return this._value==="0.0"||this._value==="0"}isNegative(){return this._value[0]==="-"}toString(){return this._value}toHexString(e){if(e==null)return this._hex;e%8&&$r.throwArgumentError("invalid byte width","width",e);const t=Fr.from(this._hex).fromTwos(this.format.width).toTwos(e).toHexString();return yn(t,e/8)}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(e){return Lr.fromString(this._value,e)}static fromValue(e,t,i){return i==null&&t!=null&&!C5(t)&&(i=t,t=null),t==null&&(t=0),i==null&&(i="fixed"),Lr.fromString(Jh(e,t),Qh.from(i))}static fromString(e,t){t==null&&(t="fixed");const i=Qh.from(t),s=Ln(e,i.decimals);!i.signed&&s.lt(k1)&&L1("unsigned value cannot be negative","overflow","value",e);let o=null;i.signed?o=s.toTwos(i.width).toHexString():(o=s.toHexString(),o=yn(o,i.width/8));const h=Jh(s,i.decimals);return new Lr(uo,o,h,i)}static fromBytes(e,t){t==null&&(t="fixed");const i=Qh.from(t);if(Zt(e).length>i.width/8)throw new Error("overflow");let s=Fr.from(e);i.signed&&(s=s.fromTwos(i.width));const o=s.toTwos((i.signed?0:1)+i.width).toHexString(),h=Jh(s,i.decimals);return new Lr(uo,o,h,i)}static from(e,t){if(typeof e=="string")return Lr.fromString(e,t);if(xa(e))return Lr.fromBytes(e,t);try{return Lr.fromValue(e,0,t)}catch(i){if(i.code!==Ar.errors.INVALID_ARGUMENT)throw i}return $r.throwArgumentError("invalid FixedNumber value","value",e)}static isFixedNumber(e){return!!(e&&e._isFixedNumber)}};const L0=z1.from(1),T5=z1.from("0.5"),O5="strings/5.7.0",q5=new Ar(O5);var sf;(function(r){r.current="",r.NFC="NFC",r.NFD="NFD",r.NFKC="NFKC",r.NFKD="NFKD"})(sf||(sf={}));var z0;(function(r){r.UNEXPECTED_CONTINUE="unexpected continuation byte",r.BAD_PREFIX="bad codepoint prefix",r.OVERRUN="string overrun",r.MISSING_CONTINUE="missing continuation byte",r.OUT_OF_RANGE="out of UTF-8 range",r.UTF16_SURROGATE="UTF-16 surrogate",r.OVERLONG="overlong representation"})(z0||(z0={}));function Yh(r,e=sf.current){e!=sf.current&&(q5.checkNormalize(),r=r.normalize(e));let t=[];for(let i=0;i<r.length;i++){const s=r.charCodeAt(i);if(s<128)t.push(s);else if(s<2048)t.push(s>>6|192),t.push(s&63|128);else if((s&64512)==55296){i++;const o=r.charCodeAt(i);if(i>=r.length||(o&64512)!==56320)throw new Error("invalid utf-8 string");const h=65536+((s&1023)<<10)+(o&1023);t.push(h>>18|240),t.push(h>>12&63|128),t.push(h>>6&63|128),t.push(h&63|128)}else t.push(s>>12|224),t.push(s>>6&63|128),t.push(s&63|128)}return Zt(t)}function D5(r){if(r.length%4!==0)throw new Error("bad data");let e=[];for(let t=0;t<r.length;t+=4)e.push(parseInt(r.substring(t,t+4),16));return e}function Wh(r,e){e||(e=function(s){return[parseInt(s,16)]});let t=0,i={};return r.split(",").forEach(s=>{let o=s.split(":");t+=parseInt(o[0],16),i[t]=e(o[1])}),i}function $0(r){let e=0;return r.split(",").map(t=>{let i=t.split("-");i.length===1?i[1]="0":i[1]===""&&(i[1]="1");let s=e+parseInt(i[0],16);return e=parseInt(i[1],16),{l:s,h:e}})}$0("221,13-1b,5f-,40-10,51-f,11-3,3-3,2-2,2-4,8,2,15,2d,28-8,88,48,27-,3-5,11-20,27-,8,28,3-5,12,18,b-a,1c-4,6-16,2-d,2-2,2,1b-4,17-9,8f-,10,f,1f-2,1c-34,33-14e,4,36-,13-,6-2,1a-f,4,9-,3-,17,8,2-2,5-,2,8-,3-,4-8,2-3,3,6-,16-6,2-,7-3,3-,17,8,3,3,3-,2,6-3,3-,4-a,5,2-6,10-b,4,8,2,4,17,8,3,6-,b,4,4-,2-e,2-4,b-10,4,9-,3-,17,8,3-,5-,9-2,3-,4-7,3-3,3,4-3,c-10,3,7-2,4,5-2,3,2,3-2,3-2,4-2,9,4-3,6-2,4,5-8,2-e,d-d,4,9,4,18,b,6-3,8,4,5-6,3-8,3-3,b-11,3,9,4,18,b,6-3,8,4,5-6,3-6,2,3-3,b-11,3,9,4,18,11-3,7-,4,5-8,2-7,3-3,b-11,3,13-2,19,a,2-,8-2,2-3,7,2,9-11,4-b,3b-3,1e-24,3,2-,3,2-,2-5,5,8,4,2,2-,3,e,4-,6,2,7-,b-,3-21,49,23-5,1c-3,9,25,10-,2-2f,23,6,3,8-2,5-5,1b-45,27-9,2a-,2-3,5b-4,45-4,53-5,8,40,2,5-,8,2,5-,28,2,5-,20,2,5-,8,2,5-,8,8,18,20,2,5-,8,28,14-5,1d-22,56-b,277-8,1e-2,52-e,e,8-a,18-8,15-b,e,4,3-b,5e-2,b-15,10,b-5,59-7,2b-555,9d-3,5b-5,17-,7-,27-,7-,9,2,2,2,20-,36,10,f-,7,14-,4,a,54-3,2-6,6-5,9-,1c-10,13-1d,1c-14,3c-,10-6,32-b,240-30,28-18,c-14,a0,115-,3,66-,b-76,5,5-,1d,24,2,5-2,2,8-,35-2,19,f-10,1d-3,311-37f,1b,5a-b,d7-19,d-3,41,57-,68-4,29-3,5f,29-37,2e-2,25-c,2c-2,4e-3,30,78-3,64-,20,19b7-49,51a7-59,48e-2,38-738,2ba5-5b,222f-,3c-94,8-b,6-4,1b,6,2,3,3,6d-20,16e-f,41-,37-7,2e-2,11-f,5-b,18-,b,14,5-3,6,88-,2,bf-2,7-,7-,7-,4-2,8,8-9,8-2ff,20,5-b,1c-b4,27-,27-cbb1,f7-9,28-2,b5-221,56,48,3-,2-,3-,5,d,2,5,3,42,5-,9,8,1d,5,6,2-2,8,153-3,123-3,33-27fd,a6da-5128,21f-5df,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3,2-1d,61-ff7d"),"ad,34f,1806,180b,180c,180d,200b,200c,200d,2060,feff".split(",").map(r=>parseInt(r,16)),Wh("b5:3bc,c3:ff,7:73,2:253,5:254,3:256,1:257,5:259,1:25b,3:260,1:263,2:269,1:268,5:26f,1:272,2:275,7:280,3:283,5:288,3:28a,1:28b,5:292,3f:195,1:1bf,29:19e,125:3b9,8b:3b2,1:3b8,1:3c5,3:3c6,1:3c0,1a:3ba,1:3c1,1:3c3,2:3b8,1:3b5,1bc9:3b9,1c:1f76,1:1f77,f:1f7a,1:1f7b,d:1f78,1:1f79,1:1f7c,1:1f7d,107:63,5:25b,4:68,1:68,1:68,3:69,1:69,1:6c,3:6e,4:70,1:71,1:72,1:72,1:72,7:7a,2:3c9,2:7a,2:6b,1:e5,1:62,1:63,3:65,1:66,2:6d,b:3b3,1:3c0,6:64,1b574:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3"),Wh("179:1,2:1,2:1,5:1,2:1,a:4f,a:1,8:1,2:1,2:1,3:1,5:1,3:1,4:1,2:1,3:1,4:1,8:2,1:1,2:2,1:1,2:2,27:2,195:26,2:25,1:25,1:25,2:40,2:3f,1:3f,33:1,11:-6,1:-9,1ac7:-3a,6d:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,b:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,c:-8,2:-8,2:-8,2:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,49:-8,1:-8,1:-4a,1:-4a,d:-56,1:-56,1:-56,1:-56,d:-8,1:-8,f:-8,1:-8,3:-7"),Wh("df:00730073,51:00690307,19:02BC006E,a7:006A030C,18a:002003B9,16:03B903080301,20:03C503080301,1d7:05650582,190f:00680331,1:00740308,1:0077030A,1:0079030A,1:006102BE,b6:03C50313,2:03C503130300,2:03C503130301,2:03C503130342,2a:1F0003B9,1:1F0103B9,1:1F0203B9,1:1F0303B9,1:1F0403B9,1:1F0503B9,1:1F0603B9,1:1F0703B9,1:1F0003B9,1:1F0103B9,1:1F0203B9,1:1F0303B9,1:1F0403B9,1:1F0503B9,1:1F0603B9,1:1F0703B9,1:1F2003B9,1:1F2103B9,1:1F2203B9,1:1F2303B9,1:1F2403B9,1:1F2503B9,1:1F2603B9,1:1F2703B9,1:1F2003B9,1:1F2103B9,1:1F2203B9,1:1F2303B9,1:1F2403B9,1:1F2503B9,1:1F2603B9,1:1F2703B9,1:1F6003B9,1:1F6103B9,1:1F6203B9,1:1F6303B9,1:1F6403B9,1:1F6503B9,1:1F6603B9,1:1F6703B9,1:1F6003B9,1:1F6103B9,1:1F6203B9,1:1F6303B9,1:1F6403B9,1:1F6503B9,1:1F6603B9,1:1F6703B9,3:1F7003B9,1:03B103B9,1:03AC03B9,2:03B10342,1:03B1034203B9,5:03B103B9,6:1F7403B9,1:03B703B9,1:03AE03B9,2:03B70342,1:03B7034203B9,5:03B703B9,6:03B903080300,1:03B903080301,3:03B90342,1:03B903080342,b:03C503080300,1:03C503080301,1:03C10313,2:03C50342,1:03C503080342,b:1F7C03B9,1:03C903B9,1:03CE03B9,2:03C90342,1:03C9034203B9,5:03C903B9,ac:00720073,5b:00B00063,6:00B00066,d:006E006F,a:0073006D,1:00740065006C,1:0074006D,124f:006800700061,2:00610075,2:006F0076,b:00700061,1:006E0061,1:03BC0061,1:006D0061,1:006B0061,1:006B0062,1:006D0062,1:00670062,3:00700066,1:006E0066,1:03BC0066,4:0068007A,1:006B0068007A,1:006D0068007A,1:00670068007A,1:00740068007A,15:00700061,1:006B00700061,1:006D00700061,1:006700700061,8:00700076,1:006E0076,1:03BC0076,1:006D0076,1:006B0076,1:006D0076,1:00700077,1:006E0077,1:03BC0077,1:006D0077,1:006B0077,1:006D0077,1:006B03C9,1:006D03C9,2:00620071,3:00632215006B0067,1:0063006F002E,1:00640062,1:00670079,2:00680070,2:006B006B,1:006B006D,9:00700068,2:00700070006D,1:00700072,2:00730076,1:00770062,c723:00660066,1:00660069,1:0066006C,1:006600660069,1:00660066006C,1:00730074,1:00730074,d:05740576,1:05740565,1:0574056B,1:057E0576,1:0574056D",D5),$0("80-20,2a0-,39c,32,f71,18e,7f2-f,19-7,30-4,7-5,f81-b,5,a800-20ff,4d1-1f,110,fa-6,d174-7,2e84-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,2,1f-5f,ff7f-20001");function k5(r){r=atob(r);const e=[];for(let t=0;t<r.length;t++)e.push(r.charCodeAt(t));return Zt(e)}function $1(r,e){e==null&&(e=1);const t=[],i=t.forEach,s=function(o,h){i.call(o,function(g){h>0&&Array.isArray(g)?s(g,h-1):t.push(g)})};return s(r,e),t}function B5(r){const e={};for(let t=0;t<r.length;t++){const i=r[t];e[i[0]]=i[1]}return e}function L5(r){let e=0;function t(){return r[e++]<<8|r[e++]}let i=t(),s=1,o=[0,1];for(let ae=1;ae<i;ae++)o.push(s+=t());let h=t(),g=e;e+=h;let y=0,_=0;function I(){return y==0&&(_=_<<8|r[e++],y=8),_>>--y&1}const P=31,q=Math.pow(2,P),O=q>>>1,L=O>>1,j=q-1;let G=0;for(let ae=0;ae<P;ae++)G=G<<1|I();let Q=[],Z=0,de=q;for(;;){let ae=Math.floor(((G-Z+1)*s-1)/de),he=0,ue=i;for(;ue-he>1;){let lt=he+ue>>>1;ae<o[lt]?ue=lt:he=lt}if(he==0)break;Q.push(he);let le=Z+Math.floor(de*o[he]/s),Te=Z+Math.floor(de*o[he+1]/s)-1;for(;!((le^Te)&O);)G=G<<1&j|I(),le=le<<1&j,Te=Te<<1&j|1;for(;le&~Te&L;)G=G&O|G<<1&j>>>1|I(),le=le<<1^O,Te=(Te^O)<<1|O|1;Z=le,de=1+Te-le}let ce=i-4;return Q.map(ae=>{switch(ae-ce){case 3:return ce+65792+(r[g++]<<16|r[g++]<<8|r[g++]);case 2:return ce+256+(r[g++]<<8|r[g++]);case 1:return ce+r[g++];default:return ae-1}})}function z5(r){let e=0;return()=>r[e++]}function $5(r){return z5(L5(r))}function U5(r){return r&1?~r>>1:r>>1}function F5(r,e){let t=Array(r);for(let i=0;i<r;i++)t[i]=1+e();return t}function U0(r,e){let t=Array(r);for(let i=0,s=-1;i<r;i++)t[i]=s+=1+e();return t}function j5(r,e){let t=Array(r);for(let i=0,s=0;i<r;i++)t[i]=s+=U5(e());return t}function af(r,e){let t=U0(r(),r),i=r(),s=U0(i,r),o=F5(i,r);for(let h=0;h<i;h++)for(let g=0;g<o[h];g++)t.push(s[h]+g);return e?t.map(h=>e[h]):t}function H5(r){let e=[];for(;;){let t=r();if(t==0)break;e.push(V5(t,r))}for(;;){let t=r()-1;if(t<0)break;e.push(G5(t,r))}return B5($1(e))}function K5(r){let e=[];for(;;){let t=r();if(t==0)break;e.push(t)}return e}function U1(r,e,t){let i=Array(r).fill(void 0).map(()=>[]);for(let s=0;s<e;s++)j5(r,t).forEach((o,h)=>i[h].push(o));return i}function V5(r,e){let t=1+e(),i=e(),s=K5(e),o=U1(s.length,1+r,e);return $1(o.map((h,g)=>{const y=h[0],_=h.slice(1);return Array(s[g]).fill(void 0).map((I,P)=>{let q=P*i;return[y+P*t,_.map(O=>O+q)]})}))}function G5(r,e){let t=1+e();return U1(t,1+r,e).map(i=>[i[0],i.slice(1)])}function J5(r){let e=af(r).sort((i,s)=>i-s);return t();function t(){let i=[];for(;;){let _=af(r,e);if(_.length==0)break;i.push({set:new Set(_),node:t()})}i.sort((_,I)=>I.set.size-_.set.size);let s=r(),o=s%3;s=s/3|0;let h=!!(s&1);s>>=1;let g=s==1,y=s==2;return{branches:i,valid:o,fe0f:h,save:g,check:y}}}function Q5(){return $5(k5("AEQF2AO2DEsA2wIrAGsBRABxAN8AZwCcAEwAqgA0AGwAUgByADcATAAVAFYAIQAyACEAKAAYAFgAGwAjABQAMAAmADIAFAAfABQAKwATACoADgAbAA8AHQAYABoAGQAxADgALAAoADwAEwA9ABMAGgARAA4ADwAWABMAFgAIAA8AHgQXBYMA5BHJAS8JtAYoAe4AExozi0UAH21tAaMnBT8CrnIyhrMDhRgDygIBUAEHcoFHUPe8AXBjAewCjgDQR8IICIcEcQLwATXCDgzvHwBmBoHNAqsBdBcUAykgDhAMShskMgo8AY8jqAQfAUAfHw8BDw87MioGlCIPBwZCa4ELatMAAMspJVgsDl8AIhckSg8XAHdvTwBcIQEiDT4OPhUqbyECAEoAS34Aej8Ybx83JgT/Xw8gHxZ/7w8RICxPHA9vBw+Pfw8PHwAPFv+fAsAvCc8vEr8ivwD/EQ8Bol8OEBa/A78hrwAPCU8vESNvvwWfHwNfAVoDHr+ZAAED34YaAdJPAK7PLwSEgDLHAGo1Pz8Pvx9fUwMrpb8O/58VTzAPIBoXIyQJNF8hpwIVAT8YGAUADDNBaX3RAMomJCg9EhUeA29MABsZBTMNJipjOhc19gcIDR8bBwQHEggCWi6DIgLuAQYA+BAFCha3A5XiAEsqM7UFFgFLhAMjFTMYE1Klnw74nRVBG/ASCm0BYRN/BrsU3VoWy+S0vV8LQx+vN8gF2AC2AK5EAWwApgYDKmAAroQ0NDQ0AT+OCg7wAAIHRAbpNgVcBV0APTA5BfbPFgMLzcYL/QqqA82eBALKCjQCjqYCht0/k2+OAsXQAoP3ASTKDgDw6ACKAUYCMpIKJpRaAE4A5womABzZvs0REEKiACIQAd5QdAECAj4Ywg/wGqY2AVgAYADYvAoCGAEubA0gvAY2ALAAbpbvqpyEAGAEpgQAJgAG7gAgAEACmghUFwCqAMpAINQIwC4DthRAAPcycKgApoIdABwBfCisABoATwBqASIAvhnSBP8aH/ECeAKXAq40NjgDBTwFYQU6AXs3oABgAD4XNgmcCY1eCl5tIFZeUqGgyoNHABgAEQAaABNwWQAmABMATPMa3T34ADldyprmM1M2XociUQgLzvwAXT3xABgAEQAaABNwIGFAnADD8AAgAD4BBJWzaCcIAIEBFMAWwKoAAdq9BWAF5wLQpALEtQAKUSGkahR4GnJM+gsAwCgeFAiUAECQ0BQuL8AAIAAAADKeIheclvFqQAAETr4iAMxIARMgAMIoHhQIAn0E0pDQFC4HhznoAAAAIAI2C0/4lvFqQAAETgBJJwYCAy4ABgYAFAA8MBKYEH4eRhTkAjYeFcgACAYAeABsOqyQ5gRwDayqugEgaIIAtgoACgDmEABmBAWGme5OBJJA2m4cDeoAmITWAXwrMgOgAGwBCh6CBXYF1Tzg1wKAAFdiuABRAFwAXQBsAG8AdgBrAHYAbwCEAHEwfxQBVE5TEQADVFhTBwBDANILAqcCzgLTApQCrQL6vAAMAL8APLhNBKkE6glGKTAU4Dr4N2EYEwBCkABKk8rHAbYBmwIoAiU4Ajf/Aq4CowCAANIChzgaNBsCsTgeODcFXrgClQKdAqQBiQGYAqsCsjTsNHsfNPA0ixsAWTWiOAMFPDQSNCk2BDZHNow2TTZUNhk28Jk9VzI3QkEoAoICoQKwAqcAQAAxBV4FXbS9BW47YkIXP1ciUqs05DS/FwABUwJW11e6nHuYZmSh/RAYA8oMKvZ8KASoUAJYWAJ6ILAsAZSoqjpgA0ocBIhmDgDWAAawRDQoAAcuAj5iAHABZiR2AIgiHgCaAU68ACxuHAG0ygM8MiZIAlgBdF4GagJqAPZOHAMuBgoATkYAsABiAHgAMLoGDPj0HpKEBAAOJgAuALggTAHWAeAMEDbd20Uege0ADwAWADkAQgA9OHd+2MUQZBBhBgNNDkxxPxUQArEPqwvqERoM1irQ090ANK4H8ANYB/ADWANYB/AH8ANYB/ADWANYA1gDWBwP8B/YxRBkD00EcgWTBZAE2wiIJk4RhgctCNdUEnQjHEwDSgEBIypJITuYMxAlR0wRTQgIATZHbKx9PQNMMbBU+pCnA9AyVDlxBgMedhKlAC8PeCE1uk6DekxxpQpQT7NX9wBFBgASqwAS5gBJDSgAUCwGPQBI4zTYABNGAE2bAE3KAExdGABKaAbgAFBXAFCOAFBJABI2SWdObALDOq0//QomCZhvwHdTBkIQHCemEPgMNAG2ATwN7kvZBPIGPATKH34ZGg/OlZ0Ipi3eDO4m5C6igFsj9iqEBe5L9TzeC05RaQ9aC2YJ5DpkgU8DIgEOIowK3g06CG4Q9ArKbA3mEUYHOgPWSZsApgcCCxIdNhW2JhFirQsKOXgG/Br3C5AmsBMqev0F1BoiBk4BKhsAANAu6IWxWjJcHU9gBgQLJiPIFKlQIQ0mQLh4SRocBxYlqgKSQ3FKiFE3HpQh9zw+DWcuFFF9B/Y8BhlQC4I8n0asRQ8R0z6OPUkiSkwtBDaALDAnjAnQD4YMunxzAVoJIgmyDHITMhEYN8YIOgcaLpclJxYIIkaWYJsE+KAD9BPSAwwFQAlCBxQDthwuEy8VKgUOgSXYAvQ21i60ApBWgQEYBcwPJh/gEFFH4Q7qCJwCZgOEJewALhUiABginAhEZABgj9lTBi7MCMhqbSN1A2gU6GIRdAeSDlgHqBw0FcAc4nDJXgyGCSiksAlcAXYJmgFgBOQICjVcjKEgQmdUi1kYnCBiQUBd/QIyDGYVoES+h3kCjA9sEhwBNgF0BzoNAgJ4Ee4RbBCWCOyGBTW2M/k6JgRQIYQgEgooA1BszwsoJvoM+WoBpBJjAw00PnfvZ6xgtyUX/gcaMsZBYSHyC5NPzgydGsIYQ1QvGeUHwAP0GvQn60FYBgADpAQUOk4z7wS+C2oIjAlAAEoOpBgH2BhrCnKM0QEyjAG4mgNYkoQCcJAGOAcMAGgMiAV65gAeAqgIpAAGANADWAA6Aq4HngAaAIZCAT4DKDABIuYCkAOUCDLMAZYwAfQqBBzEDBYA+DhuSwLDsgKAa2ajBd5ZAo8CSjYBTiYEBk9IUgOwcuIA3ABMBhTgSAEWrEvMG+REAeBwLADIAPwABjYHBkIBzgH0bgC4AWALMgmjtLYBTuoqAIQAFmwB2AKKAN4ANgCA8gFUAE4FWvoF1AJQSgESMhksWGIBvAMgATQBDgB6BsyOpsoIIARuB9QCEBwV4gLvLwe2AgMi4BPOQsYCvd9WADIXUu5eZwqoCqdeaAC0YTQHMnM9UQAPH6k+yAdy/BZIiQImSwBQ5gBQQzSaNTFWSTYBpwGqKQK38AFtqwBI/wK37gK3rQK3sAK6280C0gK33AK3zxAAUEIAUD9SklKDArekArw5AEQAzAHCO147WTteO1k7XjtZO147WTteO1kDmChYI03AVU0oJqkKbV9GYewMpw3VRMk6ShPcYFJgMxPJLbgUwhXPJVcZPhq9JwYl5VUKDwUt1GYxCC00dhe9AEApaYNCY4ceMQpMHOhTklT5LRwAskujM7ANrRsWREEFSHXuYisWDwojAmSCAmJDXE6wXDchAqH4AmiZAmYKAp+FOBwMAmY8AmYnBG8EgAN/FAN+kzkHOXgYOYM6JCQCbB4CMjc4CwJtyAJtr/CLADRoRiwBaADfAOIASwYHmQyOAP8MwwAOtgJ3MAJ2o0ACeUxEAni7Hl3cRa9G9AJ8QAJ6yQJ9CgJ88UgBSH5kJQAsFklZSlwWGErNAtECAtDNSygDiFADh+dExpEzAvKiXQQDA69Lz0wuJgTQTU1NsAKLQAKK2cIcCB5EaAa4Ao44Ao5dQZiCAo7aAo5deVG1UzYLUtVUhgKT/AKTDQDqAB1VH1WwVdEHLBwplocy4nhnRTw6ApegAu+zWCKpAFomApaQApZ9nQCqWa1aCoJOADwClrYClk9cRVzSApnMApllXMtdCBoCnJw5wzqeApwXAp+cAp65iwAeEDIrEAKd8gKekwC2PmE1YfACntQCoG8BqgKeoCACnk+mY8lkKCYsAiewAiZ/AqD8AqBN2AKmMAKlzwKoAAB+AqfzaH1osgAESmodatICrOQCrK8CrWgCrQMCVx4CVd0CseLYAx9PbJgCsr4OArLpGGzhbWRtSWADJc4Ctl08QG6RAylGArhfArlIFgK5K3hwN3DiAr0aAy2zAzISAr6JcgMDM3ICvhtzI3NQAsPMAsMFc4N0TDZGdOEDPKgDPJsDPcACxX0CxkgCxhGKAshqUgLIRQLJUALJLwJkngLd03h6YniveSZL0QMYpGcDAmH1GfSVJXsMXpNevBICz2wCz20wTFTT9BSgAMeuAs90ASrrA04TfkwGAtwoAtuLAtJQA1JdA1NgAQIDVY2AikABzBfuYUZ2AILPg44C2sgC2d+EEYRKpz0DhqYAMANkD4ZyWvoAVgLfZgLeuXR4AuIw7RUB8zEoAfScAfLTiALr9ALpcXoAAur6AurlAPpIAboC7ooC652Wq5cEAu5AA4XhmHpw4XGiAvMEAGoDjheZlAL3FAORbwOSiAL3mQL52gL4Z5odmqy8OJsfA52EAv77ARwAOp8dn7QDBY4DpmsDptoA0sYDBmuhiaIGCgMMSgFgASACtgNGAJwEgLpoBgC8BGzAEowcggCEDC6kdjoAJAM0C5IKRoABZCgiAIzw3AYBLACkfng9ogigkgNmWAN6AEQCvrkEVqTGAwCsBRbAA+4iQkMCHR072jI2PTbUNsk2RjY5NvA23TZKNiU3EDcZN5I+RTxDRTBCJkK5VBYKFhZfwQCWygU3AJBRHpu+OytgNxa61A40GMsYjsn7BVwFXQVcBV0FaAVdBVwFXQVcBV0FXAVdBVwFXUsaCNyKAK4AAQUHBwKU7oICoW1e7jAEzgPxA+YDwgCkBFDAwADABKzAAOxFLhitA1UFTDeyPkM+bj51QkRCuwTQWWQ8X+0AWBYzsACNA8xwzAGm7EZ/QisoCTAbLDs6fnLfb8H2GccsbgFw13M1HAVkBW/Jxsm9CNRO8E8FDD0FBQw9FkcClOYCoMFegpDfADgcMiA2AJQACB8AsigKAIzIEAJKeBIApY5yPZQIAKQiHb4fvj5BKSRPQrZCOz0oXyxgOywfKAnGbgMClQaCAkILXgdeCD9IIGUgQj5fPoY+dT52Ao5CM0dAX9BTVG9SDzFwWTQAbxBzJF/lOEIQQglCCkKJIAls5AcClQICoKPMODEFxhi6KSAbiyfIRrMjtCgdWCAkPlFBIitCsEJRzAbMAV/OEyQzDg0OAQQEJ36i328/Mk9AybDJsQlq3tDRApUKAkFzXf1d/j9uALYP6hCoFgCTGD8kPsFKQiobrm0+zj0KSD8kPnVCRBwMDyJRTHFgMTJa5rwXQiQ2YfI/JD7BMEJEHGINTw4TOFlIRzwJO0icMQpyPyQ+wzJCRBv6DVgnKB01NgUKj2bwYzMqCoBkznBgEF+zYDIocwRIX+NgHj4HICNfh2C4CwdwFWpTG/lgUhYGAwRfv2Ts8mAaXzVgml/XYIJfuWC4HI1gUF9pYJZgMR6ilQHMAOwLAlDRefC0in4AXAEJA6PjCwc0IamOANMMCAECRQDFNRTZBgd+CwQlRA+r6+gLBDEFBnwUBXgKATIArwAGRAAHA3cDdAN2A3kDdwN9A3oDdQN7A30DfAN4A3oDfQAYEAAlAtYASwMAUAFsAHcKAHcAmgB3AHUAdQB2AHVu8UgAygDAAHcAdQB1AHYAdQALCgB3AAsAmgB3AAsCOwB3AAtu8UgAygDAAHgKAJoAdwB3AHUAdQB2AHUAeAB1AHUAdgB1bvFIAMoAwAALCgCaAHcACwB3AAsCOwB3AAtu8UgAygDAAH4ACwGgALcBpwC6AahdAu0COwLtbvFIAMoAwAALCgCaAu0ACwLtAAsCOwLtAAtu8UgAygDAA24ACwNvAAu0VsQAAzsAABCkjUIpAAsAUIusOggWcgMeBxVsGwL67U/2HlzmWOEeOgALASvuAAseAfpKUpnpGgYJDCIZM6YyARUE9ThqAD5iXQgnAJYJPnOzw0ZAEZxEKsIAkA4DhAHnTAIDxxUDK0lxCQlPYgIvIQVYJQBVqE1GakUAKGYiDToSBA1EtAYAXQJYAIF8GgMHRyAAIAjOe9YncekRAA0KACUrjwE7Ayc6AAYWAqaiKG4McEcqANoN3+Mg9TwCBhIkuCny+JwUQ29L008JluRxu3K+oAdqiHOqFH0AG5SUIfUJ5SxCGfxdipRzqTmT4V5Zb+r1Uo4Vm+NqSSEl2mNvR2JhIa8SpYO6ntdwFXHCWTCK8f2+Hxo7uiG3drDycAuKIMP5bhi06ACnqArH1rz4Rqg//lm6SgJGEVbF9xJHISaR6HxqxSnkw6shDnelHKNEfGUXSJRJ1GcsmtJw25xrZMDK9gXSm1/YMkdX4/6NKYOdtk/NQ3/NnDASjTc3fPjIjW/5sVfVObX2oTDWkr1dF9f3kxBsD3/3aQO8hPfRz+e0uEiJqt1161griu7gz8hDDwtpy+F+BWtefnKHZPAxcZoWbnznhJpy0e842j36bcNzGnIEusgGX0a8ZxsnjcSsPDZ09yZ36fCQbriHeQ72JRMILNl6ePPf2HWoVwgWAm1fb3V2sAY0+B6rAXqSwPBgseVmoqsBTSrm91+XasMYYySI8eeRxH3ZvHkMz3BQ5aJ3iUVbYPNM3/7emRtjlsMgv/9VyTsyt/mK+8fgWeT6SoFaclXqn42dAIsvAarF5vNNWHzKSkKQ/8Hfk5ZWK7r9yliOsooyBjRhfkHP4Q2DkWXQi6FG/9r/IwbmkV5T7JSopHKn1pJwm9tb5Ot0oyN1Z2mPpKXHTxx2nlK08fKk1hEYA8WgVVWL5lgx0iTv+KdojJeU23ZDjmiubXOxVXJKKi2Wjuh2HLZOFLiSC7Tls5SMh4f+Pj6xUSrNjFqLGehRNB8lC0QSLNmkJJx/wSG3MnjE9T1CkPwJI0wH2lfzwETIiVqUxg0dfu5q39Gt+hwdcxkhhNvQ4TyrBceof3Mhs/IxFci1HmHr4FMZgXEEczPiGCx0HRwzAqDq2j9AVm1kwN0mRVLWLylgtoPNapF5cY4Y1wJh/e0BBwZj44YgZrDNqvD/9Hv7GFYdUQeDJuQ3EWI4HaKqavU1XjC/n41kT4L79kqGq0kLhdTZvgP3TA3fS0ozVz+5piZsoOtIvBUFoMKbNcmBL6YxxaUAusHB38XrS8dQMnQwJfUUkpRoGr5AUeWicvBTzyK9g77+yCkf5PAysL7r/JjcZgrbvRpMW9iyaxZvKO6ceZN2EwIxKwVFPuvFuiEPGCoagbMo+SpydLrXqBzNCDGFCrO/rkcwa2xhokQZ5CdZ0AsU3JfSqJ6n5I14YA+P/uAgfhPU84Tlw7cEFfp7AEE8ey4sP12PTt4Cods1GRgDOB5xvyiR5m+Bx8O5nBCNctU8BevfV5A08x6RHd5jcwPTMDSZJOedIZ1cGQ704lxbAzqZOP05ZxaOghzSdvFBHYqomATARyAADK4elP8Ly3IrUZKfWh23Xy20uBUmLS4Pfagu9+oyVa2iPgqRP3F2CTUsvJ7+RYnN8fFZbU/HVvxvcFFDKkiTqV5UBZ3Gz54JAKByi9hkKMZJvuGgcSYXFmw08UyoQyVdfTD1/dMkCHXcTGAKeROgArsvmRrQTLUOXioOHGK2QkjHuoYFgXciZoTJd6Fs5q1QX1G+p/e26hYsEf7QZD1nnIyl/SFkNtYYmmBhpBrxl9WbY0YpHWRuw2Ll/tj9mD8P4snVzJl4F9J+1arVeTb9E5r2ILH04qStjxQNwn3m4YNqxmaNbLAqW2TN6LidwuJRqS+NXbtqxoeDXpxeGWmxzSkWxjkyCkX4NQRme6q5SAcC+M7+9ETfA/EwrzQajKakCwYyeunP6ZFlxU2oMEn1Pz31zeStW74G406ZJFCl1wAXIoUKkWotYEpOuXB1uVNxJ63dpJEqfxBeptwIHNrPz8BllZoIcBoXwgfJ+8VAUnVPvRvexnw0Ma/WiGYuJO5y8QTvEYBigFmhUxY5RqzE8OcywN/8m4UYrlaniJO75XQ6KSo9+tWHlu+hMi0UVdiKQp7NelnoZUzNaIyBPVeOwK6GNp+FfHuPOoyhaWuNvTYFkvxscMQWDh+zeFCFkgwbXftiV23ywJ4+uwRqmg9k3KzwIQpzppt8DBBOMbrqwQM5Gb05sEwdKzMiAqOloaA/lr0KA+1pr0/+HiWoiIjHA/wir2nIuS3PeU/ji3O6ZwoxcR1SZ9FhtLC5S0FIzFhbBWcGVP/KpxOPSiUoAdWUpqKH++6Scz507iCcxYI6rdMBICPJZea7OcmeFw5mObJSiqpjg2UoWNIs+cFhyDSt6geV5qgi3FunmwwDoGSMgerFOZGX1m0dMCYo5XOruxO063dwENK9DbnVM9wYFREzh4vyU1WYYJ/LRRp6oxgjqP/X5a8/4Af6p6NWkQferzBmXme0zY/4nwMJm/wd1tIqSwGz+E3xPEAOoZlJit3XddD7/BT1pllzOx+8bmQtANQ/S6fZexc6qi3W+Q2xcmXTUhuS5mpHQRvcxZUN0S5+PL9lXWUAaRZhEH8hTdAcuNMMCuVNKTEGtSUKNi3O6KhSaTzck8csZ2vWRZ+d7mW8c4IKwXIYd25S/zIftPkwPzufjEvOHWVD1m+FjpDVUTV0DGDuHj6QnaEwLu/dEgdLQOg9E1Sro9XHJ8ykLAwtPu+pxqKDuFexqON1sKQm7rwbE1E68UCfA/erovrTCG+DBSNg0l4goDQvZN6uNlbyLpcZAwj2UclycvLpIZMgv4yRlpb3YuMftozorbcGVHt/VeDV3+Fdf1TP0iuaCsPi2G4XeGhsyF1ubVDxkoJhmniQ0/jSg/eYML9KLfnCFgISWkp91eauR3IQvED0nAPXK+6hPCYs+n3+hCZbiskmVMG2da+0EsZPonUeIY8EbfusQXjsK/eFDaosbPjEfQS0RKG7yj5GG69M7MeO1HmiUYocgygJHL6M1qzUDDwUSmr99V7Sdr2F3JjQAJY+F0yH33Iv3+C9M38eML7gTgmNu/r2bUMiPvpYbZ6v1/IaESirBHNa7mPKn4dEmYg7v/+HQgPN1G79jBQ1+soydfDC2r+h2Bl/KIc5KjMK7OH6nb1jLsNf0EHVe2KBiE51ox636uyG6Lho0t3J34L5QY/ilE3mikaF4HKXG1mG1rCevT1Vv6GavltxoQe/bMrpZvRggnBxSEPEeEzkEdOxTnPXHVjUYdw8JYvjB/o7Eegc3Ma+NUxLLnsK0kJlinPmUHzHGtrk5+CAbVzFOBqpyy3QVUnzTDfC/0XD94/okH+OB+i7g9lolhWIjSnfIb+Eq43ZXOWmwvjyV/qqD+t0e+7mTEM74qP/Ozt8nmC7mRpyu63OB4KnUzFc074SqoyPUAgM+/TJGFo6T44EHnQU4X4z6qannVqgw/U7zCpwcmXV1AubIrvOmkKHazJAR55ePjp5tLBsN8vAqs3NAHdcEHOR2xQ0lsNAFzSUuxFQCFYvXLZJdOj9p4fNq6p0HBGUik2YzaI4xySy91KzhQ0+q1hjxvImRwPRf76tChlRkhRCi74NXZ9qUNeIwP+s5p+3m5nwPdNOHgSLD79n7O9m1n1uDHiMntq4nkYwV5OZ1ENbXxFd4PgrlvavZsyUO4MqYlqqn1O8W/I1dEZq5dXhrbETLaZIbC2Kj/Aa/QM+fqUOHdf0tXAQ1huZ3cmWECWSXy/43j35+Mvq9xws7JKseriZ1pEWKc8qlzNrGPUGcVgOa9cPJYIJsGnJTAUsEcDOEVULO5x0rXBijc1lgXEzQQKhROf8zIV82w8eswc78YX11KYLWQRcgHNJElBxfXr72lS2RBSl07qTKorO2uUDZr3sFhYsvnhLZn0A94KRzJ/7DEGIAhW5ZWFpL8gEwu1aLA9MuWZzNwl8Oze9Y+bX+v9gywRVnoB5I/8kXTXU3141yRLYrIOOz6SOnyHNy4SieqzkBXharjfjqq1q6tklaEbA8Qfm2DaIPs7OTq/nvJBjKfO2H9bH2cCMh1+5gspfycu8f/cuuRmtDjyqZ7uCIMyjdV3a+p3fqmXsRx4C8lujezIFHnQiVTXLXuI1XrwN3+siYYj2HHTvESUx8DlOTXpak9qFRK+L3mgJ1WsD7F4cu1aJoFoYQnu+wGDMOjJM3kiBQWHCcvhJ/HRdxodOQp45YZaOTA22Nb4XKCVxqkbwMYFhzYQYIAnCW8FW14uf98jhUG2zrKhQQ0q0CEq0t5nXyvUyvR8DvD69LU+g3i+HFWQMQ8PqZuHD+sNKAV0+M6EJC0szq7rEr7B5bQ8BcNHzvDMc9eqB5ZCQdTf80Obn4uzjwpYU7SISdtV0QGa9D3Wrh2BDQtpBKxaNFV+/Cy2P/Sv+8s7Ud0Fd74X4+o/TNztWgETUapy+majNQ68Lq3ee0ZO48VEbTZYiH1Co4OlfWef82RWeyUXo7woM03PyapGfikTnQinoNq5z5veLpeMV3HCAMTaZmA1oGLAn7XS3XYsz+XK7VMQsc4XKrmDXOLU/pSXVNUq8dIqTba///3x6LiLS6xs1xuCAYSfcQ3+rQgmu7uvf3THKt5Ooo97TqcbRqxx7EASizaQCBQllG/rYxVapMLgtLbZS64w1MDBMXX+PQpBKNwqUKOf2DDRDUXQf9EhOS0Qj4nTmlA8dzSLz/G1d+Ud8MTy/6ghhdiLpeerGY/UlDOfiuqFsMUU5/UYlP+BAmgRLuNpvrUaLlVkrqDievNVEAwF+4CoM1MZTmjxjJMsKJq+u8Zd7tNCUFy6LiyYXRJQ4VyvEQFFaCGKsxIwQkk7EzZ6LTJq2hUuPhvAW+gQnSG6J+MszC+7QCRHcnqDdyNRJ6T9xyS87A6MDutbzKGvGktpbXqtzWtXb9HsfK2cBMomjN9a4y+TaJLnXxAeX/HWzmf4cR4vALt/P4w4qgKY04ml4ZdLOinFYS6cup3G/1ie4+t1eOnpBNlqGqs75ilzkT4+DsZQxNvaSKJ//6zIbbk/M7LOhFmRc/1R+kBtz7JFGdZm/COotIdvQoXpTqP/1uqEUmCb/QWoGLMwO5ANcHzxdY48IGP5+J+zKOTBFZ4Pid+GTM+Wq12MV/H86xEJptBa6T+p3kgpwLedManBHC2GgNrFpoN2xnrMz9WFWX/8/ygSBkavq2Uv7FdCsLEYLu9LLIvAU0bNRDtzYl+/vXmjpIvuJFYjmI0im6QEYqnIeMsNjXG4vIutIGHijeAG/9EDBozKV5cldkHbLxHh25vT+ZEzbhXlqvpzKJwcEgfNwLAKFeo0/pvEE10XDB+EXRTXtSzJozQKFFAJhMxYkVaCW+E9AL7tMeU8acxidHqzb6lX4691UsDpy/LLRmT+epgW56+5Cw8tB4kMUv6s9lh3eRKbyGs+H/4mQMaYzPTf2OOdokEn+zzgvoD3FqNKk8QqGAXVsqcGdXrT62fSPkR2vROFi68A6se86UxRUk4cajfPyCC4G5wDhD+zNq4jodQ4u4n/m37Lr36n4LIAAsVr02dFi9AiwA81MYs2rm4eDlDNmdMRvEKRHfBwW5DdMNp0jPFZMeARqF/wL4XBfd+EMLBfMzpH5GH6NaW+1vrvMdg+VxDzatk3MXgO3ro3P/DpcC6+Mo4MySJhKJhSR01SGGGp5hPWmrrUgrv3lDnP+HhcI3nt3YqBoVAVTBAQT5iuhTg8nvPtd8ZeYj6w1x6RqGUBrSku7+N1+BaasZvjTk64RoIDlL8brpEcJx3OmY7jLoZsswdtmhfC/G21llXhITOwmvRDDeTTPbyASOa16cF5/A1fZAidJpqju3wYAy9avPR1ya6eNp9K8XYrrtuxlqi+bDKwlfrYdR0RRiKRVTLOH85+ZY7XSmzRpfZBJjaTa81VDcJHpZnZnSQLASGYW9l51ZV/h7eVzTi3Hv6hUsgc/51AqJRTkpbFVLXXszoBL8nBX0u/0jBLT8nH+fJePbrwURT58OY+UieRjd1vs04w0VG5VN2U6MoGZkQzKN/ptz0Q366dxoTGmj7i1NQGHi9GgnquXFYdrCfZBmeb7s0T6yrdlZH5cZuwHFyIJ/kAtGsTg0xH5taAAq44BAk1CPk9KVVbqQzrCUiFdF/6gtlPQ8bHHc1G1W92MXGZ5HEHftyLYs8mbD/9xYRUWkHmlM0zC2ilJlnNgV4bfALpQghxOUoZL7VTqtCHIaQSXm+YUMnpkXybnV+A6xlm2CVy8fn0Xlm2XRa0+zzOa21JWWmixfiPMSCZ7qA4rS93VN3pkpF1s5TonQjisHf7iU9ZGvUPOAKZcR1pbeVf/Ul7OhepGCaId9wOtqo7pJ7yLcBZ0pFkOF28y4zEI/kcUNmutBHaQpBdNM8vjCS6HZRokkeo88TBAjGyG7SR+6vUgTcyK9Imalj0kuxz0wmK+byQU11AiJFk/ya5dNduRClcnU64yGu/ieWSeOos1t3ep+RPIWQ2pyTYVbZltTbsb7NiwSi3AV+8KLWk7LxCnfZUetEM8ThnsSoGH38/nyAwFguJp8FjvlHtcWZuU4hPva0rHfr0UhOOJ/F6vS62FW7KzkmRll2HEc7oUq4fyi5T70Vl7YVIfsPHUCdHesf9Lk7WNVWO75JDkYbMI8TOW8JKVtLY9d6UJRITO8oKo0xS+o99Yy04iniGHAaGj88kEWgwv0OrHdY/nr76DOGNS59hXCGXzTKUvDl9iKpLSWYN1lxIeyywdNpTkhay74w2jFT6NS8qkjo5CxA1yfSYwp6AJIZNKIeEK5PJAW7ORgWgwp0VgzYpqovMrWxbu+DGZ6Lhie1RAqpzm8VUzKJOH3mCzWuTOLsN3VT/dv2eeYe9UjbR8YTBsLz7q60VN1sU51k+um1f8JxD5pPhbhSC8rRaB454tmh6YUWrJI3+GWY0qeWioj/tbkYITOkJaeuGt4JrJvHA+l0Gu7kY7XOaa05alMnRWVCXqFgLIwSY4uF59Ue5SU4QKuc/HamDxbr0x6csCetXGoP7Qn1Bk/J9DsynO/UD6iZ1Hyrz+jit0hDCwi/E9OjgKTbB3ZQKQ/0ZOvevfNHG0NK4Aj3Cp7NpRk07RT1i/S0EL93Ag8GRgKI9CfpajKyK6+Jj/PI1KO5/85VAwz2AwzP8FTBb075IxCXv6T9RVvWT2tUaqxDS92zrGUbWzUYk9mSs82pECH+fkqsDt93VW++4YsR/dHCYcQSYTO/KaBMDj9LSD/J/+z20Kq8XvZUAIHtm9hRPP3ItbuAu2Hm5lkPs92pd7kCxgRs0xOVBnZ13ccdA0aunrwv9SdqElJRC3g+oCu+nXyCgmXUs9yMjTMAIHfxZV+aPKcZeUBWt057Xo85Ks1Ir5gzEHCWqZEhrLZMuF11ziGtFQUds/EESajhagzcKsxamcSZxGth4UII+adPhQkUnx2WyN+4YWR+r3f8MnkyGFuR4zjzxJS8WsQYR5PTyRaD9ixa6Mh741nBHbzfjXHskGDq179xaRNrCIB1z1xRfWfjqw2pHc1zk9xlPpL8sQWAIuETZZhbnmL54rceXVNRvUiKrrqIkeogsl0XXb17ylNb0f4GA9Wd44vffEG8FSZGHEL2fbaTGRcSiCeA8PmA/f6Hz8HCS76fXUHwgwkzSwlI71ekZ7Fapmlk/KC+Hs8hUcw3N2LN5LhkVYyizYFl/uPeVP5lsoJHhhfWvvSWruCUW1ZcJOeuTbrDgywJ/qG07gZJplnTvLcYdNaH0KMYOYMGX+rB4NGPFmQsNaIwlWrfCezxre8zXBrsMT+edVLbLqN1BqB76JH4BvZTqUIMfGwPGEn+EnmTV86fPBaYbFL3DFEhjB45CewkXEAtJxk4/Ms2pPXnaRqdky0HOYdcUcE2zcXq4vaIvW2/v0nHFJH2XXe22ueDmq/18XGtELSq85j9X8q0tcNSSKJIX8FTuJF/Pf8j5PhqG2u+osvsLxYrvvfeVJL+4tkcXcr9JV7v0ERmj/X6fM3NC4j6dS1+9Umr2oPavqiAydTZPLMNRGY23LO9zAVDly7jD+70G5TPPLdhRIl4WxcYjLnM+SNcJ26FOrkrISUtPObIz5Zb3AG612krnpy15RMW+1cQjlnWFI6538qky9axd2oJmHIHP08KyP0ubGO+TQNOYuv2uh17yCIvR8VcStw7o1g0NM60sk+8Tq7YfIBJrtp53GkvzXH7OA0p8/n/u1satf/VJhtR1l8Wa6Gmaug7haSpaCaYQax6ta0mkutlb+eAOSG1aobM81D9A4iS1RRlzBBoVX6tU1S6WE2N9ORY6DfeLRC4l9Rvr5h95XDWB2mR1d4WFudpsgVYwiTwT31ljskD8ZyDOlm5DkGh9N/UB/0AI5Xvb8ZBmai2hQ4BWMqFwYnzxwB26YHSOv9WgY3JXnvoN+2R4rqGVh/LLDMtpFP+SpMGJNWvbIl5SOodbCczW2RKleksPoUeGEzrjtKHVdtZA+kfqO+rVx/iclCqwoopepvJpSTDjT+b9GWylGRF8EDbGlw6eUzmJM95Ovoz+kwLX3c2fTjFeYEsE7vUZm3mqdGJuKh2w9/QGSaqRHs99aScGOdDqkFcACoqdbBoQqqjamhH6Q9ng39JCg3lrGJwd50Qk9ovnqBTr8MME7Ps2wiVfygUmPoUBJJfJWX5Nda0nuncbFkA=="))}const Oc=Q5();new Set(af(Oc)),new Set(af(Oc)),H5(Oc),J5(Oc);const Y5=new Uint8Array(32);Y5.fill(0);const W5=`Ethereum Signed Message:
`;function F1(r){return typeof r=="string"&&(r=Yh(r)),Hu(x5([Yh(W5),Yh(String(r.length)),r]))}const X5="address/5.7.0",oo=new Ar(X5);function F0(r){di(r,20)||oo.throwArgumentError("invalid address","address",r),r=r.toLowerCase();const e=r.substring(2).split(""),t=new Uint8Array(40);for(let s=0;s<40;s++)t[s]=e[s].charCodeAt(0);const i=Zt(Hu(t));for(let s=0;s<40;s+=2)i[s>>1]>>4>=8&&(e[s]=e[s].toUpperCase()),(i[s>>1]&15)>=8&&(e[s+1]=e[s+1].toUpperCase());return"0x"+e.join("")}const Z5=9007199254740991;function e8(r){return Math.log10?Math.log10(r):Math.log(r)/Math.LN10}const Vu={};for(let r=0;r<10;r++)Vu[String(r)]=String(r);for(let r=0;r<26;r++)Vu[String.fromCharCode(65+r)]=String(10+r);const j0=Math.floor(e8(Z5));function t8(r){r=r.toUpperCase(),r=r.substring(4)+r.substring(0,2)+"00";let e=r.split("").map(i=>Vu[i]).join("");for(;e.length>=j0;){let i=e.substring(0,j0);e=parseInt(i,10)%97+e.substring(i.length)}let t=String(98-parseInt(e,10)%97);for(;t.length<2;)t="0"+t;return t}function r8(r){let e=null;if(typeof r!="string"&&oo.throwArgumentError("invalid address","address",r),r.match(/^(0x)?[0-9a-fA-F]{40}$/))r.substring(0,2)!=="0x"&&(r="0x"+r),e=F0(r),r.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&e!==r&&oo.throwArgumentError("bad address checksum","address",r);else if(r.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(r.substring(2,4)!==t8(r)&&oo.throwArgumentError("bad icap checksum","address",r),e=N5(r.substring(4));e.length<40;)e="0"+e;e=F0("0x"+e)}else oo.throwArgumentError("invalid address","address",r);return e}function Ya(r,e,t){Object.defineProperty(r,e,{enumerable:!0,value:t,writable:!1})}const i8=new Uint8Array(32);i8.fill(0),Fr.from(-1);const n8=Fr.from(0),s8=Fr.from(1);Fr.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),yn(s8.toHexString(),32),yn(n8.toHexString(),32);var pn={},Pt={},So=j1;function j1(r,e){if(!r)throw new Error(e||"Assertion failed")}j1.equal=function(r,e,t){if(r!=e)throw new Error(t||"Assertion failed: "+r+" != "+e)};var _u={exports:{}};typeof Object.create=="function"?_u.exports=function(r,e){e&&(r.super_=e,r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}))}:_u.exports=function(r,e){if(e){r.super_=e;var t=function(){};t.prototype=e.prototype,r.prototype=new t,r.prototype.constructor=r}};var a8=So,o8=_u.exports;Pt.inherits=o8;function c8(r,e){return(r.charCodeAt(e)&64512)!==55296||e<0||e+1>=r.length?!1:(r.charCodeAt(e+1)&64512)===56320}function f8(r,e){if(Array.isArray(r))return r.slice();if(!r)return[];var t=[];if(typeof r=="string")if(e){if(e==="hex")for(r=r.replace(/[^a-z0-9]+/ig,""),r.length%2!==0&&(r="0"+r),s=0;s<r.length;s+=2)t.push(parseInt(r[s]+r[s+1],16))}else for(var i=0,s=0;s<r.length;s++){var o=r.charCodeAt(s);o<128?t[i++]=o:o<2048?(t[i++]=o>>6|192,t[i++]=o&63|128):c8(r,s)?(o=65536+((o&1023)<<10)+(r.charCodeAt(++s)&1023),t[i++]=o>>18|240,t[i++]=o>>12&63|128,t[i++]=o>>6&63|128,t[i++]=o&63|128):(t[i++]=o>>12|224,t[i++]=o>>6&63|128,t[i++]=o&63|128)}else for(s=0;s<r.length;s++)t[s]=r[s]|0;return t}Pt.toArray=f8;function h8(r){for(var e="",t=0;t<r.length;t++)e+=K1(r[t].toString(16));return e}Pt.toHex=h8;function H1(r){var e=r>>>24|r>>>8&65280|r<<8&16711680|(r&255)<<24;return e>>>0}Pt.htonl=H1;function u8(r,e){for(var t="",i=0;i<r.length;i++){var s=r[i];e==="little"&&(s=H1(s)),t+=V1(s.toString(16))}return t}Pt.toHex32=u8;function K1(r){return r.length===1?"0"+r:r}Pt.zero2=K1;function V1(r){return r.length===7?"0"+r:r.length===6?"00"+r:r.length===5?"000"+r:r.length===4?"0000"+r:r.length===3?"00000"+r:r.length===2?"000000"+r:r.length===1?"0000000"+r:r}Pt.zero8=V1;function d8(r,e,t,i){var s=t-e;a8(s%4===0);for(var o=new Array(s/4),h=0,g=e;h<o.length;h++,g+=4){var y;i==="big"?y=r[g]<<24|r[g+1]<<16|r[g+2]<<8|r[g+3]:y=r[g+3]<<24|r[g+2]<<16|r[g+1]<<8|r[g],o[h]=y>>>0}return o}Pt.join32=d8;function l8(r,e){for(var t=new Array(r.length*4),i=0,s=0;i<r.length;i++,s+=4){var o=r[i];e==="big"?(t[s]=o>>>24,t[s+1]=o>>>16&255,t[s+2]=o>>>8&255,t[s+3]=o&255):(t[s+3]=o>>>24,t[s+2]=o>>>16&255,t[s+1]=o>>>8&255,t[s]=o&255)}return t}Pt.split32=l8;function p8(r,e){return r>>>e|r<<32-e}Pt.rotr32=p8;function g8(r,e){return r<<e|r>>>32-e}Pt.rotl32=g8;function v8(r,e){return r+e>>>0}Pt.sum32=v8;function b8(r,e,t){return r+e+t>>>0}Pt.sum32_3=b8;function m8(r,e,t,i){return r+e+t+i>>>0}Pt.sum32_4=m8;function y8(r,e,t,i,s){return r+e+t+i+s>>>0}Pt.sum32_5=y8;function w8(r,e,t,i){var s=r[e],o=r[e+1],h=i+o>>>0,g=(h<i?1:0)+t+s;r[e]=g>>>0,r[e+1]=h}Pt.sum64=w8;function _8(r,e,t,i){var s=e+i>>>0,o=(s<e?1:0)+r+t;return o>>>0}Pt.sum64_hi=_8;function A8(r,e,t,i){var s=e+i;return s>>>0}Pt.sum64_lo=A8;function M8(r,e,t,i,s,o,h,g){var y=0,_=e;_=_+i>>>0,y+=_<e?1:0,_=_+o>>>0,y+=_<o?1:0,_=_+g>>>0,y+=_<g?1:0;var I=r+t+s+h+y;return I>>>0}Pt.sum64_4_hi=M8;function x8(r,e,t,i,s,o,h,g){var y=e+i+o+g;return y>>>0}Pt.sum64_4_lo=x8;function E8(r,e,t,i,s,o,h,g,y,_){var I=0,P=e;P=P+i>>>0,I+=P<e?1:0,P=P+o>>>0,I+=P<o?1:0,P=P+g>>>0,I+=P<g?1:0,P=P+_>>>0,I+=P<_?1:0;var q=r+t+s+h+y+I;return q>>>0}Pt.sum64_5_hi=E8;function I8(r,e,t,i,s,o,h,g,y,_){var I=e+i+o+g+_;return I>>>0}Pt.sum64_5_lo=I8;function S8(r,e,t){var i=e<<32-t|r>>>t;return i>>>0}Pt.rotr64_hi=S8;function P8(r,e,t){var i=r<<32-t|e>>>t;return i>>>0}Pt.rotr64_lo=P8;function R8(r,e,t){return r>>>t}Pt.shr64_hi=R8;function C8(r,e,t){var i=r<<32-t|e>>>t;return i>>>0}Pt.shr64_lo=C8;var Ea={},H0=Pt,N8=So;function qc(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}Ea.BlockHash=qc,qc.prototype.update=function(r,e){if(r=H0.toArray(r,e),this.pending?this.pending=this.pending.concat(r):this.pending=r,this.pendingTotal+=r.length,this.pending.length>=this._delta8){r=this.pending;var t=r.length%this._delta8;this.pending=r.slice(r.length-t,r.length),this.pending.length===0&&(this.pending=null),r=H0.join32(r,0,r.length-t,this.endian);for(var i=0;i<r.length;i+=this._delta32)this._update(r,i,i+this._delta32)}return this},qc.prototype.digest=function(r){return this.update(this._pad()),N8(this.pending===null),this._digest(r)},qc.prototype._pad=function(){var r=this.pendingTotal,e=this._delta8,t=e-(r+this.padLength)%e,i=new Array(t+this.padLength);i[0]=128;for(var s=1;s<t;s++)i[s]=0;if(r<<=3,this.endian==="big"){for(var o=8;o<this.padLength;o++)i[s++]=0;i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=r>>>24&255,i[s++]=r>>>16&255,i[s++]=r>>>8&255,i[s++]=r&255}else for(i[s++]=r&255,i[s++]=r>>>8&255,i[s++]=r>>>16&255,i[s++]=r>>>24&255,i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=0,o=8;o<this.padLength;o++)i[s++]=0;return i};var oa={},Sn={},T8=Pt,wn=T8.rotr32;function O8(r,e,t,i){if(r===0)return G1(e,t,i);if(r===1||r===3)return Q1(e,t,i);if(r===2)return J1(e,t,i)}Sn.ft_1=O8;function G1(r,e,t){return r&e^~r&t}Sn.ch32=G1;function J1(r,e,t){return r&e^r&t^e&t}Sn.maj32=J1;function Q1(r,e,t){return r^e^t}Sn.p32=Q1;function q8(r){return wn(r,2)^wn(r,13)^wn(r,22)}Sn.s0_256=q8;function D8(r){return wn(r,6)^wn(r,11)^wn(r,25)}Sn.s1_256=D8;function k8(r){return wn(r,7)^wn(r,18)^r>>>3}Sn.g0_256=k8;function B8(r){return wn(r,17)^wn(r,19)^r>>>10}Sn.g1_256=B8;var va=Pt,L8=Ea,z8=Sn,Xh=va.rotl32,Wa=va.sum32,$8=va.sum32_5,U8=z8.ft_1,Y1=L8.BlockHash,F8=[1518500249,1859775393,2400959708,3395469782];function bn(){if(!(this instanceof bn))return new bn;Y1.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}va.inherits(bn,Y1);var j8=bn;bn.blockSize=512,bn.outSize=160,bn.hmacStrength=80,bn.padLength=64,bn.prototype._update=function(r,e){for(var t=this.W,i=0;i<16;i++)t[i]=r[e+i];for(;i<t.length;i++)t[i]=Xh(t[i-3]^t[i-8]^t[i-14]^t[i-16],1);var s=this.h[0],o=this.h[1],h=this.h[2],g=this.h[3],y=this.h[4];for(i=0;i<t.length;i++){var _=~~(i/20),I=$8(Xh(s,5),U8(_,o,h,g),y,t[i],F8[_]);y=g,g=h,h=Xh(o,30),o=s,s=I}this.h[0]=Wa(this.h[0],s),this.h[1]=Wa(this.h[1],o),this.h[2]=Wa(this.h[2],h),this.h[3]=Wa(this.h[3],g),this.h[4]=Wa(this.h[4],y)},bn.prototype._digest=function(r){return r==="hex"?va.toHex32(this.h,"big"):va.split32(this.h,"big")};var ba=Pt,H8=Ea,Ia=Sn,K8=So,Ji=ba.sum32,V8=ba.sum32_4,G8=ba.sum32_5,J8=Ia.ch32,Q8=Ia.maj32,Y8=Ia.s0_256,W8=Ia.s1_256,X8=Ia.g0_256,Z8=Ia.g1_256,W1=H8.BlockHash,e4=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function mn(){if(!(this instanceof mn))return new mn;W1.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=e4,this.W=new Array(64)}ba.inherits(mn,W1);var X1=mn;mn.blockSize=512,mn.outSize=256,mn.hmacStrength=192,mn.padLength=64,mn.prototype._update=function(r,e){for(var t=this.W,i=0;i<16;i++)t[i]=r[e+i];for(;i<t.length;i++)t[i]=V8(Z8(t[i-2]),t[i-7],X8(t[i-15]),t[i-16]);var s=this.h[0],o=this.h[1],h=this.h[2],g=this.h[3],y=this.h[4],_=this.h[5],I=this.h[6],P=this.h[7];for(K8(this.k.length===t.length),i=0;i<t.length;i++){var q=G8(P,W8(y),J8(y,_,I),this.k[i],t[i]),O=Ji(Y8(s),Q8(s,o,h));P=I,I=_,_=y,y=Ji(g,q),g=h,h=o,o=s,s=Ji(q,O)}this.h[0]=Ji(this.h[0],s),this.h[1]=Ji(this.h[1],o),this.h[2]=Ji(this.h[2],h),this.h[3]=Ji(this.h[3],g),this.h[4]=Ji(this.h[4],y),this.h[5]=Ji(this.h[5],_),this.h[6]=Ji(this.h[6],I),this.h[7]=Ji(this.h[7],P)},mn.prototype._digest=function(r){return r==="hex"?ba.toHex32(this.h,"big"):ba.split32(this.h,"big")};var Au=Pt,Z1=X1;function jn(){if(!(this instanceof jn))return new jn;Z1.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}Au.inherits(jn,Z1);var t4=jn;jn.blockSize=512,jn.outSize=224,jn.hmacStrength=192,jn.padLength=64,jn.prototype._digest=function(r){return r==="hex"?Au.toHex32(this.h.slice(0,7),"big"):Au.split32(this.h.slice(0,7),"big")};var ni=Pt,r4=Ea,i4=So,_n=ni.rotr64_hi,An=ni.rotr64_lo,eg=ni.shr64_hi,tg=ni.shr64_lo,ns=ni.sum64,Zh=ni.sum64_hi,eu=ni.sum64_lo,n4=ni.sum64_4_hi,s4=ni.sum64_4_lo,a4=ni.sum64_5_hi,o4=ni.sum64_5_lo,rg=r4.BlockHash,c4=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function tn(){if(!(this instanceof tn))return new tn;rg.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=c4,this.W=new Array(160)}ni.inherits(tn,rg);var ig=tn;tn.blockSize=1024,tn.outSize=512,tn.hmacStrength=192,tn.padLength=128,tn.prototype._prepareBlock=function(r,e){for(var t=this.W,i=0;i<32;i++)t[i]=r[e+i];for(;i<t.length;i+=2){var s=y4(t[i-4],t[i-3]),o=w4(t[i-4],t[i-3]),h=t[i-14],g=t[i-13],y=b4(t[i-30],t[i-29]),_=m4(t[i-30],t[i-29]),I=t[i-32],P=t[i-31];t[i]=n4(s,o,h,g,y,_,I,P),t[i+1]=s4(s,o,h,g,y,_,I,P)}},tn.prototype._update=function(r,e){this._prepareBlock(r,e);var t=this.W,i=this.h[0],s=this.h[1],o=this.h[2],h=this.h[3],g=this.h[4],y=this.h[5],_=this.h[6],I=this.h[7],P=this.h[8],q=this.h[9],O=this.h[10],L=this.h[11],j=this.h[12],G=this.h[13],Q=this.h[14],Z=this.h[15];i4(this.k.length===t.length);for(var de=0;de<t.length;de+=2){var ce=Q,ae=Z,he=g4(P,q),ue=v4(P,q),le=f4(P,q,O,L,j),Te=h4(P,q,O,L,j,G),lt=this.k[de],B=this.k[de+1],v=t[de],c=t[de+1],d=a4(ce,ae,he,ue,le,Te,lt,B,v,c),p=o4(ce,ae,he,ue,le,Te,lt,B,v,c);ce=l4(i,s),ae=p4(i,s),he=u4(i,s,o,h,g),ue=d4(i,s,o,h,g,y);var w=Zh(ce,ae,he,ue),x=eu(ce,ae,he,ue);Q=j,Z=G,j=O,G=L,O=P,L=q,P=Zh(_,I,d,p),q=eu(I,I,d,p),_=g,I=y,g=o,y=h,o=i,h=s,i=Zh(d,p,w,x),s=eu(d,p,w,x)}ns(this.h,0,i,s),ns(this.h,2,o,h),ns(this.h,4,g,y),ns(this.h,6,_,I),ns(this.h,8,P,q),ns(this.h,10,O,L),ns(this.h,12,j,G),ns(this.h,14,Q,Z)},tn.prototype._digest=function(r){return r==="hex"?ni.toHex32(this.h,"big"):ni.split32(this.h,"big")};function f4(r,e,t,i,s){var o=r&t^~r&s;return o<0&&(o+=4294967296),o}function h4(r,e,t,i,s,o){var h=e&i^~e&o;return h<0&&(h+=4294967296),h}function u4(r,e,t,i,s){var o=r&t^r&s^t&s;return o<0&&(o+=4294967296),o}function d4(r,e,t,i,s,o){var h=e&i^e&o^i&o;return h<0&&(h+=4294967296),h}function l4(r,e){var t=_n(r,e,28),i=_n(e,r,2),s=_n(e,r,7),o=t^i^s;return o<0&&(o+=4294967296),o}function p4(r,e){var t=An(r,e,28),i=An(e,r,2),s=An(e,r,7),o=t^i^s;return o<0&&(o+=4294967296),o}function g4(r,e){var t=_n(r,e,14),i=_n(r,e,18),s=_n(e,r,9),o=t^i^s;return o<0&&(o+=4294967296),o}function v4(r,e){var t=An(r,e,14),i=An(r,e,18),s=An(e,r,9),o=t^i^s;return o<0&&(o+=4294967296),o}function b4(r,e){var t=_n(r,e,1),i=_n(r,e,8),s=eg(r,e,7),o=t^i^s;return o<0&&(o+=4294967296),o}function m4(r,e){var t=An(r,e,1),i=An(r,e,8),s=tg(r,e,7),o=t^i^s;return o<0&&(o+=4294967296),o}function y4(r,e){var t=_n(r,e,19),i=_n(e,r,29),s=eg(r,e,6),o=t^i^s;return o<0&&(o+=4294967296),o}function w4(r,e){var t=An(r,e,19),i=An(e,r,29),s=tg(r,e,6),o=t^i^s;return o<0&&(o+=4294967296),o}var Mu=Pt,ng=ig;function Hn(){if(!(this instanceof Hn))return new Hn;ng.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}Mu.inherits(Hn,ng);var _4=Hn;Hn.blockSize=1024,Hn.outSize=384,Hn.hmacStrength=192,Hn.padLength=128,Hn.prototype._digest=function(r){return r==="hex"?Mu.toHex32(this.h.slice(0,12),"big"):Mu.split32(this.h.slice(0,12),"big")},oa.sha1=j8,oa.sha224=t4,oa.sha256=X1,oa.sha384=_4,oa.sha512=ig;var sg={},Os=Pt,A4=Ea,Dc=Os.rotl32,K0=Os.sum32,Xa=Os.sum32_3,V0=Os.sum32_4,ag=A4.BlockHash;function gn(){if(!(this instanceof gn))return new gn;ag.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}Os.inherits(gn,ag),sg.ripemd160=gn,gn.blockSize=512,gn.outSize=160,gn.hmacStrength=192,gn.padLength=64,gn.prototype._update=function(r,e){for(var t=this.h[0],i=this.h[1],s=this.h[2],o=this.h[3],h=this.h[4],g=t,y=i,_=s,I=o,P=h,q=0;q<80;q++){var O=K0(Dc(V0(t,G0(q,i,s,o),r[E4[q]+e],M4(q)),S4[q]),h);t=h,h=o,o=Dc(s,10),s=i,i=O,O=K0(Dc(V0(g,G0(79-q,y,_,I),r[I4[q]+e],x4(q)),P4[q]),P),g=P,P=I,I=Dc(_,10),_=y,y=O}O=Xa(this.h[1],s,I),this.h[1]=Xa(this.h[2],o,P),this.h[2]=Xa(this.h[3],h,g),this.h[3]=Xa(this.h[4],t,y),this.h[4]=Xa(this.h[0],i,_),this.h[0]=O},gn.prototype._digest=function(r){return r==="hex"?Os.toHex32(this.h,"little"):Os.split32(this.h,"little")};function G0(r,e,t,i){return r<=15?e^t^i:r<=31?e&t|~e&i:r<=47?(e|~t)^i:r<=63?e&i|t&~i:e^(t|~i)}function M4(r){return r<=15?0:r<=31?1518500249:r<=47?1859775393:r<=63?2400959708:2840853838}function x4(r){return r<=15?1352829926:r<=31?1548603684:r<=47?1836072691:r<=63?2053994217:0}var E4=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],I4=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],S4=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],P4=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],R4=Pt,C4=So;function pa(r,e,t){if(!(this instanceof pa))return new pa(r,e,t);this.Hash=r,this.blockSize=r.blockSize/8,this.outSize=r.outSize/8,this.inner=null,this.outer=null,this._init(R4.toArray(e,t))}var N4=pa;pa.prototype._init=function(r){r.length>this.blockSize&&(r=new this.Hash().update(r).digest()),C4(r.length<=this.blockSize);for(var e=r.length;e<this.blockSize;e++)r.push(0);for(e=0;e<r.length;e++)r[e]^=54;for(this.inner=new this.Hash().update(r),e=0;e<r.length;e++)r[e]^=106;this.outer=new this.Hash().update(r)},pa.prototype.update=function(r,e){return this.inner.update(r,e),this},pa.prototype.digest=function(r){return this.outer.update(this.inner.digest()),this.outer.digest(r)},function(r){var e=r;e.utils=Pt,e.common=Ea,e.sha=oa,e.ripemd=sg,e.hmac=N4,e.sha1=e.sha.sha1,e.sha256=e.sha.sha256,e.sha224=e.sha.sha224,e.sha384=e.sha.sha384,e.sha512=e.sha.sha512,e.ripemd160=e.ripemd.ripemd160}(pn);function Sa(r,e,t){return t={path:e,exports:{},require:function(i,s){return T4(i,s??t.path)}},r(t,t.exports),t.exports}function T4(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var Gu=og;function og(r,e){if(!r)throw new Error(e||"Assertion failed")}og.equal=function(r,e,t){if(r!=e)throw new Error(t||"Assertion failed: "+r+" != "+e)};var rn=Sa(function(r,e){var t=e;function i(h,g){if(Array.isArray(h))return h.slice();if(!h)return[];var y=[];if(typeof h!="string"){for(var _=0;_<h.length;_++)y[_]=h[_]|0;return y}if(g==="hex"){h=h.replace(/[^a-z0-9]+/ig,""),h.length%2!==0&&(h="0"+h);for(var _=0;_<h.length;_+=2)y.push(parseInt(h[_]+h[_+1],16))}else for(var _=0;_<h.length;_++){var I=h.charCodeAt(_),P=I>>8,q=I&255;P?y.push(P,q):y.push(q)}return y}t.toArray=i;function s(h){return h.length===1?"0"+h:h}t.zero2=s;function o(h){for(var g="",y=0;y<h.length;y++)g+=s(h[y].toString(16));return g}t.toHex=o,t.encode=function(h,g){return g==="hex"?o(h):h}}),li=Sa(function(r,e){var t=e;t.assert=Gu,t.toArray=rn.toArray,t.zero2=rn.zero2,t.toHex=rn.toHex,t.encode=rn.encode;function i(y,_,I){var P=new Array(Math.max(y.bitLength(),I)+1);P.fill(0);for(var q=1<<_+1,O=y.clone(),L=0;L<P.length;L++){var j,G=O.andln(q-1);O.isOdd()?(G>(q>>1)-1?j=(q>>1)-G:j=G,O.isubn(j)):j=0,P[L]=j,O.iushrn(1)}return P}t.getNAF=i;function s(y,_){var I=[[],[]];y=y.clone(),_=_.clone();for(var P=0,q=0,O;y.cmpn(-P)>0||_.cmpn(-q)>0;){var L=y.andln(3)+P&3,j=_.andln(3)+q&3;L===3&&(L=-1),j===3&&(j=-1);var G;L&1?(O=y.andln(7)+P&7,(O===3||O===5)&&j===2?G=-L:G=L):G=0,I[0].push(G);var Q;j&1?(O=_.andln(7)+q&7,(O===3||O===5)&&L===2?Q=-j:Q=j):Q=0,I[1].push(Q),2*P===G+1&&(P=1-P),2*q===Q+1&&(q=1-q),y.iushrn(1),_.iushrn(1)}return I}t.getJSF=s;function o(y,_,I){var P="_"+_;y.prototype[_]=function(){return this[P]!==void 0?this[P]:this[P]=I.call(this)}}t.cachedProperty=o;function h(y){return typeof y=="string"?t.toArray(y,"hex"):y}t.parseBytes=h;function g(y){return new vt(y,"hex","le")}t.intFromLE=g}),kc=li.getNAF,O4=li.getJSF,of=li.assert;function os(r,e){this.type=r,this.p=new vt(e.p,16),this.red=e.prime?vt.red(e.prime):vt.mont(this.p),this.zero=new vt(0).toRed(this.red),this.one=new vt(1).toRed(this.red),this.two=new vt(2).toRed(this.red),this.n=e.n&&new vt(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var t=this.n&&this.p.div(this.n);!t||t.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var Ls=os;os.prototype.point=function(){throw new Error("Not implemented")},os.prototype.validate=function(){throw new Error("Not implemented")},os.prototype._fixedNafMul=function(r,e){of(r.precomputed);var t=r._getDoubles(),i=kc(e,1,this._bitLength),s=(1<<t.step+1)-(t.step%2===0?2:1);s/=3;var o=[],h,g;for(h=0;h<i.length;h+=t.step){g=0;for(var y=h+t.step-1;y>=h;y--)g=(g<<1)+i[y];o.push(g)}for(var _=this.jpoint(null,null,null),I=this.jpoint(null,null,null),P=s;P>0;P--){for(h=0;h<o.length;h++)g=o[h],g===P?I=I.mixedAdd(t.points[h]):g===-P&&(I=I.mixedAdd(t.points[h].neg()));_=_.add(I)}return _.toP()},os.prototype._wnafMul=function(r,e){var t=4,i=r._getNAFPoints(t);t=i.wnd;for(var s=i.points,o=kc(e,t,this._bitLength),h=this.jpoint(null,null,null),g=o.length-1;g>=0;g--){for(var y=0;g>=0&&o[g]===0;g--)y++;if(g>=0&&y++,h=h.dblp(y),g<0)break;var _=o[g];of(_!==0),r.type==="affine"?_>0?h=h.mixedAdd(s[_-1>>1]):h=h.mixedAdd(s[-_-1>>1].neg()):_>0?h=h.add(s[_-1>>1]):h=h.add(s[-_-1>>1].neg())}return r.type==="affine"?h.toP():h},os.prototype._wnafMulAdd=function(r,e,t,i,s){var o=this._wnafT1,h=this._wnafT2,g=this._wnafT3,y=0,_,I,P;for(_=0;_<i;_++){P=e[_];var q=P._getNAFPoints(r);o[_]=q.wnd,h[_]=q.points}for(_=i-1;_>=1;_-=2){var O=_-1,L=_;if(o[O]!==1||o[L]!==1){g[O]=kc(t[O],o[O],this._bitLength),g[L]=kc(t[L],o[L],this._bitLength),y=Math.max(g[O].length,y),y=Math.max(g[L].length,y);continue}var j=[e[O],null,null,e[L]];e[O].y.cmp(e[L].y)===0?(j[1]=e[O].add(e[L]),j[2]=e[O].toJ().mixedAdd(e[L].neg())):e[O].y.cmp(e[L].y.redNeg())===0?(j[1]=e[O].toJ().mixedAdd(e[L]),j[2]=e[O].add(e[L].neg())):(j[1]=e[O].toJ().mixedAdd(e[L]),j[2]=e[O].toJ().mixedAdd(e[L].neg()));var G=[-3,-1,-5,-7,0,7,5,1,3],Q=O4(t[O],t[L]);for(y=Math.max(Q[0].length,y),g[O]=new Array(y),g[L]=new Array(y),I=0;I<y;I++){var Z=Q[0][I]|0,de=Q[1][I]|0;g[O][I]=G[(Z+1)*3+(de+1)],g[L][I]=0,h[O]=j}}var ce=this.jpoint(null,null,null),ae=this._wnafT4;for(_=y;_>=0;_--){for(var he=0;_>=0;){var ue=!0;for(I=0;I<i;I++)ae[I]=g[I][_]|0,ae[I]!==0&&(ue=!1);if(!ue)break;he++,_--}if(_>=0&&he++,ce=ce.dblp(he),_<0)break;for(I=0;I<i;I++){var le=ae[I];le!==0&&(le>0?P=h[I][le-1>>1]:le<0&&(P=h[I][-le-1>>1].neg()),P.type==="affine"?ce=ce.mixedAdd(P):ce=ce.add(P))}}for(_=0;_<i;_++)h[_]=null;return s?ce:ce.toP()};function Si(r,e){this.curve=r,this.type=e,this.precomputed=null}os.BasePoint=Si,Si.prototype.eq=function(){throw new Error("Not implemented")},Si.prototype.validate=function(){return this.curve.validate(this)},os.prototype.decodePoint=function(r,e){r=li.toArray(r,e);var t=this.p.byteLength();if((r[0]===4||r[0]===6||r[0]===7)&&r.length-1===2*t){r[0]===6?of(r[r.length-1]%2===0):r[0]===7&&of(r[r.length-1]%2===1);var i=this.point(r.slice(1,1+t),r.slice(1+t,1+2*t));return i}else if((r[0]===2||r[0]===3)&&r.length-1===t)return this.pointFromX(r.slice(1,1+t),r[0]===3);throw new Error("Unknown point format")},Si.prototype.encodeCompressed=function(r){return this.encode(r,!0)},Si.prototype._encode=function(r){var e=this.curve.p.byteLength(),t=this.getX().toArray("be",e);return r?[this.getY().isEven()?2:3].concat(t):[4].concat(t,this.getY().toArray("be",e))},Si.prototype.encode=function(r,e){return li.encode(this._encode(e),r)},Si.prototype.precompute=function(r){if(this.precomputed)return this;var e={doubles:null,naf:null,beta:null};return e.naf=this._getNAFPoints(8),e.doubles=this._getDoubles(4,r),e.beta=this._getBeta(),this.precomputed=e,this},Si.prototype._hasDoubles=function(r){if(!this.precomputed)return!1;var e=this.precomputed.doubles;return e?e.points.length>=Math.ceil((r.bitLength()+1)/e.step):!1},Si.prototype._getDoubles=function(r,e){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var t=[this],i=this,s=0;s<e;s+=r){for(var o=0;o<r;o++)i=i.dbl();t.push(i)}return{step:r,points:t}},Si.prototype._getNAFPoints=function(r){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var e=[this],t=(1<<r)-1,i=t===1?null:this.dbl(),s=1;s<t;s++)e[s]=e[s-1].add(i);return{wnd:r,points:e}},Si.prototype._getBeta=function(){return null},Si.prototype.dblp=function(r){for(var e=this,t=0;t<r;t++)e=e.dbl();return e};var Ju=Sa(function(r){typeof Object.create=="function"?r.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:r.exports=function(e,t){if(t){e.super_=t;var i=function(){};i.prototype=t.prototype,e.prototype=new i,e.prototype.constructor=e}}}),q4=li.assert;function Ni(r){Ls.call(this,"short",r),this.a=new vt(r.a,16).toRed(this.red),this.b=new vt(r.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(r),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}Ju(Ni,Ls);var D4=Ni;Ni.prototype._getEndomorphism=function(r){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var e,t;if(r.beta)e=new vt(r.beta,16).toRed(this.red);else{var i=this._getEndoRoots(this.p);e=i[0].cmp(i[1])<0?i[0]:i[1],e=e.toRed(this.red)}if(r.lambda)t=new vt(r.lambda,16);else{var s=this._getEndoRoots(this.n);this.g.mul(s[0]).x.cmp(this.g.x.redMul(e))===0?t=s[0]:(t=s[1],q4(this.g.mul(t).x.cmp(this.g.x.redMul(e))===0))}var o;return r.basis?o=r.basis.map(function(h){return{a:new vt(h.a,16),b:new vt(h.b,16)}}):o=this._getEndoBasis(t),{beta:e,lambda:t,basis:o}}},Ni.prototype._getEndoRoots=function(r){var e=r===this.p?this.red:vt.mont(r),t=new vt(2).toRed(e).redInvm(),i=t.redNeg(),s=new vt(3).toRed(e).redNeg().redSqrt().redMul(t),o=i.redAdd(s).fromRed(),h=i.redSub(s).fromRed();return[o,h]},Ni.prototype._getEndoBasis=function(r){for(var e=this.n.ushrn(Math.floor(this.n.bitLength()/2)),t=r,i=this.n.clone(),s=new vt(1),o=new vt(0),h=new vt(0),g=new vt(1),y,_,I,P,q,O,L,j=0,G,Q;t.cmpn(0)!==0;){var Z=i.div(t);G=i.sub(Z.mul(t)),Q=h.sub(Z.mul(s));var de=g.sub(Z.mul(o));if(!I&&G.cmp(e)<0)y=L.neg(),_=s,I=G.neg(),P=Q;else if(I&&++j===2)break;L=G,i=t,t=G,h=s,s=Q,g=o,o=de}q=G.neg(),O=Q;var ce=I.sqr().add(P.sqr()),ae=q.sqr().add(O.sqr());return ae.cmp(ce)>=0&&(q=y,O=_),I.negative&&(I=I.neg(),P=P.neg()),q.negative&&(q=q.neg(),O=O.neg()),[{a:I,b:P},{a:q,b:O}]},Ni.prototype._endoSplit=function(r){var e=this.endo.basis,t=e[0],i=e[1],s=i.b.mul(r).divRound(this.n),o=t.b.neg().mul(r).divRound(this.n),h=s.mul(t.a),g=o.mul(i.a),y=s.mul(t.b),_=o.mul(i.b),I=r.sub(h).sub(g),P=y.add(_).neg();return{k1:I,k2:P}},Ni.prototype.pointFromX=function(r,e){r=new vt(r,16),r.red||(r=r.toRed(this.red));var t=r.redSqr().redMul(r).redIAdd(r.redMul(this.a)).redIAdd(this.b),i=t.redSqrt();if(i.redSqr().redSub(t).cmp(this.zero)!==0)throw new Error("invalid point");var s=i.fromRed().isOdd();return(e&&!s||!e&&s)&&(i=i.redNeg()),this.point(r,i)},Ni.prototype.validate=function(r){if(r.inf)return!0;var e=r.x,t=r.y,i=this.a.redMul(e),s=e.redSqr().redMul(e).redIAdd(i).redIAdd(this.b);return t.redSqr().redISub(s).cmpn(0)===0},Ni.prototype._endoWnafMulAdd=function(r,e,t){for(var i=this._endoWnafT1,s=this._endoWnafT2,o=0;o<r.length;o++){var h=this._endoSplit(e[o]),g=r[o],y=g._getBeta();h.k1.negative&&(h.k1.ineg(),g=g.neg(!0)),h.k2.negative&&(h.k2.ineg(),y=y.neg(!0)),i[o*2]=g,i[o*2+1]=y,s[o*2]=h.k1,s[o*2+1]=h.k2}for(var _=this._wnafMulAdd(1,i,s,o*2,t),I=0;I<o*2;I++)i[I]=null,s[I]=null;return _};function gr(r,e,t,i){Ls.BasePoint.call(this,r,"affine"),e===null&&t===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new vt(e,16),this.y=new vt(t,16),i&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}Ju(gr,Ls.BasePoint),Ni.prototype.point=function(r,e,t){return new gr(this,r,e,t)},Ni.prototype.pointFromJSON=function(r,e){return gr.fromJSON(this,r,e)},gr.prototype._getBeta=function(){if(this.curve.endo){var r=this.precomputed;if(r&&r.beta)return r.beta;var e=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(r){var t=this.curve,i=function(s){return t.point(s.x.redMul(t.endo.beta),s.y)};r.beta=e,e.precomputed={beta:null,naf:r.naf&&{wnd:r.naf.wnd,points:r.naf.points.map(i)},doubles:r.doubles&&{step:r.doubles.step,points:r.doubles.points.map(i)}}}return e}},gr.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},gr.fromJSON=function(r,e,t){typeof e=="string"&&(e=JSON.parse(e));var i=r.point(e[0],e[1],t);if(!e[2])return i;function s(h){return r.point(h[0],h[1],t)}var o=e[2];return i.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[i].concat(o.doubles.points.map(s))},naf:o.naf&&{wnd:o.naf.wnd,points:[i].concat(o.naf.points.map(s))}},i},gr.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},gr.prototype.isInfinity=function(){return this.inf},gr.prototype.add=function(r){if(this.inf)return r;if(r.inf)return this;if(this.eq(r))return this.dbl();if(this.neg().eq(r))return this.curve.point(null,null);if(this.x.cmp(r.x)===0)return this.curve.point(null,null);var e=this.y.redSub(r.y);e.cmpn(0)!==0&&(e=e.redMul(this.x.redSub(r.x).redInvm()));var t=e.redSqr().redISub(this.x).redISub(r.x),i=e.redMul(this.x.redSub(t)).redISub(this.y);return this.curve.point(t,i)},gr.prototype.dbl=function(){if(this.inf)return this;var r=this.y.redAdd(this.y);if(r.cmpn(0)===0)return this.curve.point(null,null);var e=this.curve.a,t=this.x.redSqr(),i=r.redInvm(),s=t.redAdd(t).redIAdd(t).redIAdd(e).redMul(i),o=s.redSqr().redISub(this.x.redAdd(this.x)),h=s.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,h)},gr.prototype.getX=function(){return this.x.fromRed()},gr.prototype.getY=function(){return this.y.fromRed()},gr.prototype.mul=function(r){return r=new vt(r,16),this.isInfinity()?this:this._hasDoubles(r)?this.curve._fixedNafMul(this,r):this.curve.endo?this.curve._endoWnafMulAdd([this],[r]):this.curve._wnafMul(this,r)},gr.prototype.mulAdd=function(r,e,t){var i=[this,e],s=[r,t];return this.curve.endo?this.curve._endoWnafMulAdd(i,s):this.curve._wnafMulAdd(1,i,s,2)},gr.prototype.jmulAdd=function(r,e,t){var i=[this,e],s=[r,t];return this.curve.endo?this.curve._endoWnafMulAdd(i,s,!0):this.curve._wnafMulAdd(1,i,s,2,!0)},gr.prototype.eq=function(r){return this===r||this.inf===r.inf&&(this.inf||this.x.cmp(r.x)===0&&this.y.cmp(r.y)===0)},gr.prototype.neg=function(r){if(this.inf)return this;var e=this.curve.point(this.x,this.y.redNeg());if(r&&this.precomputed){var t=this.precomputed,i=function(s){return s.neg()};e.precomputed={naf:t.naf&&{wnd:t.naf.wnd,points:t.naf.points.map(i)},doubles:t.doubles&&{step:t.doubles.step,points:t.doubles.points.map(i)}}}return e},gr.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var r=this.curve.jpoint(this.x,this.y,this.curve.one);return r};function _r(r,e,t,i){Ls.BasePoint.call(this,r,"jacobian"),e===null&&t===null&&i===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new vt(0)):(this.x=new vt(e,16),this.y=new vt(t,16),this.z=new vt(i,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}Ju(_r,Ls.BasePoint),Ni.prototype.jpoint=function(r,e,t){return new _r(this,r,e,t)},_r.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var r=this.z.redInvm(),e=r.redSqr(),t=this.x.redMul(e),i=this.y.redMul(e).redMul(r);return this.curve.point(t,i)},_r.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},_r.prototype.add=function(r){if(this.isInfinity())return r;if(r.isInfinity())return this;var e=r.z.redSqr(),t=this.z.redSqr(),i=this.x.redMul(e),s=r.x.redMul(t),o=this.y.redMul(e.redMul(r.z)),h=r.y.redMul(t.redMul(this.z)),g=i.redSub(s),y=o.redSub(h);if(g.cmpn(0)===0)return y.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var _=g.redSqr(),I=_.redMul(g),P=i.redMul(_),q=y.redSqr().redIAdd(I).redISub(P).redISub(P),O=y.redMul(P.redISub(q)).redISub(o.redMul(I)),L=this.z.redMul(r.z).redMul(g);return this.curve.jpoint(q,O,L)},_r.prototype.mixedAdd=function(r){if(this.isInfinity())return r.toJ();if(r.isInfinity())return this;var e=this.z.redSqr(),t=this.x,i=r.x.redMul(e),s=this.y,o=r.y.redMul(e).redMul(this.z),h=t.redSub(i),g=s.redSub(o);if(h.cmpn(0)===0)return g.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var y=h.redSqr(),_=y.redMul(h),I=t.redMul(y),P=g.redSqr().redIAdd(_).redISub(I).redISub(I),q=g.redMul(I.redISub(P)).redISub(s.redMul(_)),O=this.z.redMul(h);return this.curve.jpoint(P,q,O)},_r.prototype.dblp=function(r){if(r===0)return this;if(this.isInfinity())return this;if(!r)return this.dbl();var e;if(this.curve.zeroA||this.curve.threeA){var t=this;for(e=0;e<r;e++)t=t.dbl();return t}var i=this.curve.a,s=this.curve.tinv,o=this.x,h=this.y,g=this.z,y=g.redSqr().redSqr(),_=h.redAdd(h);for(e=0;e<r;e++){var I=o.redSqr(),P=_.redSqr(),q=P.redSqr(),O=I.redAdd(I).redIAdd(I).redIAdd(i.redMul(y)),L=o.redMul(P),j=O.redSqr().redISub(L.redAdd(L)),G=L.redISub(j),Q=O.redMul(G);Q=Q.redIAdd(Q).redISub(q);var Z=_.redMul(g);e+1<r&&(y=y.redMul(q)),o=j,g=Z,_=Q}return this.curve.jpoint(o,_.redMul(s),g)},_r.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},_r.prototype._zeroDbl=function(){var r,e,t;if(this.zOne){var i=this.x.redSqr(),s=this.y.redSqr(),o=s.redSqr(),h=this.x.redAdd(s).redSqr().redISub(i).redISub(o);h=h.redIAdd(h);var g=i.redAdd(i).redIAdd(i),y=g.redSqr().redISub(h).redISub(h),_=o.redIAdd(o);_=_.redIAdd(_),_=_.redIAdd(_),r=y,e=g.redMul(h.redISub(y)).redISub(_),t=this.y.redAdd(this.y)}else{var I=this.x.redSqr(),P=this.y.redSqr(),q=P.redSqr(),O=this.x.redAdd(P).redSqr().redISub(I).redISub(q);O=O.redIAdd(O);var L=I.redAdd(I).redIAdd(I),j=L.redSqr(),G=q.redIAdd(q);G=G.redIAdd(G),G=G.redIAdd(G),r=j.redISub(O).redISub(O),e=L.redMul(O.redISub(r)).redISub(G),t=this.y.redMul(this.z),t=t.redIAdd(t)}return this.curve.jpoint(r,e,t)},_r.prototype._threeDbl=function(){var r,e,t;if(this.zOne){var i=this.x.redSqr(),s=this.y.redSqr(),o=s.redSqr(),h=this.x.redAdd(s).redSqr().redISub(i).redISub(o);h=h.redIAdd(h);var g=i.redAdd(i).redIAdd(i).redIAdd(this.curve.a),y=g.redSqr().redISub(h).redISub(h);r=y;var _=o.redIAdd(o);_=_.redIAdd(_),_=_.redIAdd(_),e=g.redMul(h.redISub(y)).redISub(_),t=this.y.redAdd(this.y)}else{var I=this.z.redSqr(),P=this.y.redSqr(),q=this.x.redMul(P),O=this.x.redSub(I).redMul(this.x.redAdd(I));O=O.redAdd(O).redIAdd(O);var L=q.redIAdd(q);L=L.redIAdd(L);var j=L.redAdd(L);r=O.redSqr().redISub(j),t=this.y.redAdd(this.z).redSqr().redISub(P).redISub(I);var G=P.redSqr();G=G.redIAdd(G),G=G.redIAdd(G),G=G.redIAdd(G),e=O.redMul(L.redISub(r)).redISub(G)}return this.curve.jpoint(r,e,t)},_r.prototype._dbl=function(){var r=this.curve.a,e=this.x,t=this.y,i=this.z,s=i.redSqr().redSqr(),o=e.redSqr(),h=t.redSqr(),g=o.redAdd(o).redIAdd(o).redIAdd(r.redMul(s)),y=e.redAdd(e);y=y.redIAdd(y);var _=y.redMul(h),I=g.redSqr().redISub(_.redAdd(_)),P=_.redISub(I),q=h.redSqr();q=q.redIAdd(q),q=q.redIAdd(q),q=q.redIAdd(q);var O=g.redMul(P).redISub(q),L=t.redAdd(t).redMul(i);return this.curve.jpoint(I,O,L)},_r.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var r=this.x.redSqr(),e=this.y.redSqr(),t=this.z.redSqr(),i=e.redSqr(),s=r.redAdd(r).redIAdd(r),o=s.redSqr(),h=this.x.redAdd(e).redSqr().redISub(r).redISub(i);h=h.redIAdd(h),h=h.redAdd(h).redIAdd(h),h=h.redISub(o);var g=h.redSqr(),y=i.redIAdd(i);y=y.redIAdd(y),y=y.redIAdd(y),y=y.redIAdd(y);var _=s.redIAdd(h).redSqr().redISub(o).redISub(g).redISub(y),I=e.redMul(_);I=I.redIAdd(I),I=I.redIAdd(I);var P=this.x.redMul(g).redISub(I);P=P.redIAdd(P),P=P.redIAdd(P);var q=this.y.redMul(_.redMul(y.redISub(_)).redISub(h.redMul(g)));q=q.redIAdd(q),q=q.redIAdd(q),q=q.redIAdd(q);var O=this.z.redAdd(h).redSqr().redISub(t).redISub(g);return this.curve.jpoint(P,q,O)},_r.prototype.mul=function(r,e){return r=new vt(r,e),this.curve._wnafMul(this,r)},_r.prototype.eq=function(r){if(r.type==="affine")return this.eq(r.toJ());if(this===r)return!0;var e=this.z.redSqr(),t=r.z.redSqr();if(this.x.redMul(t).redISub(r.x.redMul(e)).cmpn(0)!==0)return!1;var i=e.redMul(this.z),s=t.redMul(r.z);return this.y.redMul(s).redISub(r.y.redMul(i)).cmpn(0)===0},_r.prototype.eqXToP=function(r){var e=this.z.redSqr(),t=r.toRed(this.curve.red).redMul(e);if(this.x.cmp(t)===0)return!0;for(var i=r.clone(),s=this.curve.redN.redMul(e);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(t.redIAdd(s),this.x.cmp(t)===0)return!0}},_r.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},_r.prototype.isInfinity=function(){return this.z.cmpn(0)===0};var Hc=Sa(function(r,e){var t=e;t.base=Ls,t.short=D4,t.mont=null,t.edwards=null}),Kc=Sa(function(r,e){var t=e,i=li.assert;function s(g){g.type==="short"?this.curve=new Hc.short(g):g.type==="edwards"?this.curve=new Hc.edwards(g):this.curve=new Hc.mont(g),this.g=this.curve.g,this.n=this.curve.n,this.hash=g.hash,i(this.g.validate(),"Invalid curve"),i(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}t.PresetCurve=s;function o(g,y){Object.defineProperty(t,g,{configurable:!0,enumerable:!0,get:function(){var _=new s(y);return Object.defineProperty(t,g,{configurable:!0,enumerable:!0,value:_}),_}})}o("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:pn.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),o("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:pn.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),o("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:pn.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),o("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:pn.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),o("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:pn.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),o("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:pn.sha256,gRed:!1,g:["9"]}),o("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:pn.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var h;try{h=null.crash()}catch{h=void 0}o("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:pn.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",h]})});function cs(r){if(!(this instanceof cs))return new cs(r);this.hash=r.hash,this.predResist=!!r.predResist,this.outLen=this.hash.outSize,this.minEntropy=r.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=rn.toArray(r.entropy,r.entropyEnc||"hex"),t=rn.toArray(r.nonce,r.nonceEnc||"hex"),i=rn.toArray(r.pers,r.persEnc||"hex");Gu(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,t,i)}var J0=cs;cs.prototype._init=function(r,e,t){var i=r.concat(e).concat(t);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var s=0;s<this.V.length;s++)this.K[s]=0,this.V[s]=1;this._update(i),this._reseed=1,this.reseedInterval=281474976710656},cs.prototype._hmac=function(){return new pn.hmac(this.hash,this.K)},cs.prototype._update=function(r){var e=this._hmac().update(this.V).update([0]);r&&(e=e.update(r)),this.K=e.digest(),this.V=this._hmac().update(this.V).digest(),r&&(this.K=this._hmac().update(this.V).update([1]).update(r).digest(),this.V=this._hmac().update(this.V).digest())},cs.prototype.reseed=function(r,e,t,i){typeof e!="string"&&(i=t,t=e,e=null),r=rn.toArray(r,e),t=rn.toArray(t,i),Gu(r.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(r.concat(t||[])),this._reseed=1},cs.prototype.generate=function(r,e,t,i){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof e!="string"&&(i=t,t=e,e=null),t&&(t=rn.toArray(t,i||"hex"),this._update(t));for(var s=[];s.length<r;)this.V=this._hmac().update(this.V).digest(),s=s.concat(this.V);var o=s.slice(0,r);return this._update(t),this._reseed++,rn.encode(o,e)};var tu=li.assert;function Tr(r,e){this.ec=r,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}var ru=Tr;Tr.fromPublic=function(r,e,t){return e instanceof Tr?e:new Tr(r,{pub:e,pubEnc:t})},Tr.fromPrivate=function(r,e,t){return e instanceof Tr?e:new Tr(r,{priv:e,privEnc:t})},Tr.prototype.validate=function(){var r=this.getPublic();return r.isInfinity()?{result:!1,reason:"Invalid public key"}:r.validate()?r.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},Tr.prototype.getPublic=function(r,e){return typeof r=="string"&&(e=r,r=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),e?this.pub.encode(e,r):this.pub},Tr.prototype.getPrivate=function(r){return r==="hex"?this.priv.toString(16,2):this.priv},Tr.prototype._importPrivate=function(r,e){this.priv=new vt(r,e||16),this.priv=this.priv.umod(this.ec.curve.n)},Tr.prototype._importPublic=function(r,e){if(r.x||r.y){this.ec.curve.type==="mont"?tu(r.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&tu(r.x&&r.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(r.x,r.y);return}this.pub=this.ec.curve.decodePoint(r,e)},Tr.prototype.derive=function(r){return r.validate()||tu(r.validate(),"public point not validated"),r.mul(this.priv).getX()},Tr.prototype.sign=function(r,e,t){return this.ec.sign(r,this,e,t)},Tr.prototype.verify=function(r,e){return this.ec.verify(r,e,this)},Tr.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var k4=li.assert;function If(r,e){if(r instanceof If)return r;this._importDER(r,e)||(k4(r.r&&r.s,"Signature without r or s"),this.r=new vt(r.r,16),this.s=new vt(r.s,16),r.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=r.recoveryParam)}var Bc=If;function B4(){this.place=0}function iu(r,e){var t=r[e.place++];if(!(t&128))return t;var i=t&15;if(i===0||i>4)return!1;for(var s=0,o=0,h=e.place;o<i;o++,h++)s<<=8,s|=r[h],s>>>=0;return s<=127?!1:(e.place=h,s)}function Q0(r){for(var e=0,t=r.length-1;!r[e]&&!(r[e+1]&128)&&e<t;)e++;return e===0?r:r.slice(e)}If.prototype._importDER=function(r,e){r=li.toArray(r,e);var t=new B4;if(r[t.place++]!==48)return!1;var i=iu(r,t);if(i===!1||i+t.place!==r.length||r[t.place++]!==2)return!1;var s=iu(r,t);if(s===!1)return!1;var o=r.slice(t.place,s+t.place);if(t.place+=s,r[t.place++]!==2)return!1;var h=iu(r,t);if(h===!1||r.length!==h+t.place)return!1;var g=r.slice(t.place,h+t.place);if(o[0]===0)if(o[1]&128)o=o.slice(1);else return!1;if(g[0]===0)if(g[1]&128)g=g.slice(1);else return!1;return this.r=new vt(o),this.s=new vt(g),this.recoveryParam=null,!0};function nu(r,e){if(e<128){r.push(e);return}var t=1+(Math.log(e)/Math.LN2>>>3);for(r.push(t|128);--t;)r.push(e>>>(t<<3)&255);r.push(e)}If.prototype.toDER=function(r){var e=this.r.toArray(),t=this.s.toArray();for(e[0]&128&&(e=[0].concat(e)),t[0]&128&&(t=[0].concat(t)),e=Q0(e),t=Q0(t);!t[0]&&!(t[1]&128);)t=t.slice(1);var i=[2];nu(i,e.length),i=i.concat(e),i.push(2),nu(i,t.length);var s=i.concat(t),o=[48];return nu(o,s.length),o=o.concat(s),li.encode(o,r)};var L4=function(){throw new Error("unsupported")},cg=li.assert;function Ci(r){if(!(this instanceof Ci))return new Ci(r);typeof r=="string"&&(cg(Object.prototype.hasOwnProperty.call(Kc,r),"Unknown curve "+r),r=Kc[r]),r instanceof Kc.PresetCurve&&(r={curve:r}),this.curve=r.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=r.curve.g,this.g.precompute(r.curve.n.bitLength()+1),this.hash=r.hash||r.curve.hash}var z4=Ci;Ci.prototype.keyPair=function(r){return new ru(this,r)},Ci.prototype.keyFromPrivate=function(r,e){return ru.fromPrivate(this,r,e)},Ci.prototype.keyFromPublic=function(r,e){return ru.fromPublic(this,r,e)},Ci.prototype.genKeyPair=function(r){r||(r={});for(var e=new J0({hash:this.hash,pers:r.pers,persEnc:r.persEnc||"utf8",entropy:r.entropy||L4(this.hash.hmacStrength),entropyEnc:r.entropy&&r.entropyEnc||"utf8",nonce:this.n.toArray()}),t=this.n.byteLength(),i=this.n.sub(new vt(2));;){var s=new vt(e.generate(t));if(!(s.cmp(i)>0))return s.iaddn(1),this.keyFromPrivate(s)}},Ci.prototype._truncateToN=function(r,e){var t=r.byteLength()*8-this.n.bitLength();return t>0&&(r=r.ushrn(t)),!e&&r.cmp(this.n)>=0?r.sub(this.n):r},Ci.prototype.sign=function(r,e,t,i){typeof t=="object"&&(i=t,t=null),i||(i={}),e=this.keyFromPrivate(e,t),r=this._truncateToN(new vt(r,16));for(var s=this.n.byteLength(),o=e.getPrivate().toArray("be",s),h=r.toArray("be",s),g=new J0({hash:this.hash,entropy:o,nonce:h,pers:i.pers,persEnc:i.persEnc||"utf8"}),y=this.n.sub(new vt(1)),_=0;;_++){var I=i.k?i.k(_):new vt(g.generate(this.n.byteLength()));if(I=this._truncateToN(I,!0),!(I.cmpn(1)<=0||I.cmp(y)>=0)){var P=this.g.mul(I);if(!P.isInfinity()){var q=P.getX(),O=q.umod(this.n);if(O.cmpn(0)!==0){var L=I.invm(this.n).mul(O.mul(e.getPrivate()).iadd(r));if(L=L.umod(this.n),L.cmpn(0)!==0){var j=(P.getY().isOdd()?1:0)|(q.cmp(O)!==0?2:0);return i.canonical&&L.cmp(this.nh)>0&&(L=this.n.sub(L),j^=1),new Bc({r:O,s:L,recoveryParam:j})}}}}}},Ci.prototype.verify=function(r,e,t,i){r=this._truncateToN(new vt(r,16)),t=this.keyFromPublic(t,i),e=new Bc(e,"hex");var s=e.r,o=e.s;if(s.cmpn(1)<0||s.cmp(this.n)>=0||o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;var h=o.invm(this.n),g=h.mul(r).umod(this.n),y=h.mul(s).umod(this.n),_;return this.curve._maxwellTrick?(_=this.g.jmulAdd(g,t.getPublic(),y),_.isInfinity()?!1:_.eqXToP(s)):(_=this.g.mulAdd(g,t.getPublic(),y),_.isInfinity()?!1:_.getX().umod(this.n).cmp(s)===0)},Ci.prototype.recoverPubKey=function(r,e,t,i){cg((3&t)===t,"The recovery param is more than two bits"),e=new Bc(e,i);var s=this.n,o=new vt(r),h=e.r,g=e.s,y=t&1,_=t>>1;if(h.cmp(this.curve.p.umod(this.curve.n))>=0&&_)throw new Error("Unable to find sencond key candinate");_?h=this.curve.pointFromX(h.add(this.curve.n),y):h=this.curve.pointFromX(h,y);var I=e.r.invm(s),P=s.sub(o).mul(I).umod(s),q=g.mul(I).umod(s);return this.g.mulAdd(P,h,q)},Ci.prototype.getKeyRecoveryParam=function(r,e,t,i){if(e=new Bc(e,i),e.recoveryParam!==null)return e.recoveryParam;for(var s=0;s<4;s++){var o;try{o=this.recoverPubKey(r,e,s)}catch{continue}if(o.eq(t))return s}throw new Error("Unable to find valid recovery factor")};var $4=Sa(function(r,e){var t=e;t.version="6.5.4",t.utils=li,t.rand=function(){throw new Error("unsupported")},t.curve=Hc,t.curves=Kc,t.ec=z4,t.eddsa=null}),U4=$4.ec;const F4="signing-key/5.7.0",xu=new Ar(F4);let su=null;function as(){return su||(su=new U4("secp256k1")),su}class j4{constructor(e){Ya(this,"curve","secp256k1"),Ya(this,"privateKey",ei(e)),I5(this.privateKey)!==32&&xu.throwArgumentError("invalid private key","privateKey","[[ REDACTED ]]");const t=as().keyFromPrivate(Zt(this.privateKey));Ya(this,"publicKey","0x"+t.getPublic(!1,"hex")),Ya(this,"compressedPublicKey","0x"+t.getPublic(!0,"hex")),Ya(this,"_isSigningKey",!0)}_addPoint(e){const t=as().keyFromPublic(Zt(this.publicKey)),i=as().keyFromPublic(Zt(e));return"0x"+t.pub.add(i.pub).encodeCompressed("hex")}signDigest(e){const t=as().keyFromPrivate(Zt(this.privateKey)),i=Zt(e);i.length!==32&&xu.throwArgumentError("bad digest length","digest",e);const s=t.sign(i,{canonical:!0});return O1({recoveryParam:s.recoveryParam,r:yn("0x"+s.r.toString(16),32),s:yn("0x"+s.s.toString(16),32)})}computeSharedSecret(e){const t=as().keyFromPrivate(Zt(this.privateKey)),i=as().keyFromPublic(Zt(fg(e)));return yn("0x"+t.derive(i.getPublic()).toString(16),32)}static isSigningKey(e){return!!(e&&e._isSigningKey)}}function H4(r,e){const t=O1(e),i={r:Zt(t.r),s:Zt(t.s)};return"0x"+as().recoverPubKey(Zt(r),i,t.recoveryParam).encode("hex",!1)}function fg(r,e){const t=Zt(r);return t.length===32?new j4(t).publicKey:t.length===33?"0x"+as().keyFromPublic(t).getPublic(!1,"hex"):t.length===65?ei(t):xu.throwArgumentError("invalid public or private key","key","[REDACTED]")}var Y0;(function(r){r[r.legacy=0]="legacy",r[r.eip2930=1]="eip2930",r[r.eip1559=2]="eip1559"})(Y0||(Y0={}));function K4(r){const e=fg(r);return r8(D0(Hu(D0(e,1)),12))}function V4(r,e){return K4(H4(Zt(r),e))}const G4="https://rpc.walletconnect.com/v1";async function J4(r,e,t,i,s,o){switch(t.t){case"eip191":return Q4(r,e,t.s);case"eip1271":return await Y4(r,e,t.s,i,s,o);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${t.t}`)}}function Q4(r,e,t){return V4(F1(e),t).toLowerCase()===r.toLowerCase()}async function Y4(r,e,t,i,s,o){try{const h="0x1626ba7e",g="0000000000000000000000000000000000000000000000000000000000000040",y="0000000000000000000000000000000000000000000000000000000000000041",_=t.substring(2),I=F1(e).substring(2),P=h+I+g+y+_,q=await fetch(`${o||G4}/?chainId=${i}&projectId=${s}`,{method:"POST",body:JSON.stringify({id:W4(),jsonrpc:"2.0",method:"eth_call",params:[{to:r,data:P},"latest"]})}),{result:O}=await q.json();return O?O.slice(0,h.length).toLowerCase()===h.toLowerCase():!1}catch(h){return console.error("isValidEip1271Signature: ",h),!1}}function W4(){return Date.now()+Math.floor(Math.random()*1e3)}var X4=Object.defineProperty,Z4=Object.defineProperties,e7=Object.getOwnPropertyDescriptors,W0=Object.getOwnPropertySymbols,t7=Object.prototype.hasOwnProperty,r7=Object.prototype.propertyIsEnumerable,X0=(r,e,t)=>e in r?X4(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,i7=(r,e)=>{for(var t in e||(e={}))t7.call(e,t)&&X0(r,t,e[t]);if(W0)for(var t of W0(e))r7.call(e,t)&&X0(r,t,e[t]);return r},n7=(r,e)=>Z4(r,e7(e));const s7="did:pkh:",Qu=r=>r==null?void 0:r.split(":"),hg=r=>{const e=r&&Qu(r);if(e)return r.includes(s7)?e[3]:e[1]},Z0=r=>{const e=r&&Qu(r);if(e)return e[2]+":"+e[3]},cf=r=>{const e=r&&Qu(r);if(e)return e.pop()};async function ep(r){const{cacao:e,projectId:t}=r,{s:i,p:s}=e,o=ug(s,s.iss),h=cf(s.iss);return await J4(h,o,i,hg(s.iss),t)}const ug=(r,e)=>{const t=`${r.domain} wants you to sign in with your Ethereum account:`,i=cf(e);if(!r.aud&&!r.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let s=r.statement||void 0;const o=`URI: ${r.aud||r.uri}`,h=`Version: ${r.version}`,g=`Chain ID: ${hg(e)}`,y=`Nonce: ${r.nonce}`,_=`Issued At: ${r.iat}`,I=r.exp?`Expiration Time: ${r.exp}`:void 0,P=r.nbf?`Not Before: ${r.nbf}`:void 0,q=r.requestId?`Request ID: ${r.requestId}`:void 0,O=r.resources?`Resources:${r.resources.map(j=>`
- ${j}`).join("")}`:void 0,L=Vc(r.resources);if(L){const j=wo(L);s=p7(s,j)}return[t,i,"",s,"",o,h,g,y,_,I,P,q,O].filter(j=>j!=null).join(`
`)};function a7(r){return Buffer.from(JSON.stringify(r)).toString("base64")}function o7(r){return JSON.parse(Buffer.from(r,"base64").toString("utf-8"))}function qs(r){if(!r)throw new Error("No recap provided, value is undefined");if(!r.att)throw new Error("No `att` property found");const e=Object.keys(r.att);if(!(e!=null&&e.length))throw new Error("No resources found in `att` property");e.forEach(t=>{const i=r.att[t];if(Array.isArray(i))throw new Error(`Resource must be an object: ${t}`);if(typeof i!="object")throw new Error(`Resource must be an object: ${t}`);if(!Object.keys(i).length)throw new Error(`Resource object is empty: ${t}`);Object.keys(i).forEach(s=>{const o=i[s];if(!Array.isArray(o))throw new Error(`Ability limits ${s} must be an array of objects, found: ${o}`);if(!o.length)throw new Error(`Value of ${s} is empty array, must be an array with objects`);o.forEach(h=>{if(typeof h!="object")throw new Error(`Ability limits (${s}) must be an array of objects, found: ${h}`)})})})}function c7(r,e,t,i={}){return t==null||t.sort((s,o)=>s.localeCompare(o)),{att:{[r]:f7(e,t,i)}}}function f7(r,e,t={}){e=e==null?void 0:e.sort((s,o)=>s.localeCompare(o));const i=e.map(s=>({[`${r}/${s}`]:[t]}));return Object.assign({},...i)}function dg(r){return qs(r),`urn:recap:${a7(r).replace(/=/g,"")}`}function wo(r){const e=o7(r.replace("urn:recap:",""));return qs(e),e}function h7(r,e,t){const i=c7(r,e,t);return dg(i)}function u7(r){return r&&r.includes("urn:recap:")}function d7(r,e){const t=wo(r),i=wo(e),s=l7(t,i);return dg(s)}function l7(r,e){qs(r),qs(e);const t=Object.keys(r.att).concat(Object.keys(e.att)).sort((s,o)=>s.localeCompare(o)),i={att:{}};return t.forEach(s=>{var o,h;Object.keys(((o=r.att)==null?void 0:o[s])||{}).concat(Object.keys(((h=e.att)==null?void 0:h[s])||{})).sort((g,y)=>g.localeCompare(y)).forEach(g=>{var y,_;i.att[s]=n7(i7({},i.att[s]),{[g]:((y=r.att[s])==null?void 0:y[g])||((_=e.att[s])==null?void 0:_[g])})})}),i}function p7(r="",e){qs(e);const t="I further authorize the stated URI to perform the following actions on my behalf: ";if(r.includes(t))return r;const i=[];let s=0;Object.keys(e.att).forEach(g=>{const y=Object.keys(e.att[g]).map(P=>({ability:P.split("/")[0],action:P.split("/")[1]}));y.sort((P,q)=>P.action.localeCompare(q.action));const _={};y.forEach(P=>{_[P.ability]||(_[P.ability]=[]),_[P.ability].push(P.action)});const I=Object.keys(_).map(P=>(s++,`(${s}) '${P}': '${_[P].join("', '")}' for '${g}'.`));i.push(I.join(", ").replace(".,","."))});const o=i.join(" "),h=`${t}${o}`;return`${r?r+" ":""}${h}`}function tp(r){var e;const t=wo(r);qs(t);const i=(e=t.att)==null?void 0:e.eip155;return i?Object.keys(i).map(s=>s.split("/")[1]):[]}function rp(r){const e=wo(r);qs(e);const t=[];return Object.values(e.att).forEach(i=>{Object.values(i).forEach(s=>{var o;(o=s==null?void 0:s[0])!=null&&o.chains&&t.push(s[0].chains)})}),[...new Set(t.flat())]}function Vc(r){if(!r)return;const e=r==null?void 0:r[r.length-1];return u7(e)?e:void 0}const lg="base10",Ur="base16",fs="base64pad",Za="base64url",Po="utf8",pg=0,Vn=1,Ro=2,g7=0,ip=1,po=12,Yu=32;function v7(){const r=s1.generateKeyPair();return{privateKey:ri(r.secretKey,Ur),publicKey:ri(r.publicKey,Ur)}}function Eu(){const r=ma.randomBytes(Yu);return ri(r,Ur)}function b7(r,e){const t=s1.sharedKey(Ti(r,Ur),Ti(e,Ur),!0),i=new By(gf.SHA256,t).expand(Yu);return ri(i,Ur)}function Gc(r){const e=gf.hash(Ti(r,Ur));return ri(e,Ur)}function Fn(r){const e=gf.hash(Ti(r,Po));return ri(e,Ur)}function gg(r){return Ti(`${r}`,lg)}function Ds(r){return Number(ri(r,lg))}function m7(r){const e=gg(typeof r.type<"u"?r.type:pg);if(Ds(e)===Vn&&typeof r.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const t=typeof r.senderPublicKey<"u"?Ti(r.senderPublicKey,Ur):void 0,i=typeof r.iv<"u"?Ti(r.iv,Ur):ma.randomBytes(po),s=new a1.ChaCha20Poly1305(Ti(r.symKey,Ur)).seal(i,Ti(r.message,Po));return vg({type:e,sealed:s,iv:i,senderPublicKey:t,encoding:r.encoding})}function y7(r,e){const t=gg(Ro),i=ma.randomBytes(po),s=Ti(r,Po);return vg({type:t,sealed:s,iv:i,encoding:e})}function w7(r){const e=new a1.ChaCha20Poly1305(Ti(r.symKey,Ur)),{sealed:t,iv:i}=_o({encoded:r.encoded,encoding:r==null?void 0:r.encoding}),s=e.open(i,t);if(s===null)throw new Error("Failed to decrypt");return ri(s,Po)}function _7(r,e){const{sealed:t}=_o({encoded:r,encoding:e});return ri(t,Po)}function vg(r){const{encoding:e=fs}=r;if(Ds(r.type)===Ro)return ri(zh([r.type,r.sealed]),e);if(Ds(r.type)===Vn){if(typeof r.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return ri(zh([r.type,r.senderPublicKey,r.iv,r.sealed]),e)}return ri(zh([r.type,r.iv,r.sealed]),e)}function _o(r){const{encoded:e,encoding:t=fs}=r,i=Ti(e,t),s=i.slice(g7,ip),o=ip;if(Ds(s)===Vn){const _=o+Yu,I=_+po,P=i.slice(o,_),q=i.slice(_,I),O=i.slice(I);return{type:s,sealed:O,iv:q,senderPublicKey:P}}if(Ds(s)===Ro){const _=i.slice(o),I=ma.randomBytes(po);return{type:s,sealed:_,iv:I}}const h=o+po,g=i.slice(o,h),y=i.slice(h);return{type:s,sealed:y,iv:g}}function A7(r,e){const t=_o({encoded:r,encoding:e==null?void 0:e.encoding});return bg({type:Ds(t.type),senderPublicKey:typeof t.senderPublicKey<"u"?ri(t.senderPublicKey,Ur):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function bg(r){const e=(r==null?void 0:r.type)||pg;if(e===Vn){if(typeof(r==null?void 0:r.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(r==null?void 0:r.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:r==null?void 0:r.senderPublicKey,receiverPublicKey:r==null?void 0:r.receiverPublicKey}}function np(r){return r.type===Vn&&typeof r.senderPublicKey=="string"&&typeof r.receiverPublicKey=="string"}function sp(r){return r.type===Ro}function M7(r){return new b1.ec("p256").keyFromPublic({x:Buffer.from(r.x,"base64").toString("hex"),y:Buffer.from(r.y,"base64").toString("hex")},"hex")}function x7(r){let e=r.replace(/-/g,"+").replace(/_/g,"/");const t=e.length%4;return t>0&&(e+="=".repeat(4-t)),e}function E7(r){return Buffer.from(x7(r),"base64")}function I7(r,e){const[t,i,s]=r.split("."),o=E7(s);if(o.length!==64)throw new Error("Invalid signature length");const h=o.slice(0,32).toString("hex"),g=o.slice(32,64).toString("hex"),y=`${t}.${i}`,_=new gf.SHA256().update(Buffer.from(y)).digest(),I=M7(e),P=Buffer.from(_).toString("hex");if(!I.verify(P,{r:h,s:g}))throw new Error("Invalid signature");return bu(r).payload}const S7="irn";function Iu(r){return(r==null?void 0:r.relay)||{protocol:S7}}function co(r){const e=Zw[r];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${r}`);return e}var P7=Object.defineProperty,R7=Object.defineProperties,C7=Object.getOwnPropertyDescriptors,ap=Object.getOwnPropertySymbols,N7=Object.prototype.hasOwnProperty,T7=Object.prototype.propertyIsEnumerable,op=(r,e,t)=>e in r?P7(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,cp=(r,e)=>{for(var t in e||(e={}))N7.call(e,t)&&op(r,t,e[t]);if(ap)for(var t of ap(e))T7.call(e,t)&&op(r,t,e[t]);return r},O7=(r,e)=>R7(r,C7(e));function q7(r,e="-"){const t={},i="relay"+e;return Object.keys(r).forEach(s=>{if(s.startsWith(i)){const o=s.replace(i,""),h=r[s];t[o]=h}}),t}function fp(r){r=r.includes("wc://")?r.replace("wc://",""):r,r=r.includes("wc:")?r.replace("wc:",""):r;const e=r.indexOf(":"),t=r.indexOf("?")!==-1?r.indexOf("?"):void 0,i=r.substring(0,e),s=r.substring(e+1,t).split("@"),o=typeof t<"u"?r.substring(t):"",h=Yc.parse(o),g=typeof h.methods=="string"?h.methods.split(","):void 0;return{protocol:i,topic:D7(s[0]),version:parseInt(s[1],10),symKey:h.symKey,relay:q7(h),methods:g,expiryTimestamp:h.expiryTimestamp?parseInt(h.expiryTimestamp,10):void 0}}function D7(r){return r.startsWith("//")?r.substring(2):r}function k7(r,e="-"){const t="relay",i={};return Object.keys(r).forEach(s=>{const o=t+e+s;r[s]&&(i[o]=r[s])}),i}function B7(r){return`${r.protocol}:${r.topic}@${r.version}?`+Yc.stringify(cp(O7(cp({symKey:r.symKey},k7(r.relay)),{expiryTimestamp:r.expiryTimestamp}),r.methods?{methods:r.methods.join(",")}:{}))}function Lc(r,e,t){return`${r}?wc_ev=${t}&topic=${e}`}function Pa(r){const e=[];return r.forEach(t=>{const[i,s]=t.split(":");e.push(`${i}:${s}`)}),e}function L7(r){const e=[];return Object.values(r).forEach(t=>{e.push(...Pa(t.accounts))}),e}function z7(r,e){const t=[];return Object.values(r).forEach(i=>{Pa(i.accounts).includes(e)&&t.push(...i.methods)}),t}function $7(r,e){const t=[];return Object.values(r).forEach(i=>{Pa(i.accounts).includes(e)&&t.push(...i.events)}),t}function Wu(r){return r.includes(":")}function fo(r){return Wu(r)?r.split(":")[0]:r}function U7(r){const e={};return r==null||r.forEach(t=>{const[i,s]=t.split(":");e[i]||(e[i]={accounts:[],chains:[],events:[]}),e[i].accounts.push(t),e[i].chains.push(`${i}:${s}`)}),e}function hp(r,e){e=e.map(i=>i.replace("did:pkh:",""));const t=U7(e);for(const[i,s]of Object.entries(t))s.methods?s.methods=Fc(s.methods,r):s.methods=r,s.events=["chainChanged","accountsChanged"];return t}const F7={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},j7={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function pe(r,e){const{message:t,code:i}=j7[r];return{message:e?`${t} ${e}`:t,code:i}}function Bt(r,e){const{message:t,code:i}=F7[r];return{message:e?`${t} ${e}`:t,code:i}}function Mn(r,e){return!!Array.isArray(r)}function Ao(r){return Object.getPrototypeOf(r)===Object.prototype&&Object.keys(r).length}function ti(r){return typeof r>"u"}function sr(r,e){return e&&ti(r)?!0:typeof r=="string"&&!!r.trim().length}function Xu(r,e){return typeof r=="number"&&!isNaN(r)}function H7(r,e){const{requiredNamespaces:t}=e,i=Object.keys(r.namespaces),s=Object.keys(t);let o=!0;return Ns(s,i)?(i.forEach(h=>{const{accounts:g,methods:y,events:_}=r.namespaces[h],I=Pa(g),P=t[h];(!Ns(E1(h,P),I)||!Ns(P.methods,y)||!Ns(P.events,_))&&(o=!1)}),o):!1}function ff(r){return sr(r,!1)&&r.includes(":")?r.split(":").length===2:!1}function K7(r){if(sr(r,!1)&&r.includes(":")){const e=r.split(":");if(e.length===3){const t=e[0]+":"+e[1];return!!e[2]&&ff(t)}}return!1}function V7(r){if(sr(r,!1))try{return typeof new URL(r)<"u"}catch{return!1}return!1}function G7(r){var e;return(e=r==null?void 0:r.proposer)==null?void 0:e.publicKey}function J7(r){return r==null?void 0:r.topic}function Q7(r,e){let t=null;return sr(r==null?void 0:r.publicKey,!1)||(t=pe("MISSING_OR_INVALID",`${e} controller public key should be a string`)),t}function up(r){let e=!0;return Mn(r)?r.length&&(e=r.every(t=>sr(t,!1))):e=!1,e}function Y7(r,e,t){let i=null;return Mn(e)&&e.length?e.forEach(s=>{i||ff(s)||(i=Bt("UNSUPPORTED_CHAINS",`${t}, chain ${s} should be a string and conform to "namespace:chainId" format`))}):ff(r)||(i=Bt("UNSUPPORTED_CHAINS",`${t}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),i}function W7(r,e,t){let i=null;return Object.entries(r).forEach(([s,o])=>{if(i)return;const h=Y7(s,E1(s,o),`${e} ${t}`);h&&(i=h)}),i}function X7(r,e){let t=null;return Mn(r)?r.forEach(i=>{t||K7(i)||(t=Bt("UNSUPPORTED_ACCOUNTS",`${e}, account ${i} should be a string and conform to "namespace:chainId:address" format`))}):t=Bt("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),t}function Z7(r,e){let t=null;return Object.values(r).forEach(i=>{if(t)return;const s=X7(i==null?void 0:i.accounts,`${e} namespace`);s&&(t=s)}),t}function e9(r,e){let t=null;return up(r==null?void 0:r.methods)?up(r==null?void 0:r.events)||(t=Bt("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):t=Bt("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),t}function mg(r,e){let t=null;return Object.values(r).forEach(i=>{if(t)return;const s=e9(i,`${e}, namespace`);s&&(t=s)}),t}function t9(r,e,t){let i=null;if(r&&Ao(r)){const s=mg(r,e);s&&(i=s);const o=W7(r,e,t);o&&(i=o)}else i=pe("MISSING_OR_INVALID",`${e}, ${t} should be an object with data`);return i}function au(r,e){let t=null;if(r&&Ao(r)){const i=mg(r,e);i&&(t=i);const s=Z7(r,e);s&&(t=s)}else t=pe("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return t}function yg(r){return sr(r.protocol,!0)}function r9(r,e){let t=!1;return r?r&&Mn(r)&&r.length&&r.forEach(i=>{t=yg(i)}):t=!0,t}function i9(r){return typeof r=="number"}function Zr(r){return typeof r<"u"&&typeof r!==null}function n9(r){return!(!r||typeof r!="object"||!r.code||!Xu(r.code)||!r.message||!sr(r.message,!1))}function s9(r){return!(ti(r)||!sr(r.method,!1))}function a9(r){return!(ti(r)||ti(r.result)&&ti(r.error)||!Xu(r.id)||!sr(r.jsonrpc,!1))}function o9(r){return!(ti(r)||!sr(r.name,!1))}function dp(r,e){return!(!ff(e)||!L7(r).includes(e))}function c9(r,e,t){return sr(t,!1)?z7(r,e).includes(t):!1}function f9(r,e,t){return sr(t,!1)?$7(r,e).includes(t):!1}function lp(r,e,t){let i=null;const s=h9(r),o=u9(e),h=Object.keys(s),g=Object.keys(o),y=pp(Object.keys(r)),_=pp(Object.keys(e)),I=y.filter(P=>!_.includes(P));return I.length&&(i=pe("NON_CONFORMING_NAMESPACES",`${t} namespaces keys don't satisfy requiredNamespaces.
      Required: ${I.toString()}
      Received: ${Object.keys(e).toString()}`)),Ns(h,g)||(i=pe("NON_CONFORMING_NAMESPACES",`${t} namespaces chains don't satisfy required namespaces.
      Required: ${h.toString()}
      Approved: ${g.toString()}`)),Object.keys(e).forEach(P=>{if(!P.includes(":")||i)return;const q=Pa(e[P].accounts);q.includes(P)||(i=pe("NON_CONFORMING_NAMESPACES",`${t} namespaces accounts don't satisfy namespace accounts for ${P}
        Required: ${P}
        Approved: ${q.toString()}`))}),h.forEach(P=>{i||(Ns(s[P].methods,o[P].methods)?Ns(s[P].events,o[P].events)||(i=pe("NON_CONFORMING_NAMESPACES",`${t} namespaces events don't satisfy namespace events for ${P}`)):i=pe("NON_CONFORMING_NAMESPACES",`${t} namespaces methods don't satisfy namespace methods for ${P}`))}),i}function h9(r){const e={};return Object.keys(r).forEach(t=>{var i;t.includes(":")?e[t]=r[t]:(i=r[t].chains)==null||i.forEach(s=>{e[s]={methods:r[t].methods,events:r[t].events}})}),e}function pp(r){return[...new Set(r.map(e=>e.includes(":")?e.split(":")[0]:e))]}function u9(r){const e={};return Object.keys(r).forEach(t=>{if(t.includes(":"))e[t]=r[t];else{const i=Pa(r[t].accounts);i==null||i.forEach(s=>{e[s]={accounts:r[t].accounts.filter(o=>o.includes(`${s}:`)),methods:r[t].methods,events:r[t].events}})}}),e}function d9(r,e){return Xu(r)&&r<=e.max&&r>=e.min}function gp(){const r=Io();return new Promise(e=>{switch(r){case ui.browser:e(l9());break;case ui.reactNative:e(p9());break;case ui.node:e(g9());break;default:e(!0)}})}function l9(){return Eo()&&(navigator==null?void 0:navigator.onLine)}async function p9(){if(Ma()&&typeof global<"u"&&global!=null&&global.NetInfo){const r=await(global==null?void 0:global.NetInfo.fetch());return r==null?void 0:r.isConnected}return!0}function g9(){return!0}function v9(r){switch(Io()){case ui.browser:b9(r);break;case ui.reactNative:m9(r);break}}function b9(r){!Ma()&&Eo()&&(window.addEventListener("online",()=>r(!0)),window.addEventListener("offline",()=>r(!1)))}function m9(r){Ma()&&typeof global<"u"&&global!=null&&global.NetInfo&&(global==null||global.NetInfo.addEventListener(e=>r(e==null?void 0:e.isConnected)))}const ou={};class eo{static get(e){return ou[e]}static set(e,t){ou[e]=t}static delete(e){delete ou[e]}}let y9=class extends ks{constructor(e){super()}};const vp=be.FIVE_SECONDS,Ra={pulse:"heartbeat_pulse"};class Zu extends y9{constructor(e){super(e),this.events=new qi.EventEmitter,this.interval=vp,this.interval=(e==null?void 0:e.interval)||vp}static async init(e){const t=new Zu(e);return await t.init(),t}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),be.toMiliseconds(this.interval))}pulse(){this.events.emit(Ra.pulse)}}class w9 extends ks{constructor(e){super(),this.opts=e,this.protocol="wc",this.version=2}}class _9 extends ks{constructor(e,t){super(),this.core=e,this.logger=t,this.records=new Map}}class A9{constructor(e,t){this.logger=e,this.core=t}}let M9=class extends ks{constructor(e,t){super(),this.relayer=e,this.logger=t}},x9=class extends ks{constructor(e){super()}},E9=class{constructor(e,t,i,s){this.core=e,this.logger=t,this.name=i}};class I9 extends ks{constructor(e,t){super(),this.relayer=e,this.logger=t}}let S9=class extends ks{constructor(e,t){super(),this.core=e,this.logger=t}},P9=class{constructor(e,t,i){this.core=e,this.logger=t,this.store=i}},R9=class{constructor(e,t){this.projectId=e,this.logger=t}},C9=class{constructor(e,t,i){this.core=e,this.logger=t,this.telemetryEnabled=i}};class N9{constructor(e){this.opts=e,this.protocol="wc",this.version=2}}let T9=class{constructor(e){this.client=e}};class sn extends Ty{constructor(e){super(e),this.events=new qi.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async request(e,t){return this.requestStrict(Rs(e.method,e.params||[],e.id||Cs().toString()),t)}async requestStrict(e,t){return new Promise(async(i,s)=>{if(!this.connection.connected)try{await this.open()}catch(o){s(o)}this.events.on(`${e.id}`,o=>{Zi(o)?s(o.error):i(o.result)});try{await this.connection.send(e,t)}catch(o){s(o)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),df(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}}var O9={};function q9(r,e){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),i=0;i<t.length;i++)t[i]=255;for(var s=0;s<r.length;s++){var o=r.charAt(s),h=o.charCodeAt(0);if(t[h]!==255)throw new TypeError(o+" is ambiguous");t[h]=s}var g=r.length,y=r.charAt(0),_=Math.log(g)/Math.log(256),I=Math.log(256)/Math.log(g);function P(L){if(L instanceof Uint8Array||(ArrayBuffer.isView(L)?L=new Uint8Array(L.buffer,L.byteOffset,L.byteLength):Array.isArray(L)&&(L=Uint8Array.from(L))),!(L instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(L.length===0)return"";for(var j=0,G=0,Q=0,Z=L.length;Q!==Z&&L[Q]===0;)Q++,j++;for(var de=(Z-Q)*I+1>>>0,ce=new Uint8Array(de);Q!==Z;){for(var ae=L[Q],he=0,ue=de-1;(ae!==0||he<G)&&ue!==-1;ue--,he++)ae+=256*ce[ue]>>>0,ce[ue]=ae%g>>>0,ae=ae/g>>>0;if(ae!==0)throw new Error("Non-zero carry");G=he,Q++}for(var le=de-G;le!==de&&ce[le]===0;)le++;for(var Te=y.repeat(j);le<de;++le)Te+=r.charAt(ce[le]);return Te}function q(L){if(typeof L!="string")throw new TypeError("Expected String");if(L.length===0)return new Uint8Array;var j=0;if(L[j]!==" "){for(var G=0,Q=0;L[j]===y;)G++,j++;for(var Z=(L.length-j)*_+1>>>0,de=new Uint8Array(Z);L[j];){var ce=t[L.charCodeAt(j)];if(ce===255)return;for(var ae=0,he=Z-1;(ce!==0||ae<Q)&&he!==-1;he--,ae++)ce+=g*de[he]>>>0,de[he]=ce%256>>>0,ce=ce/256>>>0;if(ce!==0)throw new Error("Non-zero carry");Q=ae,j++}if(L[j]!==" "){for(var ue=Z-Q;ue!==Z&&de[ue]===0;)ue++;for(var le=new Uint8Array(G+(Z-ue)),Te=G;ue!==Z;)le[Te++]=de[ue++];return le}}}function O(L){var j=q(L);if(j)return j;throw new Error(`Non-${e} character`)}return{encode:P,decodeUnsafe:q,decode:O}}var D9=q9,k9=D9;const wg=r=>{if(r instanceof Uint8Array&&r.constructor.name==="Uint8Array")return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw new Error("Unknown type, must be binary type")},B9=r=>new TextEncoder().encode(r),L9=r=>new TextDecoder().decode(r);let z9=class{constructor(e,t,i){this.name=e,this.prefix=t,this.baseEncode=i}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},$9=class{constructor(e,t,i){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=i}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return _g(this,e)}},U9=class{constructor(e){this.decoders=e}or(e){return _g(this,e)}decode(e){const t=e[0],i=this.decoders[t];if(i)return i.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const _g=(r,e)=>new U9({...r.decoders||{[r.prefix]:r},...e.decoders||{[e.prefix]:e}});let F9=class{constructor(e,t,i,s){this.name=e,this.prefix=t,this.baseEncode=i,this.baseDecode=s,this.encoder=new z9(e,t,i),this.decoder=new $9(e,t,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const Sf=({name:r,prefix:e,encode:t,decode:i})=>new F9(r,e,t,i),Co=({prefix:r,name:e,alphabet:t})=>{const{encode:i,decode:s}=k9(t,e);return Sf({prefix:r,name:e,encode:i,decode:o=>wg(s(o))})},j9=(r,e,t,i)=>{const s={};for(let I=0;I<e.length;++I)s[e[I]]=I;let o=r.length;for(;r[o-1]==="=";)--o;const h=new Uint8Array(o*t/8|0);let g=0,y=0,_=0;for(let I=0;I<o;++I){const P=s[r[I]];if(P===void 0)throw new SyntaxError(`Non-${i} character`);y=y<<t|P,g+=t,g>=8&&(g-=8,h[_++]=255&y>>g)}if(g>=t||255&y<<8-g)throw new SyntaxError("Unexpected end of data");return h},H9=(r,e,t)=>{const i=e[e.length-1]==="=",s=(1<<t)-1;let o="",h=0,g=0;for(let y=0;y<r.length;++y)for(g=g<<8|r[y],h+=8;h>t;)h-=t,o+=e[s&g>>h];if(h&&(o+=e[s&g<<t-h]),i)for(;o.length*t&7;)o+="=";return o},xr=({name:r,prefix:e,bitsPerChar:t,alphabet:i})=>Sf({prefix:e,name:r,encode(s){return H9(s,i,t)},decode(s){return j9(s,i,t,r)}}),K9=Sf({prefix:"\0",name:"identity",encode:r=>L9(r),decode:r=>B9(r)});var V9=Object.freeze({__proto__:null,identity:K9});const G9=xr({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var J9=Object.freeze({__proto__:null,base2:G9});const Q9=xr({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Y9=Object.freeze({__proto__:null,base8:Q9});const W9=Co({prefix:"9",name:"base10",alphabet:"0123456789"});var X9=Object.freeze({__proto__:null,base10:W9});const Z9=xr({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),e_=xr({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var t_=Object.freeze({__proto__:null,base16:Z9,base16upper:e_});const r_=xr({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),i_=xr({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),n_=xr({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),s_=xr({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),a_=xr({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),o_=xr({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),c_=xr({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),f_=xr({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),h_=xr({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var u_=Object.freeze({__proto__:null,base32:r_,base32upper:i_,base32pad:n_,base32padupper:s_,base32hex:a_,base32hexupper:o_,base32hexpad:c_,base32hexpadupper:f_,base32z:h_});const d_=Co({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),l_=Co({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var p_=Object.freeze({__proto__:null,base36:d_,base36upper:l_});const g_=Co({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),v_=Co({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var b_=Object.freeze({__proto__:null,base58btc:g_,base58flickr:v_});const m_=xr({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),y_=xr({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),w_=xr({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),__=xr({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var A_=Object.freeze({__proto__:null,base64:m_,base64pad:y_,base64url:w_,base64urlpad:__});const Ag=Array.from(""),M_=Ag.reduce((r,e,t)=>(r[t]=e,r),[]),x_=Ag.reduce((r,e,t)=>(r[e.codePointAt(0)]=t,r),[]);function E_(r){return r.reduce((e,t)=>(e+=M_[t],e),"")}function I_(r){const e=[];for(const t of r){const i=x_[t.codePointAt(0)];if(i===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(i)}return new Uint8Array(e)}const S_=Sf({prefix:"",name:"base256emoji",encode:E_,decode:I_});var P_=Object.freeze({__proto__:null,base256emoji:S_}),R_=Mg,bp=128,C_=127,N_=~C_,T_=Math.pow(2,31);function Mg(r,e,t){e=e||[],t=t||0;for(var i=t;r>=T_;)e[t++]=r&255|bp,r/=128;for(;r&N_;)e[t++]=r&255|bp,r>>>=7;return e[t]=r|0,Mg.bytes=t-i+1,e}var O_=Su,q_=128,mp=127;function Su(r,i){var t=0,i=i||0,s=0,o=i,h,g=r.length;do{if(o>=g)throw Su.bytes=0,new RangeError("Could not decode varint");h=r[o++],t+=s<28?(h&mp)<<s:(h&mp)*Math.pow(2,s),s+=7}while(h>=q_);return Su.bytes=o-i,t}var D_=Math.pow(2,7),k_=Math.pow(2,14),B_=Math.pow(2,21),L_=Math.pow(2,28),z_=Math.pow(2,35),$_=Math.pow(2,42),U_=Math.pow(2,49),F_=Math.pow(2,56),j_=Math.pow(2,63),H_=function(r){return r<D_?1:r<k_?2:r<B_?3:r<L_?4:r<z_?5:r<$_?6:r<U_?7:r<F_?8:r<j_?9:10},K_={encode:R_,decode:O_,encodingLength:H_},xg=K_;const yp=(r,e,t=0)=>(xg.encode(r,e,t),e),wp=r=>xg.encodingLength(r),Pu=(r,e)=>{const t=e.byteLength,i=wp(r),s=i+wp(t),o=new Uint8Array(s+t);return yp(r,o,0),yp(t,o,i),o.set(e,s),new V_(r,t,e,o)};class V_{constructor(e,t,i,s){this.code=e,this.size=t,this.digest=i,this.bytes=s}}const Eg=({name:r,code:e,encode:t})=>new G_(r,e,t);class G_{constructor(e,t,i){this.name=e,this.code=t,this.encode=i}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?Pu(this.code,t):t.then(i=>Pu(this.code,i))}else throw Error("Unknown type, must be binary type")}}const Ig=r=>async e=>new Uint8Array(await crypto.subtle.digest(r,e)),J_=Eg({name:"sha2-256",code:18,encode:Ig("SHA-256")}),Q_=Eg({name:"sha2-512",code:19,encode:Ig("SHA-512")});var Y_=Object.freeze({__proto__:null,sha256:J_,sha512:Q_});const Sg=0,W_="identity",Pg=wg,X_=r=>Pu(Sg,Pg(r)),Z_={code:Sg,name:W_,encode:Pg,digest:X_};var eA=Object.freeze({__proto__:null,identity:Z_});new TextEncoder,new TextDecoder;const _p={...V9,...J9,...Y9,...X9,...t_,...u_,...p_,...b_,...A_,...P_};({...Y_,...eA});function tA(r=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(r):new Uint8Array(r)}function Rg(r,e,t,i){return{name:r,prefix:e,encoder:{name:r,prefix:e,encode:t},decoder:{decode:i}}}const Ap=Rg("utf8","u",r=>"u"+new TextDecoder("utf8").decode(r),r=>new TextEncoder().encode(r.substring(1))),cu=Rg("ascii","a",r=>{let e="a";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e},r=>{r=r.substring(1);const e=tA(r.length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e}),rA={utf8:Ap,"utf-8":Ap,hex:_p.base16,latin1:cu,ascii:cu,binary:cu,..._p};function iA(r,e="utf8"){const t=rA[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(r,"utf8"):t.decoder.decode(`${t.prefix}${r}`)}const Cg="wc",Ng=2,ed="core",xn=`${Cg}@2:${ed}:`,nA={name:ed,logger:"error"},sA={database:":memory:"},aA="crypto",Mp="client_ed25519_seed",oA=be.ONE_DAY,cA="keychain",fA="0.3",hA="messages",uA="0.3",dA=be.SIX_HOURS,lA="publisher",Tg="irn",pA="error",Og="wss://relay.walletconnect.org",gA="relayer",zr={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},vA="_subscription",Pi={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},bA=.1,qg="2.16.1",jt={link_mode:"link_mode",relay:"relay"},mA="0.3",yA="WALLETCONNECT_CLIENT_ID",xp="WALLETCONNECT_LINK_MODE_APPS",vn={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},wA="subscription",_A="0.3",AA=be.FIVE_SECONDS*1e3,MA="pairing",xA="0.3",to={wc_pairingDelete:{req:{ttl:be.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:be.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:be.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:be.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:be.ONE_DAY,prompt:!1,tag:0},res:{ttl:be.ONE_DAY,prompt:!1,tag:0}}},ua={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},Qi={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},EA="history",IA="0.3",SA="expirer",Ri={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},PA="0.3",RA="verify-api",CA="https://verify.walletconnect.com",Dg="https://verify.walletconnect.org",go=Dg,NA=`${go}/v3`,TA=[CA,Dg],OA="echo",qA="https://echo.walletconnect.com",ln={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"},$n={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},Yi={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success"},Is={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found"},Ss={authenticated_session_approve_started:"authenticated_session_approve_started",authenticated_session_not_expired:"authenticated_session_not_expired",chains_caip2_compliant:"chains_caip2_compliant",chains_evm_compliant:"chains_evm_compliant",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve",authenticated_session_approve_publish_success:"authenticated_session_approve_publish_success"},ro={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",missing_session_authenticate_request:"missing_session_authenticate_request",session_authenticate_request_expired:"session_authenticate_request_expired",chains_caip2_compliant_failure:"chains_caip2_compliant_failure",chains_evm_compliant_failure:"chains_evm_compliant_failure",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},DA=.1,kA="event-client",BA=86400,LA="https://pulse.walletconnect.com/batch";class zA{constructor(e,t){this.core=e,this.logger=t,this.keychain=new Map,this.name=cA,this.version=fA,this.initialized=!1,this.storagePrefix=xn,this.init=async()=>{if(!this.initialized){const i=await this.getKeyChain();typeof i<"u"&&(this.keychain=i),this.initialized=!0}},this.has=i=>(this.isInitialized(),this.keychain.has(i)),this.set=async(i,s)=>{this.isInitialized(),this.keychain.set(i,s),await this.persist()},this.get=i=>{this.isInitialized();const s=this.keychain.get(i);if(typeof s>"u"){const{message:o}=pe("NO_MATCHING_KEY",`${this.name}: ${i}`);throw new Error(o)}return s},this.del=async i=>{this.isInitialized(),this.keychain.delete(i),await this.persist()},this.core=e,this.logger=jr(t,this.name)}get context(){return pi(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,I1(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?S1(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=pe("NOT_INITIALIZED",this.name);throw new Error(e)}}}class $A{constructor(e,t,i){this.core=e,this.logger=t,this.name=aA,this.randomSessionIdentifier=Eu(),this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=s=>(this.isInitialized(),this.keychain.has(s)),this.getClientId=async()=>{this.isInitialized();const s=await this.getClientSeed(),o=f0(s);return l1(o.publicKey)},this.generateKeyPair=()=>{this.isInitialized();const s=v7();return this.setPrivateKey(s.publicKey,s.privateKey)},this.signJWT=async s=>{this.isInitialized();const o=await this.getClientSeed(),h=f0(o),g=this.randomSessionIdentifier;return await Wy(g,s,oA,h)},this.generateSharedKey=(s,o,h)=>{this.isInitialized();const g=this.getPrivateKey(s),y=b7(g,o);return this.setSymKey(y,h)},this.setSymKey=async(s,o)=>{this.isInitialized();const h=o||Gc(s);return await this.keychain.set(h,s),h},this.deleteKeyPair=async s=>{this.isInitialized(),await this.keychain.del(s)},this.deleteSymKey=async s=>{this.isInitialized(),await this.keychain.del(s)},this.encode=async(s,o,h)=>{this.isInitialized();const g=bg(h),y=bo(o);if(sp(g))return y7(y,h==null?void 0:h.encoding);if(np(g)){const q=g.senderPublicKey,O=g.receiverPublicKey;s=await this.generateSharedKey(q,O)}const _=this.getSymKey(s),{type:I,senderPublicKey:P}=g;return m7({type:I,symKey:_,message:y,senderPublicKey:P,encoding:h==null?void 0:h.encoding})},this.decode=async(s,o,h)=>{this.isInitialized();const g=A7(o,h);if(sp(g)){const y=_7(o,h==null?void 0:h.encoding);return vo(y)}if(np(g)){const y=g.receiverPublicKey,_=g.senderPublicKey;s=await this.generateSharedKey(y,_)}try{const y=this.getSymKey(s),_=w7({symKey:y,encoded:o,encoding:h==null?void 0:h.encoding});return vo(_)}catch(y){this.logger.error(`Failed to decode message from topic: '${s}', clientId: '${await this.getClientId()}'`),this.logger.error(y)}},this.getPayloadType=(s,o=fs)=>{const h=_o({encoded:s,encoding:o});return Ds(h.type)},this.getPayloadSenderPublicKey=(s,o=fs)=>{const h=_o({encoded:s,encoding:o});return h.senderPublicKey?ri(h.senderPublicKey,Ur):void 0},this.core=e,this.logger=jr(t,this.name),this.keychain=i||new zA(this.core,this.logger)}get context(){return pi(this.logger)}async setPrivateKey(e,t){return await this.keychain.set(e,t),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(Mp)}catch{e=Eu(),await this.keychain.set(Mp,e)}return iA(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=pe("NOT_INITIALIZED",this.name);throw new Error(e)}}}class UA extends A9{constructor(e,t){super(e,t),this.logger=e,this.core=t,this.messages=new Map,this.name=hA,this.version=uA,this.initialized=!1,this.storagePrefix=xn,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const i=await this.getRelayerMessages();typeof i<"u"&&(this.messages=i),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(i){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(i)}finally{this.initialized=!0}}},this.set=async(i,s)=>{this.isInitialized();const o=Fn(s);let h=this.messages.get(i);return typeof h>"u"&&(h={}),typeof h[o]<"u"||(h[o]=s,this.messages.set(i,h),await this.persist()),o},this.get=i=>{this.isInitialized();let s=this.messages.get(i);return typeof s>"u"&&(s={}),s},this.has=(i,s)=>{this.isInitialized();const o=this.get(i),h=Fn(s);return typeof o[h]<"u"},this.del=async i=>{this.isInitialized(),this.messages.delete(i),await this.persist()},this.logger=jr(e,this.name),this.core=t}get context(){return pi(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,I1(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?S1(e):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:e}=pe("NOT_INITIALIZED",this.name);throw new Error(e)}}}class FA extends M9{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,this.events=new qi.EventEmitter,this.name=lA,this.queue=new Map,this.publishTimeout=be.toMiliseconds(be.ONE_MINUTE),this.failedPublishTimeout=be.toMiliseconds(be.ONE_SECOND),this.needsTransportRestart=!1,this.publish=async(i,s,o)=>{var h;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:i,message:s,opts:o}});const g=(o==null?void 0:o.ttl)||dA,y=Iu(o),_=(o==null?void 0:o.prompt)||!1,I=(o==null?void 0:o.tag)||0,P=(o==null?void 0:o.id)||Cs().toString(),q={topic:i,message:s,opts:{ttl:g,relay:y,prompt:_,tag:I,id:P,attestation:o==null?void 0:o.attestation}},O=`Failed to publish payload, please try again. id:${P} tag:${I}`,L=Date.now();let j,G=1;try{for(;j===void 0;){if(Date.now()-L>this.publishTimeout)throw new Error(O);this.logger.trace({id:P,attempts:G},`publisher.publish - attempt ${G}`),j=await await da(this.rpcPublish(i,s,g,y,_,I,P,o==null?void 0:o.attestation).catch(Q=>this.logger.warn(Q)),this.publishTimeout,O),G++,j||await new Promise(Q=>setTimeout(Q,this.failedPublishTimeout))}this.relayer.events.emit(zr.publish,q),this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{id:P,topic:i,message:s,opts:o}})}catch(Q){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(Q),(h=o==null?void 0:o.internal)!=null&&h.throwOnFailedPublish)throw Q;this.queue.set(P,q)}},this.on=(i,s)=>{this.events.on(i,s)},this.once=(i,s)=>{this.events.once(i,s)},this.off=(i,s)=>{this.events.off(i,s)},this.removeListener=(i,s)=>{this.events.removeListener(i,s)},this.relayer=e,this.logger=jr(t,this.name),this.registerEventListeners()}get context(){return pi(this.logger)}rpcPublish(e,t,i,s,o,h,g,y){var _,I,P,q;const O={method:co(s.protocol).publish,params:{topic:e,message:t,ttl:i,prompt:o,tag:h,attestation:y},id:g};return ti((_=O.params)==null?void 0:_.prompt)&&((I=O.params)==null||delete I.prompt),ti((P=O.params)==null?void 0:P.tag)&&((q=O.params)==null||delete q.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:O}),this.relayer.request(O)}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async e=>{const{topic:t,message:i,opts:s}=e;await this.publish(t,i,s)})}registerEventListeners(){this.relayer.core.heartbeat.on(Ra.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(zr.connection_stalled);return}this.checkQueue()}),this.relayer.on(zr.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}class jA{constructor(){this.map=new Map,this.set=(e,t)=>{const i=this.get(e);this.exists(e,t)||this.map.set(e,[...i,t])},this.get=e=>this.map.get(e)||[],this.exists=(e,t)=>this.get(e).includes(t),this.delete=(e,t)=>{if(typeof t>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const i=this.get(e);if(!this.exists(e,t))return;const s=i.filter(o=>o!==t);if(!s.length){this.map.delete(e);return}this.map.set(e,s)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var HA=Object.defineProperty,KA=Object.defineProperties,VA=Object.getOwnPropertyDescriptors,Ep=Object.getOwnPropertySymbols,GA=Object.prototype.hasOwnProperty,JA=Object.prototype.propertyIsEnumerable,Ip=(r,e,t)=>e in r?HA(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,io=(r,e)=>{for(var t in e||(e={}))GA.call(e,t)&&Ip(r,t,e[t]);if(Ep)for(var t of Ep(e))JA.call(e,t)&&Ip(r,t,e[t]);return r},fu=(r,e)=>KA(r,VA(e));class QA extends I9{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,this.subscriptions=new Map,this.topicMap=new jA,this.events=new qi.EventEmitter,this.name=wA,this.version=_A,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=xn,this.subscribeTimeout=be.toMiliseconds(be.ONE_MINUTE),this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.pendingBatchMessages=[],this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),this.clientId=await this.relayer.core.crypto.getClientId(),await this.restore()),this.initialized=!0},this.subscribe=async(i,s)=>{this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:i,opts:s}});try{const o=Iu(s),h={topic:i,relay:o,transportType:s==null?void 0:s.transportType};this.pending.set(i,h);const g=await this.rpcSubscribe(i,o,s==null?void 0:s.transportType);return typeof g=="string"&&(this.onSubscribe(g,h),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:i,opts:s}})),g}catch(o){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(o),o}},this.unsubscribe=async(i,s)=>{await this.restartToComplete(),this.isInitialized(),typeof(s==null?void 0:s.id)<"u"?await this.unsubscribeById(i,s.id,s):await this.unsubscribeByTopic(i,s)},this.isSubscribed=async i=>{if(this.topics.includes(i))return!0;const s=`${this.pendingSubscriptionWatchLabel}_${i}`;return await new Promise((o,h)=>{const g=new be.Watch;g.start(s);const y=setInterval(()=>{!this.pending.has(i)&&this.topics.includes(i)&&(clearInterval(y),g.stop(s),o(!0)),g.elapsed(s)>=AA&&(clearInterval(y),g.stop(s),h(new Error("Subscription resolution timeout")))},this.pollingInterval)}).catch(()=>!1)},this.on=(i,s)=>{this.events.on(i,s)},this.once=(i,s)=>{this.events.once(i,s)},this.off=(i,s)=>{this.events.off(i,s)},this.removeListener=(i,s)=>{this.events.removeListener(i,s)},this.start=async()=>{await this.onConnect()},this.stop=async()=>{await this.onDisconnect()},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=e,this.logger=jr(t,this.name),this.clientId=""}get context(){return pi(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(e,t){let i=!1;try{i=this.getSubscription(e).topic===t}catch{}return i}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,t){const i=this.topicMap.get(e);await Promise.all(i.map(async s=>await this.unsubscribeById(e,s,t)))}async unsubscribeById(e,t,i){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:i}});try{const s=Iu(i);await this.rpcUnsubscribe(e,t,s);const o=Bt("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,t,o),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:i}})}catch(s){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(s),s}}async rpcSubscribe(e,t,i=jt.relay){i===jt.relay&&await this.restartToComplete();const s={method:co(t.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s});try{const o=Fn(e+this.clientId);return i===jt.link_mode?(setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(s).catch(h=>this.logger.warn(h))},be.toMiliseconds(be.ONE_SECOND)),o):await await da(this.relayer.request(s).catch(h=>this.logger.warn(h)),this.subscribeTimeout)?o:null}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(zr.connection_stalled)}return null}async rpcBatchSubscribe(e){if(!e.length)return;const t=e[0].relay,i={method:co(t.protocol).batchSubscribe,params:{topics:e.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});try{return await await da(this.relayer.request(i).catch(s=>this.logger.warn(s)),this.subscribeTimeout)}catch{this.relayer.events.emit(zr.connection_stalled)}}async rpcBatchFetchMessages(e){if(!e.length)return;const t=e[0].relay,i={method:co(t.protocol).batchFetchMessages,params:{topics:e.map(o=>o.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});let s;try{s=await await da(this.relayer.request(i).catch(o=>this.logger.warn(o)),this.subscribeTimeout)}catch{this.relayer.events.emit(zr.connection_stalled)}return s}rpcUnsubscribe(e,t,i){const s={method:co(i.protocol).unsubscribe,params:{topic:e,id:t}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s}),this.relayer.request(s)}onSubscribe(e,t){this.setSubscription(e,fu(io({},t),{id:e})),this.pending.delete(t.topic)}onBatchSubscribe(e){e.length&&e.forEach(t=>{this.setSubscription(t.id,io({},t)),this.pending.delete(t.topic)})}async onUnsubscribe(e,t,i){this.events.removeAllListeners(t),this.hasSubscription(t,e)&&this.deleteSubscription(t,i),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,t){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:t}),this.addSubscription(e,t)}addSubscription(e,t){this.subscriptions.set(e,io({},t)),this.topicMap.set(t.topic,e),this.events.emit(vn.created,t)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const t=this.subscriptions.get(e);if(!t){const{message:i}=pe("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(i)}return t}deleteSubscription(e,t){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:t});const i=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(i.topic,e),this.events.emit(vn.deleted,fu(io({},i),{reason:t}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(vn.sync)}async reset(){if(this.cached.length){const e=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let t=0;t<e;t++){const i=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchFetchMessages(i),await this.batchSubscribe(i)}}this.events.emit(vn.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:t}=pe("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){if(!e.length)return;const t=await this.rpcBatchSubscribe(e);Mn(t)&&this.onBatchSubscribe(t.map((i,s)=>fu(io({},e[s]),{id:i})))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const t=await this.rpcBatchFetchMessages(e);t&&t.messages&&(this.pendingBatchMessages=this.pendingBatchMessages.concat(t.messages))}async onConnect(){await this.restart(),this.onEnable()}onDisconnect(){this.onDisable()}async checkPending(){if(!this.initialized||!this.relayer.connected)return;const e=[];this.pending.forEach(t=>{e.push(t)}),await this.batchSubscribe(e),this.pendingBatchMessages.length&&(await this.relayer.handleBatchMessageEvents(this.pendingBatchMessages),this.pendingBatchMessages=[])}registerEventListeners(){this.relayer.core.heartbeat.on(Ra.pulse,async()=>{await this.checkPending()}),this.events.on(vn.created,async e=>{const t=vn.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),await this.persist()}),this.events.on(vn.deleted,async e=>{const t=vn.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),await this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=pe("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(){!this.relayer.connected&&!this.relayer.connecting&&await this.relayer.transportOpen(),this.restartInProgress&&await new Promise(e=>{const t=setInterval(()=>{this.restartInProgress||(clearInterval(t),e())},this.pollingInterval)})}}var YA=Object.defineProperty,Sp=Object.getOwnPropertySymbols,WA=Object.prototype.hasOwnProperty,XA=Object.prototype.propertyIsEnumerable,Pp=(r,e,t)=>e in r?YA(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,ZA=(r,e)=>{for(var t in e||(e={}))WA.call(e,t)&&Pp(r,t,e[t]);if(Sp)for(var t of Sp(e))XA.call(e,t)&&Pp(r,t,e[t]);return r};class eM extends x9{constructor(e){super(e),this.protocol="wc",this.version=2,this.events=new qi.EventEmitter,this.name=gA,this.transportExplicitlyClosed=!1,this.initialized=!1,this.connectionAttemptInProgress=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","stalled","interrupted"],this.hasExperiencedNetworkDisruption=!1,this.requestsInFlight=new Map,this.heartBeatTimeout=be.toMiliseconds(be.THIRTY_SECONDS+be.ONE_SECOND),this.request=async t=>{var i,s;this.logger.debug("Publishing Request Payload");const o=t.id||Cs().toString();await this.toEstablishConnection();try{const h=this.provider.request(t);this.requestsInFlight.set(o,{promise:h,request:t}),this.logger.trace({id:o,method:t.method,topic:(i=t.params)==null?void 0:i.topic},"relayer.request - attempt to publish...");const g=await new Promise(async(y,_)=>{const I=()=>{_(new Error(`relayer.request - publish interrupted, id: ${o}`))};this.provider.on(Pi.disconnect,I);const P=await h;this.provider.off(Pi.disconnect,I),y(P)});return this.logger.trace({id:o,method:t.method,topic:(s=t.params)==null?void 0:s.topic},"relayer.request - published"),g}catch(h){throw this.logger.debug(`Failed to Publish Request: ${o}`),h}finally{this.requestsInFlight.delete(o)}},this.resetPingTimeout=()=>{if(mo())try{clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var t,i,s;(s=(i=(t=this.provider)==null?void 0:t.connection)==null?void 0:i.socket)==null||s.terminate()},this.heartBeatTimeout)}catch(t){this.logger.warn(t)}},this.onPayloadHandler=t=>{this.onProviderPayload(t),this.resetPingTimeout()},this.onConnectHandler=()=>{this.logger.trace("relayer connected"),this.startPingTimeout(),this.events.emit(zr.connect)},this.onDisconnectHandler=()=>{this.logger.trace("relayer disconnected"),this.onProviderDisconnect()},this.onProviderErrorHandler=t=>{this.logger.error(t),this.events.emit(zr.error,t),this.logger.info("Fatal socket error received, closing transport"),this.transportClose()},this.registerProviderListeners=()=>{this.provider.on(Pi.payload,this.onPayloadHandler),this.provider.on(Pi.connect,this.onConnectHandler),this.provider.on(Pi.disconnect,this.onDisconnectHandler),this.provider.on(Pi.error,this.onProviderErrorHandler)},this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?jr(e.logger,this.name):qu(lf({level:e.logger||pA})),this.messages=new UA(this.logger,e.core),this.subscriber=new QA(this,this.logger),this.publisher=new FA(this,this.logger),this.relayUrl=(e==null?void 0:e.relayUrl)||Og,this.projectId=e.projectId,this.bundleId=a5(),this.provider={}}async init(){if(this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.subscriber.cached.length>0)try{await this.transportOpen()}catch(e){this.logger.warn(e)}}get context(){return pi(this.logger)}get connected(){var e,t,i;return((i=(t=(e=this.provider)==null?void 0:e.connection)==null?void 0:t.socket)==null?void 0:i.readyState)===1}get connecting(){var e,t,i;return((i=(t=(e=this.provider)==null?void 0:e.connection)==null?void 0:t.socket)==null?void 0:i.readyState)===0}async publish(e,t,i){this.isInitialized(),await this.publisher.publish(e,t,i),await this.recordMessageEvent({topic:e,message:t,publishedAt:Date.now(),transportType:jt.relay})}async subscribe(e,t){var i;this.isInitialized(),(t==null?void 0:t.transportType)==="relay"&&await this.toEstablishConnection();let s=((i=this.subscriber.topicMap.get(e))==null?void 0:i[0])||"",o;const h=g=>{g.topic===e&&(this.subscriber.off(vn.created,h),o())};return await Promise.all([new Promise(g=>{o=g,this.subscriber.on(vn.created,h)}),new Promise(async g=>{s=await this.subscriber.subscribe(e,t)||s,g()})]),s}async unsubscribe(e,t){this.isInitialized(),await this.subscriber.unsubscribe(e,t)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async transportDisconnect(){if(!this.hasExperiencedNetworkDisruption&&this.connected&&this.requestsInFlight.size>0)try{await Promise.all(Array.from(this.requestsInFlight.values()).map(e=>e.promise))}catch(e){this.logger.warn(e)}this.hasExperiencedNetworkDisruption||this.connected?await da(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),await this.createProvider(),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;try{await new Promise(async(t,i)=>{const s=()=>{this.provider.off(Pi.disconnect,s),i(new Error("Connection interrupted while trying to subscribe"))};this.provider.on(Pi.disconnect,s),await da(this.provider.connect(),be.toMiliseconds(be.ONE_MINUTE),`Socket stalled when trying to connect to ${this.relayUrl}`).catch(o=>{i(o)}).finally(()=>{clearTimeout(this.reconnectTimeout),this.reconnectTimeout=void 0}),this.subscriber.start().catch(o=>{this.logger.error(o),this.onDisconnectHandler()}),this.hasExperiencedNetworkDisruption=!1,t()})}catch(t){this.logger.error(t);const i=t;if(this.hasExperiencedNetworkDisruption=!0,!this.isConnectionStalled(i.message))throw t}finally{this.connectionAttemptInProgress=!1}}async restartTransport(e){this.connectionAttemptInProgress||(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await gp())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if((e==null?void 0:e.length)===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const t=e.sort((i,s)=>i.publishedAt-s.publishedAt);this.logger.trace(`Batch of ${t.length} message events sorted`);for(const i of t)try{await this.onMessageEvent(i)}catch(s){this.logger.warn(s)}this.logger.trace(`Batch of ${t.length} message events processed`)}async onLinkMessageEvent(e,t){const{topic:i}=e;if(!t.sessionExists){const s=dr(be.FIVE_MINUTES),o={topic:i,expiry:s,relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(i,o)}this.events.emit(zr.message,e),await this.recordMessageEvent(e)}startPingTimeout(){var e,t,i,s,o;if(mo())try{(t=(e=this.provider)==null?void 0:e.connection)!=null&&t.socket&&((o=(s=(i=this.provider)==null?void 0:i.connection)==null?void 0:s.socket)==null||o.once("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(h){this.logger.warn(h)}}isConnectionStalled(e){return this.staleConnectionErrors.some(t=>e.includes(t))}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new sn(new tw(d5({sdkVersion:qg,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId}))),this.registerProviderListeners()}async recordMessageEvent(e){const{topic:t,message:i}=e;await this.messages.set(t,i)}async shouldIgnoreMessageEvent(e){const{topic:t,message:i}=e;if(!i||i.length===0)return this.logger.debug(`Ignoring invalid/empty message: ${i}`),!0;if(!await this.subscriber.isSubscribed(t))return this.logger.debug(`Ignoring message for non-subscribed topic ${t}`),!0;const s=this.messages.has(t,i);return s&&this.logger.debug(`Ignoring duplicate message: ${i}`),s}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),Du(e)){if(!e.method.endsWith(vA))return;const t=e.params,{topic:i,message:s,publishedAt:o,attestation:h}=t.data,g={topic:i,message:s,publishedAt:o,transportType:jt.relay,attestation:h};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(ZA({type:"event",event:t.id},g)),this.events.emit(t.id,g),await this.acknowledgePayload(e),await this.onMessageEvent(g)}else df(e)&&this.events.emit(zr.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(this.events.emit(zr.message,e),await this.recordMessageEvent(e))}async acknowledgePayload(e){const t=pf(e.id,!0);await this.provider.connection.send(t)}unregisterProviderListeners(){this.provider.off(Pi.payload,this.onPayloadHandler),this.provider.off(Pi.connect,this.onConnectHandler),this.provider.off(Pi.disconnect,this.onDisconnectHandler),this.provider.off(Pi.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await gp();v9(async t=>{e!==t&&(e=t,t?await this.restartTransport().catch(i=>this.logger.error(i)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))})}async onProviderDisconnect(){await this.subscriber.stop(),this.requestsInFlight.clear(),clearTimeout(this.pingTimeout),this.events.emit(zr.disconnect),this.connectionAttemptInProgress=!1,!this.transportExplicitlyClosed&&(this.reconnectTimeout||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(e=>this.logger.error(e))},be.toMiliseconds(bA))))}isInitialized(){if(!this.initialized){const{message:e}=pe("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){await this.confirmOnlineStateOrThrow(),!this.connected&&(this.connectionAttemptInProgress&&await new Promise(e=>{const t=setInterval(()=>{this.connected&&(clearInterval(t),e())},this.connectionStatusPollingInterval)}),await this.transportOpen())}}var tM=Object.defineProperty,Rp=Object.getOwnPropertySymbols,rM=Object.prototype.hasOwnProperty,iM=Object.prototype.propertyIsEnumerable,Cp=(r,e,t)=>e in r?tM(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Np=(r,e)=>{for(var t in e||(e={}))rM.call(e,t)&&Cp(r,t,e[t]);if(Rp)for(var t of Rp(e))iM.call(e,t)&&Cp(r,t,e[t]);return r};class zs extends E9{constructor(e,t,i,s=xn,o=void 0){super(e,t,i,s),this.core=e,this.logger=t,this.name=i,this.map=new Map,this.version=mA,this.cached=[],this.initialized=!1,this.storagePrefix=xn,this.recentlyDeleted=[],this.recentlyDeletedLimit=200,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(h=>{this.getKey&&h!==null&&!ti(h)?this.map.set(this.getKey(h),h):G7(h)?this.map.set(h.id,h):J7(h)&&this.map.set(h.topic,h)}),this.cached=[],this.initialized=!0)},this.set=async(h,g)=>{this.isInitialized(),this.map.has(h)?await this.update(h,g):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:h,value:g}),this.map.set(h,g),await this.persist())},this.get=h=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:h}),this.getData(h)),this.getAll=h=>(this.isInitialized(),h?this.values.filter(g=>Object.keys(h).every(y=>iw(g[y],h[y]))):this.values),this.update=async(h,g)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:h,update:g});const y=Np(Np({},this.getData(h)),g);this.map.set(h,y),await this.persist()},this.delete=async(h,g)=>{this.isInitialized(),this.map.has(h)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:h,reason:g}),this.map.delete(h),this.addToRecentlyDeleted(h),await this.persist())},this.logger=jr(t,this.name),this.storagePrefix=s,this.getKey=o}get context(){return pi(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const t=this.map.get(e);if(!t){if(this.recentlyDeleted.includes(e)){const{message:s}=pe("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}const{message:i}=pe("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(i),new Error(i)}return t}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:t}=pe("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=pe("NOT_INITIALIZED",this.name);throw new Error(e)}}}class nM{constructor(e,t){this.core=e,this.logger=t,this.name=MA,this.version=xA,this.events=new ku,this.initialized=!1,this.storagePrefix=xn,this.ignoredPayloadTypes=[Vn],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:i})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...i])]},this.create=async i=>{this.isInitialized();const s=Eu(),o=await this.core.crypto.setSymKey(s),h=dr(be.FIVE_MINUTES),g={protocol:Tg},y={topic:o,expiry:h,relay:g,active:!1},_=B7({protocol:this.core.protocol,version:this.core.version,topic:o,symKey:s,relay:g,expiryTimestamp:h,methods:i==null?void 0:i.methods});return this.core.expirer.set(o,h),await this.pairings.set(o,y),await this.core.relayer.subscribe(o,{transportType:i==null?void 0:i.transportType}),{topic:o,uri:_}},this.pair=async i=>{this.isInitialized();const s=this.core.eventClient.createEvent({properties:{topic:i==null?void 0:i.uri,trace:[ln.pairing_started]}});this.isValidPair(i,s);const{topic:o,symKey:h,relay:g,expiryTimestamp:y,methods:_}=fp(i.uri);s.props.properties.topic=o,s.addTrace(ln.pairing_uri_validation_success),s.addTrace(ln.pairing_uri_not_expired);let I;if(this.pairings.keys.includes(o)){if(I=this.pairings.get(o),s.addTrace(ln.existing_pairing),I.active)throw s.setError($n.active_pairing_already_exists),new Error(`Pairing already exists: ${o}. Please try again with a new connection URI.`);s.addTrace(ln.pairing_not_expired)}const P=y||dr(be.FIVE_MINUTES),q={topic:o,relay:g,expiry:P,active:!1,methods:_};this.core.expirer.set(o,P),await this.pairings.set(o,q),s.addTrace(ln.store_new_pairing),i.activatePairing&&await this.activate({topic:o}),this.events.emit(ua.create,q),s.addTrace(ln.emit_inactive_pairing),this.core.crypto.keychain.has(o)||await this.core.crypto.setSymKey(h,o),s.addTrace(ln.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{s.setError($n.no_internet_connection)}try{await this.core.relayer.subscribe(o,{relay:g})}catch(O){throw s.setError($n.subscribe_pairing_topic_failure),O}return s.addTrace(ln.subscribe_pairing_topic_success),q},this.activate=async({topic:i})=>{this.isInitialized();const s=dr(be.THIRTY_DAYS);this.core.expirer.set(i,s),await this.pairings.update(i,{active:!0,expiry:s})},this.ping=async i=>{this.isInitialized(),await this.isValidPing(i);const{topic:s}=i;if(this.pairings.keys.includes(s)){const o=await this.sendRequest(s,"wc_pairingPing",{}),{done:h,resolve:g,reject:y}=Ps();this.events.once(xt("pairing_ping",o),({error:_})=>{_?y(_):g()}),await h()}},this.updateExpiry=async({topic:i,expiry:s})=>{this.isInitialized(),await this.pairings.update(i,{expiry:s})},this.updateMetadata=async({topic:i,metadata:s})=>{this.isInitialized(),await this.pairings.update(i,{peerMetadata:s})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async i=>{this.isInitialized(),await this.isValidDisconnect(i);const{topic:s}=i;this.pairings.keys.includes(s)&&(await this.sendRequest(s,"wc_pairingDelete",Bt("USER_DISCONNECTED")),await this.deletePairing(s))},this.sendRequest=async(i,s,o)=>{const h=Rs(s,o),g=await this.core.crypto.encode(i,h),y=to[s].req;return this.core.history.set(i,h),this.core.relayer.publish(i,g,y),h.id},this.sendResult=async(i,s,o)=>{const h=pf(i,o),g=await this.core.crypto.encode(s,h),y=await this.core.history.get(s,i),_=to[y.request.method].res;await this.core.relayer.publish(s,g,_),await this.core.history.resolve(h)},this.sendError=async(i,s,o)=>{const h=uf(i,o),g=await this.core.crypto.encode(s,h),y=await this.core.history.get(s,i),_=to[y.request.method]?to[y.request.method].res:to.unregistered_method.res;await this.core.relayer.publish(s,g,_),await this.core.history.resolve(h)},this.deletePairing=async(i,s)=>{await this.core.relayer.unsubscribe(i),await Promise.all([this.pairings.delete(i,Bt("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(i),s?Promise.resolve():this.core.expirer.del(i)])},this.cleanup=async()=>{const i=this.pairings.getAll().filter(s=>ss(s.expiry));await Promise.all(i.map(s=>this.deletePairing(s.topic)))},this.onRelayEventRequest=i=>{const{topic:s,payload:o}=i;switch(o.method){case"wc_pairingPing":return this.onPairingPingRequest(s,o);case"wc_pairingDelete":return this.onPairingDeleteRequest(s,o);default:return this.onUnknownRpcMethodRequest(s,o)}},this.onRelayEventResponse=async i=>{const{topic:s,payload:o}=i,h=(await this.core.history.get(s,o.id)).request.method;switch(h){case"wc_pairingPing":return this.onPairingPingResponse(s,o);default:return this.onUnknownRpcMethodResponse(h)}},this.onPairingPingRequest=async(i,s)=>{const{id:o}=s;try{this.isValidPing({topic:i}),await this.sendResult(o,i,!0),this.events.emit(ua.ping,{id:o,topic:i})}catch(h){await this.sendError(o,i,h),this.logger.error(h)}},this.onPairingPingResponse=(i,s)=>{const{id:o}=s;setTimeout(()=>{zn(s)?this.events.emit(xt("pairing_ping",o),{}):Zi(s)&&this.events.emit(xt("pairing_ping",o),{error:s.error})},500)},this.onPairingDeleteRequest=async(i,s)=>{const{id:o}=s;try{this.isValidDisconnect({topic:i}),await this.deletePairing(i),this.events.emit(ua.delete,{id:o,topic:i})}catch(h){await this.sendError(o,i,h),this.logger.error(h)}},this.onUnknownRpcMethodRequest=async(i,s)=>{const{id:o,method:h}=s;try{if(this.registeredMethods.includes(h))return;const g=Bt("WC_METHOD_UNSUPPORTED",h);await this.sendError(o,i,g),this.logger.error(g)}catch(g){await this.sendError(o,i,g),this.logger.error(g)}},this.onUnknownRpcMethodResponse=i=>{this.registeredMethods.includes(i)||this.logger.error(Bt("WC_METHOD_UNSUPPORTED",i))},this.isValidPair=(i,s)=>{var o;if(!Zr(i)){const{message:g}=pe("MISSING_OR_INVALID",`pair() params: ${i}`);throw s.setError($n.malformed_pairing_uri),new Error(g)}if(!V7(i.uri)){const{message:g}=pe("MISSING_OR_INVALID",`pair() uri: ${i.uri}`);throw s.setError($n.malformed_pairing_uri),new Error(g)}const h=fp(i==null?void 0:i.uri);if(!((o=h==null?void 0:h.relay)!=null&&o.protocol)){const{message:g}=pe("MISSING_OR_INVALID","pair() uri#relay-protocol");throw s.setError($n.malformed_pairing_uri),new Error(g)}if(!(h!=null&&h.symKey)){const{message:g}=pe("MISSING_OR_INVALID","pair() uri#symKey");throw s.setError($n.malformed_pairing_uri),new Error(g)}if(h!=null&&h.expiryTimestamp&&be.toMiliseconds(h==null?void 0:h.expiryTimestamp)<Date.now()){s.setError($n.pairing_expired);const{message:g}=pe("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(g)}},this.isValidPing=async i=>{if(!Zr(i)){const{message:o}=pe("MISSING_OR_INVALID",`ping() params: ${i}`);throw new Error(o)}const{topic:s}=i;await this.isValidPairingTopic(s)},this.isValidDisconnect=async i=>{if(!Zr(i)){const{message:o}=pe("MISSING_OR_INVALID",`disconnect() params: ${i}`);throw new Error(o)}const{topic:s}=i;await this.isValidPairingTopic(s)},this.isValidPairingTopic=async i=>{if(!sr(i,!1)){const{message:s}=pe("MISSING_OR_INVALID",`pairing topic should be a string: ${i}`);throw new Error(s)}if(!this.pairings.keys.includes(i)){const{message:s}=pe("NO_MATCHING_KEY",`pairing topic doesn't exist: ${i}`);throw new Error(s)}if(ss(this.pairings.get(i).expiry)){await this.deletePairing(i);const{message:s}=pe("EXPIRED",`pairing topic: ${i}`);throw new Error(s)}},this.core=e,this.logger=jr(t,this.name),this.pairings=new zs(this.core,this.logger,this.name,this.storagePrefix)}get context(){return pi(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=pe("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(zr.message,async e=>{const{topic:t,message:i,transportType:s}=e;if(!this.pairings.keys.includes(t)||s===jt.link_mode||this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(i)))return;const o=await this.core.crypto.decode(t,i);try{Du(o)?(this.core.history.set(t,o),this.onRelayEventRequest({topic:t,payload:o})):df(o)&&(await this.core.history.resolve(o),await this.onRelayEventResponse({topic:t,payload:o}),this.core.history.delete(t,o.id))}catch(h){this.logger.error(h)}})}registerExpirerEvents(){this.core.expirer.on(Ri.expired,async e=>{const{topic:t}=R1(e.target);t&&this.pairings.keys.includes(t)&&(await this.deletePairing(t,!0),this.events.emit(ua.expire,{topic:t}))})}}class sM extends _9{constructor(e,t){super(e,t),this.core=e,this.logger=t,this.records=new Map,this.events=new qi.EventEmitter,this.name=EA,this.version=IA,this.cached=[],this.initialized=!1,this.storagePrefix=xn,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(i=>this.records.set(i.id,i)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(i,s,o)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:i,request:s,chainId:o}),this.records.has(s.id))return;const h={id:s.id,topic:i,request:{method:s.method,params:s.params||null},chainId:o,expiry:dr(be.THIRTY_DAYS)};this.records.set(h.id,h),this.persist(),this.events.emit(Qi.created,h)},this.resolve=async i=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:i}),!this.records.has(i.id))return;const s=await this.getRecord(i.id);typeof s.response>"u"&&(s.response=Zi(i)?{error:i.error}:{result:i.result},this.records.set(s.id,s),this.persist(),this.events.emit(Qi.updated,s))},this.get=async(i,s)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:i,id:s}),await this.getRecord(s)),this.delete=(i,s)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:s}),this.values.forEach(o=>{if(o.topic===i){if(typeof s<"u"&&o.id!==s)return;this.records.delete(o.id),this.events.emit(Qi.deleted,o)}}),this.persist()},this.exists=async(i,s)=>(this.isInitialized(),this.records.has(s)?(await this.getRecord(s)).topic===i:!1),this.on=(i,s)=>{this.events.on(i,s)},this.once=(i,s)=>{this.events.once(i,s)},this.off=(i,s)=>{this.events.off(i,s)},this.removeListener=(i,s)=>{this.events.removeListener(i,s)},this.logger=jr(t,this.name)}get context(){return pi(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(t=>{if(typeof t.response<"u")return;const i={topic:t.topic,request:Rs(t.request.method,t.request.params,t.id),chainId:t.chainId};return e.push(i)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const t=this.records.get(e);if(!t){const{message:i}=pe("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(i)}return t}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(Qi.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:t}=pe("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(Qi.created,e=>{const t=Qi.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e})}),this.events.on(Qi.updated,e=>{const t=Qi.updated;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e})}),this.events.on(Qi.deleted,e=>{const t=Qi.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e})}),this.core.heartbeat.on(Ra.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(t=>{be.toMiliseconds(t.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${t.id}`),this.records.delete(t.id),this.events.emit(Qi.deleted,t,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=pe("NOT_INITIALIZED",this.name);throw new Error(e)}}}class aM extends S9{constructor(e,t){super(e,t),this.core=e,this.logger=t,this.expirations=new Map,this.events=new qi.EventEmitter,this.name=SA,this.version=PA,this.cached=[],this.initialized=!1,this.storagePrefix=xn,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(i=>this.expirations.set(i.target,i)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=i=>{try{const s=this.formatTarget(i);return typeof this.getExpiration(s)<"u"}catch{return!1}},this.set=(i,s)=>{this.isInitialized();const o=this.formatTarget(i),h={target:o,expiry:s};this.expirations.set(o,h),this.checkExpiry(o,h),this.events.emit(Ri.created,{target:o,expiration:h})},this.get=i=>{this.isInitialized();const s=this.formatTarget(i);return this.getExpiration(s)},this.del=i=>{if(this.isInitialized(),this.has(i)){const s=this.formatTarget(i),o=this.getExpiration(s);this.expirations.delete(s),this.events.emit(Ri.deleted,{target:s,expiration:o})}},this.on=(i,s)=>{this.events.on(i,s)},this.once=(i,s)=>{this.events.once(i,s)},this.off=(i,s)=>{this.events.off(i,s)},this.removeListener=(i,s)=>{this.events.removeListener(i,s)},this.logger=jr(t,this.name)}get context(){return pi(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return l5(e);if(typeof e=="number")return p5(e);const{message:t}=pe("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(t)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(Ri.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:t}=pe("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const t=this.expirations.get(e);if(!t){const{message:i}=pe("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(i),new Error(i)}return t}checkExpiry(e,t){const{expiry:i}=t;be.toMiliseconds(i)-Date.now()<=0&&this.expire(e,t)}expire(e,t){this.expirations.delete(e),this.events.emit(Ri.expired,{target:e,expiration:t})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,t)=>this.checkExpiry(t,e))}registerEventListeners(){this.core.heartbeat.on(Ra.pulse,()=>this.checkExpirations()),this.events.on(Ri.created,e=>{const t=Ri.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on(Ri.expired,e=>{const t=Ri.expired;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on(Ri.deleted,e=>{const t=Ri.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=pe("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Gt={};Object.defineProperty(Gt,"__esModule",{value:!0}),Gt.getLocalStorage=Gt.getLocalStorageOrThrow=Gt.getCrypto=Gt.getCryptoOrThrow=Gt.getLocation=Gt.getLocationOrThrow=Gt.getNavigator=Gt.getNavigatorOrThrow=kg=Gt.getDocument=Gt.getDocumentOrThrow=Gt.getFromWindowOrThrow=Gt.getFromWindow=void 0;function $s(r){let e;return typeof window<"u"&&typeof window[r]<"u"&&(e=window[r]),e}Gt.getFromWindow=$s;function Ca(r){const e=$s(r);if(!e)throw new Error(`${r} is not defined in Window`);return e}Gt.getFromWindowOrThrow=Ca;function oM(){return Ca("document")}Gt.getDocumentOrThrow=oM;function cM(){return $s("document")}var kg=Gt.getDocument=cM;function fM(){return Ca("navigator")}Gt.getNavigatorOrThrow=fM;function hM(){return $s("navigator")}Gt.getNavigator=hM;function uM(){return Ca("location")}Gt.getLocationOrThrow=uM;function dM(){return $s("location")}Gt.getLocation=dM;function lM(){return Ca("crypto")}Gt.getCryptoOrThrow=lM;function pM(){return $s("crypto")}Gt.getCrypto=pM;function gM(){return Ca("localStorage")}Gt.getLocalStorageOrThrow=gM;function vM(){return $s("localStorage")}Gt.getLocalStorage=vM;class bM extends P9{constructor(e,t,i){super(e,t,i),this.core=e,this.logger=t,this.store=i,this.name=RA,this.verifyUrlV3=NA,this.storagePrefix=xn,this.version=Ng,this.init=async()=>{var s;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&be.toMiliseconds((s=this.publicKey)==null?void 0:s.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))},this.register=async s=>{if(!Eo()||this.isDevEnv)return;const o=window.location.origin,{id:h,decryptedId:g}=s,y=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${o}&id=${h}&decryptedId=${g}`;try{const _=kg(),I=this.startAbortTimer(be.ONE_SECOND*5),P=await new Promise((q,O)=>{const L=()=>{window.removeEventListener("message",G),_.body.removeChild(j),O("attestation aborted")};this.abortController.signal.addEventListener("abort",L);const j=_.createElement("iframe");j.src=y,j.style.display="none",j.addEventListener("error",L,{signal:this.abortController.signal});const G=Q=>{if(!Q.data)return;const Z=JSON.parse(Q.data);if(Z.type==="verify_attestation"){if(bu(Z.attestation).payload.id!==h)return;clearInterval(I),_.body.removeChild(j),this.abortController.signal.removeEventListener("abort",L),window.removeEventListener("message",G),q(Z.attestation===null?"":Z.attestation)}};_.body.appendChild(j),window.addEventListener("message",G,{signal:this.abortController.signal})});return this.logger.debug("jwt attestation",P),P}catch(_){this.logger.warn(_)}return""},this.resolve=async s=>{if(this.isDevEnv)return"";const{attestationId:o,hash:h,encryptedId:g}=s;if(o===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(o){if(bu(o).payload.id!==g)return;const _=await this.isValidJwtAttestation(o);if(_){if(!_.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return _}}if(!h)return;const y=this.getVerifyUrl(s==null?void 0:s.verifyUrl);return this.fetchAttestation(h,y)},this.fetchAttestation=async(s,o)=>{this.logger.debug(`resolving attestation: ${s} from url: ${o}`);const h=this.startAbortTimer(be.ONE_SECOND*5),g=await fetch(`${o}/attestation/${s}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(h),g.status===200?await g.json():void 0},this.getVerifyUrl=s=>{let o=s||go;return TA.includes(o)||(this.logger.info(`verify url: ${o}, not included in trusted list, assigning default: ${go}`),o=go),o},this.fetchPublicKey=async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const s=this.startAbortTimer(be.FIVE_SECONDS),o=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(s),await o.json()}catch(s){this.logger.warn(s)}},this.persistPublicKey=async s=>{this.logger.debug("persisting public key to local storage",s),await this.store.setItem(this.storeKey,s),this.publicKey=s},this.removePublicKey=async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0},this.isValidJwtAttestation=async s=>{const o=await this.getPublicKey();try{if(o)return this.validateAttestation(s,o)}catch(g){this.logger.error(g),this.logger.warn("error validating attestation")}const h=await this.fetchAndPersistPublicKey();try{if(h)return this.validateAttestation(s,h)}catch(g){this.logger.error(g),this.logger.warn("error validating attestation")}},this.getPublicKey=async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey(),this.fetchAndPersistPublicKey=async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async o=>{const h=await this.fetchPublicKey();h&&(await this.persistPublicKey(h),o(h))});const s=await this.fetchPromise;return this.fetchPromise=void 0,s},this.validateAttestation=(s,o)=>{const h=I7(s,o.publicKey),g={hasExpired:be.toMiliseconds(h.exp)<Date.now(),payload:h};if(g.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:g.payload.origin,isScam:g.payload.isScam,isVerified:g.payload.isVerified}},this.logger=jr(t,this.name),this.abortController=new AbortController,this.isDevEnv=mo()&&O9.IS_VITEST,this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return pi(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),be.toMiliseconds(e))}}class mM extends R9{constructor(e,t){super(e,t),this.projectId=e,this.logger=t,this.context=OA,this.registerDeviceToken=async i=>{const{clientId:s,token:o,notificationType:h,enableEncrypted:g=!1}=i,y=`${qA}/${this.projectId}/clients`;await fetch(y,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:s,type:h,token:o,always_raw:g})})},this.logger=jr(t,this.context)}}var yM=Object.defineProperty,Tp=Object.getOwnPropertySymbols,wM=Object.prototype.hasOwnProperty,_M=Object.prototype.propertyIsEnumerable,Op=(r,e,t)=>e in r?yM(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,no=(r,e)=>{for(var t in e||(e={}))wM.call(e,t)&&Op(r,t,e[t]);if(Tp)for(var t of Tp(e))_M.call(e,t)&&Op(r,t,e[t]);return r};class AM extends C9{constructor(e,t,i=!0){super(e,t,i),this.core=e,this.logger=t,this.context=kA,this.storagePrefix=xn,this.storageVersion=DA,this.events=new Map,this.shouldPersist=!1,this.createEvent=s=>{const{event:o="ERROR",type:h="",properties:{topic:g,trace:y}}=s,_=b5(),I=this.core.projectId||"",P=Date.now(),q=no({eventId:_,bundleId:I,timestamp:P,props:{event:o,type:h,properties:{topic:g,trace:y}}},this.setMethods(_));return this.telemetryEnabled&&(this.events.set(_,q),this.shouldPersist=!0),q},this.getEvent=s=>{const{eventId:o,topic:h}=s;if(o)return this.events.get(o);const g=Array.from(this.events.values()).find(y=>y.props.properties.topic===h);if(g)return no(no({},g),this.setMethods(g.eventId))},this.deleteEvent=s=>{const{eventId:o}=s;this.events.delete(o),this.shouldPersist=!0},this.setEventListeners=()=>{this.core.heartbeat.on(Ra.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(s=>{be.fromMiliseconds(Date.now())-be.fromMiliseconds(s.timestamp)>BA&&(this.events.delete(s.eventId),this.shouldPersist=!0)})})},this.setMethods=s=>({addTrace:o=>this.addTrace(s,o),setError:o=>this.setError(s,o)}),this.addTrace=(s,o)=>{const h=this.events.get(s);h&&(h.props.properties.trace.push(o),this.events.set(s,h),this.shouldPersist=!0)},this.setError=(s,o)=>{const h=this.events.get(s);h&&(h.props.type=o,h.timestamp=Date.now(),this.events.set(s,h),this.shouldPersist=!0)},this.persist=async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1},this.restore=async()=>{try{const s=await this.core.storage.getItem(this.storageKey)||[];if(!s.length)return;s.forEach(o=>{this.events.set(o.eventId,no(no({},o),this.setMethods(o.eventId)))})}catch(s){this.logger.warn(s)}},this.submit=async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const s=[];for(const[o,h]of this.events)h.props.type&&s.push(h);if(s.length!==0)try{if((await fetch(`${LA}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${qg}`,{method:"POST",body:JSON.stringify(s)})).ok)for(const o of s)this.events.delete(o.eventId),this.shouldPersist=!0}catch(o){this.logger.warn(o)}},this.logger=jr(t,this.context),i?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var MM=Object.defineProperty,qp=Object.getOwnPropertySymbols,xM=Object.prototype.hasOwnProperty,EM=Object.prototype.propertyIsEnumerable,Dp=(r,e,t)=>e in r?MM(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,kp=(r,e)=>{for(var t in e||(e={}))xM.call(e,t)&&Dp(r,t,e[t]);if(qp)for(var t of qp(e))EM.call(e,t)&&Dp(r,t,e[t]);return r};let IM=class Bg extends w9{constructor(e){var t;super(e),this.protocol=Cg,this.version=Ng,this.name=ed,this.events=new qi.EventEmitter,this.initialized=!1,this.on=(h,g)=>this.events.on(h,g),this.once=(h,g)=>this.events.once(h,g),this.off=(h,g)=>this.events.off(h,g),this.removeListener=(h,g)=>this.events.removeListener(h,g),this.dispatchEnvelope=({topic:h,message:g,sessionExists:y})=>{if(!h||!g)return;const _={topic:h,message:g,publishedAt:Date.now(),transportType:jt.link_mode};this.relayer.onLinkMessageEvent(_,{sessionExists:y})},this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||Og,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const i=lf({level:typeof(e==null?void 0:e.logger)=="string"&&e.logger?e.logger:nA.logger}),{logger:s,chunkLoggerController:o}=Oy({opts:i,maxSizeInBytes:e==null?void 0:e.maxLogBlobSizeInBytes,loggerOverride:e==null?void 0:e.logger});this.logChunkController=o,(t=this.logChunkController)!=null&&t.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var h,g;(h=this.logChunkController)!=null&&h.downloadLogsBlobInBrowser&&((g=this.logChunkController)==null||g.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=jr(s,this.name),this.heartbeat=new Zu,this.crypto=new $A(this,this.logger,e==null?void 0:e.keychain),this.history=new sM(this,this.logger),this.expirer=new aM(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new qy(kp(kp({},sA),e==null?void 0:e.storageOptions)),this.relayer=new eM({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new nM(this,this.logger),this.verify=new bM(this,this.logger,this.storage),this.echoClient=new mM(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new AM(this,this.logger,e==null?void 0:e.telemetryEnabled)}static async init(e){const t=new Bg(e);await t.initialize();const i=await t.crypto.getClientId();return await t.storage.setItem(yA,i),t}get context(){return pi(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return(e=this.logChunkController)==null?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(xp,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(xp)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}};const SM=IM;var PM={};const Lg="wc",zg=2,$g="client",td=`${Lg}@${zg}:${$g}:`,hu={name:$g,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.com"},Bp="WALLETCONNECT_DEEPLINK_CHOICE",RM="proposal",Ug="Proposal expired",CM="session",aa=be.SEVEN_DAYS,NM="engine",vr={wc_sessionPropose:{req:{ttl:be.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:be.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:be.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:be.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:be.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:be.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:be.ONE_DAY,prompt:!1,tag:1104},res:{ttl:be.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:be.ONE_DAY,prompt:!1,tag:1106},res:{ttl:be.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:be.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:be.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:be.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:be.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:be.ONE_DAY,prompt:!1,tag:1112},res:{ttl:be.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:be.ONE_DAY,prompt:!1,tag:1114},res:{ttl:be.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:be.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:be.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:be.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:be.FIVE_MINUTES,prompt:!1,tag:1119}}},uu={min:be.FIVE_MINUTES,max:be.SEVEN_DAYS},dn={idle:"IDLE",active:"ACTIVE"},TM="request",OM=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],qM="wc",DM="auth",kM="authKeys",BM="pairingTopics",LM="requests",Pf=`${qM}@${1.5}:${DM}:`,Jc=`${Pf}:PUB_KEY`;var zM=Object.defineProperty,$M=Object.defineProperties,UM=Object.getOwnPropertyDescriptors,Lp=Object.getOwnPropertySymbols,FM=Object.prototype.hasOwnProperty,jM=Object.prototype.propertyIsEnumerable,zp=(r,e,t)=>e in r?zM(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Xt=(r,e)=>{for(var t in e||(e={}))FM.call(e,t)&&zp(r,t,e[t]);if(Lp)for(var t of Lp(e))jM.call(e,t)&&zp(r,t,e[t]);return r},Wi=(r,e)=>$M(r,UM(e));class HM extends T9{constructor(e){super(e),this.name=NM,this.events=new ku,this.initialized=!1,this.requestQueue={state:dn.idle,queue:[]},this.sessionRequestQueue={state:dn.idle,queue:[]},this.requestQueueDelay=be.ONE_SECOND,this.expectedPairingMethodMap=new Map,this.recentlyDeletedMap=new Map,this.recentlyDeletedLimit=200,this.relayMessageCache=[],this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(vr)}),this.initialized=!0,setTimeout(()=>{this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},be.toMiliseconds(this.requestQueueDelay)))},this.connect=async t=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();const i=Wi(Xt({},t),{requiredNamespaces:t.requiredNamespaces||{},optionalNamespaces:t.optionalNamespaces||{}});await this.isValidConnect(i);const{pairingTopic:s,requiredNamespaces:o,optionalNamespaces:h,sessionProperties:g,relays:y}=i;let _=s,I,P=!1;try{_&&(P=this.client.core.pairing.pairings.get(_).active)}catch(ce){throw this.client.logger.error(`connect() -> pairing.get(${_}) failed`),ce}if(!_||!P){const{topic:ce,uri:ae}=await this.client.core.pairing.create();_=ce,I=ae}if(!_){const{message:ce}=pe("NO_MATCHING_KEY",`connect() pairing topic: ${_}`);throw new Error(ce)}const q=await this.client.core.crypto.generateKeyPair(),O=vr.wc_sessionPropose.req.ttl||be.FIVE_MINUTES,L=dr(O),j=Xt({requiredNamespaces:o,optionalNamespaces:h,relays:y??[{protocol:Tg}],proposer:{publicKey:q,metadata:this.client.metadata},expiryTimestamp:L,pairingTopic:_},g&&{sessionProperties:g}),{reject:G,resolve:Q,done:Z}=Ps(O,Ug);this.events.once(xt("session_connect"),async({error:ce,session:ae})=>{if(ce)G(ce);else if(ae){ae.self.publicKey=q;const he=Wi(Xt({},ae),{pairingTopic:j.pairingTopic,requiredNamespaces:j.requiredNamespaces,optionalNamespaces:j.optionalNamespaces,transportType:jt.relay});await this.client.session.set(ae.topic,he),await this.setExpiry(ae.topic,ae.expiry),_&&await this.client.core.pairing.updateMetadata({topic:_,metadata:ae.peer.metadata}),this.cleanupDuplicatePairings(he),Q(he)}});const de=await this.sendRequest({topic:_,method:"wc_sessionPropose",params:j,throwOnFailedPublish:!0});return await this.setProposal(de,Xt({id:de},j)),{uri:I,approval:Z}},this.pair=async t=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(t)}catch(i){throw this.client.logger.error("pair() failed"),i}},this.approve=async t=>{var i,s,o;const h=this.client.core.eventClient.createEvent({properties:{topic:(i=t==null?void 0:t.id)==null?void 0:i.toString(),trace:[Yi.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(le){throw h.setError(Is.no_internet_connection),le}try{await this.isValidProposalId(t==null?void 0:t.id)}catch(le){throw this.client.logger.error(`approve() -> proposal.get(${t==null?void 0:t.id}) failed`),h.setError(Is.proposal_not_found),le}try{await this.isValidApprove(t)}catch(le){throw this.client.logger.error("approve() -> isValidApprove() failed"),h.setError(Is.session_approve_namespace_validation_failure),le}const{id:g,relayProtocol:y,namespaces:_,sessionProperties:I,sessionConfig:P}=t,q=this.client.proposal.get(g);this.client.core.eventClient.deleteEvent({eventId:h.eventId});const{pairingTopic:O,proposer:L,requiredNamespaces:j,optionalNamespaces:G}=q;let Q=(s=this.client.core.eventClient)==null?void 0:s.getEvent({topic:O});Q||(Q=(o=this.client.core.eventClient)==null?void 0:o.createEvent({type:Yi.session_approve_started,properties:{topic:O,trace:[Yi.session_approve_started,Yi.session_namespaces_validation_success]}}));const Z=await this.client.core.crypto.generateKeyPair(),de=L.publicKey,ce=await this.client.core.crypto.generateSharedKey(Z,de),ae=Xt(Xt({relay:{protocol:y??"irn"},namespaces:_,controller:{publicKey:Z,metadata:this.client.metadata},expiry:dr(aa)},I&&{sessionProperties:I}),P&&{sessionConfig:P}),he=jt.relay;Q.addTrace(Yi.subscribing_session_topic);try{await this.client.core.relayer.subscribe(ce,{transportType:he})}catch(le){throw Q.setError(Is.subscribe_session_topic_failure),le}Q.addTrace(Yi.subscribe_session_topic_success);const ue=Wi(Xt({},ae),{topic:ce,requiredNamespaces:j,optionalNamespaces:G,pairingTopic:O,acknowledged:!1,self:ae.controller,peer:{publicKey:L.publicKey,metadata:L.metadata},controller:Z,transportType:jt.relay});await this.client.session.set(ce,ue),Q.addTrace(Yi.store_session);try{Q.addTrace(Yi.publishing_session_settle),await this.sendRequest({topic:ce,method:"wc_sessionSettle",params:ae,throwOnFailedPublish:!0}).catch(le=>{throw Q==null||Q.setError(Is.session_settle_publish_failure),le}),Q.addTrace(Yi.session_settle_publish_success),Q.addTrace(Yi.publishing_session_approve),await this.sendResult({id:g,topic:O,result:{relay:{protocol:y??"irn"},responderPublicKey:Z},throwOnFailedPublish:!0}).catch(le=>{throw Q==null||Q.setError(Is.session_approve_publish_failure),le}),Q.addTrace(Yi.session_approve_publish_success)}catch(le){throw this.client.logger.error(le),this.client.session.delete(ce,Bt("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(ce),le}return this.client.core.eventClient.deleteEvent({eventId:Q.eventId}),await this.client.core.pairing.updateMetadata({topic:O,metadata:L.metadata}),await this.client.proposal.delete(g,Bt("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:O}),await this.setExpiry(ce,dr(aa)),{topic:ce,acknowledged:()=>Promise.resolve(this.client.session.get(ce))}},this.reject=async t=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(t)}catch(h){throw this.client.logger.error("reject() -> isValidReject() failed"),h}const{id:i,reason:s}=t;let o;try{o=this.client.proposal.get(i).pairingTopic}catch(h){throw this.client.logger.error(`reject() -> proposal.get(${i}) failed`),h}o&&(await this.sendError({id:i,topic:o,error:s,rpcOpts:vr.wc_sessionPropose.reject}),await this.client.proposal.delete(i,Bt("USER_DISCONNECTED")))},this.update=async t=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(t)}catch(P){throw this.client.logger.error("update() -> isValidUpdate() failed"),P}const{topic:i,namespaces:s}=t,{done:o,resolve:h,reject:g}=Ps(),y=sa(),_=Cs().toString(),I=this.client.session.get(i).namespaces;return this.events.once(xt("session_update",y),({error:P})=>{P?g(P):h()}),await this.client.session.update(i,{namespaces:s}),await this.sendRequest({topic:i,method:"wc_sessionUpdate",params:{namespaces:s},throwOnFailedPublish:!0,clientRpcId:y,relayRpcId:_}).catch(P=>{this.client.logger.error(P),this.client.session.update(i,{namespaces:I}),g(P)}),{acknowledged:o}},this.extend=async t=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(t)}catch(y){throw this.client.logger.error("extend() -> isValidExtend() failed"),y}const{topic:i}=t,s=sa(),{done:o,resolve:h,reject:g}=Ps();return this.events.once(xt("session_extend",s),({error:y})=>{y?g(y):h()}),await this.setExpiry(i,dr(aa)),this.sendRequest({topic:i,method:"wc_sessionExtend",params:{},clientRpcId:s,throwOnFailedPublish:!0}).catch(y=>{g(y)}),{acknowledged:o}},this.request=async t=>{this.isInitialized();try{await this.isValidRequest(t)}catch(L){throw this.client.logger.error("request() -> isValidRequest() failed"),L}const{chainId:i,request:s,topic:o,expiry:h=vr.wc_sessionRequest.req.ttl}=t,g=this.client.session.get(o);(g==null?void 0:g.transportType)===jt.relay&&await this.confirmOnlineStateOrThrow();const y=sa(),_=Cs().toString(),{done:I,resolve:P,reject:q}=Ps(h,"Request expired. Please try again.");this.events.once(xt("session_request",y),({error:L,result:j})=>{L?q(L):P(j)});const O=this.getAppLinkIfEnabled(g.peer.metadata,g.transportType);return O?(await this.sendRequest({clientRpcId:y,relayRpcId:_,topic:o,method:"wc_sessionRequest",params:{request:Wi(Xt({},s),{expiryTimestamp:dr(h)}),chainId:i},expiry:h,throwOnFailedPublish:!0,appLink:O}).catch(L=>q(L)),this.client.events.emit("session_request_sent",{topic:o,request:s,chainId:i,id:y}),await I()):await Promise.all([new Promise(async L=>{await this.sendRequest({clientRpcId:y,relayRpcId:_,topic:o,method:"wc_sessionRequest",params:{request:Wi(Xt({},s),{expiryTimestamp:dr(h)}),chainId:i},expiry:h,throwOnFailedPublish:!0}).catch(j=>q(j)),this.client.events.emit("session_request_sent",{topic:o,request:s,chainId:i,id:y}),L()}),new Promise(async L=>{var j;if(!((j=g.sessionConfig)!=null&&j.disableDeepLink)){const G=await v5(this.client.core.storage,Bp);g5({id:y,topic:o,wcDeepLink:G})}L()}),I()]).then(L=>L[2])},this.respond=async t=>{this.isInitialized(),await this.isValidRespond(t);const{topic:i,response:s}=t,{id:o}=s,h=this.client.session.get(i);h.transportType===jt.relay&&await this.confirmOnlineStateOrThrow();const g=this.getAppLinkIfEnabled(h.peer.metadata,h.transportType);zn(s)?await this.sendResult({id:o,topic:i,result:s.result,throwOnFailedPublish:!0,appLink:g}):Zi(s)&&await this.sendError({id:o,topic:i,error:s.error,appLink:g}),this.cleanupAfterResponse(t)},this.ping=async t=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(t)}catch(s){throw this.client.logger.error("ping() -> isValidPing() failed"),s}const{topic:i}=t;if(this.client.session.keys.includes(i)){const s=sa(),o=Cs().toString(),{done:h,resolve:g,reject:y}=Ps();this.events.once(xt("session_ping",s),({error:_})=>{_?y(_):g()}),await Promise.all([this.sendRequest({topic:i,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:s,relayRpcId:o}),h()])}else this.client.core.pairing.pairings.keys.includes(i)&&await this.client.core.pairing.ping({topic:i})},this.emit=async t=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(t);const{topic:i,event:s,chainId:o}=t,h=Cs().toString();await this.sendRequest({topic:i,method:"wc_sessionEvent",params:{event:s,chainId:o},throwOnFailedPublish:!0,relayRpcId:h})},this.disconnect=async t=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(t);const{topic:i}=t;if(this.client.session.keys.includes(i))await this.sendRequest({topic:i,method:"wc_sessionDelete",params:Bt("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:i,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(i))await this.client.core.pairing.disconnect({topic:i});else{const{message:s}=pe("MISMATCHED_TOPIC",`Session or pairing topic not found: ${i}`);throw new Error(s)}},this.find=t=>(this.isInitialized(),this.client.session.getAll().filter(i=>H7(i,t))),this.getPendingSessionRequests=()=>this.client.pendingRequest.getAll(),this.authenticate=async(t,i)=>{var s;this.isInitialized(),this.isValidAuthenticate(t);const o=i&&this.client.core.linkModeSupportedApps.includes(i)&&((s=this.client.metadata.redirect)==null?void 0:s.linkMode),h=o?jt.link_mode:jt.relay;h===jt.relay&&await this.confirmOnlineStateOrThrow();const{chains:g,statement:y="",uri:_,domain:I,nonce:P,type:q,exp:O,nbf:L,methods:j=[],expiry:G}=t,Q=[...t.resources||[]],{topic:Z,uri:de}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:h});this.client.logger.info({message:"Generated new pairing",pairing:{topic:Z,uri:de}});const ce=await this.client.core.crypto.generateKeyPair(),ae=Gc(ce);if(await Promise.all([this.client.auth.authKeys.set(Jc,{responseTopic:ae,publicKey:ce}),this.client.auth.pairingTopics.set(ae,{topic:ae,pairingTopic:Z})]),await this.client.core.relayer.subscribe(ae,{transportType:h}),this.client.logger.info(`sending request to new pairing topic: ${Z}`),j.length>0){const{namespace:E}=ho(g[0]);let A=h7(E,"request",j);Vc(Q)&&(A=d7(A,Q.pop())),Q.push(A)}const he=G&&G>vr.wc_sessionAuthenticate.req.ttl?G:vr.wc_sessionAuthenticate.req.ttl,ue={authPayload:{type:q??"caip122",chains:g,statement:y,aud:_,domain:I,version:"1",nonce:P,iat:new Date().toISOString(),exp:O,nbf:L,resources:Q},requester:{publicKey:ce,metadata:this.client.metadata},expiryTimestamp:dr(he)},le={eip155:{chains:g,methods:[...new Set(["personal_sign",...j])],events:["chainChanged","accountsChanged"]}},Te={requiredNamespaces:{},optionalNamespaces:le,relays:[{protocol:"irn"}],pairingTopic:Z,proposer:{publicKey:ce,metadata:this.client.metadata},expiryTimestamp:dr(vr.wc_sessionPropose.req.ttl)},{done:lt,resolve:B,reject:v}=Ps(he,"Request expired"),c=async({error:E,session:A})=>{if(this.events.off(xt("session_request",p),d),E)v(E);else if(A){A.self.publicKey=ce,await this.client.session.set(A.topic,A),await this.setExpiry(A.topic,A.expiry),Z&&await this.client.core.pairing.updateMetadata({topic:Z,metadata:A.peer.metadata});const u=this.client.session.get(A.topic);await this.deleteProposal(w),B({session:u})}},d=async E=>{var A,u,l;if(await this.deletePendingAuthRequest(p,{message:"fulfilled",code:0}),E.error){const z=Bt("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return E.error.code===z.code?void 0:(this.events.off(xt("session_connect"),c),v(E.error.message))}await this.deleteProposal(w),this.events.off(xt("session_connect"),c);const{cacaos:R,responder:X}=E.result,ee=[],M=[];for(const z of R){await ep({cacao:z,projectId:this.client.core.projectId})||(this.client.logger.error(z,"Signature verification failed"),v(Bt("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:$}=z,b=Vc($.resources),k=[Z0($.iss)],W=cf($.iss);if(b){const ne=tp(b),se=rp(b);ee.push(...ne),k.push(...se)}for(const ne of k)M.push(`${ne}:${W}`)}const J=await this.client.core.crypto.generateSharedKey(ce,X.publicKey);let T;ee.length>0&&(T={topic:J,acknowledged:!0,self:{publicKey:ce,metadata:this.client.metadata},peer:X,controller:X.publicKey,expiry:dr(aa),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:Z,namespaces:hp([...new Set(ee)],[...new Set(M)]),transportType:h},await this.client.core.relayer.subscribe(J,{transportType:h}),await this.client.session.set(J,T),Z&&await this.client.core.pairing.updateMetadata({topic:Z,metadata:X.metadata}),T=this.client.session.get(J)),(A=this.client.metadata.redirect)!=null&&A.linkMode&&(u=X.metadata.redirect)!=null&&u.linkMode&&(l=X.metadata.redirect)!=null&&l.universal&&i&&(this.client.core.addLinkModeSupportedApp(X.metadata.redirect.universal),this.client.session.update(J,{transportType:jt.link_mode})),B({auths:R,session:T})},p=sa(),w=sa();this.events.once(xt("session_connect"),c),this.events.once(xt("session_request",p),d);let x;try{if(o){const E=Rs("wc_sessionAuthenticate",ue,p);this.client.core.history.set(Z,E);const A=await this.client.core.crypto.encode("",E,{type:Ro,encoding:Za});x=Lc(i,Z,A)}else await Promise.all([this.sendRequest({topic:Z,method:"wc_sessionAuthenticate",params:ue,expiry:t.expiry,throwOnFailedPublish:!0,clientRpcId:p}),this.sendRequest({topic:Z,method:"wc_sessionPropose",params:Te,expiry:vr.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:w})])}catch(E){throw this.events.off(xt("session_connect"),c),this.events.off(xt("session_request",p),d),E}return await this.setProposal(w,Xt({id:w},Te)),await this.setAuthRequest(p,{request:Wi(Xt({},ue),{verifyContext:{}}),pairingTopic:Z,transportType:h}),{uri:x??de,response:lt}},this.approveSessionAuthenticate=async t=>{const{id:i,auths:s}=t,o=this.client.core.eventClient.createEvent({properties:{topic:i.toString(),trace:[Ss.authenticated_session_approve_started]}});try{this.isInitialized()}catch(G){throw o.setError(ro.no_internet_connection),G}const h=this.getPendingAuthRequest(i);if(!h)throw o.setError(ro.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${i}`);const g=h.transportType||jt.relay;g===jt.relay&&await this.confirmOnlineStateOrThrow();const y=h.requester.publicKey,_=await this.client.core.crypto.generateKeyPair(),I=Gc(y),P={type:Vn,receiverPublicKey:y,senderPublicKey:_},q=[],O=[];for(const G of s){if(!await ep({cacao:G,projectId:this.client.core.projectId})){o.setError(ro.invalid_cacao);const ae=Bt("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:i,topic:I,error:ae,encodeOpts:P}),new Error(ae.message)}o.addTrace(Ss.cacaos_verified);const{p:Q}=G,Z=Vc(Q.resources),de=[Z0(Q.iss)],ce=cf(Q.iss);if(Z){const ae=tp(Z),he=rp(Z);q.push(...ae),de.push(...he)}for(const ae of de)O.push(`${ae}:${ce}`)}const L=await this.client.core.crypto.generateSharedKey(_,y);o.addTrace(Ss.create_authenticated_session_topic);let j;if((q==null?void 0:q.length)>0){j={topic:L,acknowledged:!0,self:{publicKey:_,metadata:this.client.metadata},peer:{publicKey:y,metadata:h.requester.metadata},controller:y,expiry:dr(aa),authentication:s,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:h.pairingTopic,namespaces:hp([...new Set(q)],[...new Set(O)]),transportType:g},o.addTrace(Ss.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(L,{transportType:g})}catch(G){throw o.setError(ro.subscribe_authenticated_session_topic_failure),G}o.addTrace(Ss.subscribe_authenticated_session_topic_success),await this.client.session.set(L,j),o.addTrace(Ss.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:h.pairingTopic,metadata:h.requester.metadata})}o.addTrace(Ss.publishing_authenticated_session_approve);try{await this.sendResult({topic:I,id:i,result:{cacaos:s,responder:{publicKey:_,metadata:this.client.metadata}},encodeOpts:P,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(h.requester.metadata,g)})}catch(G){throw o.setError(ro.authenticated_session_approve_publish_failure),G}return await this.client.auth.requests.delete(i,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:h.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:o.eventId}),{session:j}},this.rejectSessionAuthenticate=async t=>{this.isInitialized();const{id:i,reason:s}=t,o=this.getPendingAuthRequest(i);if(!o)throw new Error(`Could not find pending auth request with id ${i}`);o.transportType===jt.relay&&await this.confirmOnlineStateOrThrow();const h=o.requester.publicKey,g=await this.client.core.crypto.generateKeyPair(),y=Gc(h),_={type:Vn,receiverPublicKey:h,senderPublicKey:g};await this.sendError({id:i,topic:y,error:s,encodeOpts:_,rpcOpts:vr.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(o.requester.metadata,o.transportType)}),await this.client.auth.requests.delete(i,{message:"rejected",code:0}),await this.client.proposal.delete(i,Bt("USER_DISCONNECTED"))},this.formatAuthMessage=t=>{this.isInitialized();const{request:i,iss:s}=t;return ug(i,s)},this.processRelayMessageCache=()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const t=this.relayMessageCache.shift();t&&await this.onRelayMessage(t)}catch(t){this.client.logger.error(t)}},50)},this.cleanupDuplicatePairings=async t=>{if(t.pairingTopic)try{const i=this.client.core.pairing.pairings.get(t.pairingTopic),s=this.client.core.pairing.pairings.getAll().filter(o=>{var h,g;return((h=o.peerMetadata)==null?void 0:h.url)&&((g=o.peerMetadata)==null?void 0:g.url)===t.peer.metadata.url&&o.topic&&o.topic!==i.topic});if(s.length===0)return;this.client.logger.info(`Cleaning up ${s.length} duplicate pairing(s)`),await Promise.all(s.map(o=>this.client.core.pairing.disconnect({topic:o.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(i){this.client.logger.error(i)}},this.deleteSession=async t=>{var i;const{topic:s,expirerHasDeleted:o=!1,emitEvent:h=!0,id:g=0}=t,{self:y}=this.client.session.get(s);await this.client.core.relayer.unsubscribe(s),await this.client.session.delete(s,Bt("USER_DISCONNECTED")),this.addToRecentlyDeleted(s,"session"),this.client.core.crypto.keychain.has(y.publicKey)&&await this.client.core.crypto.deleteKeyPair(y.publicKey),this.client.core.crypto.keychain.has(s)&&await this.client.core.crypto.deleteSymKey(s),o||this.client.core.expirer.del(s),this.client.core.storage.removeItem(Bp).catch(_=>this.client.logger.warn(_)),this.getPendingSessionRequests().forEach(_=>{_.topic===s&&this.deletePendingSessionRequest(_.id,Bt("USER_DISCONNECTED"))}),s===((i=this.sessionRequestQueue.queue[0])==null?void 0:i.topic)&&(this.sessionRequestQueue.state=dn.idle),h&&this.client.events.emit("session_delete",{id:g,topic:s})},this.deleteProposal=async(t,i)=>{if(i)try{const s=this.client.proposal.get(t),o=this.client.core.eventClient.getEvent({topic:s.pairingTopic});o==null||o.setError(Is.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(t,Bt("USER_DISCONNECTED")),i?Promise.resolve():this.client.core.expirer.del(t)]),this.addToRecentlyDeleted(t,"proposal")},this.deletePendingSessionRequest=async(t,i,s=!1)=>{await Promise.all([this.client.pendingRequest.delete(t,i),s?Promise.resolve():this.client.core.expirer.del(t)]),this.addToRecentlyDeleted(t,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(o=>o.id!==t),s&&(this.sessionRequestQueue.state=dn.idle,this.client.events.emit("session_request_expire",{id:t}))},this.deletePendingAuthRequest=async(t,i,s=!1)=>{await Promise.all([this.client.auth.requests.delete(t,i),s?Promise.resolve():this.client.core.expirer.del(t)])},this.setExpiry=async(t,i)=>{this.client.session.keys.includes(t)&&(this.client.core.expirer.set(t,i),await this.client.session.update(t,{expiry:i}))},this.setProposal=async(t,i)=>{this.client.core.expirer.set(t,dr(vr.wc_sessionPropose.req.ttl)),await this.client.proposal.set(t,i)},this.setAuthRequest=async(t,i)=>{const{request:s,pairingTopic:o,transportType:h=jt.relay}=i;this.client.core.expirer.set(t,s.expiryTimestamp),await this.client.auth.requests.set(t,{authPayload:s.authPayload,requester:s.requester,expiryTimestamp:s.expiryTimestamp,id:t,pairingTopic:o,verifyContext:s.verifyContext,transportType:h})},this.setPendingSessionRequest=async t=>{const{id:i,topic:s,params:o,verifyContext:h}=t,g=o.request.expiryTimestamp||dr(vr.wc_sessionRequest.req.ttl);this.client.core.expirer.set(i,g),await this.client.pendingRequest.set(i,{id:i,topic:s,params:o,verifyContext:h})},this.sendRequest=async t=>{const{topic:i,method:s,params:o,expiry:h,relayRpcId:g,clientRpcId:y,throwOnFailedPublish:_,appLink:I}=t,P=Rs(s,o,y);let q;const O=!!I;try{const G=O?Za:fs;q=await this.client.core.crypto.encode(i,P,{encoding:G})}catch(G){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${i} failed`),G}let L;if(OM.includes(s)){const G=Fn(JSON.stringify(P)),Q=Fn(q);L=await this.client.core.verify.register({id:Q,decryptedId:G})}const j=vr[s].req;if(j.attestation=L,h&&(j.ttl=h),g&&(j.id=g),this.client.core.history.set(i,P),O){const G=Lc(I,i,q);await global.Linking.openURL(G,this.client.name)}else{const G=vr[s].req;h&&(G.ttl=h),g&&(G.id=g),_?(G.internal=Wi(Xt({},G.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(i,q,G)):this.client.core.relayer.publish(i,q,G).catch(Q=>this.client.logger.error(Q))}return P.id},this.sendResult=async t=>{const{id:i,topic:s,result:o,throwOnFailedPublish:h,encodeOpts:g,appLink:y}=t,_=pf(i,o);let I;const P=y&&typeof(global==null?void 0:global.Linking)<"u";try{const O=P?Za:fs;I=await this.client.core.crypto.encode(s,_,Wi(Xt({},g||{}),{encoding:O}))}catch(O){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${s} failed`),O}let q;try{q=await this.client.core.history.get(s,i)}catch(O){throw this.client.logger.error(`sendResult() -> history.get(${s}, ${i}) failed`),O}if(P){const O=Lc(y,s,I);await global.Linking.openURL(O,this.client.name)}else{const O=vr[q.request.method].res;h?(O.internal=Wi(Xt({},O.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(s,I,O)):this.client.core.relayer.publish(s,I,O).catch(L=>this.client.logger.error(L))}await this.client.core.history.resolve(_)},this.sendError=async t=>{const{id:i,topic:s,error:o,encodeOpts:h,rpcOpts:g,appLink:y}=t,_=uf(i,o);let I;const P=y&&typeof(global==null?void 0:global.Linking)<"u";try{const O=P?Za:fs;I=await this.client.core.crypto.encode(s,_,Wi(Xt({},h||{}),{encoding:O}))}catch(O){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${s} failed`),O}let q;try{q=await this.client.core.history.get(s,i)}catch(O){throw this.client.logger.error(`sendError() -> history.get(${s}, ${i}) failed`),O}if(P){const O=Lc(y,s,I);await global.Linking.openURL(O,this.client.name)}else{const O=g||vr[q.request.method].res;this.client.core.relayer.publish(s,I,O)}await this.client.core.history.resolve(_)},this.cleanup=async()=>{const t=[],i=[];this.client.session.getAll().forEach(s=>{let o=!1;ss(s.expiry)&&(o=!0),this.client.core.crypto.keychain.has(s.topic)||(o=!0),o&&t.push(s.topic)}),this.client.proposal.getAll().forEach(s=>{ss(s.expiryTimestamp)&&i.push(s.id)}),await Promise.all([...t.map(s=>this.deleteSession({topic:s})),...i.map(s=>this.deleteProposal(s))])},this.onRelayEventRequest=async t=>{this.requestQueue.queue.push(t),await this.processRequestsQueue()},this.processRequestsQueue=async()=>{if(this.requestQueue.state===dn.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=dn.active;const t=this.requestQueue.queue.shift();if(t)try{await this.processRequest(t)}catch(i){this.client.logger.warn(i)}}this.requestQueue.state=dn.idle},this.processRequest=async t=>{const{topic:i,payload:s,attestation:o,transportType:h,encryptedId:g}=t,y=s.method;if(!this.shouldIgnorePairingRequest({topic:i,requestMethod:y}))switch(y){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:i,payload:s,attestation:o,encryptedId:g});case"wc_sessionSettle":return await this.onSessionSettleRequest(i,s);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(i,s);case"wc_sessionExtend":return await this.onSessionExtendRequest(i,s);case"wc_sessionPing":return await this.onSessionPingRequest(i,s);case"wc_sessionDelete":return await this.onSessionDeleteRequest(i,s);case"wc_sessionRequest":return await this.onSessionRequest({topic:i,payload:s,attestation:o,encryptedId:g,transportType:h});case"wc_sessionEvent":return await this.onSessionEventRequest(i,s);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:i,payload:s,attestation:o,encryptedId:g,transportType:h});default:return this.client.logger.info(`Unsupported request method ${y}`)}},this.onRelayEventResponse=async t=>{const{topic:i,payload:s,transportType:o}=t,h=(await this.client.core.history.get(i,s.id)).request.method;switch(h){case"wc_sessionPropose":return this.onSessionProposeResponse(i,s,o);case"wc_sessionSettle":return this.onSessionSettleResponse(i,s);case"wc_sessionUpdate":return this.onSessionUpdateResponse(i,s);case"wc_sessionExtend":return this.onSessionExtendResponse(i,s);case"wc_sessionPing":return this.onSessionPingResponse(i,s);case"wc_sessionRequest":return this.onSessionRequestResponse(i,s);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(i,s);default:return this.client.logger.info(`Unsupported response method ${h}`)}},this.onRelayEventUnknownPayload=t=>{const{topic:i}=t,{message:s}=pe("MISSING_OR_INVALID",`Decoded payload on topic ${i} is not identifiable as a JSON-RPC request or a response.`);throw new Error(s)},this.shouldIgnorePairingRequest=t=>{const{topic:i,requestMethod:s}=t,o=this.expectedPairingMethodMap.get(i);return!o||o.includes(s)?!1:!!(o.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)},this.onSessionProposeRequest=async t=>{const{topic:i,payload:s,attestation:o,encryptedId:h}=t,{params:g,id:y}=s;try{const _=this.client.core.eventClient.getEvent({topic:i});this.isValidConnect(Xt({},s.params));const I=g.expiryTimestamp||dr(vr.wc_sessionPropose.req.ttl),P=Xt({id:y,pairingTopic:i,expiryTimestamp:I},g);await this.setProposal(y,P);const q=await this.getVerifyContext({attestationId:o,hash:Fn(JSON.stringify(s)),encryptedId:h,metadata:P.proposer.metadata});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),_==null||_.setError($n.proposal_listener_not_found)),_==null||_.addTrace(ln.emit_session_proposal),this.client.events.emit("session_proposal",{id:y,params:P,verifyContext:q})}catch(_){await this.sendError({id:y,topic:i,error:_,rpcOpts:vr.wc_sessionPropose.autoReject}),this.client.logger.error(_)}},this.onSessionProposeResponse=async(t,i,s)=>{const{id:o}=i;if(zn(i)){const{result:h}=i;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:h});const g=this.client.proposal.get(o);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:g});const y=g.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:y});const _=h.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:_});const I=await this.client.core.crypto.generateSharedKey(y,_);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:I});const P=await this.client.core.relayer.subscribe(I,{transportType:s});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:P}),await this.client.core.pairing.activate({topic:t})}else if(Zi(i)){await this.client.proposal.delete(o,Bt("USER_DISCONNECTED"));const h=xt("session_connect");if(this.events.listenerCount(h)===0)throw new Error(`emitting ${h} without any listeners, 954`);this.events.emit(xt("session_connect"),{error:i.error})}},this.onSessionSettleRequest=async(t,i)=>{const{id:s,params:o}=i;try{this.isValidSessionSettleRequest(o);const{relay:h,controller:g,expiry:y,namespaces:_,sessionProperties:I,sessionConfig:P}=i.params,q=Wi(Xt(Xt({topic:t,relay:h,expiry:y,namespaces:_,acknowledged:!0,pairingTopic:"",requiredNamespaces:{},optionalNamespaces:{},controller:g.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:g.publicKey,metadata:g.metadata}},I&&{sessionProperties:I}),P&&{sessionConfig:P}),{transportType:jt.relay}),O=xt("session_connect");if(this.events.listenerCount(O)===0)throw new Error(`emitting ${O} without any listeners 997`);this.events.emit(xt("session_connect"),{session:q}),await this.sendResult({id:i.id,topic:t,result:!0,throwOnFailedPublish:!0})}catch(h){await this.sendError({id:s,topic:t,error:h}),this.client.logger.error(h)}},this.onSessionSettleResponse=async(t,i)=>{const{id:s}=i;zn(i)?(await this.client.session.update(t,{acknowledged:!0}),this.events.emit(xt("session_approve",s),{})):Zi(i)&&(await this.client.session.delete(t,Bt("USER_DISCONNECTED")),this.events.emit(xt("session_approve",s),{error:i.error}))},this.onSessionUpdateRequest=async(t,i)=>{const{params:s,id:o}=i;try{const h=`${t}_session_update`,g=eo.get(h);if(g&&this.isRequestOutOfSync(g,o)){this.client.logger.info(`Discarding out of sync request - ${o}`),this.sendError({id:o,topic:t,error:Bt("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(Xt({topic:t},s));try{eo.set(h,o),await this.client.session.update(t,{namespaces:s.namespaces}),await this.sendResult({id:o,topic:t,result:!0,throwOnFailedPublish:!0})}catch(y){throw eo.delete(h),y}this.client.events.emit("session_update",{id:o,topic:t,params:s})}catch(h){await this.sendError({id:o,topic:t,error:h}),this.client.logger.error(h)}},this.isRequestOutOfSync=(t,i)=>parseInt(i.toString().slice(0,-3))<=parseInt(t.toString().slice(0,-3)),this.onSessionUpdateResponse=(t,i)=>{const{id:s}=i,o=xt("session_update",s);if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners`);zn(i)?this.events.emit(xt("session_update",s),{}):Zi(i)&&this.events.emit(xt("session_update",s),{error:i.error})},this.onSessionExtendRequest=async(t,i)=>{const{id:s}=i;try{this.isValidExtend({topic:t}),await this.setExpiry(t,dr(aa)),await this.sendResult({id:s,topic:t,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_extend",{id:s,topic:t})}catch(o){await this.sendError({id:s,topic:t,error:o}),this.client.logger.error(o)}},this.onSessionExtendResponse=(t,i)=>{const{id:s}=i,o=xt("session_extend",s);if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners`);zn(i)?this.events.emit(xt("session_extend",s),{}):Zi(i)&&this.events.emit(xt("session_extend",s),{error:i.error})},this.onSessionPingRequest=async(t,i)=>{const{id:s}=i;try{this.isValidPing({topic:t}),await this.sendResult({id:s,topic:t,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:s,topic:t})}catch(o){await this.sendError({id:s,topic:t,error:o}),this.client.logger.error(o)}},this.onSessionPingResponse=(t,i)=>{const{id:s}=i,o=xt("session_ping",s);if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners`);setTimeout(()=>{zn(i)?this.events.emit(xt("session_ping",s),{}):Zi(i)&&this.events.emit(xt("session_ping",s),{error:i.error})},500)},this.onSessionDeleteRequest=async(t,i)=>{const{id:s}=i;try{this.isValidDisconnect({topic:t,reason:i.params}),Promise.all([new Promise(o=>{this.client.core.relayer.once(zr.publish,async()=>{o(await this.deleteSession({topic:t,id:s}))})}),this.sendResult({id:s,topic:t,result:!0,throwOnFailedPublish:!0}),this.cleanupPendingSentRequestsForTopic({topic:t,error:Bt("USER_DISCONNECTED")})]).catch(o=>this.client.logger.error(o))}catch(o){this.client.logger.error(o)}},this.onSessionRequest=async t=>{var i,s,o;const{topic:h,payload:g,attestation:y,encryptedId:_,transportType:I}=t,{id:P,params:q}=g;try{await this.isValidRequest(Xt({topic:h},q));const O=this.client.session.get(h),L=await this.getVerifyContext({attestationId:y,hash:Fn(JSON.stringify(Rs("wc_sessionRequest",q,P))),encryptedId:_,metadata:O.peer.metadata,transportType:I}),j={id:P,topic:h,params:q,verifyContext:L};await this.setPendingSessionRequest(j),I===jt.link_mode&&(i=O.peer.metadata.redirect)!=null&&i.universal&&this.client.core.addLinkModeSupportedApp((s=O.peer.metadata.redirect)==null?void 0:s.universal),(o=this.client.signConfig)!=null&&o.disableRequestQueue?this.emitSessionRequest(j):(this.addSessionRequestToSessionRequestQueue(j),this.processSessionRequestQueue())}catch(O){await this.sendError({id:P,topic:h,error:O}),this.client.logger.error(O)}},this.onSessionRequestResponse=(t,i)=>{const{id:s}=i,o=xt("session_request",s);if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners`);zn(i)?this.events.emit(xt("session_request",s),{result:i.result}):Zi(i)&&this.events.emit(xt("session_request",s),{error:i.error})},this.onSessionEventRequest=async(t,i)=>{const{id:s,params:o}=i;try{const h=`${t}_session_event_${o.event.name}`,g=eo.get(h);if(g&&this.isRequestOutOfSync(g,s)){this.client.logger.info(`Discarding out of sync request - ${s}`);return}this.isValidEmit(Xt({topic:t},o)),this.client.events.emit("session_event",{id:s,topic:t,params:o}),eo.set(h,s)}catch(h){await this.sendError({id:s,topic:t,error:h}),this.client.logger.error(h)}},this.onSessionAuthenticateResponse=(t,i)=>{const{id:s}=i;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:t,payload:i}),zn(i)?this.events.emit(xt("session_request",s),{result:i.result}):Zi(i)&&this.events.emit(xt("session_request",s),{error:i.error})},this.onSessionAuthenticateRequest=async t=>{var i;const{topic:s,payload:o,attestation:h,encryptedId:g,transportType:y}=t;try{const{requester:_,authPayload:I,expiryTimestamp:P}=o.params,q=await this.getVerifyContext({attestationId:h,hash:Fn(JSON.stringify(o)),encryptedId:g,metadata:_.metadata,transportType:y}),O={requester:_,pairingTopic:s,id:o.id,authPayload:I,verifyContext:q,expiryTimestamp:P};await this.setAuthRequest(o.id,{request:O,pairingTopic:s,transportType:y}),y===jt.link_mode&&(i=_.metadata.redirect)!=null&&i.universal&&this.client.core.addLinkModeSupportedApp(_.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:s,params:o.params,id:o.id,verifyContext:q})}catch(_){this.client.logger.error(_);const I=o.params.requester.publicKey,P=await this.client.core.crypto.generateKeyPair(),q=this.getAppLinkIfEnabled(o.params.requester.metadata,y),O={type:Vn,receiverPublicKey:I,senderPublicKey:P};await this.sendError({id:o.id,topic:s,error:_,encodeOpts:O,rpcOpts:vr.wc_sessionAuthenticate.autoReject,appLink:q})}},this.addSessionRequestToSessionRequestQueue=t=>{this.sessionRequestQueue.queue.push(t)},this.cleanupAfterResponse=t=>{this.deletePendingSessionRequest(t.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=dn.idle,this.processSessionRequestQueue()},be.toMiliseconds(this.requestQueueDelay))},this.cleanupPendingSentRequestsForTopic=({topic:t,error:i})=>{const s=this.client.core.history.pending;s.length>0&&s.filter(o=>o.topic===t&&o.request.method==="wc_sessionRequest").forEach(o=>{const h=o.request.id,g=xt("session_request",h);if(this.events.listenerCount(g)===0)throw new Error(`emitting ${g} without any listeners`);this.events.emit(xt("session_request",o.request.id),{error:i})})},this.processSessionRequestQueue=()=>{if(this.sessionRequestQueue.state===dn.active){this.client.logger.info("session request queue is already active.");return}const t=this.sessionRequestQueue.queue[0];if(!t){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=dn.active,this.emitSessionRequest(t)}catch(i){this.client.logger.error(i)}},this.emitSessionRequest=t=>{this.client.events.emit("session_request",t)},this.onPairingCreated=t=>{if(t.methods&&this.expectedPairingMethodMap.set(t.topic,t.methods),t.active)return;const i=this.client.proposal.getAll().find(s=>s.pairingTopic===t.topic);i&&this.onSessionProposeRequest({topic:t.topic,payload:Rs("wc_sessionPropose",{requiredNamespaces:i.requiredNamespaces,optionalNamespaces:i.optionalNamespaces,relays:i.relays,proposer:i.proposer,sessionProperties:i.sessionProperties},i.id)})},this.isValidConnect=async t=>{if(!Zr(t)){const{message:y}=pe("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(t)}`);throw new Error(y)}const{pairingTopic:i,requiredNamespaces:s,optionalNamespaces:o,sessionProperties:h,relays:g}=t;if(ti(i)||await this.isValidPairingTopic(i),!r9(g)){const{message:y}=pe("MISSING_OR_INVALID",`connect() relays: ${g}`);throw new Error(y)}!ti(s)&&Ao(s)!==0&&this.validateNamespaces(s,"requiredNamespaces"),!ti(o)&&Ao(o)!==0&&this.validateNamespaces(o,"optionalNamespaces"),ti(h)||this.validateSessionProps(h,"sessionProperties")},this.validateNamespaces=(t,i)=>{const s=t9(t,"connect()",i);if(s)throw new Error(s.message)},this.isValidApprove=async t=>{if(!Zr(t))throw new Error(pe("MISSING_OR_INVALID",`approve() params: ${t}`).message);const{id:i,namespaces:s,relayProtocol:o,sessionProperties:h}=t;this.checkRecentlyDeleted(i),await this.isValidProposalId(i);const g=this.client.proposal.get(i),y=au(s,"approve()");if(y)throw new Error(y.message);const _=lp(g.requiredNamespaces,s,"approve()");if(_)throw new Error(_.message);if(!sr(o,!0)){const{message:I}=pe("MISSING_OR_INVALID",`approve() relayProtocol: ${o}`);throw new Error(I)}ti(h)||this.validateSessionProps(h,"sessionProperties")},this.isValidReject=async t=>{if(!Zr(t)){const{message:o}=pe("MISSING_OR_INVALID",`reject() params: ${t}`);throw new Error(o)}const{id:i,reason:s}=t;if(this.checkRecentlyDeleted(i),await this.isValidProposalId(i),!n9(s)){const{message:o}=pe("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(s)}`);throw new Error(o)}},this.isValidSessionSettleRequest=t=>{if(!Zr(t)){const{message:_}=pe("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${t}`);throw new Error(_)}const{relay:i,controller:s,namespaces:o,expiry:h}=t;if(!yg(i)){const{message:_}=pe("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(_)}const g=Q7(s,"onSessionSettleRequest()");if(g)throw new Error(g.message);const y=au(o,"onSessionSettleRequest()");if(y)throw new Error(y.message);if(ss(h)){const{message:_}=pe("EXPIRED","onSessionSettleRequest()");throw new Error(_)}},this.isValidUpdate=async t=>{if(!Zr(t)){const{message:y}=pe("MISSING_OR_INVALID",`update() params: ${t}`);throw new Error(y)}const{topic:i,namespaces:s}=t;this.checkRecentlyDeleted(i),await this.isValidSessionTopic(i);const o=this.client.session.get(i),h=au(s,"update()");if(h)throw new Error(h.message);const g=lp(o.requiredNamespaces,s,"update()");if(g)throw new Error(g.message)},this.isValidExtend=async t=>{if(!Zr(t)){const{message:s}=pe("MISSING_OR_INVALID",`extend() params: ${t}`);throw new Error(s)}const{topic:i}=t;this.checkRecentlyDeleted(i),await this.isValidSessionTopic(i)},this.isValidRequest=async t=>{if(!Zr(t)){const{message:y}=pe("MISSING_OR_INVALID",`request() params: ${t}`);throw new Error(y)}const{topic:i,request:s,chainId:o,expiry:h}=t;this.checkRecentlyDeleted(i),await this.isValidSessionTopic(i);const{namespaces:g}=this.client.session.get(i);if(!dp(g,o)){const{message:y}=pe("MISSING_OR_INVALID",`request() chainId: ${o}`);throw new Error(y)}if(!s9(s)){const{message:y}=pe("MISSING_OR_INVALID",`request() ${JSON.stringify(s)}`);throw new Error(y)}if(!c9(g,o,s.method)){const{message:y}=pe("MISSING_OR_INVALID",`request() method: ${s.method}`);throw new Error(y)}if(h&&!d9(h,uu)){const{message:y}=pe("MISSING_OR_INVALID",`request() expiry: ${h}. Expiry must be a number (in seconds) between ${uu.min} and ${uu.max}`);throw new Error(y)}},this.isValidRespond=async t=>{var i;if(!Zr(t)){const{message:h}=pe("MISSING_OR_INVALID",`respond() params: ${t}`);throw new Error(h)}const{topic:s,response:o}=t;try{await this.isValidSessionTopic(s)}catch(h){throw(i=t==null?void 0:t.response)!=null&&i.id&&this.cleanupAfterResponse(t),h}if(!a9(o)){const{message:h}=pe("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(o)}`);throw new Error(h)}},this.isValidPing=async t=>{if(!Zr(t)){const{message:s}=pe("MISSING_OR_INVALID",`ping() params: ${t}`);throw new Error(s)}const{topic:i}=t;await this.isValidSessionOrPairingTopic(i)},this.isValidEmit=async t=>{if(!Zr(t)){const{message:g}=pe("MISSING_OR_INVALID",`emit() params: ${t}`);throw new Error(g)}const{topic:i,event:s,chainId:o}=t;await this.isValidSessionTopic(i);const{namespaces:h}=this.client.session.get(i);if(!dp(h,o)){const{message:g}=pe("MISSING_OR_INVALID",`emit() chainId: ${o}`);throw new Error(g)}if(!o9(s)){const{message:g}=pe("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(g)}if(!f9(h,o,s.name)){const{message:g}=pe("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(g)}},this.isValidDisconnect=async t=>{if(!Zr(t)){const{message:s}=pe("MISSING_OR_INVALID",`disconnect() params: ${t}`);throw new Error(s)}const{topic:i}=t;await this.isValidSessionOrPairingTopic(i)},this.isValidAuthenticate=t=>{const{chains:i,uri:s,domain:o,nonce:h}=t;if(!Array.isArray(i)||i.length===0)throw new Error("chains is required and must be a non-empty array");if(!sr(s,!1))throw new Error("uri is required parameter");if(!sr(o,!1))throw new Error("domain is required parameter");if(!sr(h,!1))throw new Error("nonce is required parameter");if([...new Set(i.map(y=>ho(y).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:g}=ho(i[0]);if(g!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")},this.getVerifyContext=async t=>{const{attestationId:i,hash:s,encryptedId:o,metadata:h,transportType:g}=t,y={verified:{verifyUrl:h.verifyUrl||go,validation:"UNKNOWN",origin:h.url||""}};try{if(g===jt.link_mode){const I=this.getAppLinkIfEnabled(h,g);return y.verified.validation=I&&new URL(I).origin===new URL(h.url).origin?"VALID":"INVALID",y}const _=await this.client.core.verify.resolve({attestationId:i,hash:s,encryptedId:o,verifyUrl:h.verifyUrl});_&&(y.verified.origin=_.origin,y.verified.isScam=_.isScam,y.verified.validation=_.origin===new URL(h.url).origin?"VALID":"INVALID")}catch(_){this.client.logger.warn(_)}return this.client.logger.debug(`Verify context: ${JSON.stringify(y)}`),y},this.validateSessionProps=(t,i)=>{Object.values(t).forEach(s=>{if(!sr(s,!1)){const{message:o}=pe("MISSING_OR_INVALID",`${i} must be in Record<string, string> format. Received: ${JSON.stringify(s)}`);throw new Error(o)}})},this.getPendingAuthRequest=t=>{const i=this.client.auth.requests.get(t);return typeof i=="object"?i:void 0},this.addToRecentlyDeleted=(t,i)=>{if(this.recentlyDeletedMap.set(t,i),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let s=0;const o=this.recentlyDeletedLimit/2;for(const h of this.recentlyDeletedMap.keys()){if(s++>=o)break;this.recentlyDeletedMap.delete(h)}}},this.checkRecentlyDeleted=t=>{const i=this.recentlyDeletedMap.get(t);if(i){const{message:s}=pe("MISSING_OR_INVALID",`Record was recently deleted - ${i}: ${t}`);throw new Error(s)}},this.isLinkModeEnabled=(t,i)=>{var s,o,h,g,y,_,I,P,q;return!t||i!==jt.link_mode?!1:((o=(s=this.client.metadata)==null?void 0:s.redirect)==null?void 0:o.linkMode)===!0&&((g=(h=this.client.metadata)==null?void 0:h.redirect)==null?void 0:g.universal)!==void 0&&((_=(y=this.client.metadata)==null?void 0:y.redirect)==null?void 0:_.universal)!==""&&((I=t==null?void 0:t.redirect)==null?void 0:I.universal)!==void 0&&((P=t==null?void 0:t.redirect)==null?void 0:P.universal)!==""&&((q=t==null?void 0:t.redirect)==null?void 0:q.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(t.redirect.universal)&&typeof(global==null?void 0:global.Linking)<"u"},this.getAppLinkIfEnabled=(t,i)=>{var s;return this.isLinkModeEnabled(t,i)?(s=t==null?void 0:t.redirect)==null?void 0:s.universal:void 0},this.handleLinkModeMessage=({url:t})=>{if(!t||!t.includes("wc_ev")||!t.includes("topic"))return;const i=P0(t,"topic")||"",s=decodeURIComponent(P0(t,"wc_ev")||""),o=this.client.session.keys.includes(i);o&&this.client.session.update(i,{transportType:jt.link_mode}),this.client.core.dispatchEnvelope({topic:i,message:s,sessionExists:o})},this.registerLinkModeListeners=async()=>{var t;if(typeof process<"u"&&PM.IS_VITEST||Ma()&&(t=this.client.metadata.redirect)!=null&&t.linkMode){const i=global==null?void 0:global.Linking;if(typeof i<"u"){i.addEventListener("url",this.handleLinkModeMessage,this.client.name);const s=await i.getInitialURL();s&&setTimeout(()=>{this.handleLinkModeMessage({url:s})},50)}}}}isInitialized(){if(!this.initialized){const{message:e}=pe("NOT_INITIALIZED",this.name);throw new Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(zr.message,e=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(e):this.onRelayMessage(e)})}async onRelayMessage(e){const{topic:t,message:i,attestation:s,transportType:o}=e,{publicKey:h}=this.client.auth.authKeys.keys.includes(Jc)?this.client.auth.authKeys.get(Jc):{responseTopic:void 0,publicKey:void 0},g=await this.client.core.crypto.decode(t,i,{receiverPublicKey:h,encoding:o===jt.link_mode?Za:fs});try{Du(g)?(this.client.core.history.set(t,g),this.onRelayEventRequest({topic:t,payload:g,attestation:s,transportType:o,encryptedId:Fn(i)})):df(g)?(await this.client.core.history.resolve(g),await this.onRelayEventResponse({topic:t,payload:g,transportType:o}),this.client.core.history.delete(t,g.id)):this.onRelayEventUnknownPayload({topic:t,payload:g,transportType:o})}catch(y){this.client.logger.error(y)}}registerExpirerEvents(){this.client.core.expirer.on(Ri.expired,async e=>{const{topic:t,id:i}=R1(e.target);if(i&&this.client.pendingRequest.keys.includes(i))return await this.deletePendingSessionRequest(i,pe("EXPIRED"),!0);if(i&&this.client.auth.requests.keys.includes(i))return await this.deletePendingAuthRequest(i,pe("EXPIRED"),!0);t?this.client.session.keys.includes(t)&&(await this.deleteSession({topic:t,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:t})):i&&(await this.deleteProposal(i,!0),this.client.events.emit("proposal_expire",{id:i}))})}registerPairingEvents(){this.client.core.pairing.events.on(ua.create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(ua.delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!sr(e,!1)){const{message:t}=pe("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(t)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:t}=pe("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(t)}if(ss(this.client.core.pairing.pairings.get(e).expiry)){const{message:t}=pe("EXPIRED",`pairing topic: ${e}`);throw new Error(t)}}async isValidSessionTopic(e){if(!sr(e,!1)){const{message:t}=pe("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(t)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){const{message:t}=pe("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(t)}if(ss(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:t}=pe("EXPIRED",`session topic: ${e}`);throw new Error(t)}if(!this.client.core.crypto.keychain.has(e)){const{message:t}=pe("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(t)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(sr(e,!1)){const{message:t}=pe("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(t)}else{const{message:t}=pe("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(t)}}async isValidProposalId(e){if(!i9(e)){const{message:t}=pe("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(t)}if(!this.client.proposal.keys.includes(e)){const{message:t}=pe("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(t)}if(ss(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:t}=pe("EXPIRED",`proposal id: ${e}`);throw new Error(t)}}}class KM extends zs{constructor(e,t){super(e,t,RM,td),this.core=e,this.logger=t}}class VM extends zs{constructor(e,t){super(e,t,CM,td),this.core=e,this.logger=t}}class GM extends zs{constructor(e,t){super(e,t,TM,td,i=>i.id),this.core=e,this.logger=t}}class JM extends zs{constructor(e,t){super(e,t,kM,Pf,()=>Jc),this.core=e,this.logger=t}}class QM extends zs{constructor(e,t){super(e,t,BM,Pf),this.core=e,this.logger=t}}class YM extends zs{constructor(e,t){super(e,t,LM,Pf,i=>i.id),this.core=e,this.logger=t}}class WM{constructor(e,t){this.core=e,this.logger=t,this.authKeys=new JM(this.core,this.logger),this.pairingTopics=new QM(this.core,this.logger),this.requests=new YM(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}let XM=class Fg extends N9{constructor(e){super(e),this.protocol=Lg,this.version=zg,this.name=hu.name,this.events=new qi.EventEmitter,this.on=(i,s)=>this.events.on(i,s),this.once=(i,s)=>this.events.once(i,s),this.off=(i,s)=>this.events.off(i,s),this.removeListener=(i,s)=>this.events.removeListener(i,s),this.removeAllListeners=i=>this.events.removeAllListeners(i),this.connect=async i=>{try{return await this.engine.connect(i)}catch(s){throw this.logger.error(s.message),s}},this.pair=async i=>{try{return await this.engine.pair(i)}catch(s){throw this.logger.error(s.message),s}},this.approve=async i=>{try{return await this.engine.approve(i)}catch(s){throw this.logger.error(s.message),s}},this.reject=async i=>{try{return await this.engine.reject(i)}catch(s){throw this.logger.error(s.message),s}},this.update=async i=>{try{return await this.engine.update(i)}catch(s){throw this.logger.error(s.message),s}},this.extend=async i=>{try{return await this.engine.extend(i)}catch(s){throw this.logger.error(s.message),s}},this.request=async i=>{try{return await this.engine.request(i)}catch(s){throw this.logger.error(s.message),s}},this.respond=async i=>{try{return await this.engine.respond(i)}catch(s){throw this.logger.error(s.message),s}},this.ping=async i=>{try{return await this.engine.ping(i)}catch(s){throw this.logger.error(s.message),s}},this.emit=async i=>{try{return await this.engine.emit(i)}catch(s){throw this.logger.error(s.message),s}},this.disconnect=async i=>{try{return await this.engine.disconnect(i)}catch(s){throw this.logger.error(s.message),s}},this.find=i=>{try{return this.engine.find(i)}catch(s){throw this.logger.error(s.message),s}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(i){throw this.logger.error(i.message),i}},this.authenticate=async(i,s)=>{try{return await this.engine.authenticate(i,s)}catch(o){throw this.logger.error(o.message),o}},this.formatAuthMessage=i=>{try{return this.engine.formatAuthMessage(i)}catch(s){throw this.logger.error(s.message),s}},this.approveSessionAuthenticate=async i=>{try{return await this.engine.approveSessionAuthenticate(i)}catch(s){throw this.logger.error(s.message),s}},this.rejectSessionAuthenticate=async i=>{try{return await this.engine.rejectSessionAuthenticate(i)}catch(s){throw this.logger.error(s.message),s}},this.name=(e==null?void 0:e.name)||hu.name,this.metadata=(e==null?void 0:e.metadata)||c5(),this.signConfig=e==null?void 0:e.signConfig;const t=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:qu(lf({level:(e==null?void 0:e.logger)||hu.logger}));this.core=(e==null?void 0:e.core)||new SM(e),this.logger=jr(t,this.name),this.session=new VM(this.core,this.logger),this.proposal=new KM(this.core,this.logger),this.pendingRequest=new GM(this.core,this.logger),this.engine=new HM(this),this.auth=new WM(this.core,this.logger)}static async init(e){const t=new Fg(e);return await t.initialize(),t}get context(){return pi(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success"),this.engine.processRelayMessageCache()}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};const $p="error",ZM="wss://relay.walletconnect.com",ex="wc",tx="universal_provider",Up=`${ex}@2:${tx}:`,rx="https://rpc.walletconnect.com/v1/",ca="generic",an={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};var so=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ru={exports:{}};/**
* @license
* Lodash <https://lodash.com/>
* Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
* Released under MIT license <https://lodash.com/license>
* Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
* Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
*/(function(r,e){(function(){var t,i="4.17.21",s=200,o="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",h="Expected a function",g="Invalid `variable` option passed into `_.template`",y="__lodash_hash_undefined__",_=500,I="__lodash_placeholder__",P=1,q=2,O=4,L=1,j=2,G=1,Q=2,Z=4,de=8,ce=16,ae=32,he=64,ue=128,le=256,Te=512,lt=30,B="...",v=800,c=16,d=1,p=2,w=3,x=1/0,E=9007199254740991,A=17976931348623157e292,u=NaN,l=4294967295,R=l-1,X=l>>>1,ee=[["ary",ue],["bind",G],["bindKey",Q],["curry",de],["curryRight",ce],["flip",Te],["partial",ae],["partialRight",he],["rearg",le]],M="[object Arguments]",J="[object Array]",T="[object AsyncFunction]",z="[object Boolean]",$="[object Date]",b="[object DOMException]",k="[object Error]",W="[object Function]",ne="[object GeneratorFunction]",se="[object Map]",ge="[object Number]",ve="[object Null]",Oe="[object Object]",nt="[object Promise]",Ee="[object Proxy]",Ve="[object RegExp]",Le="[object Set]",_e="[object String]",Fe="[object Symbol]",Ge="[object Undefined]",me="[object WeakMap]",je="[object WeakSet]",De="[object ArrayBuffer]",we="[object DataView]",Qe="[object Float32Array]",ze="[object Float64Array]",Se="[object Int8Array]",ot="[object Int16Array]",ft="[object Int32Array]",qe="[object Uint8Array]",ct="[object Uint8ClampedArray]",ht="[object Uint16Array]",ke="[object Uint32Array]",wt=/\b__p \+= '';/g,ut=/\b(__p \+=) '' \+/g,$e=/(__e\(.*?\)|\b__t\)) \+\n'';/g,At=/&(?:amp|lt|gt|quot|#39);/g,Et=/[&<>"']/g,Ae=RegExp(At.source),He=RegExp(Et.source),Ye=/<%-([\s\S]+?)%>/g,Me=/<%([\s\S]+?)%>/g,Je=/<%=([\s\S]+?)%>/g,Ke=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Pe=/^\w*$/,st=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,We=/[\\^$.*+?()[\]{}|]/g,Re=RegExp(We.source),Xe=/^\s+/,et=/\s/,xe=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ue=/\{\n\/\* \[wrapped with (.+)\] \*/,at=/,? & /,Ce=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Nt=/[()=,{}\[\]\/\s]/,Tt=/\\(\\)?/g,tt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,bt=/\w*$/,Er=/^[-+]0x[0-9a-f]+$/i,Ir=/^0b[01]+$/i,Sr=/^\[object .+?Constructor\]$/,Pr=/^0o[0-7]+$/i,Rr=/^(?:0|[1-9]\d*)$/,Yt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Hr=/($^)/,Bi=/['\n\r\u2028\u2029\\]/g,Kr="\\ud800-\\udfff",Li="\\u0300-\\u036f",zi="\\ufe20-\\ufe2f",Vr="\\u20d0-\\u20ff",vi=Li+zi+Vr,bi="\\u2700-\\u27bf",cr="a-z\\xdf-\\xf6\\xf8-\\xff",$i="\\xac\\xb1\\xd7\\xf7",Ui="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Fi="\\u2000-\\u206f",us=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",No="A-Z\\xc0-\\xd6\\xd8-\\xde",To="\\ufe0e\\ufe0f",ds=$i+Ui+Fi+us,Na="[']",ls="["+Kr+"]",Ta="["+ds+"]",ps="["+vi+"]",Oo="\\d+",Rf="["+bi+"]",qo="["+cr+"]",Do="[^"+Kr+ds+Oo+bi+cr+No+"]",Fs="\\ud83c[\\udffb-\\udfff]",Cf="(?:"+ps+"|"+Fs+")",ko="[^"+Kr+"]",js="(?:\\ud83c[\\udde6-\\uddff]){2}",Jn="[\\ud800-\\udbff][\\udc00-\\udfff]",si="["+No+"]",Bo="\\u200d",Lo="(?:"+qo+"|"+Do+")",on="(?:"+si+"|"+Do+")",zo="(?:"+Na+"(?:d|ll|m|re|s|t|ve))?",$o="(?:"+Na+"(?:D|LL|M|RE|S|T|VE))?",Uo=Cf+"?",Fo="["+To+"]?",Nf="(?:"+Bo+"(?:"+[ko,js,Jn].join("|")+")"+Fo+Uo+")*",Pn="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",jo="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Ho=Fo+Uo+Nf,Hs="(?:"+[Rf,js,Jn].join("|")+")"+Ho,Tf="(?:"+[ko+ps+"?",ps,js,Jn,ls].join("|")+")",Oa=RegExp(Na,"g"),Of=RegExp(ps,"g"),Ks=RegExp(Fs+"(?="+Fs+")|"+Tf+Ho,"g"),Ko=RegExp([si+"?"+qo+"+"+zo+"(?="+[Ta,si,"$"].join("|")+")",on+"+"+$o+"(?="+[Ta,si+Lo,"$"].join("|")+")",si+"?"+Lo+"+"+zo,si+"+"+$o,jo,Pn,Oo,Hs].join("|"),"g"),Vo=RegExp("["+Bo+Kr+vi+To+"]"),gs=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Go=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],qf=-1,zt={};zt[Qe]=zt[ze]=zt[Se]=zt[ot]=zt[ft]=zt[qe]=zt[ct]=zt[ht]=zt[ke]=!0,zt[M]=zt[J]=zt[De]=zt[z]=zt[we]=zt[$]=zt[k]=zt[W]=zt[se]=zt[ge]=zt[Oe]=zt[Ve]=zt[Le]=zt[_e]=zt[me]=!1;var Lt={};Lt[M]=Lt[J]=Lt[De]=Lt[we]=Lt[z]=Lt[$]=Lt[Qe]=Lt[ze]=Lt[Se]=Lt[ot]=Lt[ft]=Lt[se]=Lt[ge]=Lt[Oe]=Lt[Ve]=Lt[Le]=Lt[_e]=Lt[Fe]=Lt[qe]=Lt[ct]=Lt[ht]=Lt[ke]=!0,Lt[k]=Lt[W]=Lt[me]=!1;var D={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},H={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},oe={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Ie={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},$t=parseFloat,pt=parseInt,Kt=typeof so=="object"&&so&&so.Object===Object&&so,ar=typeof self=="object"&&self&&self.Object===Object&&self,Rt=Kt||ar||Function("return this")(),Ut=e&&!e.nodeType&&e,tr=Ut&&!0&&r&&!r.nodeType&&r,Gr=tr&&tr.exports===Ut,or=Gr&&Kt.process,Vt=function(){try{var K=tr&&tr.require&&tr.require("util").types;return K||or&&or.binding&&or.binding("util")}catch{}}(),qr=Vt&&Vt.isArrayBuffer,ji=Vt&&Vt.isDate,mi=Vt&&Vt.isMap,cn=Vt&&Vt.isRegExp,qa=Vt&&Vt.isSet,vs=Vt&&Vt.isTypedArray;function lr(K,te,Y){switch(Y.length){case 0:return K.call(te);case 1:return K.call(te,Y[0]);case 2:return K.call(te,Y[0],Y[1]);case 3:return K.call(te,Y[0],Y[1],Y[2])}return K.apply(te,Y)}function Kg(K,te,Y,Ne){for(var dt=-1,Ot=K==null?0:K.length;++dt<Ot;){var fr=K[dt];te(Ne,fr,Y(fr),K)}return Ne}function yi(K,te){for(var Y=-1,Ne=K==null?0:K.length;++Y<Ne&&te(K[Y],Y,K)!==!1;);return K}function Vg(K,te){for(var Y=K==null?0:K.length;Y--&&te(K[Y],Y,K)!==!1;);return K}function nd(K,te){for(var Y=-1,Ne=K==null?0:K.length;++Y<Ne;)if(!te(K[Y],Y,K))return!1;return!0}function Qn(K,te){for(var Y=-1,Ne=K==null?0:K.length,dt=0,Ot=[];++Y<Ne;){var fr=K[Y];te(fr,Y,K)&&(Ot[dt++]=fr)}return Ot}function Jo(K,te){var Y=K==null?0:K.length;return!!Y&&Vs(K,te,0)>-1}function Df(K,te,Y){for(var Ne=-1,dt=K==null?0:K.length;++Ne<dt;)if(Y(te,K[Ne]))return!0;return!1}function Jt(K,te){for(var Y=-1,Ne=K==null?0:K.length,dt=Array(Ne);++Y<Ne;)dt[Y]=te(K[Y],Y,K);return dt}function Yn(K,te){for(var Y=-1,Ne=te.length,dt=K.length;++Y<Ne;)K[dt+Y]=te[Y];return K}function kf(K,te,Y,Ne){var dt=-1,Ot=K==null?0:K.length;for(Ne&&Ot&&(Y=K[++dt]);++dt<Ot;)Y=te(Y,K[dt],dt,K);return Y}function Gg(K,te,Y,Ne){var dt=K==null?0:K.length;for(Ne&&dt&&(Y=K[--dt]);dt--;)Y=te(Y,K[dt],dt,K);return Y}function Bf(K,te){for(var Y=-1,Ne=K==null?0:K.length;++Y<Ne;)if(te(K[Y],Y,K))return!0;return!1}var Jg=Lf("length");function Qg(K){return K.split("")}function Yg(K){return K.match(Ce)||[]}function sd(K,te,Y){var Ne;return Y(K,function(dt,Ot,fr){if(te(dt,Ot,fr))return Ne=Ot,!1}),Ne}function Qo(K,te,Y,Ne){for(var dt=K.length,Ot=Y+(Ne?1:-1);Ne?Ot--:++Ot<dt;)if(te(K[Ot],Ot,K))return Ot;return-1}function Vs(K,te,Y){return te===te?cv(K,te,Y):Qo(K,ad,Y)}function Wg(K,te,Y,Ne){for(var dt=Y-1,Ot=K.length;++dt<Ot;)if(Ne(K[dt],te))return dt;return-1}function ad(K){return K!==K}function od(K,te){var Y=K==null?0:K.length;return Y?$f(K,te)/Y:u}function Lf(K){return function(te){return te==null?t:te[K]}}function zf(K){return function(te){return K==null?t:K[te]}}function cd(K,te,Y,Ne,dt){return dt(K,function(Ot,fr,Ft){Y=Ne?(Ne=!1,Ot):te(Y,Ot,fr,Ft)}),Y}function Xg(K,te){var Y=K.length;for(K.sort(te);Y--;)K[Y]=K[Y].value;return K}function $f(K,te){for(var Y,Ne=-1,dt=K.length;++Ne<dt;){var Ot=te(K[Ne]);Ot!==t&&(Y=Y===t?Ot:Y+Ot)}return Y}function Uf(K,te){for(var Y=-1,Ne=Array(K);++Y<K;)Ne[Y]=te(Y);return Ne}function Zg(K,te){return Jt(te,function(Y){return[Y,K[Y]]})}function fd(K){return K&&K.slice(0,ld(K)+1).replace(Xe,"")}function ai(K){return function(te){return K(te)}}function Ff(K,te){return Jt(te,function(Y){return K[Y]})}function Da(K,te){return K.has(te)}function hd(K,te){for(var Y=-1,Ne=K.length;++Y<Ne&&Vs(te,K[Y],0)>-1;);return Y}function ud(K,te){for(var Y=K.length;Y--&&Vs(te,K[Y],0)>-1;);return Y}function ev(K,te){for(var Y=K.length,Ne=0;Y--;)K[Y]===te&&++Ne;return Ne}var tv=zf(D),rv=zf(H);function iv(K){return"\\"+Ie[K]}function nv(K,te){return K==null?t:K[te]}function Gs(K){return Vo.test(K)}function sv(K){return gs.test(K)}function av(K){for(var te,Y=[];!(te=K.next()).done;)Y.push(te.value);return Y}function jf(K){var te=-1,Y=Array(K.size);return K.forEach(function(Ne,dt){Y[++te]=[dt,Ne]}),Y}function dd(K,te){return function(Y){return K(te(Y))}}function Wn(K,te){for(var Y=-1,Ne=K.length,dt=0,Ot=[];++Y<Ne;){var fr=K[Y];(fr===te||fr===I)&&(K[Y]=I,Ot[dt++]=Y)}return Ot}function Yo(K){var te=-1,Y=Array(K.size);return K.forEach(function(Ne){Y[++te]=Ne}),Y}function ov(K){var te=-1,Y=Array(K.size);return K.forEach(function(Ne){Y[++te]=[Ne,Ne]}),Y}function cv(K,te,Y){for(var Ne=Y-1,dt=K.length;++Ne<dt;)if(K[Ne]===te)return Ne;return-1}function fv(K,te,Y){for(var Ne=Y+1;Ne--;)if(K[Ne]===te)return Ne;return Ne}function Js(K){return Gs(K)?uv(K):Jg(K)}function Hi(K){return Gs(K)?dv(K):Qg(K)}function ld(K){for(var te=K.length;te--&&et.test(K.charAt(te)););return te}var hv=zf(oe);function uv(K){for(var te=Ks.lastIndex=0;Ks.test(K);)++te;return te}function dv(K){return K.match(Ks)||[]}function lv(K){return K.match(Ko)||[]}var pv=function K(te){te=te==null?Rt:Qs.defaults(Rt.Object(),te,Qs.pick(Rt,Go));var Y=te.Array,Ne=te.Date,dt=te.Error,Ot=te.Function,fr=te.Math,Ft=te.Object,Hf=te.RegExp,gv=te.String,wi=te.TypeError,Wo=Y.prototype,vv=Ot.prototype,Ys=Ft.prototype,Xo=te["__core-js_shared__"],Zo=vv.toString,kt=Ys.hasOwnProperty,bv=0,pd=function(){var n=/[^.]+$/.exec(Xo&&Xo.keys&&Xo.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}(),ec=Ys.toString,mv=Zo.call(Ft),yv=Rt._,wv=Hf("^"+Zo.call(kt).replace(We,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),tc=Gr?te.Buffer:t,Xn=te.Symbol,rc=te.Uint8Array,gd=tc?tc.allocUnsafe:t,ic=dd(Ft.getPrototypeOf,Ft),vd=Ft.create,bd=Ys.propertyIsEnumerable,nc=Wo.splice,md=Xn?Xn.isConcatSpreadable:t,ka=Xn?Xn.iterator:t,bs=Xn?Xn.toStringTag:t,sc=function(){try{var n=As(Ft,"defineProperty");return n({},"",{}),n}catch{}}(),_v=te.clearTimeout!==Rt.clearTimeout&&te.clearTimeout,Av=Ne&&Ne.now!==Rt.Date.now&&Ne.now,Mv=te.setTimeout!==Rt.setTimeout&&te.setTimeout,ac=fr.ceil,oc=fr.floor,Kf=Ft.getOwnPropertySymbols,xv=tc?tc.isBuffer:t,yd=te.isFinite,Ev=Wo.join,Iv=dd(Ft.keys,Ft),hr=fr.max,Cr=fr.min,Sv=Ne.now,Pv=te.parseInt,wd=fr.random,Rv=Wo.reverse,Vf=As(te,"DataView"),Ba=As(te,"Map"),Gf=As(te,"Promise"),Ws=As(te,"Set"),La=As(te,"WeakMap"),za=As(Ft,"create"),cc=La&&new La,Xs={},Cv=Ms(Vf),Nv=Ms(Ba),Tv=Ms(Gf),Ov=Ms(Ws),qv=Ms(La),fc=Xn?Xn.prototype:t,$a=fc?fc.valueOf:t,_d=fc?fc.toString:t;function C(n){if(Wt(n)&&!gt(n)&&!(n instanceof It)){if(n instanceof _i)return n;if(kt.call(n,"__wrapped__"))return Al(n)}return new _i(n)}var Zs=function(){function n(){}return function(a){if(!Qt(a))return{};if(vd)return vd(a);n.prototype=a;var f=new n;return n.prototype=t,f}}();function hc(){}function _i(n,a){this.__wrapped__=n,this.__actions__=[],this.__chain__=!!a,this.__index__=0,this.__values__=t}C.templateSettings={escape:Ye,evaluate:Me,interpolate:Je,variable:"",imports:{_:C}},C.prototype=hc.prototype,C.prototype.constructor=C,_i.prototype=Zs(hc.prototype),_i.prototype.constructor=_i;function It(n){this.__wrapped__=n,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=l,this.__views__=[]}function Dv(){var n=new It(this.__wrapped__);return n.__actions__=Jr(this.__actions__),n.__dir__=this.__dir__,n.__filtered__=this.__filtered__,n.__iteratees__=Jr(this.__iteratees__),n.__takeCount__=this.__takeCount__,n.__views__=Jr(this.__views__),n}function kv(){if(this.__filtered__){var n=new It(this);n.__dir__=-1,n.__filtered__=!0}else n=this.clone(),n.__dir__*=-1;return n}function Bv(){var n=this.__wrapped__.value(),a=this.__dir__,f=gt(n),m=a<0,S=f?n.length:0,N=Qb(0,S,this.__views__),U=N.start,F=N.end,V=F-U,re=m?F:U-1,ie=this.__iteratees__,fe=ie.length,ye=0,Be=Cr(V,this.__takeCount__);if(!f||!m&&S==V&&Be==V)return Kd(n,this.__actions__);var rt=[];e:for(;V--&&ye<Be;){re+=a;for(var yt=-1,it=n[re];++yt<fe;){var Mt=ie[yt],Ct=Mt.iteratee,fi=Mt.type,Br=Ct(it);if(fi==p)it=Br;else if(!Br){if(fi==d)continue e;break e}}rt[ye++]=it}return rt}It.prototype=Zs(hc.prototype),It.prototype.constructor=It;function ms(n){var a=-1,f=n==null?0:n.length;for(this.clear();++a<f;){var m=n[a];this.set(m[0],m[1])}}function Lv(){this.__data__=za?za(null):{},this.size=0}function zv(n){var a=this.has(n)&&delete this.__data__[n];return this.size-=a?1:0,a}function $v(n){var a=this.__data__;if(za){var f=a[n];return f===y?t:f}return kt.call(a,n)?a[n]:t}function Uv(n){var a=this.__data__;return za?a[n]!==t:kt.call(a,n)}function Fv(n,a){var f=this.__data__;return this.size+=this.has(n)?0:1,f[n]=za&&a===t?y:a,this}ms.prototype.clear=Lv,ms.prototype.delete=zv,ms.prototype.get=$v,ms.prototype.has=Uv,ms.prototype.set=Fv;function Rn(n){var a=-1,f=n==null?0:n.length;for(this.clear();++a<f;){var m=n[a];this.set(m[0],m[1])}}function jv(){this.__data__=[],this.size=0}function Hv(n){var a=this.__data__,f=uc(a,n);if(f<0)return!1;var m=a.length-1;return f==m?a.pop():nc.call(a,f,1),--this.size,!0}function Kv(n){var a=this.__data__,f=uc(a,n);return f<0?t:a[f][1]}function Vv(n){return uc(this.__data__,n)>-1}function Gv(n,a){var f=this.__data__,m=uc(f,n);return m<0?(++this.size,f.push([n,a])):f[m][1]=a,this}Rn.prototype.clear=jv,Rn.prototype.delete=Hv,Rn.prototype.get=Kv,Rn.prototype.has=Vv,Rn.prototype.set=Gv;function Cn(n){var a=-1,f=n==null?0:n.length;for(this.clear();++a<f;){var m=n[a];this.set(m[0],m[1])}}function Jv(){this.size=0,this.__data__={hash:new ms,map:new(Ba||Rn),string:new ms}}function Qv(n){var a=Mc(this,n).delete(n);return this.size-=a?1:0,a}function Yv(n){return Mc(this,n).get(n)}function Wv(n){return Mc(this,n).has(n)}function Xv(n,a){var f=Mc(this,n),m=f.size;return f.set(n,a),this.size+=f.size==m?0:1,this}Cn.prototype.clear=Jv,Cn.prototype.delete=Qv,Cn.prototype.get=Yv,Cn.prototype.has=Wv,Cn.prototype.set=Xv;function ys(n){var a=-1,f=n==null?0:n.length;for(this.__data__=new Cn;++a<f;)this.add(n[a])}function Zv(n){return this.__data__.set(n,y),this}function eb(n){return this.__data__.has(n)}ys.prototype.add=ys.prototype.push=Zv,ys.prototype.has=eb;function Ki(n){var a=this.__data__=new Rn(n);this.size=a.size}function tb(){this.__data__=new Rn,this.size=0}function rb(n){var a=this.__data__,f=a.delete(n);return this.size=a.size,f}function ib(n){return this.__data__.get(n)}function nb(n){return this.__data__.has(n)}function sb(n,a){var f=this.__data__;if(f instanceof Rn){var m=f.__data__;if(!Ba||m.length<s-1)return m.push([n,a]),this.size=++f.size,this;f=this.__data__=new Cn(m)}return f.set(n,a),this.size=f.size,this}Ki.prototype.clear=tb,Ki.prototype.delete=rb,Ki.prototype.get=ib,Ki.prototype.has=nb,Ki.prototype.set=sb;function Ad(n,a){var f=gt(n),m=!f&&xs(n),S=!f&&!m&&is(n),N=!f&&!m&&!S&&ia(n),U=f||m||S||N,F=U?Uf(n.length,gv):[],V=F.length;for(var re in n)(a||kt.call(n,re))&&!(U&&(re=="length"||S&&(re=="offset"||re=="parent")||N&&(re=="buffer"||re=="byteLength"||re=="byteOffset")||qn(re,V)))&&F.push(re);return F}function Md(n){var a=n.length;return a?n[nh(0,a-1)]:t}function ab(n,a){return xc(Jr(n),ws(a,0,n.length))}function ob(n){return xc(Jr(n))}function Jf(n,a,f){(f!==t&&!Vi(n[a],f)||f===t&&!(a in n))&&Nn(n,a,f)}function Ua(n,a,f){var m=n[a];(!(kt.call(n,a)&&Vi(m,f))||f===t&&!(a in n))&&Nn(n,a,f)}function uc(n,a){for(var f=n.length;f--;)if(Vi(n[f][0],a))return f;return-1}function cb(n,a,f,m){return Zn(n,function(S,N,U){a(m,S,f(S),U)}),m}function xd(n,a){return n&&hn(a,pr(a),n)}function fb(n,a){return n&&hn(a,Yr(a),n)}function Nn(n,a,f){a=="__proto__"&&sc?sc(n,a,{configurable:!0,enumerable:!0,value:f,writable:!0}):n[a]=f}function Qf(n,a){for(var f=-1,m=a.length,S=Y(m),N=n==null;++f<m;)S[f]=N?t:Rh(n,a[f]);return S}function ws(n,a,f){return n===n&&(f!==t&&(n=n<=f?n:f),a!==t&&(n=n>=a?n:a)),n}function Ai(n,a,f,m,S,N){var U,F=a&P,V=a&q,re=a&O;if(f&&(U=S?f(n,m,S,N):f(n)),U!==t)return U;if(!Qt(n))return n;var ie=gt(n);if(ie){if(U=Wb(n),!F)return Jr(n,U)}else{var fe=Nr(n),ye=fe==W||fe==ne;if(is(n))return Jd(n,F);if(fe==Oe||fe==M||ye&&!S){if(U=V||ye?{}:ll(n),!F)return V?$b(n,fb(U,n)):zb(n,xd(U,n))}else{if(!Lt[fe])return S?n:{};U=Xb(n,fe,F)}}N||(N=new Ki);var Be=N.get(n);if(Be)return Be;N.set(n,U),Fl(n)?n.forEach(function(it){U.add(Ai(it,a,f,it,n,N))}):$l(n)&&n.forEach(function(it,Mt){U.set(Mt,Ai(it,a,f,Mt,n,N))});var rt=re?V?gh:ph:V?Yr:pr,yt=ie?t:rt(n);return yi(yt||n,function(it,Mt){yt&&(Mt=it,it=n[Mt]),Ua(U,Mt,Ai(it,a,f,Mt,n,N))}),U}function hb(n){var a=pr(n);return function(f){return Ed(f,n,a)}}function Ed(n,a,f){var m=f.length;if(n==null)return!m;for(n=Ft(n);m--;){var S=f[m],N=a[S],U=n[S];if(U===t&&!(S in n)||!N(U))return!1}return!0}function Id(n,a,f){if(typeof n!="function")throw new wi(h);return Ja(function(){n.apply(t,f)},a)}function Fa(n,a,f,m){var S=-1,N=Jo,U=!0,F=n.length,V=[],re=a.length;if(!F)return V;f&&(a=Jt(a,ai(f))),m?(N=Df,U=!1):a.length>=s&&(N=Da,U=!1,a=new ys(a));e:for(;++S<F;){var ie=n[S],fe=f==null?ie:f(ie);if(ie=m||ie!==0?ie:0,U&&fe===fe){for(var ye=re;ye--;)if(a[ye]===fe)continue e;V.push(ie)}else N(a,fe,m)||V.push(ie)}return V}var Zn=Zd(fn),Sd=Zd(Wf,!0);function ub(n,a){var f=!0;return Zn(n,function(m,S,N){return f=!!a(m,S,N),f}),f}function dc(n,a,f){for(var m=-1,S=n.length;++m<S;){var N=n[m],U=a(N);if(U!=null&&(F===t?U===U&&!ci(U):f(U,F)))var F=U,V=N}return V}function db(n,a,f,m){var S=n.length;for(f=mt(f),f<0&&(f=-f>S?0:S+f),m=m===t||m>S?S:mt(m),m<0&&(m+=S),m=f>m?0:Hl(m);f<m;)n[f++]=a;return n}function Pd(n,a){var f=[];return Zn(n,function(m,S,N){a(m,S,N)&&f.push(m)}),f}function wr(n,a,f,m,S){var N=-1,U=n.length;for(f||(f=em),S||(S=[]);++N<U;){var F=n[N];a>0&&f(F)?a>1?wr(F,a-1,f,m,S):Yn(S,F):m||(S[S.length]=F)}return S}var Yf=el(),Rd=el(!0);function fn(n,a){return n&&Yf(n,a,pr)}function Wf(n,a){return n&&Rd(n,a,pr)}function lc(n,a){return Qn(a,function(f){return Dn(n[f])})}function _s(n,a){a=ts(a,n);for(var f=0,m=a.length;n!=null&&f<m;)n=n[un(a[f++])];return f&&f==m?n:t}function Cd(n,a,f){var m=a(n);return gt(n)?m:Yn(m,f(n))}function Dr(n){return n==null?n===t?Ge:ve:bs&&bs in Ft(n)?Jb(n):om(n)}function Xf(n,a){return n>a}function lb(n,a){return n!=null&&kt.call(n,a)}function pb(n,a){return n!=null&&a in Ft(n)}function gb(n,a,f){return n>=Cr(a,f)&&n<hr(a,f)}function Zf(n,a,f){for(var m=f?Df:Jo,S=n[0].length,N=n.length,U=N,F=Y(N),V=1/0,re=[];U--;){var ie=n[U];U&&a&&(ie=Jt(ie,ai(a))),V=Cr(ie.length,V),F[U]=!f&&(a||S>=120&&ie.length>=120)?new ys(U&&ie):t}ie=n[0];var fe=-1,ye=F[0];e:for(;++fe<S&&re.length<V;){var Be=ie[fe],rt=a?a(Be):Be;if(Be=f||Be!==0?Be:0,!(ye?Da(ye,rt):m(re,rt,f))){for(U=N;--U;){var yt=F[U];if(!(yt?Da(yt,rt):m(n[U],rt,f)))continue e}ye&&ye.push(rt),re.push(Be)}}return re}function vb(n,a,f,m){return fn(n,function(S,N,U){a(m,f(S),N,U)}),m}function ja(n,a,f){a=ts(a,n),n=bl(n,a);var m=n==null?n:n[un(xi(a))];return m==null?t:lr(m,n,f)}function Nd(n){return Wt(n)&&Dr(n)==M}function bb(n){return Wt(n)&&Dr(n)==De}function mb(n){return Wt(n)&&Dr(n)==$}function Ha(n,a,f,m,S){return n===a?!0:n==null||a==null||!Wt(n)&&!Wt(a)?n!==n&&a!==a:yb(n,a,f,m,Ha,S)}function yb(n,a,f,m,S,N){var U=gt(n),F=gt(a),V=U?J:Nr(n),re=F?J:Nr(a);V=V==M?Oe:V,re=re==M?Oe:re;var ie=V==Oe,fe=re==Oe,ye=V==re;if(ye&&is(n)){if(!is(a))return!1;U=!0,ie=!1}if(ye&&!ie)return N||(N=new Ki),U||ia(n)?hl(n,a,f,m,S,N):Vb(n,a,V,f,m,S,N);if(!(f&L)){var Be=ie&&kt.call(n,"__wrapped__"),rt=fe&&kt.call(a,"__wrapped__");if(Be||rt){var yt=Be?n.value():n,it=rt?a.value():a;return N||(N=new Ki),S(yt,it,f,m,N)}}return ye?(N||(N=new Ki),Gb(n,a,f,m,S,N)):!1}function wb(n){return Wt(n)&&Nr(n)==se}function eh(n,a,f,m){var S=f.length,N=S,U=!m;if(n==null)return!N;for(n=Ft(n);S--;){var F=f[S];if(U&&F[2]?F[1]!==n[F[0]]:!(F[0]in n))return!1}for(;++S<N;){F=f[S];var V=F[0],re=n[V],ie=F[1];if(U&&F[2]){if(re===t&&!(V in n))return!1}else{var fe=new Ki;if(m)var ye=m(re,ie,V,n,a,fe);if(!(ye===t?Ha(ie,re,L|j,m,fe):ye))return!1}}return!0}function Td(n){if(!Qt(n)||rm(n))return!1;var a=Dn(n)?wv:Sr;return a.test(Ms(n))}function _b(n){return Wt(n)&&Dr(n)==Ve}function Ab(n){return Wt(n)&&Nr(n)==Le}function Mb(n){return Wt(n)&&Cc(n.length)&&!!zt[Dr(n)]}function Od(n){return typeof n=="function"?n:n==null?Wr:typeof n=="object"?gt(n)?kd(n[0],n[1]):Dd(n):t0(n)}function th(n){if(!Ga(n))return Iv(n);var a=[];for(var f in Ft(n))kt.call(n,f)&&f!="constructor"&&a.push(f);return a}function xb(n){if(!Qt(n))return am(n);var a=Ga(n),f=[];for(var m in n)m=="constructor"&&(a||!kt.call(n,m))||f.push(m);return f}function rh(n,a){return n<a}function qd(n,a){var f=-1,m=Qr(n)?Y(n.length):[];return Zn(n,function(S,N,U){m[++f]=a(S,N,U)}),m}function Dd(n){var a=bh(n);return a.length==1&&a[0][2]?gl(a[0][0],a[0][1]):function(f){return f===n||eh(f,n,a)}}function kd(n,a){return yh(n)&&pl(a)?gl(un(n),a):function(f){var m=Rh(f,n);return m===t&&m===a?Ch(f,n):Ha(a,m,L|j)}}function pc(n,a,f,m,S){n!==a&&Yf(a,function(N,U){if(S||(S=new Ki),Qt(N))Eb(n,a,U,f,pc,m,S);else{var F=m?m(_h(n,U),N,U+"",n,a,S):t;F===t&&(F=N),Jf(n,U,F)}},Yr)}function Eb(n,a,f,m,S,N,U){var F=_h(n,f),V=_h(a,f),re=U.get(V);if(re){Jf(n,f,re);return}var ie=N?N(F,V,f+"",n,a,U):t,fe=ie===t;if(fe){var ye=gt(V),Be=!ye&&is(V),rt=!ye&&!Be&&ia(V);ie=V,ye||Be||rt?gt(F)?ie=F:rr(F)?ie=Jr(F):Be?(fe=!1,ie=Jd(V,!0)):rt?(fe=!1,ie=Qd(V,!0)):ie=[]:Qa(V)||xs(V)?(ie=F,xs(F)?ie=Kl(F):(!Qt(F)||Dn(F))&&(ie=ll(V))):fe=!1}fe&&(U.set(V,ie),S(ie,V,m,N,U),U.delete(V)),Jf(n,f,ie)}function Bd(n,a){var f=n.length;if(f)return a+=a<0?f:0,qn(a,f)?n[a]:t}function Ld(n,a,f){a.length?a=Jt(a,function(N){return gt(N)?function(U){return _s(U,N.length===1?N[0]:N)}:N}):a=[Wr];var m=-1;a=Jt(a,ai(Ze()));var S=qd(n,function(N,U,F){var V=Jt(a,function(re){return re(N)});return{criteria:V,index:++m,value:N}});return Xg(S,function(N,U){return Lb(N,U,f)})}function Ib(n,a){return zd(n,a,function(f,m){return Ch(n,m)})}function zd(n,a,f){for(var m=-1,S=a.length,N={};++m<S;){var U=a[m],F=_s(n,U);f(F,U)&&Ka(N,ts(U,n),F)}return N}function Sb(n){return function(a){return _s(a,n)}}function ih(n,a,f,m){var S=m?Wg:Vs,N=-1,U=a.length,F=n;for(n===a&&(a=Jr(a)),f&&(F=Jt(n,ai(f)));++N<U;)for(var V=0,re=a[N],ie=f?f(re):re;(V=S(F,ie,V,m))>-1;)F!==n&&nc.call(F,V,1),nc.call(n,V,1);return n}function $d(n,a){for(var f=n?a.length:0,m=f-1;f--;){var S=a[f];if(f==m||S!==N){var N=S;qn(S)?nc.call(n,S,1):oh(n,S)}}return n}function nh(n,a){return n+oc(wd()*(a-n+1))}function Pb(n,a,f,m){for(var S=-1,N=hr(ac((a-n)/(f||1)),0),U=Y(N);N--;)U[m?N:++S]=n,n+=f;return U}function sh(n,a){var f="";if(!n||a<1||a>E)return f;do a%2&&(f+=n),a=oc(a/2),a&&(n+=n);while(a);return f}function _t(n,a){return Ah(vl(n,a,Wr),n+"")}function Rb(n){return Md(na(n))}function Cb(n,a){var f=na(n);return xc(f,ws(a,0,f.length))}function Ka(n,a,f,m){if(!Qt(n))return n;a=ts(a,n);for(var S=-1,N=a.length,U=N-1,F=n;F!=null&&++S<N;){var V=un(a[S]),re=f;if(V==="__proto__"||V==="constructor"||V==="prototype")return n;if(S!=U){var ie=F[V];re=m?m(ie,V,F):t,re===t&&(re=Qt(ie)?ie:qn(a[S+1])?[]:{})}Ua(F,V,re),F=F[V]}return n}var Ud=cc?function(n,a){return cc.set(n,a),n}:Wr,Nb=sc?function(n,a){return sc(n,"toString",{configurable:!0,enumerable:!1,value:Th(a),writable:!0})}:Wr;function Tb(n){return xc(na(n))}function Mi(n,a,f){var m=-1,S=n.length;a<0&&(a=-a>S?0:S+a),f=f>S?S:f,f<0&&(f+=S),S=a>f?0:f-a>>>0,a>>>=0;for(var N=Y(S);++m<S;)N[m]=n[m+a];return N}function Ob(n,a){var f;return Zn(n,function(m,S,N){return f=a(m,S,N),!f}),!!f}function gc(n,a,f){var m=0,S=n==null?m:n.length;if(typeof a=="number"&&a===a&&S<=X){for(;m<S;){var N=m+S>>>1,U=n[N];U!==null&&!ci(U)&&(f?U<=a:U<a)?m=N+1:S=N}return S}return ah(n,a,Wr,f)}function ah(n,a,f,m){var S=0,N=n==null?0:n.length;if(N===0)return 0;a=f(a);for(var U=a!==a,F=a===null,V=ci(a),re=a===t;S<N;){var ie=oc((S+N)/2),fe=f(n[ie]),ye=fe!==t,Be=fe===null,rt=fe===fe,yt=ci(fe);if(U)var it=m||rt;else re?it=rt&&(m||ye):F?it=rt&&ye&&(m||!Be):V?it=rt&&ye&&!Be&&(m||!yt):Be||yt?it=!1:it=m?fe<=a:fe<a;it?S=ie+1:N=ie}return Cr(N,R)}function Fd(n,a){for(var f=-1,m=n.length,S=0,N=[];++f<m;){var U=n[f],F=a?a(U):U;if(!f||!Vi(F,V)){var V=F;N[S++]=U===0?0:U}}return N}function jd(n){return typeof n=="number"?n:ci(n)?u:+n}function oi(n){if(typeof n=="string")return n;if(gt(n))return Jt(n,oi)+"";if(ci(n))return _d?_d.call(n):"";var a=n+"";return a=="0"&&1/n==-x?"-0":a}function es(n,a,f){var m=-1,S=Jo,N=n.length,U=!0,F=[],V=F;if(f)U=!1,S=Df;else if(N>=s){var re=a?null:Hb(n);if(re)return Yo(re);U=!1,S=Da,V=new ys}else V=a?[]:F;e:for(;++m<N;){var ie=n[m],fe=a?a(ie):ie;if(ie=f||ie!==0?ie:0,U&&fe===fe){for(var ye=V.length;ye--;)if(V[ye]===fe)continue e;a&&V.push(fe),F.push(ie)}else S(V,fe,f)||(V!==F&&V.push(fe),F.push(ie))}return F}function oh(n,a){return a=ts(a,n),n=bl(n,a),n==null||delete n[un(xi(a))]}function Hd(n,a,f,m){return Ka(n,a,f(_s(n,a)),m)}function vc(n,a,f,m){for(var S=n.length,N=m?S:-1;(m?N--:++N<S)&&a(n[N],N,n););return f?Mi(n,m?0:N,m?N+1:S):Mi(n,m?N+1:0,m?S:N)}function Kd(n,a){var f=n;return f instanceof It&&(f=f.value()),kf(a,function(m,S){return S.func.apply(S.thisArg,Yn([m],S.args))},f)}function ch(n,a,f){var m=n.length;if(m<2)return m?es(n[0]):[];for(var S=-1,N=Y(m);++S<m;)for(var U=n[S],F=-1;++F<m;)F!=S&&(N[S]=Fa(N[S]||U,n[F],a,f));return es(wr(N,1),a,f)}function Vd(n,a,f){for(var m=-1,S=n.length,N=a.length,U={};++m<S;){var F=m<N?a[m]:t;f(U,n[m],F)}return U}function fh(n){return rr(n)?n:[]}function hh(n){return typeof n=="function"?n:Wr}function ts(n,a){return gt(n)?n:yh(n,a)?[n]:_l(qt(n))}var qb=_t;function rs(n,a,f){var m=n.length;return f=f===t?m:f,!a&&f>=m?n:Mi(n,a,f)}var Gd=_v||function(n){return Rt.clearTimeout(n)};function Jd(n,a){if(a)return n.slice();var f=n.length,m=gd?gd(f):new n.constructor(f);return n.copy(m),m}function uh(n){var a=new n.constructor(n.byteLength);return new rc(a).set(new rc(n)),a}function Db(n,a){var f=a?uh(n.buffer):n.buffer;return new n.constructor(f,n.byteOffset,n.byteLength)}function kb(n){var a=new n.constructor(n.source,bt.exec(n));return a.lastIndex=n.lastIndex,a}function Bb(n){return $a?Ft($a.call(n)):{}}function Qd(n,a){var f=a?uh(n.buffer):n.buffer;return new n.constructor(f,n.byteOffset,n.length)}function Yd(n,a){if(n!==a){var f=n!==t,m=n===null,S=n===n,N=ci(n),U=a!==t,F=a===null,V=a===a,re=ci(a);if(!F&&!re&&!N&&n>a||N&&U&&V&&!F&&!re||m&&U&&V||!f&&V||!S)return 1;if(!m&&!N&&!re&&n<a||re&&f&&S&&!m&&!N||F&&f&&S||!U&&S||!V)return-1}return 0}function Lb(n,a,f){for(var m=-1,S=n.criteria,N=a.criteria,U=S.length,F=f.length;++m<U;){var V=Yd(S[m],N[m]);if(V){if(m>=F)return V;var re=f[m];return V*(re=="desc"?-1:1)}}return n.index-a.index}function Wd(n,a,f,m){for(var S=-1,N=n.length,U=f.length,F=-1,V=a.length,re=hr(N-U,0),ie=Y(V+re),fe=!m;++F<V;)ie[F]=a[F];for(;++S<U;)(fe||S<N)&&(ie[f[S]]=n[S]);for(;re--;)ie[F++]=n[S++];return ie}function Xd(n,a,f,m){for(var S=-1,N=n.length,U=-1,F=f.length,V=-1,re=a.length,ie=hr(N-F,0),fe=Y(ie+re),ye=!m;++S<ie;)fe[S]=n[S];for(var Be=S;++V<re;)fe[Be+V]=a[V];for(;++U<F;)(ye||S<N)&&(fe[Be+f[U]]=n[S++]);return fe}function Jr(n,a){var f=-1,m=n.length;for(a||(a=Y(m));++f<m;)a[f]=n[f];return a}function hn(n,a,f,m){var S=!f;f||(f={});for(var N=-1,U=a.length;++N<U;){var F=a[N],V=m?m(f[F],n[F],F,f,n):t;V===t&&(V=n[F]),S?Nn(f,F,V):Ua(f,F,V)}return f}function zb(n,a){return hn(n,mh(n),a)}function $b(n,a){return hn(n,ul(n),a)}function bc(n,a){return function(f,m){var S=gt(f)?Kg:cb,N=a?a():{};return S(f,n,Ze(m,2),N)}}function ea(n){return _t(function(a,f){var m=-1,S=f.length,N=S>1?f[S-1]:t,U=S>2?f[2]:t;for(N=n.length>3&&typeof N=="function"?(S--,N):t,U&&kr(f[0],f[1],U)&&(N=S<3?t:N,S=1),a=Ft(a);++m<S;){var F=f[m];F&&n(a,F,m,N)}return a})}function Zd(n,a){return function(f,m){if(f==null)return f;if(!Qr(f))return n(f,m);for(var S=f.length,N=a?S:-1,U=Ft(f);(a?N--:++N<S)&&m(U[N],N,U)!==!1;);return f}}function el(n){return function(a,f,m){for(var S=-1,N=Ft(a),U=m(a),F=U.length;F--;){var V=U[n?F:++S];if(f(N[V],V,N)===!1)break}return a}}function Ub(n,a,f){var m=a&G,S=Va(n);function N(){var U=this&&this!==Rt&&this instanceof N?S:n;return U.apply(m?f:this,arguments)}return N}function tl(n){return function(a){a=qt(a);var f=Gs(a)?Hi(a):t,m=f?f[0]:a.charAt(0),S=f?rs(f,1).join(""):a.slice(1);return m[n]()+S}}function ta(n){return function(a){return kf(Zl(Xl(a).replace(Oa,"")),n,"")}}function Va(n){return function(){var a=arguments;switch(a.length){case 0:return new n;case 1:return new n(a[0]);case 2:return new n(a[0],a[1]);case 3:return new n(a[0],a[1],a[2]);case 4:return new n(a[0],a[1],a[2],a[3]);case 5:return new n(a[0],a[1],a[2],a[3],a[4]);case 6:return new n(a[0],a[1],a[2],a[3],a[4],a[5]);case 7:return new n(a[0],a[1],a[2],a[3],a[4],a[5],a[6])}var f=Zs(n.prototype),m=n.apply(f,a);return Qt(m)?m:f}}function Fb(n,a,f){var m=Va(n);function S(){for(var N=arguments.length,U=Y(N),F=N,V=ra(S);F--;)U[F]=arguments[F];var re=N<3&&U[0]!==V&&U[N-1]!==V?[]:Wn(U,V);if(N-=re.length,N<f)return al(n,a,mc,S.placeholder,t,U,re,t,t,f-N);var ie=this&&this!==Rt&&this instanceof S?m:n;return lr(ie,this,U)}return S}function rl(n){return function(a,f,m){var S=Ft(a);if(!Qr(a)){var N=Ze(f,3);a=pr(a),f=function(F){return N(S[F],F,S)}}var U=n(a,f,m);return U>-1?S[N?a[U]:U]:t}}function il(n){return On(function(a){var f=a.length,m=f,S=_i.prototype.thru;for(n&&a.reverse();m--;){var N=a[m];if(typeof N!="function")throw new wi(h);if(S&&!U&&Ac(N)=="wrapper")var U=new _i([],!0)}for(m=U?m:f;++m<f;){N=a[m];var F=Ac(N),V=F=="wrapper"?vh(N):t;V&&wh(V[0])&&V[1]==(ue|de|ae|le)&&!V[4].length&&V[9]==1?U=U[Ac(V[0])].apply(U,V[3]):U=N.length==1&&wh(N)?U[F]():U.thru(N)}return function(){var re=arguments,ie=re[0];if(U&&re.length==1&&gt(ie))return U.plant(ie).value();for(var fe=0,ye=f?a[fe].apply(this,re):ie;++fe<f;)ye=a[fe].call(this,ye);return ye}})}function mc(n,a,f,m,S,N,U,F,V,re){var ie=a&ue,fe=a&G,ye=a&Q,Be=a&(de|ce),rt=a&Te,yt=ye?t:Va(n);function it(){for(var Mt=arguments.length,Ct=Y(Mt),fi=Mt;fi--;)Ct[fi]=arguments[fi];if(Be)var Br=ra(it),hi=ev(Ct,Br);if(m&&(Ct=Wd(Ct,m,S,Be)),N&&(Ct=Xd(Ct,N,U,Be)),Mt-=hi,Be&&Mt<re){var ir=Wn(Ct,Br);return al(n,a,mc,it.placeholder,f,Ct,ir,F,V,re-Mt)}var Gi=fe?f:this,Bn=ye?Gi[n]:n;return Mt=Ct.length,F?Ct=cm(Ct,F):rt&&Mt>1&&Ct.reverse(),ie&&V<Mt&&(Ct.length=V),this&&this!==Rt&&this instanceof it&&(Bn=yt||Va(Bn)),Bn.apply(Gi,Ct)}return it}function nl(n,a){return function(f,m){return vb(f,n,a(m),{})}}function yc(n,a){return function(f,m){var S;if(f===t&&m===t)return a;if(f!==t&&(S=f),m!==t){if(S===t)return m;typeof f=="string"||typeof m=="string"?(f=oi(f),m=oi(m)):(f=jd(f),m=jd(m)),S=n(f,m)}return S}}function dh(n){return On(function(a){return a=Jt(a,ai(Ze())),_t(function(f){var m=this;return n(a,function(S){return lr(S,m,f)})})})}function wc(n,a){a=a===t?" ":oi(a);var f=a.length;if(f<2)return f?sh(a,n):a;var m=sh(a,ac(n/Js(a)));return Gs(a)?rs(Hi(m),0,n).join(""):m.slice(0,n)}function jb(n,a,f,m){var S=a&G,N=Va(n);function U(){for(var F=-1,V=arguments.length,re=-1,ie=m.length,fe=Y(ie+V),ye=this&&this!==Rt&&this instanceof U?N:n;++re<ie;)fe[re]=m[re];for(;V--;)fe[re++]=arguments[++F];return lr(ye,S?f:this,fe)}return U}function sl(n){return function(a,f,m){return m&&typeof m!="number"&&kr(a,f,m)&&(f=m=t),a=kn(a),f===t?(f=a,a=0):f=kn(f),m=m===t?a<f?1:-1:kn(m),Pb(a,f,m,n)}}function _c(n){return function(a,f){return typeof a=="string"&&typeof f=="string"||(a=Ei(a),f=Ei(f)),n(a,f)}}function al(n,a,f,m,S,N,U,F,V,re){var ie=a&de,fe=ie?U:t,ye=ie?t:U,Be=ie?N:t,rt=ie?t:N;a|=ie?ae:he,a&=~(ie?he:ae),a&Z||(a&=~(G|Q));var yt=[n,a,S,Be,fe,rt,ye,F,V,re],it=f.apply(t,yt);return wh(n)&&ml(it,yt),it.placeholder=m,yl(it,n,a)}function lh(n){var a=fr[n];return function(f,m){if(f=Ei(f),m=m==null?0:Cr(mt(m),292),m&&yd(f)){var S=(qt(f)+"e").split("e"),N=a(S[0]+"e"+(+S[1]+m));return S=(qt(N)+"e").split("e"),+(S[0]+"e"+(+S[1]-m))}return a(f)}}var Hb=Ws&&1/Yo(new Ws([,-0]))[1]==x?function(n){return new Ws(n)}:Dh;function ol(n){return function(a){var f=Nr(a);return f==se?jf(a):f==Le?ov(a):Zg(a,n(a))}}function Tn(n,a,f,m,S,N,U,F){var V=a&Q;if(!V&&typeof n!="function")throw new wi(h);var re=m?m.length:0;if(re||(a&=~(ae|he),m=S=t),U=U===t?U:hr(mt(U),0),F=F===t?F:mt(F),re-=S?S.length:0,a&he){var ie=m,fe=S;m=S=t}var ye=V?t:vh(n),Be=[n,a,f,m,S,ie,fe,N,U,F];if(ye&&sm(Be,ye),n=Be[0],a=Be[1],f=Be[2],m=Be[3],S=Be[4],F=Be[9]=Be[9]===t?V?0:n.length:hr(Be[9]-re,0),!F&&a&(de|ce)&&(a&=~(de|ce)),!a||a==G)var rt=Ub(n,a,f);else a==de||a==ce?rt=Fb(n,a,F):(a==ae||a==(G|ae))&&!S.length?rt=jb(n,a,f,m):rt=mc.apply(t,Be);var yt=ye?Ud:ml;return yl(yt(rt,Be),n,a)}function cl(n,a,f,m){return n===t||Vi(n,Ys[f])&&!kt.call(m,f)?a:n}function fl(n,a,f,m,S,N){return Qt(n)&&Qt(a)&&(N.set(a,n),pc(n,a,t,fl,N),N.delete(a)),n}function Kb(n){return Qa(n)?t:n}function hl(n,a,f,m,S,N){var U=f&L,F=n.length,V=a.length;if(F!=V&&!(U&&V>F))return!1;var re=N.get(n),ie=N.get(a);if(re&&ie)return re==a&&ie==n;var fe=-1,ye=!0,Be=f&j?new ys:t;for(N.set(n,a),N.set(a,n);++fe<F;){var rt=n[fe],yt=a[fe];if(m)var it=U?m(yt,rt,fe,a,n,N):m(rt,yt,fe,n,a,N);if(it!==t){if(it)continue;ye=!1;break}if(Be){if(!Bf(a,function(Mt,Ct){if(!Da(Be,Ct)&&(rt===Mt||S(rt,Mt,f,m,N)))return Be.push(Ct)})){ye=!1;break}}else if(!(rt===yt||S(rt,yt,f,m,N))){ye=!1;break}}return N.delete(n),N.delete(a),ye}function Vb(n,a,f,m,S,N,U){switch(f){case we:if(n.byteLength!=a.byteLength||n.byteOffset!=a.byteOffset)return!1;n=n.buffer,a=a.buffer;case De:return!(n.byteLength!=a.byteLength||!N(new rc(n),new rc(a)));case z:case $:case ge:return Vi(+n,+a);case k:return n.name==a.name&&n.message==a.message;case Ve:case _e:return n==a+"";case se:var F=jf;case Le:var V=m&L;if(F||(F=Yo),n.size!=a.size&&!V)return!1;var re=U.get(n);if(re)return re==a;m|=j,U.set(n,a);var ie=hl(F(n),F(a),m,S,N,U);return U.delete(n),ie;case Fe:if($a)return $a.call(n)==$a.call(a)}return!1}function Gb(n,a,f,m,S,N){var U=f&L,F=ph(n),V=F.length,re=ph(a),ie=re.length;if(V!=ie&&!U)return!1;for(var fe=V;fe--;){var ye=F[fe];if(!(U?ye in a:kt.call(a,ye)))return!1}var Be=N.get(n),rt=N.get(a);if(Be&&rt)return Be==a&&rt==n;var yt=!0;N.set(n,a),N.set(a,n);for(var it=U;++fe<V;){ye=F[fe];var Mt=n[ye],Ct=a[ye];if(m)var fi=U?m(Ct,Mt,ye,a,n,N):m(Mt,Ct,ye,n,a,N);if(!(fi===t?Mt===Ct||S(Mt,Ct,f,m,N):fi)){yt=!1;break}it||(it=ye=="constructor")}if(yt&&!it){var Br=n.constructor,hi=a.constructor;Br!=hi&&"constructor"in n&&"constructor"in a&&!(typeof Br=="function"&&Br instanceof Br&&typeof hi=="function"&&hi instanceof hi)&&(yt=!1)}return N.delete(n),N.delete(a),yt}function On(n){return Ah(vl(n,t,El),n+"")}function ph(n){return Cd(n,pr,mh)}function gh(n){return Cd(n,Yr,ul)}var vh=cc?function(n){return cc.get(n)}:Dh;function Ac(n){for(var a=n.name+"",f=Xs[a],m=kt.call(Xs,a)?f.length:0;m--;){var S=f[m],N=S.func;if(N==null||N==n)return S.name}return a}function ra(n){var a=kt.call(C,"placeholder")?C:n;return a.placeholder}function Ze(){var n=C.iteratee||Oh;return n=n===Oh?Od:n,arguments.length?n(arguments[0],arguments[1]):n}function Mc(n,a){var f=n.__data__;return tm(a)?f[typeof a=="string"?"string":"hash"]:f.map}function bh(n){for(var a=pr(n),f=a.length;f--;){var m=a[f],S=n[m];a[f]=[m,S,pl(S)]}return a}function As(n,a){var f=nv(n,a);return Td(f)?f:t}function Jb(n){var a=kt.call(n,bs),f=n[bs];try{n[bs]=t;var m=!0}catch{}var S=ec.call(n);return m&&(a?n[bs]=f:delete n[bs]),S}var mh=Kf?function(n){return n==null?[]:(n=Ft(n),Qn(Kf(n),function(a){return bd.call(n,a)}))}:kh,ul=Kf?function(n){for(var a=[];n;)Yn(a,mh(n)),n=ic(n);return a}:kh,Nr=Dr;(Vf&&Nr(new Vf(new ArrayBuffer(1)))!=we||Ba&&Nr(new Ba)!=se||Gf&&Nr(Gf.resolve())!=nt||Ws&&Nr(new Ws)!=Le||La&&Nr(new La)!=me)&&(Nr=function(n){var a=Dr(n),f=a==Oe?n.constructor:t,m=f?Ms(f):"";if(m)switch(m){case Cv:return we;case Nv:return se;case Tv:return nt;case Ov:return Le;case qv:return me}return a});function Qb(n,a,f){for(var m=-1,S=f.length;++m<S;){var N=f[m],U=N.size;switch(N.type){case"drop":n+=U;break;case"dropRight":a-=U;break;case"take":a=Cr(a,n+U);break;case"takeRight":n=hr(n,a-U);break}}return{start:n,end:a}}function Yb(n){var a=n.match(Ue);return a?a[1].split(at):[]}function dl(n,a,f){a=ts(a,n);for(var m=-1,S=a.length,N=!1;++m<S;){var U=un(a[m]);if(!(N=n!=null&&f(n,U)))break;n=n[U]}return N||++m!=S?N:(S=n==null?0:n.length,!!S&&Cc(S)&&qn(U,S)&&(gt(n)||xs(n)))}function Wb(n){var a=n.length,f=new n.constructor(a);return a&&typeof n[0]=="string"&&kt.call(n,"index")&&(f.index=n.index,f.input=n.input),f}function ll(n){return typeof n.constructor=="function"&&!Ga(n)?Zs(ic(n)):{}}function Xb(n,a,f){var m=n.constructor;switch(a){case De:return uh(n);case z:case $:return new m(+n);case we:return Db(n,f);case Qe:case ze:case Se:case ot:case ft:case qe:case ct:case ht:case ke:return Qd(n,f);case se:return new m;case ge:case _e:return new m(n);case Ve:return kb(n);case Le:return new m;case Fe:return Bb(n)}}function Zb(n,a){var f=a.length;if(!f)return n;var m=f-1;return a[m]=(f>1?"& ":"")+a[m],a=a.join(f>2?", ":" "),n.replace(xe,`{
/* [wrapped with `+a+`] */
`)}function em(n){return gt(n)||xs(n)||!!(md&&n&&n[md])}function qn(n,a){var f=typeof n;return a=a??E,!!a&&(f=="number"||f!="symbol"&&Rr.test(n))&&n>-1&&n%1==0&&n<a}function kr(n,a,f){if(!Qt(f))return!1;var m=typeof a;return(m=="number"?Qr(f)&&qn(a,f.length):m=="string"&&a in f)?Vi(f[a],n):!1}function yh(n,a){if(gt(n))return!1;var f=typeof n;return f=="number"||f=="symbol"||f=="boolean"||n==null||ci(n)?!0:Pe.test(n)||!Ke.test(n)||a!=null&&n in Ft(a)}function tm(n){var a=typeof n;return a=="string"||a=="number"||a=="symbol"||a=="boolean"?n!=="__proto__":n===null}function wh(n){var a=Ac(n),f=C[a];if(typeof f!="function"||!(a in It.prototype))return!1;if(n===f)return!0;var m=vh(f);return!!m&&n===m[0]}function rm(n){return!!pd&&pd in n}var im=Xo?Dn:Bh;function Ga(n){var a=n&&n.constructor,f=typeof a=="function"&&a.prototype||Ys;return n===f}function pl(n){return n===n&&!Qt(n)}function gl(n,a){return function(f){return f==null?!1:f[n]===a&&(a!==t||n in Ft(f))}}function nm(n){var a=Pc(n,function(m){return f.size===_&&f.clear(),m}),f=a.cache;return a}function sm(n,a){var f=n[1],m=a[1],S=f|m,N=S<(G|Q|ue),U=m==ue&&f==de||m==ue&&f==le&&n[7].length<=a[8]||m==(ue|le)&&a[7].length<=a[8]&&f==de;if(!(N||U))return n;m&G&&(n[2]=a[2],S|=f&G?0:Z);var F=a[3];if(F){var V=n[3];n[3]=V?Wd(V,F,a[4]):F,n[4]=V?Wn(n[3],I):a[4]}return F=a[5],F&&(V=n[5],n[5]=V?Xd(V,F,a[6]):F,n[6]=V?Wn(n[5],I):a[6]),F=a[7],F&&(n[7]=F),m&ue&&(n[8]=n[8]==null?a[8]:Cr(n[8],a[8])),n[9]==null&&(n[9]=a[9]),n[0]=a[0],n[1]=S,n}function am(n){var a=[];if(n!=null)for(var f in Ft(n))a.push(f);return a}function om(n){return ec.call(n)}function vl(n,a,f){return a=hr(a===t?n.length-1:a,0),function(){for(var m=arguments,S=-1,N=hr(m.length-a,0),U=Y(N);++S<N;)U[S]=m[a+S];S=-1;for(var F=Y(a+1);++S<a;)F[S]=m[S];return F[a]=f(U),lr(n,this,F)}}function bl(n,a){return a.length<2?n:_s(n,Mi(a,0,-1))}function cm(n,a){for(var f=n.length,m=Cr(a.length,f),S=Jr(n);m--;){var N=a[m];n[m]=qn(N,f)?S[N]:t}return n}function _h(n,a){if(!(a==="constructor"&&typeof n[a]=="function")&&a!="__proto__")return n[a]}var ml=wl(Ud),Ja=Mv||function(n,a){return Rt.setTimeout(n,a)},Ah=wl(Nb);function yl(n,a,f){var m=a+"";return Ah(n,Zb(m,fm(Yb(m),f)))}function wl(n){var a=0,f=0;return function(){var m=Sv(),S=c-(m-f);if(f=m,S>0){if(++a>=v)return arguments[0]}else a=0;return n.apply(t,arguments)}}function xc(n,a){var f=-1,m=n.length,S=m-1;for(a=a===t?m:a;++f<a;){var N=nh(f,S),U=n[N];n[N]=n[f],n[f]=U}return n.length=a,n}var _l=nm(function(n){var a=[];return n.charCodeAt(0)===46&&a.push(""),n.replace(st,function(f,m,S,N){a.push(S?N.replace(Tt,"$1"):m||f)}),a});function un(n){if(typeof n=="string"||ci(n))return n;var a=n+"";return a=="0"&&1/n==-x?"-0":a}function Ms(n){if(n!=null){try{return Zo.call(n)}catch{}try{return n+""}catch{}}return""}function fm(n,a){return yi(ee,function(f){var m="_."+f[0];a&f[1]&&!Jo(n,m)&&n.push(m)}),n.sort()}function Al(n){if(n instanceof It)return n.clone();var a=new _i(n.__wrapped__,n.__chain__);return a.__actions__=Jr(n.__actions__),a.__index__=n.__index__,a.__values__=n.__values__,a}function hm(n,a,f){(f?kr(n,a,f):a===t)?a=1:a=hr(mt(a),0);var m=n==null?0:n.length;if(!m||a<1)return[];for(var S=0,N=0,U=Y(ac(m/a));S<m;)U[N++]=Mi(n,S,S+=a);return U}function um(n){for(var a=-1,f=n==null?0:n.length,m=0,S=[];++a<f;){var N=n[a];N&&(S[m++]=N)}return S}function dm(){var n=arguments.length;if(!n)return[];for(var a=Y(n-1),f=arguments[0],m=n;m--;)a[m-1]=arguments[m];return Yn(gt(f)?Jr(f):[f],wr(a,1))}var lm=_t(function(n,a){return rr(n)?Fa(n,wr(a,1,rr,!0)):[]}),pm=_t(function(n,a){var f=xi(a);return rr(f)&&(f=t),rr(n)?Fa(n,wr(a,1,rr,!0),Ze(f,2)):[]}),gm=_t(function(n,a){var f=xi(a);return rr(f)&&(f=t),rr(n)?Fa(n,wr(a,1,rr,!0),t,f):[]});function vm(n,a,f){var m=n==null?0:n.length;return m?(a=f||a===t?1:mt(a),Mi(n,a<0?0:a,m)):[]}function bm(n,a,f){var m=n==null?0:n.length;return m?(a=f||a===t?1:mt(a),a=m-a,Mi(n,0,a<0?0:a)):[]}function mm(n,a){return n&&n.length?vc(n,Ze(a,3),!0,!0):[]}function ym(n,a){return n&&n.length?vc(n,Ze(a,3),!0):[]}function wm(n,a,f,m){var S=n==null?0:n.length;return S?(f&&typeof f!="number"&&kr(n,a,f)&&(f=0,m=S),db(n,a,f,m)):[]}function Ml(n,a,f){var m=n==null?0:n.length;if(!m)return-1;var S=f==null?0:mt(f);return S<0&&(S=hr(m+S,0)),Qo(n,Ze(a,3),S)}function xl(n,a,f){var m=n==null?0:n.length;if(!m)return-1;var S=m-1;return f!==t&&(S=mt(f),S=f<0?hr(m+S,0):Cr(S,m-1)),Qo(n,Ze(a,3),S,!0)}function El(n){var a=n==null?0:n.length;return a?wr(n,1):[]}function _m(n){var a=n==null?0:n.length;return a?wr(n,x):[]}function Am(n,a){var f=n==null?0:n.length;return f?(a=a===t?1:mt(a),wr(n,a)):[]}function Mm(n){for(var a=-1,f=n==null?0:n.length,m={};++a<f;){var S=n[a];m[S[0]]=S[1]}return m}function Il(n){return n&&n.length?n[0]:t}function xm(n,a,f){var m=n==null?0:n.length;if(!m)return-1;var S=f==null?0:mt(f);return S<0&&(S=hr(m+S,0)),Vs(n,a,S)}function Em(n){var a=n==null?0:n.length;return a?Mi(n,0,-1):[]}var Im=_t(function(n){var a=Jt(n,fh);return a.length&&a[0]===n[0]?Zf(a):[]}),Sm=_t(function(n){var a=xi(n),f=Jt(n,fh);return a===xi(f)?a=t:f.pop(),f.length&&f[0]===n[0]?Zf(f,Ze(a,2)):[]}),Pm=_t(function(n){var a=xi(n),f=Jt(n,fh);return a=typeof a=="function"?a:t,a&&f.pop(),f.length&&f[0]===n[0]?Zf(f,t,a):[]});function Rm(n,a){return n==null?"":Ev.call(n,a)}function xi(n){var a=n==null?0:n.length;return a?n[a-1]:t}function Cm(n,a,f){var m=n==null?0:n.length;if(!m)return-1;var S=m;return f!==t&&(S=mt(f),S=S<0?hr(m+S,0):Cr(S,m-1)),a===a?fv(n,a,S):Qo(n,ad,S,!0)}function Nm(n,a){return n&&n.length?Bd(n,mt(a)):t}var Tm=_t(Sl);function Sl(n,a){return n&&n.length&&a&&a.length?ih(n,a):n}function Om(n,a,f){return n&&n.length&&a&&a.length?ih(n,a,Ze(f,2)):n}function qm(n,a,f){return n&&n.length&&a&&a.length?ih(n,a,t,f):n}var Dm=On(function(n,a){var f=n==null?0:n.length,m=Qf(n,a);return $d(n,Jt(a,function(S){return qn(S,f)?+S:S}).sort(Yd)),m});function km(n,a){var f=[];if(!(n&&n.length))return f;var m=-1,S=[],N=n.length;for(a=Ze(a,3);++m<N;){var U=n[m];a(U,m,n)&&(f.push(U),S.push(m))}return $d(n,S),f}function Mh(n){return n==null?n:Rv.call(n)}function Bm(n,a,f){var m=n==null?0:n.length;return m?(f&&typeof f!="number"&&kr(n,a,f)?(a=0,f=m):(a=a==null?0:mt(a),f=f===t?m:mt(f)),Mi(n,a,f)):[]}function Lm(n,a){return gc(n,a)}function zm(n,a,f){return ah(n,a,Ze(f,2))}function $m(n,a){var f=n==null?0:n.length;if(f){var m=gc(n,a);if(m<f&&Vi(n[m],a))return m}return-1}function Um(n,a){return gc(n,a,!0)}function Fm(n,a,f){return ah(n,a,Ze(f,2),!0)}function jm(n,a){var f=n==null?0:n.length;if(f){var m=gc(n,a,!0)-1;if(Vi(n[m],a))return m}return-1}function Hm(n){return n&&n.length?Fd(n):[]}function Km(n,a){return n&&n.length?Fd(n,Ze(a,2)):[]}function Vm(n){var a=n==null?0:n.length;return a?Mi(n,1,a):[]}function Gm(n,a,f){return n&&n.length?(a=f||a===t?1:mt(a),Mi(n,0,a<0?0:a)):[]}function Jm(n,a,f){var m=n==null?0:n.length;return m?(a=f||a===t?1:mt(a),a=m-a,Mi(n,a<0?0:a,m)):[]}function Qm(n,a){return n&&n.length?vc(n,Ze(a,3),!1,!0):[]}function Ym(n,a){return n&&n.length?vc(n,Ze(a,3)):[]}var Wm=_t(function(n){return es(wr(n,1,rr,!0))}),Xm=_t(function(n){var a=xi(n);return rr(a)&&(a=t),es(wr(n,1,rr,!0),Ze(a,2))}),Zm=_t(function(n){var a=xi(n);return a=typeof a=="function"?a:t,es(wr(n,1,rr,!0),t,a)});function e2(n){return n&&n.length?es(n):[]}function t2(n,a){return n&&n.length?es(n,Ze(a,2)):[]}function r2(n,a){return a=typeof a=="function"?a:t,n&&n.length?es(n,t,a):[]}function xh(n){if(!(n&&n.length))return[];var a=0;return n=Qn(n,function(f){if(rr(f))return a=hr(f.length,a),!0}),Uf(a,function(f){return Jt(n,Lf(f))})}function Pl(n,a){if(!(n&&n.length))return[];var f=xh(n);return a==null?f:Jt(f,function(m){return lr(a,t,m)})}var i2=_t(function(n,a){return rr(n)?Fa(n,a):[]}),n2=_t(function(n){return ch(Qn(n,rr))}),s2=_t(function(n){var a=xi(n);return rr(a)&&(a=t),ch(Qn(n,rr),Ze(a,2))}),a2=_t(function(n){var a=xi(n);return a=typeof a=="function"?a:t,ch(Qn(n,rr),t,a)}),o2=_t(xh);function c2(n,a){return Vd(n||[],a||[],Ua)}function f2(n,a){return Vd(n||[],a||[],Ka)}var h2=_t(function(n){var a=n.length,f=a>1?n[a-1]:t;return f=typeof f=="function"?(n.pop(),f):t,Pl(n,f)});function Rl(n){var a=C(n);return a.__chain__=!0,a}function u2(n,a){return a(n),n}function Ec(n,a){return a(n)}var d2=On(function(n){var a=n.length,f=a?n[0]:0,m=this.__wrapped__,S=function(N){return Qf(N,n)};return a>1||this.__actions__.length||!(m instanceof It)||!qn(f)?this.thru(S):(m=m.slice(f,+f+(a?1:0)),m.__actions__.push({func:Ec,args:[S],thisArg:t}),new _i(m,this.__chain__).thru(function(N){return a&&!N.length&&N.push(t),N}))});function l2(){return Rl(this)}function p2(){return new _i(this.value(),this.__chain__)}function g2(){this.__values__===t&&(this.__values__=jl(this.value()));var n=this.__index__>=this.__values__.length,a=n?t:this.__values__[this.__index__++];return{done:n,value:a}}function v2(){return this}function b2(n){for(var a,f=this;f instanceof hc;){var m=Al(f);m.__index__=0,m.__values__=t,a?S.__wrapped__=m:a=m;var S=m;f=f.__wrapped__}return S.__wrapped__=n,a}function m2(){var n=this.__wrapped__;if(n instanceof It){var a=n;return this.__actions__.length&&(a=new It(this)),a=a.reverse(),a.__actions__.push({func:Ec,args:[Mh],thisArg:t}),new _i(a,this.__chain__)}return this.thru(Mh)}function y2(){return Kd(this.__wrapped__,this.__actions__)}var w2=bc(function(n,a,f){kt.call(n,f)?++n[f]:Nn(n,f,1)});function _2(n,a,f){var m=gt(n)?nd:ub;return f&&kr(n,a,f)&&(a=t),m(n,Ze(a,3))}function A2(n,a){var f=gt(n)?Qn:Pd;return f(n,Ze(a,3))}var M2=rl(Ml),x2=rl(xl);function E2(n,a){return wr(Ic(n,a),1)}function I2(n,a){return wr(Ic(n,a),x)}function S2(n,a,f){return f=f===t?1:mt(f),wr(Ic(n,a),f)}function Cl(n,a){var f=gt(n)?yi:Zn;return f(n,Ze(a,3))}function Nl(n,a){var f=gt(n)?Vg:Sd;return f(n,Ze(a,3))}var P2=bc(function(n,a,f){kt.call(n,f)?n[f].push(a):Nn(n,f,[a])});function R2(n,a,f,m){n=Qr(n)?n:na(n),f=f&&!m?mt(f):0;var S=n.length;return f<0&&(f=hr(S+f,0)),Nc(n)?f<=S&&n.indexOf(a,f)>-1:!!S&&Vs(n,a,f)>-1}var C2=_t(function(n,a,f){var m=-1,S=typeof a=="function",N=Qr(n)?Y(n.length):[];return Zn(n,function(U){N[++m]=S?lr(a,U,f):ja(U,a,f)}),N}),N2=bc(function(n,a,f){Nn(n,f,a)});function Ic(n,a){var f=gt(n)?Jt:qd;return f(n,Ze(a,3))}function T2(n,a,f,m){return n==null?[]:(gt(a)||(a=a==null?[]:[a]),f=m?t:f,gt(f)||(f=f==null?[]:[f]),Ld(n,a,f))}var O2=bc(function(n,a,f){n[f?0:1].push(a)},function(){return[[],[]]});function q2(n,a,f){var m=gt(n)?kf:cd,S=arguments.length<3;return m(n,Ze(a,4),f,S,Zn)}function D2(n,a,f){var m=gt(n)?Gg:cd,S=arguments.length<3;return m(n,Ze(a,4),f,S,Sd)}function k2(n,a){var f=gt(n)?Qn:Pd;return f(n,Rc(Ze(a,3)))}function B2(n){var a=gt(n)?Md:Rb;return a(n)}function L2(n,a,f){(f?kr(n,a,f):a===t)?a=1:a=mt(a);var m=gt(n)?ab:Cb;return m(n,a)}function z2(n){var a=gt(n)?ob:Tb;return a(n)}function $2(n){if(n==null)return 0;if(Qr(n))return Nc(n)?Js(n):n.length;var a=Nr(n);return a==se||a==Le?n.size:th(n).length}function U2(n,a,f){var m=gt(n)?Bf:Ob;return f&&kr(n,a,f)&&(a=t),m(n,Ze(a,3))}var F2=_t(function(n,a){if(n==null)return[];var f=a.length;return f>1&&kr(n,a[0],a[1])?a=[]:f>2&&kr(a[0],a[1],a[2])&&(a=[a[0]]),Ld(n,wr(a,1),[])}),Sc=Av||function(){return Rt.Date.now()};function j2(n,a){if(typeof a!="function")throw new wi(h);return n=mt(n),function(){if(--n<1)return a.apply(this,arguments)}}function Tl(n,a,f){return a=f?t:a,a=n&&a==null?n.length:a,Tn(n,ue,t,t,t,t,a)}function Ol(n,a){var f;if(typeof a!="function")throw new wi(h);return n=mt(n),function(){return--n>0&&(f=a.apply(this,arguments)),n<=1&&(a=t),f}}var Eh=_t(function(n,a,f){var m=G;if(f.length){var S=Wn(f,ra(Eh));m|=ae}return Tn(n,m,a,f,S)}),ql=_t(function(n,a,f){var m=G|Q;if(f.length){var S=Wn(f,ra(ql));m|=ae}return Tn(a,m,n,f,S)});function Dl(n,a,f){a=f?t:a;var m=Tn(n,de,t,t,t,t,t,a);return m.placeholder=Dl.placeholder,m}function kl(n,a,f){a=f?t:a;var m=Tn(n,ce,t,t,t,t,t,a);return m.placeholder=kl.placeholder,m}function Bl(n,a,f){var m,S,N,U,F,V,re=0,ie=!1,fe=!1,ye=!0;if(typeof n!="function")throw new wi(h);a=Ei(a)||0,Qt(f)&&(ie=!!f.leading,fe="maxWait"in f,N=fe?hr(Ei(f.maxWait)||0,a):N,ye="trailing"in f?!!f.trailing:ye);function Be(ir){var Gi=m,Bn=S;return m=S=t,re=ir,U=n.apply(Bn,Gi),U}function rt(ir){return re=ir,F=Ja(Mt,a),ie?Be(ir):U}function yt(ir){var Gi=ir-V,Bn=ir-re,r0=a-Gi;return fe?Cr(r0,N-Bn):r0}function it(ir){var Gi=ir-V,Bn=ir-re;return V===t||Gi>=a||Gi<0||fe&&Bn>=N}function Mt(){var ir=Sc();if(it(ir))return Ct(ir);F=Ja(Mt,yt(ir))}function Ct(ir){return F=t,ye&&m?Be(ir):(m=S=t,U)}function fi(){F!==t&&Gd(F),re=0,m=V=S=F=t}function Br(){return F===t?U:Ct(Sc())}function hi(){var ir=Sc(),Gi=it(ir);if(m=arguments,S=this,V=ir,Gi){if(F===t)return rt(V);if(fe)return Gd(F),F=Ja(Mt,a),Be(V)}return F===t&&(F=Ja(Mt,a)),U}return hi.cancel=fi,hi.flush=Br,hi}var H2=_t(function(n,a){return Id(n,1,a)}),K2=_t(function(n,a,f){return Id(n,Ei(a)||0,f)});function V2(n){return Tn(n,Te)}function Pc(n,a){if(typeof n!="function"||a!=null&&typeof a!="function")throw new wi(h);var f=function(){var m=arguments,S=a?a.apply(this,m):m[0],N=f.cache;if(N.has(S))return N.get(S);var U=n.apply(this,m);return f.cache=N.set(S,U)||N,U};return f.cache=new(Pc.Cache||Cn),f}Pc.Cache=Cn;function Rc(n){if(typeof n!="function")throw new wi(h);return function(){var a=arguments;switch(a.length){case 0:return!n.call(this);case 1:return!n.call(this,a[0]);case 2:return!n.call(this,a[0],a[1]);case 3:return!n.call(this,a[0],a[1],a[2])}return!n.apply(this,a)}}function G2(n){return Ol(2,n)}var J2=qb(function(n,a){a=a.length==1&&gt(a[0])?Jt(a[0],ai(Ze())):Jt(wr(a,1),ai(Ze()));var f=a.length;return _t(function(m){for(var S=-1,N=Cr(m.length,f);++S<N;)m[S]=a[S].call(this,m[S]);return lr(n,this,m)})}),Ih=_t(function(n,a){var f=Wn(a,ra(Ih));return Tn(n,ae,t,a,f)}),Ll=_t(function(n,a){var f=Wn(a,ra(Ll));return Tn(n,he,t,a,f)}),Q2=On(function(n,a){return Tn(n,le,t,t,t,a)});function Y2(n,a){if(typeof n!="function")throw new wi(h);return a=a===t?a:mt(a),_t(n,a)}function W2(n,a){if(typeof n!="function")throw new wi(h);return a=a==null?0:hr(mt(a),0),_t(function(f){var m=f[a],S=rs(f,0,a);return m&&Yn(S,m),lr(n,this,S)})}function X2(n,a,f){var m=!0,S=!0;if(typeof n!="function")throw new wi(h);return Qt(f)&&(m="leading"in f?!!f.leading:m,S="trailing"in f?!!f.trailing:S),Bl(n,a,{leading:m,maxWait:a,trailing:S})}function Z2(n){return Tl(n,1)}function e6(n,a){return Ih(hh(a),n)}function t6(){if(!arguments.length)return[];var n=arguments[0];return gt(n)?n:[n]}function r6(n){return Ai(n,O)}function i6(n,a){return a=typeof a=="function"?a:t,Ai(n,O,a)}function n6(n){return Ai(n,P|O)}function s6(n,a){return a=typeof a=="function"?a:t,Ai(n,P|O,a)}function a6(n,a){return a==null||Ed(n,a,pr(a))}function Vi(n,a){return n===a||n!==n&&a!==a}var o6=_c(Xf),c6=_c(function(n,a){return n>=a}),xs=Nd(function(){return arguments}())?Nd:function(n){return Wt(n)&&kt.call(n,"callee")&&!bd.call(n,"callee")},gt=Y.isArray,f6=qr?ai(qr):bb;function Qr(n){return n!=null&&Cc(n.length)&&!Dn(n)}function rr(n){return Wt(n)&&Qr(n)}function h6(n){return n===!0||n===!1||Wt(n)&&Dr(n)==z}var is=xv||Bh,u6=ji?ai(ji):mb;function d6(n){return Wt(n)&&n.nodeType===1&&!Qa(n)}function l6(n){if(n==null)return!0;if(Qr(n)&&(gt(n)||typeof n=="string"||typeof n.splice=="function"||is(n)||ia(n)||xs(n)))return!n.length;var a=Nr(n);if(a==se||a==Le)return!n.size;if(Ga(n))return!th(n).length;for(var f in n)if(kt.call(n,f))return!1;return!0}function p6(n,a){return Ha(n,a)}function g6(n,a,f){f=typeof f=="function"?f:t;var m=f?f(n,a):t;return m===t?Ha(n,a,t,f):!!m}function Sh(n){if(!Wt(n))return!1;var a=Dr(n);return a==k||a==b||typeof n.message=="string"&&typeof n.name=="string"&&!Qa(n)}function v6(n){return typeof n=="number"&&yd(n)}function Dn(n){if(!Qt(n))return!1;var a=Dr(n);return a==W||a==ne||a==T||a==Ee}function zl(n){return typeof n=="number"&&n==mt(n)}function Cc(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=E}function Qt(n){var a=typeof n;return n!=null&&(a=="object"||a=="function")}function Wt(n){return n!=null&&typeof n=="object"}var $l=mi?ai(mi):wb;function b6(n,a){return n===a||eh(n,a,bh(a))}function m6(n,a,f){return f=typeof f=="function"?f:t,eh(n,a,bh(a),f)}function y6(n){return Ul(n)&&n!=+n}function w6(n){if(im(n))throw new dt(o);return Td(n)}function _6(n){return n===null}function A6(n){return n==null}function Ul(n){return typeof n=="number"||Wt(n)&&Dr(n)==ge}function Qa(n){if(!Wt(n)||Dr(n)!=Oe)return!1;var a=ic(n);if(a===null)return!0;var f=kt.call(a,"constructor")&&a.constructor;return typeof f=="function"&&f instanceof f&&Zo.call(f)==mv}var Ph=cn?ai(cn):_b;function M6(n){return zl(n)&&n>=-E&&n<=E}var Fl=qa?ai(qa):Ab;function Nc(n){return typeof n=="string"||!gt(n)&&Wt(n)&&Dr(n)==_e}function ci(n){return typeof n=="symbol"||Wt(n)&&Dr(n)==Fe}var ia=vs?ai(vs):Mb;function x6(n){return n===t}function E6(n){return Wt(n)&&Nr(n)==me}function I6(n){return Wt(n)&&Dr(n)==je}var S6=_c(rh),P6=_c(function(n,a){return n<=a});function jl(n){if(!n)return[];if(Qr(n))return Nc(n)?Hi(n):Jr(n);if(ka&&n[ka])return av(n[ka]());var a=Nr(n),f=a==se?jf:a==Le?Yo:na;return f(n)}function kn(n){if(!n)return n===0?n:0;if(n=Ei(n),n===x||n===-x){var a=n<0?-1:1;return a*A}return n===n?n:0}function mt(n){var a=kn(n),f=a%1;return a===a?f?a-f:a:0}function Hl(n){return n?ws(mt(n),0,l):0}function Ei(n){if(typeof n=="number")return n;if(ci(n))return u;if(Qt(n)){var a=typeof n.valueOf=="function"?n.valueOf():n;n=Qt(a)?a+"":a}if(typeof n!="string")return n===0?n:+n;n=fd(n);var f=Ir.test(n);return f||Pr.test(n)?pt(n.slice(2),f?2:8):Er.test(n)?u:+n}function Kl(n){return hn(n,Yr(n))}function R6(n){return n?ws(mt(n),-E,E):n===0?n:0}function qt(n){return n==null?"":oi(n)}var C6=ea(function(n,a){if(Ga(a)||Qr(a)){hn(a,pr(a),n);return}for(var f in a)kt.call(a,f)&&Ua(n,f,a[f])}),Vl=ea(function(n,a){hn(a,Yr(a),n)}),Tc=ea(function(n,a,f,m){hn(a,Yr(a),n,m)}),N6=ea(function(n,a,f,m){hn(a,pr(a),n,m)}),T6=On(Qf);function O6(n,a){var f=Zs(n);return a==null?f:xd(f,a)}var q6=_t(function(n,a){n=Ft(n);var f=-1,m=a.length,S=m>2?a[2]:t;for(S&&kr(a[0],a[1],S)&&(m=1);++f<m;)for(var N=a[f],U=Yr(N),F=-1,V=U.length;++F<V;){var re=U[F],ie=n[re];(ie===t||Vi(ie,Ys[re])&&!kt.call(n,re))&&(n[re]=N[re])}return n}),D6=_t(function(n){return n.push(t,fl),lr(Gl,t,n)});function k6(n,a){return sd(n,Ze(a,3),fn)}function B6(n,a){return sd(n,Ze(a,3),Wf)}function L6(n,a){return n==null?n:Yf(n,Ze(a,3),Yr)}function z6(n,a){return n==null?n:Rd(n,Ze(a,3),Yr)}function $6(n,a){return n&&fn(n,Ze(a,3))}function U6(n,a){return n&&Wf(n,Ze(a,3))}function F6(n){return n==null?[]:lc(n,pr(n))}function j6(n){return n==null?[]:lc(n,Yr(n))}function Rh(n,a,f){var m=n==null?t:_s(n,a);return m===t?f:m}function H6(n,a){return n!=null&&dl(n,a,lb)}function Ch(n,a){return n!=null&&dl(n,a,pb)}var K6=nl(function(n,a,f){a!=null&&typeof a.toString!="function"&&(a=ec.call(a)),n[a]=f},Th(Wr)),V6=nl(function(n,a,f){a!=null&&typeof a.toString!="function"&&(a=ec.call(a)),kt.call(n,a)?n[a].push(f):n[a]=[f]},Ze),G6=_t(ja);function pr(n){return Qr(n)?Ad(n):th(n)}function Yr(n){return Qr(n)?Ad(n,!0):xb(n)}function J6(n,a){var f={};return a=Ze(a,3),fn(n,function(m,S,N){Nn(f,a(m,S,N),m)}),f}function Q6(n,a){var f={};return a=Ze(a,3),fn(n,function(m,S,N){Nn(f,S,a(m,S,N))}),f}var Y6=ea(function(n,a,f){pc(n,a,f)}),Gl=ea(function(n,a,f,m){pc(n,a,f,m)}),W6=On(function(n,a){var f={};if(n==null)return f;var m=!1;a=Jt(a,function(N){return N=ts(N,n),m||(m=N.length>1),N}),hn(n,gh(n),f),m&&(f=Ai(f,P|q|O,Kb));for(var S=a.length;S--;)oh(f,a[S]);return f});function X6(n,a){return Jl(n,Rc(Ze(a)))}var Z6=On(function(n,a){return n==null?{}:Ib(n,a)});function Jl(n,a){if(n==null)return{};var f=Jt(gh(n),function(m){return[m]});return a=Ze(a),zd(n,f,function(m,S){return a(m,S[0])})}function e3(n,a,f){a=ts(a,n);var m=-1,S=a.length;for(S||(S=1,n=t);++m<S;){var N=n==null?t:n[un(a[m])];N===t&&(m=S,N=f),n=Dn(N)?N.call(n):N}return n}function t3(n,a,f){return n==null?n:Ka(n,a,f)}function r3(n,a,f,m){return m=typeof m=="function"?m:t,n==null?n:Ka(n,a,f,m)}var Ql=ol(pr),Yl=ol(Yr);function i3(n,a,f){var m=gt(n),S=m||is(n)||ia(n);if(a=Ze(a,4),f==null){var N=n&&n.constructor;S?f=m?new N:[]:Qt(n)?f=Dn(N)?Zs(ic(n)):{}:f={}}return(S?yi:fn)(n,function(U,F,V){return a(f,U,F,V)}),f}function n3(n,a){return n==null?!0:oh(n,a)}function s3(n,a,f){return n==null?n:Hd(n,a,hh(f))}function a3(n,a,f,m){return m=typeof m=="function"?m:t,n==null?n:Hd(n,a,hh(f),m)}function na(n){return n==null?[]:Ff(n,pr(n))}function o3(n){return n==null?[]:Ff(n,Yr(n))}function c3(n,a,f){return f===t&&(f=a,a=t),f!==t&&(f=Ei(f),f=f===f?f:0),a!==t&&(a=Ei(a),a=a===a?a:0),ws(Ei(n),a,f)}function f3(n,a,f){return a=kn(a),f===t?(f=a,a=0):f=kn(f),n=Ei(n),gb(n,a,f)}function h3(n,a,f){if(f&&typeof f!="boolean"&&kr(n,a,f)&&(a=f=t),f===t&&(typeof a=="boolean"?(f=a,a=t):typeof n=="boolean"&&(f=n,n=t)),n===t&&a===t?(n=0,a=1):(n=kn(n),a===t?(a=n,n=0):a=kn(a)),n>a){var m=n;n=a,a=m}if(f||n%1||a%1){var S=wd();return Cr(n+S*(a-n+$t("1e-"+((S+"").length-1))),a)}return nh(n,a)}var u3=ta(function(n,a,f){return a=a.toLowerCase(),n+(f?Wl(a):a)});function Wl(n){return Nh(qt(n).toLowerCase())}function Xl(n){return n=qt(n),n&&n.replace(Yt,tv).replace(Of,"")}function d3(n,a,f){n=qt(n),a=oi(a);var m=n.length;f=f===t?m:ws(mt(f),0,m);var S=f;return f-=a.length,f>=0&&n.slice(f,S)==a}function l3(n){return n=qt(n),n&&He.test(n)?n.replace(Et,rv):n}function p3(n){return n=qt(n),n&&Re.test(n)?n.replace(We,"\\$&"):n}var g3=ta(function(n,a,f){return n+(f?"-":"")+a.toLowerCase()}),v3=ta(function(n,a,f){return n+(f?" ":"")+a.toLowerCase()}),b3=tl("toLowerCase");function m3(n,a,f){n=qt(n),a=mt(a);var m=a?Js(n):0;if(!a||m>=a)return n;var S=(a-m)/2;return wc(oc(S),f)+n+wc(ac(S),f)}function y3(n,a,f){n=qt(n),a=mt(a);var m=a?Js(n):0;return a&&m<a?n+wc(a-m,f):n}function w3(n,a,f){n=qt(n),a=mt(a);var m=a?Js(n):0;return a&&m<a?wc(a-m,f)+n:n}function _3(n,a,f){return f||a==null?a=0:a&&(a=+a),Pv(qt(n).replace(Xe,""),a||0)}function A3(n,a,f){return(f?kr(n,a,f):a===t)?a=1:a=mt(a),sh(qt(n),a)}function M3(){var n=arguments,a=qt(n[0]);return n.length<3?a:a.replace(n[1],n[2])}var x3=ta(function(n,a,f){return n+(f?"_":"")+a.toLowerCase()});function E3(n,a,f){return f&&typeof f!="number"&&kr(n,a,f)&&(a=f=t),f=f===t?l:f>>>0,f?(n=qt(n),n&&(typeof a=="string"||a!=null&&!Ph(a))&&(a=oi(a),!a&&Gs(n))?rs(Hi(n),0,f):n.split(a,f)):[]}var I3=ta(function(n,a,f){return n+(f?" ":"")+Nh(a)});function S3(n,a,f){return n=qt(n),f=f==null?0:ws(mt(f),0,n.length),a=oi(a),n.slice(f,f+a.length)==a}function P3(n,a,f){var m=C.templateSettings;f&&kr(n,a,f)&&(a=t),n=qt(n),a=Tc({},a,m,cl);var S=Tc({},a.imports,m.imports,cl),N=pr(S),U=Ff(S,N),F,V,re=0,ie=a.interpolate||Hr,fe="__p += '",ye=Hf((a.escape||Hr).source+"|"+ie.source+"|"+(ie===Je?tt:Hr).source+"|"+(a.evaluate||Hr).source+"|$","g"),Be="//# sourceURL="+(kt.call(a,"sourceURL")?(a.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++qf+"]")+`
`;n.replace(ye,function(it,Mt,Ct,fi,Br,hi){return Ct||(Ct=fi),fe+=n.slice(re,hi).replace(Bi,iv),Mt&&(F=!0,fe+=`' +
__e(`+Mt+`) +
'`),Br&&(V=!0,fe+=`';
`+Br+`;
__p += '`),Ct&&(fe+=`' +
((__t = (`+Ct+`)) == null ? '' : __t) +
'`),re=hi+it.length,it}),fe+=`';
`;var rt=kt.call(a,"variable")&&a.variable;if(!rt)fe=`with (obj) {
`+fe+`
}
`;else if(Nt.test(rt))throw new dt(g);fe=(V?fe.replace(wt,""):fe).replace(ut,"$1").replace($e,"$1;"),fe="function("+(rt||"obj")+`) {
`+(rt?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(F?", __e = _.escape":"")+(V?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+fe+`return __p
}`;var yt=e0(function(){return Ot(N,Be+"return "+fe).apply(t,U)});if(yt.source=fe,Sh(yt))throw yt;return yt}function R3(n){return qt(n).toLowerCase()}function C3(n){return qt(n).toUpperCase()}function N3(n,a,f){if(n=qt(n),n&&(f||a===t))return fd(n);if(!n||!(a=oi(a)))return n;var m=Hi(n),S=Hi(a),N=hd(m,S),U=ud(m,S)+1;return rs(m,N,U).join("")}function T3(n,a,f){if(n=qt(n),n&&(f||a===t))return n.slice(0,ld(n)+1);if(!n||!(a=oi(a)))return n;var m=Hi(n),S=ud(m,Hi(a))+1;return rs(m,0,S).join("")}function O3(n,a,f){if(n=qt(n),n&&(f||a===t))return n.replace(Xe,"");if(!n||!(a=oi(a)))return n;var m=Hi(n),S=hd(m,Hi(a));return rs(m,S).join("")}function q3(n,a){var f=lt,m=B;if(Qt(a)){var S="separator"in a?a.separator:S;f="length"in a?mt(a.length):f,m="omission"in a?oi(a.omission):m}n=qt(n);var N=n.length;if(Gs(n)){var U=Hi(n);N=U.length}if(f>=N)return n;var F=f-Js(m);if(F<1)return m;var V=U?rs(U,0,F).join(""):n.slice(0,F);if(S===t)return V+m;if(U&&(F+=V.length-F),Ph(S)){if(n.slice(F).search(S)){var re,ie=V;for(S.global||(S=Hf(S.source,qt(bt.exec(S))+"g")),S.lastIndex=0;re=S.exec(ie);)var fe=re.index;V=V.slice(0,fe===t?F:fe)}}else if(n.indexOf(oi(S),F)!=F){var ye=V.lastIndexOf(S);ye>-1&&(V=V.slice(0,ye))}return V+m}function D3(n){return n=qt(n),n&&Ae.test(n)?n.replace(At,hv):n}var k3=ta(function(n,a,f){return n+(f?" ":"")+a.toUpperCase()}),Nh=tl("toUpperCase");function Zl(n,a,f){return n=qt(n),a=f?t:a,a===t?sv(n)?lv(n):Yg(n):n.match(a)||[]}var e0=_t(function(n,a){try{return lr(n,t,a)}catch(f){return Sh(f)?f:new dt(f)}}),B3=On(function(n,a){return yi(a,function(f){f=un(f),Nn(n,f,Eh(n[f],n))}),n});function L3(n){var a=n==null?0:n.length,f=Ze();return n=a?Jt(n,function(m){if(typeof m[1]!="function")throw new wi(h);return[f(m[0]),m[1]]}):[],_t(function(m){for(var S=-1;++S<a;){var N=n[S];if(lr(N[0],this,m))return lr(N[1],this,m)}})}function z3(n){return hb(Ai(n,P))}function Th(n){return function(){return n}}function $3(n,a){return n==null||n!==n?a:n}var U3=il(),F3=il(!0);function Wr(n){return n}function Oh(n){return Od(typeof n=="function"?n:Ai(n,P))}function j3(n){return Dd(Ai(n,P))}function H3(n,a){return kd(n,Ai(a,P))}var K3=_t(function(n,a){return function(f){return ja(f,n,a)}}),V3=_t(function(n,a){return function(f){return ja(n,f,a)}});function qh(n,a,f){var m=pr(a),S=lc(a,m);f==null&&!(Qt(a)&&(S.length||!m.length))&&(f=a,a=n,n=this,S=lc(a,pr(a)));var N=!(Qt(f)&&"chain"in f)||!!f.chain,U=Dn(n);return yi(S,function(F){var V=a[F];n[F]=V,U&&(n.prototype[F]=function(){var re=this.__chain__;if(N||re){var ie=n(this.__wrapped__),fe=ie.__actions__=Jr(this.__actions__);return fe.push({func:V,args:arguments,thisArg:n}),ie.__chain__=re,ie}return V.apply(n,Yn([this.value()],arguments))})}),n}function G3(){return Rt._===this&&(Rt._=yv),this}function Dh(){}function J3(n){return n=mt(n),_t(function(a){return Bd(a,n)})}var Q3=dh(Jt),Y3=dh(nd),W3=dh(Bf);function t0(n){return yh(n)?Lf(un(n)):Sb(n)}function X3(n){return function(a){return n==null?t:_s(n,a)}}var Z3=sl(),ey=sl(!0);function kh(){return[]}function Bh(){return!1}function ty(){return{}}function ry(){return""}function iy(){return!0}function ny(n,a){if(n=mt(n),n<1||n>E)return[];var f=l,m=Cr(n,l);a=Ze(a),n-=l;for(var S=Uf(m,a);++f<n;)a(f);return S}function sy(n){return gt(n)?Jt(n,un):ci(n)?[n]:Jr(_l(qt(n)))}function ay(n){var a=++bv;return qt(n)+a}var oy=yc(function(n,a){return n+a},0),cy=lh("ceil"),fy=yc(function(n,a){return n/a},1),hy=lh("floor");function uy(n){return n&&n.length?dc(n,Wr,Xf):t}function dy(n,a){return n&&n.length?dc(n,Ze(a,2),Xf):t}function ly(n){return od(n,Wr)}function py(n,a){return od(n,Ze(a,2))}function gy(n){return n&&n.length?dc(n,Wr,rh):t}function vy(n,a){return n&&n.length?dc(n,Ze(a,2),rh):t}var by=yc(function(n,a){return n*a},1),my=lh("round"),yy=yc(function(n,a){return n-a},0);function wy(n){return n&&n.length?$f(n,Wr):0}function _y(n,a){return n&&n.length?$f(n,Ze(a,2)):0}return C.after=j2,C.ary=Tl,C.assign=C6,C.assignIn=Vl,C.assignInWith=Tc,C.assignWith=N6,C.at=T6,C.before=Ol,C.bind=Eh,C.bindAll=B3,C.bindKey=ql,C.castArray=t6,C.chain=Rl,C.chunk=hm,C.compact=um,C.concat=dm,C.cond=L3,C.conforms=z3,C.constant=Th,C.countBy=w2,C.create=O6,C.curry=Dl,C.curryRight=kl,C.debounce=Bl,C.defaults=q6,C.defaultsDeep=D6,C.defer=H2,C.delay=K2,C.difference=lm,C.differenceBy=pm,C.differenceWith=gm,C.drop=vm,C.dropRight=bm,C.dropRightWhile=mm,C.dropWhile=ym,C.fill=wm,C.filter=A2,C.flatMap=E2,C.flatMapDeep=I2,C.flatMapDepth=S2,C.flatten=El,C.flattenDeep=_m,C.flattenDepth=Am,C.flip=V2,C.flow=U3,C.flowRight=F3,C.fromPairs=Mm,C.functions=F6,C.functionsIn=j6,C.groupBy=P2,C.initial=Em,C.intersection=Im,C.intersectionBy=Sm,C.intersectionWith=Pm,C.invert=K6,C.invertBy=V6,C.invokeMap=C2,C.iteratee=Oh,C.keyBy=N2,C.keys=pr,C.keysIn=Yr,C.map=Ic,C.mapKeys=J6,C.mapValues=Q6,C.matches=j3,C.matchesProperty=H3,C.memoize=Pc,C.merge=Y6,C.mergeWith=Gl,C.method=K3,C.methodOf=V3,C.mixin=qh,C.negate=Rc,C.nthArg=J3,C.omit=W6,C.omitBy=X6,C.once=G2,C.orderBy=T2,C.over=Q3,C.overArgs=J2,C.overEvery=Y3,C.overSome=W3,C.partial=Ih,C.partialRight=Ll,C.partition=O2,C.pick=Z6,C.pickBy=Jl,C.property=t0,C.propertyOf=X3,C.pull=Tm,C.pullAll=Sl,C.pullAllBy=Om,C.pullAllWith=qm,C.pullAt=Dm,C.range=Z3,C.rangeRight=ey,C.rearg=Q2,C.reject=k2,C.remove=km,C.rest=Y2,C.reverse=Mh,C.sampleSize=L2,C.set=t3,C.setWith=r3,C.shuffle=z2,C.slice=Bm,C.sortBy=F2,C.sortedUniq=Hm,C.sortedUniqBy=Km,C.split=E3,C.spread=W2,C.tail=Vm,C.take=Gm,C.takeRight=Jm,C.takeRightWhile=Qm,C.takeWhile=Ym,C.tap=u2,C.throttle=X2,C.thru=Ec,C.toArray=jl,C.toPairs=Ql,C.toPairsIn=Yl,C.toPath=sy,C.toPlainObject=Kl,C.transform=i3,C.unary=Z2,C.union=Wm,C.unionBy=Xm,C.unionWith=Zm,C.uniq=e2,C.uniqBy=t2,C.uniqWith=r2,C.unset=n3,C.unzip=xh,C.unzipWith=Pl,C.update=s3,C.updateWith=a3,C.values=na,C.valuesIn=o3,C.without=i2,C.words=Zl,C.wrap=e6,C.xor=n2,C.xorBy=s2,C.xorWith=a2,C.zip=o2,C.zipObject=c2,C.zipObjectDeep=f2,C.zipWith=h2,C.entries=Ql,C.entriesIn=Yl,C.extend=Vl,C.extendWith=Tc,qh(C,C),C.add=oy,C.attempt=e0,C.camelCase=u3,C.capitalize=Wl,C.ceil=cy,C.clamp=c3,C.clone=r6,C.cloneDeep=n6,C.cloneDeepWith=s6,C.cloneWith=i6,C.conformsTo=a6,C.deburr=Xl,C.defaultTo=$3,C.divide=fy,C.endsWith=d3,C.eq=Vi,C.escape=l3,C.escapeRegExp=p3,C.every=_2,C.find=M2,C.findIndex=Ml,C.findKey=k6,C.findLast=x2,C.findLastIndex=xl,C.findLastKey=B6,C.floor=hy,C.forEach=Cl,C.forEachRight=Nl,C.forIn=L6,C.forInRight=z6,C.forOwn=$6,C.forOwnRight=U6,C.get=Rh,C.gt=o6,C.gte=c6,C.has=H6,C.hasIn=Ch,C.head=Il,C.identity=Wr,C.includes=R2,C.indexOf=xm,C.inRange=f3,C.invoke=G6,C.isArguments=xs,C.isArray=gt,C.isArrayBuffer=f6,C.isArrayLike=Qr,C.isArrayLikeObject=rr,C.isBoolean=h6,C.isBuffer=is,C.isDate=u6,C.isElement=d6,C.isEmpty=l6,C.isEqual=p6,C.isEqualWith=g6,C.isError=Sh,C.isFinite=v6,C.isFunction=Dn,C.isInteger=zl,C.isLength=Cc,C.isMap=$l,C.isMatch=b6,C.isMatchWith=m6,C.isNaN=y6,C.isNative=w6,C.isNil=A6,C.isNull=_6,C.isNumber=Ul,C.isObject=Qt,C.isObjectLike=Wt,C.isPlainObject=Qa,C.isRegExp=Ph,C.isSafeInteger=M6,C.isSet=Fl,C.isString=Nc,C.isSymbol=ci,C.isTypedArray=ia,C.isUndefined=x6,C.isWeakMap=E6,C.isWeakSet=I6,C.join=Rm,C.kebabCase=g3,C.last=xi,C.lastIndexOf=Cm,C.lowerCase=v3,C.lowerFirst=b3,C.lt=S6,C.lte=P6,C.max=uy,C.maxBy=dy,C.mean=ly,C.meanBy=py,C.min=gy,C.minBy=vy,C.stubArray=kh,C.stubFalse=Bh,C.stubObject=ty,C.stubString=ry,C.stubTrue=iy,C.multiply=by,C.nth=Nm,C.noConflict=G3,C.noop=Dh,C.now=Sc,C.pad=m3,C.padEnd=y3,C.padStart=w3,C.parseInt=_3,C.random=h3,C.reduce=q2,C.reduceRight=D2,C.repeat=A3,C.replace=M3,C.result=e3,C.round=my,C.runInContext=K,C.sample=B2,C.size=$2,C.snakeCase=x3,C.some=U2,C.sortedIndex=Lm,C.sortedIndexBy=zm,C.sortedIndexOf=$m,C.sortedLastIndex=Um,C.sortedLastIndexBy=Fm,C.sortedLastIndexOf=jm,C.startCase=I3,C.startsWith=S3,C.subtract=yy,C.sum=wy,C.sumBy=_y,C.template=P3,C.times=ny,C.toFinite=kn,C.toInteger=mt,C.toLength=Hl,C.toLower=R3,C.toNumber=Ei,C.toSafeInteger=R6,C.toString=qt,C.toUpper=C3,C.trim=N3,C.trimEnd=T3,C.trimStart=O3,C.truncate=q3,C.unescape=D3,C.uniqueId=ay,C.upperCase=k3,C.upperFirst=Nh,C.each=Cl,C.eachRight=Nl,C.first=Il,qh(C,function(){var n={};return fn(C,function(a,f){kt.call(C.prototype,f)||(n[f]=a)}),n}(),{chain:!1}),C.VERSION=i,yi(["bind","bindKey","curry","curryRight","partial","partialRight"],function(n){C[n].placeholder=C}),yi(["drop","take"],function(n,a){It.prototype[n]=function(f){f=f===t?1:hr(mt(f),0);var m=this.__filtered__&&!a?new It(this):this.clone();return m.__filtered__?m.__takeCount__=Cr(f,m.__takeCount__):m.__views__.push({size:Cr(f,l),type:n+(m.__dir__<0?"Right":"")}),m},It.prototype[n+"Right"]=function(f){return this.reverse()[n](f).reverse()}}),yi(["filter","map","takeWhile"],function(n,a){var f=a+1,m=f==d||f==w;It.prototype[n]=function(S){var N=this.clone();return N.__iteratees__.push({iteratee:Ze(S,3),type:f}),N.__filtered__=N.__filtered__||m,N}}),yi(["head","last"],function(n,a){var f="take"+(a?"Right":"");It.prototype[n]=function(){return this[f](1).value()[0]}}),yi(["initial","tail"],function(n,a){var f="drop"+(a?"":"Right");It.prototype[n]=function(){return this.__filtered__?new It(this):this[f](1)}}),It.prototype.compact=function(){return this.filter(Wr)},It.prototype.find=function(n){return this.filter(n).head()},It.prototype.findLast=function(n){return this.reverse().find(n)},It.prototype.invokeMap=_t(function(n,a){return typeof n=="function"?new It(this):this.map(function(f){return ja(f,n,a)})}),It.prototype.reject=function(n){return this.filter(Rc(Ze(n)))},It.prototype.slice=function(n,a){n=mt(n);var f=this;return f.__filtered__&&(n>0||a<0)?new It(f):(n<0?f=f.takeRight(-n):n&&(f=f.drop(n)),a!==t&&(a=mt(a),f=a<0?f.dropRight(-a):f.take(a-n)),f)},It.prototype.takeRightWhile=function(n){return this.reverse().takeWhile(n).reverse()},It.prototype.toArray=function(){return this.take(l)},fn(It.prototype,function(n,a){var f=/^(?:filter|find|map|reject)|While$/.test(a),m=/^(?:head|last)$/.test(a),S=C[m?"take"+(a=="last"?"Right":""):a],N=m||/^find/.test(a);S&&(C.prototype[a]=function(){var U=this.__wrapped__,F=m?[1]:arguments,V=U instanceof It,re=F[0],ie=V||gt(U),fe=function(Mt){var Ct=S.apply(C,Yn([Mt],F));return m&&ye?Ct[0]:Ct};ie&&f&&typeof re=="function"&&re.length!=1&&(V=ie=!1);var ye=this.__chain__,Be=!!this.__actions__.length,rt=N&&!ye,yt=V&&!Be;if(!N&&ie){U=yt?U:new It(this);var it=n.apply(U,F);return it.__actions__.push({func:Ec,args:[fe],thisArg:t}),new _i(it,ye)}return rt&&yt?n.apply(this,F):(it=this.thru(fe),rt?m?it.value()[0]:it.value():it)})}),yi(["pop","push","shift","sort","splice","unshift"],function(n){var a=Wo[n],f=/^(?:push|sort|unshift)$/.test(n)?"tap":"thru",m=/^(?:pop|shift)$/.test(n);C.prototype[n]=function(){var S=arguments;if(m&&!this.__chain__){var N=this.value();return a.apply(gt(N)?N:[],S)}return this[f](function(U){return a.apply(gt(U)?U:[],S)})}}),fn(It.prototype,function(n,a){var f=C[a];if(f){var m=f.name+"";kt.call(Xs,m)||(Xs[m]=[]),Xs[m].push({name:a,func:f})}}),Xs[mc(t,Q).name]=[{name:"wrapper",func:t}],It.prototype.clone=Dv,It.prototype.reverse=kv,It.prototype.value=Bv,C.prototype.at=d2,C.prototype.chain=l2,C.prototype.commit=p2,C.prototype.next=g2,C.prototype.plant=b2,C.prototype.reverse=m2,C.prototype.toJSON=C.prototype.valueOf=C.prototype.value=y2,C.prototype.first=C.prototype.head,ka&&(C.prototype[ka]=v2),C},Qs=pv();tr?((tr.exports=Qs)._=Qs,Ut._=Qs):Rt._=Qs}).call(so)})(Ru,Ru.exports);var ix=Object.defineProperty,nx=Object.defineProperties,sx=Object.getOwnPropertyDescriptors,Fp=Object.getOwnPropertySymbols,ax=Object.prototype.hasOwnProperty,ox=Object.prototype.propertyIsEnumerable,jp=(r,e,t)=>e in r?ix(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,zc=(r,e)=>{for(var t in e||(e={}))ax.call(e,t)&&jp(r,t,e[t]);if(Fp)for(var t of Fp(e))ox.call(e,t)&&jp(r,t,e[t]);return r},cx=(r,e)=>nx(r,sx(e));function nn(r,e,t){var i;const s=ho(r);return((i=e.rpcMap)==null?void 0:i[s.reference])||`${rx}?chainId=${s.namespace}:${s.reference}&projectId=${t}`}function Us(r){return r.includes(":")?r.split(":")[1]:r}function jg(r){return r.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function fx(r,e){const t=Object.keys(e.namespaces).filter(s=>s.includes(r));if(!t.length)return[];const i=[];return t.forEach(s=>{const o=e.namespaces[s].accounts;i.push(...o)}),i}function du(r={},e={}){const t=Hp(r),i=Hp(e);return Ru.exports.merge(t,i)}function Hp(r){var e,t,i,s;const o={};if(!Ao(r))return o;for(const[h,g]of Object.entries(r)){const y=Wu(h)?[h]:g.chains,_=g.methods||[],I=g.events||[],P=g.rpcMap||{},q=fo(h);o[q]=cx(zc(zc({},o[q]),g),{chains:Fc(y,(e=o[q])==null?void 0:e.chains),methods:Fc(_,(t=o[q])==null?void 0:t.methods),events:Fc(I,(i=o[q])==null?void 0:i.events),rpcMap:zc(zc({},P),(s=o[q])==null?void 0:s.rpcMap)})}return o}function hx(r){return r.includes(":")?r.split(":")[2]:r}function Kp(r){const e={};for(const[t,i]of Object.entries(r)){const s=i.methods||[],o=i.events||[],h=i.accounts||[],g=Wu(t)?[t]:i.chains?i.chains:jg(i.accounts);e[t]={chains:g,methods:s,events:o,accounts:h}}return e}function lu(r){return typeof r=="number"?r:r.includes("0x")?parseInt(r,16):(r=r.includes(":")?r.split(":")[1]:r,isNaN(Number(r))?r:Number(r))}const Hg={},Dt=r=>Hg[r],pu=(r,e)=>{Hg[r]=e};class ux{constructor(e){this.name="polkadot",this.namespace=e.namespace,this.events=Dt("events"),this.client=Dt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(an.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var i;const s=Us(t);e[s]=this.createHttpProvider(s,(i=this.namespace.rpcMap)==null?void 0:i[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){const i=t||nn(e,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);return new sn(new En(i,Dt("disableProviderPing")))}}var dx=Object.defineProperty,lx=Object.defineProperties,px=Object.getOwnPropertyDescriptors,Vp=Object.getOwnPropertySymbols,gx=Object.prototype.hasOwnProperty,vx=Object.prototype.propertyIsEnumerable,Gp=(r,e,t)=>e in r?dx(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Jp=(r,e)=>{for(var t in e||(e={}))gx.call(e,t)&&Gp(r,t,e[t]);if(Vp)for(var t of Vp(e))vx.call(e,t)&&Gp(r,t,e[t]);return r},Qp=(r,e)=>lx(r,px(e));class bx{constructor(e){this.name="eip155",this.namespace=e.namespace,this.events=Dt("events"),this.client=Dt("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(e)}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(parseInt(e),t),this.chainId=parseInt(e),this.events.emit(an.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,t){const i=t||nn(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);return new sn(new En(i,Dt("disableProviderPing")))}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var i;const s=parseInt(Us(t));e[s]=this.createHttpProvider(s,(i=this.namespace.rpcMap)==null?void 0:i[t])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}async handleSwitchChain(e){var t,i;let s=e.request.params?(t=e.request.params[0])==null?void 0:t.chainId:"0x0";s=s.startsWith("0x")?s:`0x${s}`;const o=parseInt(s,16);if(this.isChainApproved(o))this.setDefaultChain(`${o}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:s}]},chainId:(i=this.namespace.chains)==null?void 0:i[0]}),this.setDefaultChain(`${o}`);else throw new Error(`Failed to switch to chain 'eip155:${o}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}async getCapabilities(e){var t,i,s;const o=(i=(t=e.request)==null?void 0:t.params)==null?void 0:i[0];if(!o)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const h=this.client.session.get(e.topic),g=((s=h==null?void 0:h.sessionProperties)==null?void 0:s.capabilities)||{};if(g!=null&&g[o])return g==null?void 0:g[o];const y=await this.client.request(e);try{await this.client.session.update(e.topic,{sessionProperties:Qp(Jp({},h.sessionProperties||{}),{capabilities:Qp(Jp({},g||{}),{[o]:y})})})}catch(_){console.warn("Failed to update session with capabilities",_)}return y}}class mx{constructor(e){this.name="solana",this.namespace=e.namespace,this.events=Dt("events"),this.client=Dt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(an.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var i;const s=Us(t);e[s]=this.createHttpProvider(s,(i=this.namespace.rpcMap)==null?void 0:i[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){const i=t||nn(e,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);return new sn(new En(i,Dt("disableProviderPing")))}}class yx{constructor(e){this.name="cosmos",this.namespace=e.namespace,this.events=Dt("events"),this.client=Dt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(an.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var i;const s=Us(t);e[s]=this.createHttpProvider(s,(i=this.namespace.rpcMap)==null?void 0:i[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){const i=t||nn(e,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);return new sn(new En(i,Dt("disableProviderPing")))}}class wx{constructor(e){this.name="algorand",this.namespace=e.namespace,this.events=Dt("events"),this.client=Dt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(!this.httpProviders[e]){const i=t||nn(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,i)}this.chainId=e,this.events.emit(an.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var i;e[t]=this.createHttpProvider(t,(i=this.namespace.rpcMap)==null?void 0:i[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){const i=t||nn(e,this.namespace,this.client.core.projectId);return typeof i>"u"?void 0:new sn(new En(i,Dt("disableProviderPing")))}}class _x{constructor(e){this.name="cip34",this.namespace=e.namespace,this.events=Dt("events"),this.client=Dt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(an.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{const i=this.getCardanoRPCUrl(t),s=Us(t);e[s]=this.createHttpProvider(s,i)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}getCardanoRPCUrl(e){const t=this.namespace.rpcMap;if(t)return t[e]}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){const i=t||this.getCardanoRPCUrl(e);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);return new sn(new En(i,Dt("disableProviderPing")))}}class Ax{constructor(e){this.name="elrond",this.namespace=e.namespace,this.events=Dt("events"),this.client=Dt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(an.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var i;const s=Us(t);e[s]=this.createHttpProvider(s,(i=this.namespace.rpcMap)==null?void 0:i[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){const i=t||nn(e,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);return new sn(new En(i,Dt("disableProviderPing")))}}class Mx{constructor(e){this.name="multiversx",this.namespace=e.namespace,this.events=Dt("events"),this.client=Dt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(an.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var i;const s=Us(t);e[s]=this.createHttpProvider(s,(i=this.namespace.rpcMap)==null?void 0:i[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){const i=t||nn(e,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);return new sn(new En(i,Dt("disableProviderPing")))}}class xx{constructor(e){this.name="near",this.namespace=e.namespace,this.events=Dt("events"),this.client=Dt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){const i=t||nn(`${this.name}:${e}`,this.namespace);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,i)}this.events.emit(an.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var i;e[t]=this.createHttpProvider(t,(i=this.namespace.rpcMap)==null?void 0:i[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){const i=t||nn(e,this.namespace);return typeof i>"u"?void 0:new sn(new En(i,Dt("disableProviderPing")))}}class Ex{constructor(e){this.name=ca,this.namespace=e.namespace,this.events=Dt("events"),this.client=Dt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(an.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){var e,t;const i={};return(t=(e=this.namespace)==null?void 0:e.accounts)==null||t.forEach(s=>{const o=ho(s);i[`${o.namespace}:${o.reference}`]=this.createHttpProvider(s)}),i}getHttpProvider(e){const t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){const i=t||nn(e,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);return new sn(new En(i,Dt("disableProviderPing")))}}var Ix=Object.defineProperty,Sx=Object.defineProperties,Px=Object.getOwnPropertyDescriptors,Yp=Object.getOwnPropertySymbols,Rx=Object.prototype.hasOwnProperty,Cx=Object.prototype.propertyIsEnumerable,Wp=(r,e,t)=>e in r?Ix(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,$c=(r,e)=>{for(var t in e||(e={}))Rx.call(e,t)&&Wp(r,t,e[t]);if(Yp)for(var t of Yp(e))Cx.call(e,t)&&Wp(r,t,e[t]);return r},gu=(r,e)=>Sx(r,Px(e));class rd{constructor(e){this.events=new ku,this.rpcProviders={},this.shouldAbortPairingAttempt=!1,this.maxPairingAttempts=10,this.disableProviderPing=!1,this.providerOpts=e,this.logger=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:qu(lf({level:(e==null?void 0:e.logger)||$p})),this.disableProviderPing=(e==null?void 0:e.disableProviderPing)||!1}static async init(e){const t=new rd(e);return await t.initialize(),t}async request(e,t,i){const[s,o]=this.validateChain(t);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(s).request({request:$c({},e),chainId:`${s}:${o}`,topic:this.session.topic,expiry:i})}sendAsync(e,t,i,s){const o=new Date().getTime();this.request(e,i,s).then(h=>t(null,pf(o,h))).catch(h=>t(h,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:Bt("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}async authenticate(e,t){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(e),await this.cleanupPendingPairings();const{uri:i,response:s}=await this.client.authenticate(e,t);i&&(this.uri=i,this.events.emit("display_uri",i));const o=await s();if(this.session=o.session,this.session){const h=Kp(this.session.namespaces);this.namespaces=du(this.namespaces,h),this.persist("namespaces",this.namespaces),this.onConnect()}return o}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}removeListener(e,t){this.events.removeListener(e,t)}off(e,t){this.events.off(e,t)}get isWalletConnect(){return!0}async pair(e){this.shouldAbortPairingAttempt=!1;let t=0;do{if(this.shouldAbortPairingAttempt)throw new Error("Pairing aborted");if(t>=this.maxPairingAttempts)throw new Error("Max auto pairing attempts reached");const{uri:i,approval:s}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties});i&&(this.uri=i,this.events.emit("display_uri",i)),await s().then(o=>{this.session=o;const h=Kp(o.namespaces);this.namespaces=du(this.namespaces,h),this.persist("namespaces",this.namespaces)}).catch(o=>{if(o.message!==Ug)throw o;t++})}while(!this.session);return this.onConnect(),this.session}setDefaultChain(e,t){try{if(!this.session)return;const[i,s]=this.validateChain(e),o=this.getProvider(i);o.name===ca?o.setDefaultChain(`${i}:${s}`,t):o.setDefaultChain(s,t)}catch(i){if(!/Please call connect/.test(i.message))throw i}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const t=this.client.pairing.getAll();if(Mn(t)){for(const i of t)e.deletePairings?this.client.core.expirer.set(i.topic,0):await this.client.core.relayer.subscriber.unsubscribe(i.topic);this.logger.info(`Inactive pairings cleared: ${t.length}`)}}abortPairingAttempt(){this.shouldAbortPairingAttempt=!0}async checkStorage(){if(this.namespaces=await this.getFromStore("namespaces"),this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.client.session.length){const e=this.client.session.keys.length-1;this.session=this.client.session.get(this.client.session.keys[e]),this.createProviders()}}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){this.client=this.providerOpts.client||await XM.init({core:this.providerOpts.core,logger:this.providerOpts.logger||$p,relayUrl:this.providerOpts.relayUrl||ZM,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(t=>fo(t)))];pu("client",this.client),pu("events",this.events),pu("disableProviderPing",this.disableProviderPing),e.forEach(t=>{if(!this.session)return;const i=fx(t,this.session),s=jg(i),o=du(this.namespaces,this.optionalNamespaces),h=gu($c({},o[t]),{accounts:i,chains:s});switch(t){case"eip155":this.rpcProviders[t]=new bx({namespace:h});break;case"algorand":this.rpcProviders[t]=new wx({namespace:h});break;case"solana":this.rpcProviders[t]=new mx({namespace:h});break;case"cosmos":this.rpcProviders[t]=new yx({namespace:h});break;case"polkadot":this.rpcProviders[t]=new ux({namespace:h});break;case"cip34":this.rpcProviders[t]=new _x({namespace:h});break;case"elrond":this.rpcProviders[t]=new Ax({namespace:h});break;case"multiversx":this.rpcProviders[t]=new Mx({namespace:h});break;case"near":this.rpcProviders[t]=new xx({namespace:h});break;default:this.rpcProviders[ca]?this.rpcProviders[ca].updateNamespace(h):this.rpcProviders[ca]=new Ex({namespace:h})}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{const{params:t}=e,{event:i}=t;if(i.name==="accountsChanged"){const s=i.data;s&&Mn(s)&&this.events.emit("accountsChanged",s.map(hx))}else if(i.name==="chainChanged"){const s=t.chainId,o=t.event.data,h=fo(s),g=lu(s)!==lu(o)?`${h}:${lu(o)}`:s;this.onChainChanged(g)}else this.events.emit(i.name,i.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:t})=>{var i;const{namespaces:s}=t,o=(i=this.client)==null?void 0:i.session.get(e);this.session=gu($c({},o),{namespaces:s}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:t})}),this.client.on("session_delete",async e=>{await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",gu($c({},Bt("USER_DISCONNECTED")),{data:e.topic}))}),this.on(an.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[ca]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var t;this.getProvider(e).updateNamespace((t=this.session)==null?void 0:t.namespaces[e])})}setNamespaces(e){const{namespaces:t,optionalNamespaces:i,sessionProperties:s}=e;t&&Object.keys(t).length&&(this.namespaces=t),i&&Object.keys(i).length&&(this.optionalNamespaces=i),this.sessionProperties=s,this.persist("namespaces",t),this.persist("optionalNamespaces",i)}validateChain(e){const[t,i]=(e==null?void 0:e.split(":"))||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[t,i];if(t&&!Object.keys(this.namespaces||{}).map(h=>fo(h)).includes(t))throw new Error(`Namespace '${t}' is not configured. Please call connect() first with namespace config.`);if(t&&i)return[t,i];const s=fo(Object.keys(this.namespaces)[0]),o=this.rpcProviders[s].getDefaultChain();return[s,o]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}onChainChanged(e,t=!1){if(!this.namespaces)return;const[i,s]=this.validateChain(e);s&&(t||this.getProvider(i).setDefaultChain(s),this.namespaces[i]?this.namespaces[i].defaultChain=s:this.namespaces[`${i}:${s}`]?this.namespaces[`${i}:${s}`].defaultChain=s:this.namespaces[`${i}:${s}`]={defaultChain:s},this.persist("namespaces",this.namespaces),this.events.emit("chainChanged",s))}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.session=void 0,this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,this.persist("namespaces",void 0),this.persist("optionalNamespaces",void 0),this.persist("sessionProperties",void 0),await this.cleanupPendingPairings({deletePairings:!0})}persist(e,t){this.client.core.storage.setItem(`${Up}/${e}`,t)}async getFromStore(e){return await this.client.core.storage.getItem(`${Up}/${e}`)}}const Nx=rd,Tx="wc",Ox="ethereum_provider",qx=`${Tx}@2:${Ox}:`,Dx="https://rpc.walletconnect.com/v1/",Cu=["eth_sendTransaction","personal_sign"],kx=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_sendCalls","wallet_getCapabilities","wallet_getCallsStatus","wallet_showCallsStatus"],Nu=["chainChanged","accountsChanged"],Bx=["chainChanged","accountsChanged","message","disconnect","connect"];var Lx=Object.defineProperty,zx=Object.defineProperties,$x=Object.getOwnPropertyDescriptors,Xp=Object.getOwnPropertySymbols,Ux=Object.prototype.hasOwnProperty,Fx=Object.prototype.propertyIsEnumerable,Zp=(r,e,t)=>e in r?Lx(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,fa=(r,e)=>{for(var t in e||(e={}))Ux.call(e,t)&&Zp(r,t,e[t]);if(Xp)for(var t of Xp(e))Fx.call(e,t)&&Zp(r,t,e[t]);return r},vu=(r,e)=>zx(r,$x(e));function hf(r){return Number(r[0].split(":")[1])}function Uc(r){return`0x${r.toString(16)}`}function jx(r){const{chains:e,optionalChains:t,methods:i,optionalMethods:s,events:o,optionalEvents:h,rpcMap:g}=r;if(!Mn(e))throw new Error("Invalid chains");const y={chains:e,methods:i||Cu,events:o||Nu,rpcMap:fa({},e.length?{[hf(e)]:g[hf(e)]}:{})},_=o==null?void 0:o.filter(O=>!Nu.includes(O)),I=i==null?void 0:i.filter(O=>!Cu.includes(O));if(!t&&!h&&!s&&!(_!=null&&_.length)&&!(I!=null&&I.length))return{required:e.length?y:void 0};const P=(_==null?void 0:_.length)&&(I==null?void 0:I.length)||!t,q={chains:[...new Set(P?y.chains.concat(t||[]):t)],methods:[...new Set(y.methods.concat(s!=null&&s.length?s:kx))],events:[...new Set(y.events.concat(h!=null&&h.length?h:Bx))],rpcMap:g};return{required:e.length?y:void 0,optional:t.length?q:void 0}}class id{constructor(){this.events=new qi.EventEmitter,this.namespace="eip155",this.accounts=[],this.chainId=1,this.STORAGE_KEY=qx,this.on=(e,t)=>(this.events.on(e,t),this),this.once=(e,t)=>(this.events.once(e,t),this),this.removeListener=(e,t)=>(this.events.removeListener(e,t),this),this.off=(e,t)=>(this.events.off(e,t),this),this.parseAccount=e=>this.isCompatibleChainId(e)?this.parseAccountId(e).address:e,this.signer={},this.rpc={}}static async init(e){const t=new id;return await t.initialize(e),t}async request(e,t){return await this.signer.request(e,this.formatChainId(this.chainId),t)}sendAsync(e,t,i){this.signer.sendAsync(e,t,this.formatChainId(this.chainId),i)}get connected(){return this.signer.client?this.signer.client.core.relayer.connected:!1}get connecting(){return this.signer.client?this.signer.client.core.relayer.connecting:!1}async enable(){return this.session||await this.connect(),await this.request({method:"eth_requestAccounts"})}async connect(e){if(!this.signer.client)throw new Error("Provider not initialized. Call init() first");this.loadConnectOpts(e);const{required:t,optional:i}=jx(this.rpc);try{const s=await new Promise(async(h,g)=>{var y;this.rpc.showQrModal&&((y=this.modal)==null||y.subscribeModal(_=>{!_.open&&!this.signer.session&&(this.signer.abortPairingAttempt(),g(new Error("Connection request reset. Please try again.")))})),await this.signer.connect(vu(fa({namespaces:fa({},t&&{[this.namespace]:t})},i&&{optionalNamespaces:{[this.namespace]:i}}),{pairingTopic:e==null?void 0:e.pairingTopic})).then(_=>{h(_)}).catch(_=>{g(new Error(_.message))})});if(!s)return;const o=x0(s.namespaces,[this.namespace]);this.setChainIds(this.rpc.chains.length?this.rpc.chains:o),this.setAccounts(o),this.events.emit("connect",{chainId:Uc(this.chainId)})}catch(s){throw this.signer.logger.error(s),s}finally{this.modal&&this.modal.closeModal()}}async authenticate(e,t){if(!this.signer.client)throw new Error("Provider not initialized. Call init() first");this.loadConnectOpts({chains:e==null?void 0:e.chains});try{const i=await new Promise(async(o,h)=>{var g;this.rpc.showQrModal&&((g=this.modal)==null||g.subscribeModal(y=>{!y.open&&!this.signer.session&&(this.signer.abortPairingAttempt(),h(new Error("Connection request reset. Please try again.")))})),await this.signer.authenticate(vu(fa({},e),{chains:this.rpc.chains}),t).then(y=>{o(y)}).catch(y=>{h(new Error(y.message))})}),s=i.session;if(s){const o=x0(s.namespaces,[this.namespace]);this.setChainIds(this.rpc.chains.length?this.rpc.chains:o),this.setAccounts(o),this.events.emit("connect",{chainId:Uc(this.chainId)})}return i}catch(i){throw this.signer.logger.error(i),i}finally{this.modal&&this.modal.closeModal()}}async disconnect(){this.session&&await this.signer.disconnect(),this.reset()}get isWalletConnect(){return!0}get session(){return this.signer.session}registerEventListeners(){this.signer.on("session_event",e=>{const{params:t}=e,{event:i}=t;i.name==="accountsChanged"?(this.accounts=this.parseAccounts(i.data),this.events.emit("accountsChanged",this.accounts)):i.name==="chainChanged"?this.setChainId(this.formatChainId(i.data)):this.events.emit(i.name,i.data),this.events.emit("session_event",e)}),this.signer.on("chainChanged",e=>{const t=parseInt(e);this.chainId=t,this.events.emit("chainChanged",Uc(this.chainId)),this.persist()}),this.signer.on("session_update",e=>{this.events.emit("session_update",e)}),this.signer.on("session_delete",e=>{this.reset(),this.events.emit("session_delete",e),this.events.emit("disconnect",vu(fa({},Bt("USER_DISCONNECTED")),{data:e.topic,name:"USER_DISCONNECTED"}))}),this.signer.on("display_uri",e=>{var t,i;this.rpc.showQrModal&&((t=this.modal)==null||t.closeModal(),(i=this.modal)==null||i.openModal({uri:e})),this.events.emit("display_uri",e)})}switchEthereumChain(e){this.request({method:"wallet_switchEthereumChain",params:[{chainId:e.toString(16)}]})}isCompatibleChainId(e){return typeof e=="string"?e.startsWith(`${this.namespace}:`):!1}formatChainId(e){return`${this.namespace}:${e}`}parseChainId(e){return Number(e.split(":")[1])}setChainIds(e){const t=e.filter(i=>this.isCompatibleChainId(i)).map(i=>this.parseChainId(i));t.length&&(this.chainId=t[0],this.events.emit("chainChanged",Uc(this.chainId)),this.persist())}setChainId(e){if(this.isCompatibleChainId(e)){const t=this.parseChainId(e);this.chainId=t,this.switchEthereumChain(t)}}parseAccountId(e){const[t,i,s]=e.split(":");return{chainId:`${t}:${i}`,address:s}}setAccounts(e){this.accounts=e.filter(t=>this.parseChainId(this.parseAccountId(t).chainId)===this.chainId).map(t=>this.parseAccountId(t).address),this.events.emit("accountsChanged",this.accounts)}getRpcConfig(e){var t,i;const s=(t=e==null?void 0:e.chains)!=null?t:[],o=(i=e==null?void 0:e.optionalChains)!=null?i:[],h=s.concat(o);if(!h.length)throw new Error("No chains specified in either `chains` or `optionalChains`");const g=s.length?(e==null?void 0:e.methods)||Cu:[],y=s.length?(e==null?void 0:e.events)||Nu:[],_=(e==null?void 0:e.optionalMethods)||[],I=(e==null?void 0:e.optionalEvents)||[],P=(e==null?void 0:e.rpcMap)||this.buildRpcMap(h,e.projectId),q=(e==null?void 0:e.qrModalOptions)||void 0;return{chains:s==null?void 0:s.map(O=>this.formatChainId(O)),optionalChains:o.map(O=>this.formatChainId(O)),methods:g,events:y,optionalMethods:_,optionalEvents:I,rpcMap:P,showQrModal:!!(e!=null&&e.showQrModal),qrModalOptions:q,projectId:e.projectId,metadata:e.metadata}}buildRpcMap(e,t){const i={};return e.forEach(s=>{i[s]=this.getRpcUrl(s,t)}),i}async initialize(e){if(this.rpc=this.getRpcConfig(e),this.chainId=this.rpc.chains.length?hf(this.rpc.chains):hf(this.rpc.optionalChains),this.signer=await Nx.init({projectId:this.rpc.projectId,metadata:this.rpc.metadata,disableProviderPing:e.disableProviderPing,relayUrl:e.relayUrl,storageOptions:e.storageOptions,customStoragePrefix:e.customStoragePrefix,telemetryEnabled:e.telemetryEnabled}),this.registerEventListeners(),await this.loadPersistedSession(),this.rpc.showQrModal){let t;try{const{WalletConnectModal:i}=await Dy(()=>import("./index-B3hYuz7F.js").then(s=>s.i),__vite__mapDeps([0,1,2]));t=i}catch{throw new Error("To use QR modal, please install @walletconnect/modal package")}if(t)try{this.modal=new t(fa({projectId:this.rpc.projectId},this.rpc.qrModalOptions))}catch(i){throw this.signer.logger.error(i),new Error("Could not generate WalletConnectModal Instance")}}}loadConnectOpts(e){if(!e)return;const{chains:t,optionalChains:i,rpcMap:s}=e;t&&Mn(t)&&(this.rpc.chains=t.map(o=>this.formatChainId(o)),t.forEach(o=>{this.rpc.rpcMap[o]=(s==null?void 0:s[o])||this.getRpcUrl(o)})),i&&Mn(i)&&(this.rpc.optionalChains=[],this.rpc.optionalChains=i==null?void 0:i.map(o=>this.formatChainId(o)),i.forEach(o=>{this.rpc.rpcMap[o]=(s==null?void 0:s[o])||this.getRpcUrl(o)}))}getRpcUrl(e,t){var i;return((i=this.rpc.rpcMap)==null?void 0:i[e])||`${Dx}?chainId=eip155:${e}&projectId=${t||this.rpc.projectId}`}async loadPersistedSession(){if(this.session)try{const e=await this.signer.client.core.storage.getItem(`${this.STORAGE_KEY}/chainId`),t=this.session.namespaces[`${this.namespace}:${e}`]?this.session.namespaces[`${this.namespace}:${e}`]:this.session.namespaces[this.namespace];this.setChainIds(e?[this.formatChainId(e)]:t==null?void 0:t.accounts),this.setAccounts(t==null?void 0:t.accounts)}catch(e){this.signer.logger.error("Failed to load persisted session, clearing state..."),this.signer.logger.error(e),await this.disconnect().catch(t=>this.signer.logger.warn(t))}}reset(){this.chainId=1,this.accounts=[]}persist(){this.session&&this.signer.client.core.storage.setItem(`${this.STORAGE_KEY}/chainId`,this.chainId)}parseAccounts(e){return typeof e=="string"||e instanceof String?[this.parseAccount(e)]:e.map(t=>this.parseAccount(t))}}const oE=id;export{oE as EthereumProvider,Bx as OPTIONAL_EVENTS,kx as OPTIONAL_METHODS,Nu as REQUIRED_EVENTS,Cu as REQUIRED_METHODS,id as default};
//# sourceMappingURL=index.es-BnBiFGSu.js.map
